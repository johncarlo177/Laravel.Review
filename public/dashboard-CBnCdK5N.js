(function() {(function(){const w=document.createElement("link").relList;if(w&&w.supports&&w.supports("modulepreload"))return;for(const Q of document.querySelectorAll('link[rel="modulepreload"]'))D(Q);new MutationObserver(Q=>{for(const O of Q)if(O.type==="childList")for(const U of O.addedNodes)U.tagName==="LINK"&&U.rel==="modulepreload"&&D(U)}).observe(document,{childList:!0,subtree:!0});function q(Q){const O={};return Q.integrity&&(O.integrity=Q.integrity),Q.referrerPolicy&&(O.referrerPolicy=Q.referrerPolicy),Q.crossOrigin==="use-credentials"?O.credentials="include":Q.crossOrigin==="anonymous"?O.credentials="omit":O.credentials="same-origin",O}function D(Q){if(Q.ep)return;Q.ep=!0;const O=q(Q);fetch(Q.href,O)}})();class Base64Encoder{static encode(w){if(!w)return w;const q=new Uint8Array(w.length);for(let D=0;D<q.length;D++)q[D]=w.charCodeAt(D);return btoa(String.fromCharCode(...new Uint8Array(q.buffer)))}static decode(w){if(!w)return w;let q=new TextDecoder().decode(Uint8Array.from(window.atob(w),D=>D.codePointAt(0)));if(isEmpty(q))try{q=window.atob(w)}catch{}return q}}const decodeValue=F=>{window.QRCG_BUNDLE_TYPE=="build"&&(F=window.btoa(F));const w=window.CONFIG;if(!w)return null;let q=w[F];if(window.QRCG_BUNDLE_TYPE=="build")try{q=Base64Encoder.decode(q)}catch{console.log("error while decoding string: ",{key:F,value:q})}return q},Config={get(F,w=String){let q;try{q=decodeValue(F)}catch{window.CONFIG&&(q=window.CONFIG[F])}if(w===Boolean)return q==="true"||q==="1";try{return JSON.parse(q)}catch{return q}}};const t$5=globalThis,i$4=t$5.trustedTypes,s$4=i$4?i$4.createPolicy("lit-html",{createHTML:F=>F}):void 0,e$5="$lit$",h$1=`lit$${Math.random().toFixed(9).slice(2)}$`,o$7="?"+h$1,n$3=`<${o$7}>`,r$3=document,l$2=()=>r$3.createComment(""),c$3=F=>F===null||typeof F!="object"&&typeof F!="function",a$2=Array.isArray,u$4=F=>a$2(F)||typeof F?.[Symbol.iterator]=="function",d$1=`[ 	
\f\r]`,f$1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,v$1=/-->/g,_=/>/g,m$1=RegExp(`>|${d$1}(?:([^\\s"'>=/]+)(${d$1}*=${d$1}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),p$2=/'/g,g=/"/g,$=/^(?:script|style|textarea|title)$/i,y$1=F=>(w,...q)=>({_$litType$:F,strings:w,values:q}),x=y$1(1),b$1=y$1(2),T=Symbol.for("lit-noChange"),E=Symbol.for("lit-nothing"),A=new WeakMap,C=r$3.createTreeWalker(r$3,129);function P(F,w){if(!a$2(F)||!F.hasOwnProperty("raw"))throw Error("invalid template strings array");return s$4!==void 0?s$4.createHTML(w):w}const V=(F,w)=>{const q=F.length-1,D=[];let Q,O=w===2?"<svg>":w===3?"<math>":"",U=f$1;for(let G=0;G<q;G++){const W=F[G];let K,ee,Y=-1,J=0;for(;J<W.length&&(U.lastIndex=J,ee=U.exec(W),ee!==null);)J=U.lastIndex,U===f$1?ee[1]==="!--"?U=v$1:ee[1]!==void 0?U=_:ee[2]!==void 0?($.test(ee[2])&&(Q=RegExp("</"+ee[2],"g")),U=m$1):ee[3]!==void 0&&(U=m$1):U===m$1?ee[0]===">"?(U=Q??f$1,Y=-1):ee[1]===void 0?Y=-2:(Y=U.lastIndex-ee[2].length,K=ee[1],U=ee[3]===void 0?m$1:ee[3]==='"'?g:p$2):U===g||U===p$2?U=m$1:U===v$1||U===_?U=f$1:(U=m$1,Q=void 0);const X=U===m$1&&F[G+1].startsWith("/>")?" ":"";O+=U===f$1?W+n$3:Y>=0?(D.push(K),W.slice(0,Y)+e$5+W.slice(Y)+h$1+X):W+h$1+(Y===-2?G:X)}return[P(F,O+(F[q]||"<?>")+(w===2?"</svg>":w===3?"</math>":"")),D]};class N{constructor({strings:w,_$litType$:q},D){let Q;this.parts=[];let O=0,U=0;const G=w.length-1,W=this.parts,[K,ee]=V(w,q);if(this.el=N.createElement(K,D),C.currentNode=this.el.content,q===2||q===3){const Y=this.el.content.firstChild;Y.replaceWith(...Y.childNodes)}for(;(Q=C.nextNode())!==null&&W.length<G;){if(Q.nodeType===1){if(Q.hasAttributes())for(const Y of Q.getAttributeNames())if(Y.endsWith(e$5)){const J=ee[U++],X=Q.getAttribute(Y).split(h$1),re=/([.?@])?(.*)/.exec(J);W.push({type:1,index:O,name:re[2],strings:X,ctor:re[1]==="."?H:re[1]==="?"?I:re[1]==="@"?L:k}),Q.removeAttribute(Y)}else Y.startsWith(h$1)&&(W.push({type:6,index:O}),Q.removeAttribute(Y));if($.test(Q.tagName)){const Y=Q.textContent.split(h$1),J=Y.length-1;if(J>0){Q.textContent=i$4?i$4.emptyScript:"";for(let X=0;X<J;X++)Q.append(Y[X],l$2()),C.nextNode(),W.push({type:2,index:++O});Q.append(Y[J],l$2())}}}else if(Q.nodeType===8)if(Q.data===o$7)W.push({type:2,index:O});else{let Y=-1;for(;(Y=Q.data.indexOf(h$1,Y+1))!==-1;)W.push({type:7,index:O}),Y+=h$1.length-1}O++}}static createElement(w,q){const D=r$3.createElement("template");return D.innerHTML=w,D}}function S$1(F,w,q=F,D){if(w===T)return w;let Q=D!==void 0?q._$Co?.[D]:q._$Cl;const O=c$3(w)?void 0:w._$litDirective$;return Q?.constructor!==O&&(Q?._$AO?.(!1),O===void 0?Q=void 0:(Q=new O(F),Q._$AT(F,q,D)),D!==void 0?(q._$Co??=[])[D]=Q:q._$Cl=Q),Q!==void 0&&(w=S$1(F,Q._$AS(F,w.values),Q,D)),w}let M$1=class{constructor(w,q){this._$AV=[],this._$AN=void 0,this._$AD=w,this._$AM=q}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(w){const{el:{content:q},parts:D}=this._$AD,Q=(w?.creationScope??r$3).importNode(q,!0);C.currentNode=Q;let O=C.nextNode(),U=0,G=0,W=D[0];for(;W!==void 0;){if(U===W.index){let K;W.type===2?K=new R(O,O.nextSibling,this,w):W.type===1?K=new W.ctor(O,W.name,W.strings,this,w):W.type===6&&(K=new z(O,this,w)),this._$AV.push(K),W=D[++G]}U!==W?.index&&(O=C.nextNode(),U++)}return C.currentNode=r$3,Q}p(w){let q=0;for(const D of this._$AV)D!==void 0&&(D.strings!==void 0?(D._$AI(w,D,q),q+=D.strings.length-2):D._$AI(w[q])),q++}};class R{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(w,q,D,Q){this.type=2,this._$AH=E,this._$AN=void 0,this._$AA=w,this._$AB=q,this._$AM=D,this.options=Q,this._$Cv=Q?.isConnected??!0}get parentNode(){let w=this._$AA.parentNode;const q=this._$AM;return q!==void 0&&w?.nodeType===11&&(w=q.parentNode),w}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(w,q=this){w=S$1(this,w,q),c$3(w)?w===E||w==null||w===""?(this._$AH!==E&&this._$AR(),this._$AH=E):w!==this._$AH&&w!==T&&this._(w):w._$litType$!==void 0?this.$(w):w.nodeType!==void 0?this.T(w):u$4(w)?this.k(w):this._(w)}O(w){return this._$AA.parentNode.insertBefore(w,this._$AB)}T(w){this._$AH!==w&&(this._$AR(),this._$AH=this.O(w))}_(w){this._$AH!==E&&c$3(this._$AH)?this._$AA.nextSibling.data=w:this.T(r$3.createTextNode(w)),this._$AH=w}$(w){const{values:q,_$litType$:D}=w,Q=typeof D=="number"?this._$AC(w):(D.el===void 0&&(D.el=N.createElement(P(D.h,D.h[0]),this.options)),D);if(this._$AH?._$AD===Q)this._$AH.p(q);else{const O=new M$1(Q,this),U=O.u(this.options);O.p(q),this.T(U),this._$AH=O}}_$AC(w){let q=A.get(w.strings);return q===void 0&&A.set(w.strings,q=new N(w)),q}k(w){a$2(this._$AH)||(this._$AH=[],this._$AR());const q=this._$AH;let D,Q=0;for(const O of w)Q===q.length?q.push(D=new R(this.O(l$2()),this.O(l$2()),this,this.options)):D=q[Q],D._$AI(O),Q++;Q<q.length&&(this._$AR(D&&D._$AB.nextSibling,Q),q.length=Q)}_$AR(w=this._$AA.nextSibling,q){for(this._$AP?.(!1,!0,q);w!==this._$AB;){const D=w.nextSibling;w.remove(),w=D}}setConnected(w){this._$AM===void 0&&(this._$Cv=w,this._$AP?.(w))}}class k{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(w,q,D,Q,O){this.type=1,this._$AH=E,this._$AN=void 0,this.element=w,this.name=q,this._$AM=Q,this.options=O,D.length>2||D[0]!==""||D[1]!==""?(this._$AH=Array(D.length-1).fill(new String),this.strings=D):this._$AH=E}_$AI(w,q=this,D,Q){const O=this.strings;let U=!1;if(O===void 0)w=S$1(this,w,q,0),U=!c$3(w)||w!==this._$AH&&w!==T,U&&(this._$AH=w);else{const G=w;let W,K;for(w=O[0],W=0;W<O.length-1;W++)K=S$1(this,G[D+W],q,W),K===T&&(K=this._$AH[W]),U||=!c$3(K)||K!==this._$AH[W],K===E?w=E:w!==E&&(w+=(K??"")+O[W+1]),this._$AH[W]=K}U&&!Q&&this.j(w)}j(w){w===E?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,w??"")}}class H extends k{constructor(){super(...arguments),this.type=3}j(w){this.element[this.name]=w===E?void 0:w}}class I extends k{constructor(){super(...arguments),this.type=4}j(w){this.element.toggleAttribute(this.name,!!w&&w!==E)}}class L extends k{constructor(w,q,D,Q,O){super(w,q,D,Q,O),this.type=5}_$AI(w,q=this){if((w=S$1(this,w,q,0)??E)===T)return;const D=this._$AH,Q=w===E&&D!==E||w.capture!==D.capture||w.once!==D.once||w.passive!==D.passive,O=w!==E&&(D===E||Q);Q&&this.element.removeEventListener(this.name,this,D),O&&this.element.addEventListener(this.name,this,w),this._$AH=w}handleEvent(w){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,w):this._$AH.handleEvent(w)}}class z{constructor(w,q,D){this.element=w,this.type=6,this._$AN=void 0,this._$AM=q,this.options=D}get _$AU(){return this._$AM._$AU}_$AI(w){S$1(this,w)}}const Z={I:R},j=t$5.litHtmlPolyfillSupport;j?.(N,R),(t$5.litHtmlVersions??=[]).push("3.3.1");const B=(F,w,q)=>{const D=q?.renderBefore??w;let Q=D._$litPart$;if(Q===void 0){const O=q?.renderBefore??null;D._$litPart$=Q=new R(w.insertBefore(l$2(),O),O,void 0,q??{})}return Q._$AI(F),Q};const a$1=Symbol.for(""),o$6=F=>{if(F?.r===a$1)return F?._$litStatic$},s$3=F=>({_$litStatic$:F,r:a$1}),l$1=new Map,n$2=F=>(w,...q)=>{const D=q.length;let Q,O;const U=[],G=[];let W,K=0,ee=!1;for(;K<D;){for(W=w[K];K<D&&(O=q[K],(Q=o$6(O))!==void 0);)W+=Q+w[++K],ee=!0;K!==D&&G.push(O),U.push(W),K++}if(K===D&&U.push(w[D]),ee){const Y=U.join("$$lit$$");(w=l$1.get(Y))===void 0&&(U.raw=U,l$1.set(Y,w=U)),q=G}return F(w,...q)},u$3=n$2(x),isEmpty=F=>F instanceof File?!1:F===null||typeof F>"u"?!0:typeof F=="string"?F.trim().length===0:F instanceof HTMLElement?!1:typeof F=="object"?Object.keys(F).reduce((w,q)=>w&&isEmpty(F[q]),!0):typeof F=="number"?F===0:!1,isNotEmpty=F=>!isEmpty(F),isMobile=()=>window.innerWidth<900,debounce=(F,w=300)=>{let q;return(...D)=>{clearTimeout(q),q=setTimeout(()=>{F.apply(void 0,D)},w)}},queryParam=F=>new Proxy(new URLSearchParams(window.location.search),{get:(q,D)=>q.get(D)})[F],loadStoredJson=F=>{try{return JSON.parse(localStorage[F])}catch{return null}},nullOrUndefined=F=>typeof F>"u"||F===null,storeJson=(F,w)=>{localStorage[w]=JSON.stringify(F)};function capitalize(F){return F.replace(/\b\w/g,w=>w.toUpperCase())}function kebabCase(F,w=!0){return isEmpty(F)?"":(w&&(F=F.toLowerCase()),F.replace(/ /g,"-"))}function slugify(F){return isEmpty(F)?"":(F=F.replace(/[[\]{}#~/.|<>,&"'?`\-=+]/g," "),F=F.replace(/\s+/g," "),kebabCase(F))}function studlyCase(F){return titleCase(F).replace(/ /g,"")}function titleCase(F){return capitalize(F.replace(/-|_/g," ").replace(/[A-Z]/g,w=>" "+w).toLowerCase())}function random(F,w){return F=Math.ceil(F),w=Math.floor(w),Math.floor(Math.random()*(w-F+1))+F}function range(F,w){const q=w>F?F:0,D=w>F?w-F:F;return Array.from({length:D}).map((Q,O)=>O+q)}function isFunction(F){return typeof F=="function"}function equals(F,w){return JSON.stringify(F)===JSON.stringify(w)}function only(F,w){if(F)return w.reduce((q,D)=>(q[D]=F[D],q),{})}function rgbToHex({r:F,g:w,b:q}){return"#"+(16777216+(F<<16|w<<8|q<<0)).toString(16).slice(1)}const styled=(F,...w)=>F.map((q,D)=>q+(w[D]?w[D]:"")).join(""),get$1=(...params)=>{try{return eval(`params[0].${params[1]}`)}catch{return}};function remToPx(F){return F*parseFloat(getComputedStyle(document.documentElement).fontSize)}function hash(F,w=0){let q=3735928559^w,D=1103547991^w;for(let Q=0,O;Q<F.length;Q++)O=F.charCodeAt(Q),q=Math.imul(q^O,2654435761),D=Math.imul(D^O,1597334677);return q=Math.imul(q^q>>>16,2246822507)^Math.imul(D^D>>>13,3266489909),D=Math.imul(D^D>>>16,2246822507)^Math.imul(q^q>>>13,3266489909),4294967296*(2097151&D)+(q>>>0)}function iPhoneSafari(){return!!navigator.userAgent.match("iPhone OS")}function parentMatches(F,w){do{if(F.nodeType==Node.DOCUMENT_FRAGMENT_NODE&&(F=F.getRootNode().host),F.matches&&F.matches(w))return F;F=F.parentNode}while(F);return null}function parseBooleanValue(F){return typeof F=="boolean"?F:typeof F=="number"?F!=0:typeof F=="string"?isNaN(+F)?F==="true":+F!=0:!1}function isArray$1(F){return F instanceof Array}function isNotArray(F){return!isArray$1(F)}function parseNumberValue(F,w=0){return typeof F=="number"?F:isNaN(F)?w:+F}function generateUniqueID(F=10){return[...Array(F).keys()].map(()=>Math.random().toString(36).substring(2,3)).join("")}function ucfirst(F){return F[0].toUpperCase()+F.substring(1)}function ucwords(F){return F.split(" ").map(w=>ucfirst(w)).join(" ")}function getScrollbarWidth(){const F=document.createElement("div");F.style.visibility="hidden",F.style.overflow="scroll",F.style.msOverflowStyle="scrollbar",document.body.appendChild(F);const w=document.createElement("div");F.appendChild(w);const q=F.offsetWidth-w.offsetWidth;return F.parentNode.removeChild(F),q}function url(F){const w=Config.get("app.url");return w[w.length-1]==="/"&&(F=F.replace(/^\//,"")),F[0]==="/"&&(F=F.substring(1)),`${w}/${F}`}function removeEmptyFields(F){return Object.keys(F).reduce((w,q)=>(isEmpty(F[q])||(w[q]=F[q]),w),{})}function escapeRegExp(F){return F.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function downloadBlob(F,w,q){var D=new Blob([F],{type:q}),Q=URL.createObjectURL(D),O=document.createElement("a");O.href=Q,O.setAttribute("download",w),O.click(),setTimeout(()=>{URL.revokeObjectURL(Q)},100)}function urlWithQueryString(F,w){return F.match(/\?/)?F+"&"+w:F+"?"+w}function openLinkInNewTab(F){const w=document.createElement("a");w.href=F,w.target="_blank",w.style="display: none",document.body.appendChild(w),w.click(),setTimeout(()=>{w.remove()},100)}function shuffle(F){const w=[],q=F.map((D,Q)=>Q);for(;q.length;)w.push(F[q.splice(Math.floor(Math.random()*q.length),1)]);return w}function mix(F,w){return Object.keys(w).forEach(q=>{F[q]=w[q]}),F}function sleep(F){return new Promise(w=>setTimeout(w,F))}function defineCustomElement(F,w){if(isEmpty(F)){console.warn("No tag given to register web component",w);return}customElements.get(F)===void 0&&window.customElements.define(F,w)}function number_format(F,w,q,D){if(F==null||!isFinite(F))throw new TypeError("number is not valid");if(!w){const O=F.toString().split(".")[1];O&&parseInt(O)&&(w=O.length)}q||(q="."),D||(D=","),F=parseFloat(F).toFixed(w),F=F.replace(".",q);var Q=F.split(q);return Q[0]=Q[0].replace(/\B(?=(\d{3})+(?!\d))/g,D),F=Q.join(q),F}window.defineCustomElement=defineCustomElement;const mapEventDelegate=(F,w)=>{const q=F.composedPath()[0];Object.keys(w).forEach(D=>{const Q=parentMatches(q,D);if(Q){const O=w[D];O(F,Q)}})},arrayToCsv=F=>F.map(w=>w.map(String).map(q=>q.replaceAll('"','""')).map(q=>`"${q}"`).join(",")).join(`\r
`);function isEmail(F){return String(F).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}function uuid(){var F=new Date().getTime(),w=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(q){var D=Math.random()*16;return F>0?(D=(F+D)%16|0,F=Math.floor(F/16)):(D=(w+D)%16|0,w=Math.floor(w/16)),(q==="x"?D:D&3|8).toString(16)})}const t$4=globalThis,e$4=t$4.ShadowRoot&&(t$4.ShadyCSS===void 0||t$4.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$2=Symbol(),o$5=new WeakMap;let n$1=class{constructor(w,q,D){if(this._$cssResult$=!0,D!==s$2)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=w,this.t=q}get styleSheet(){let w=this.o;const q=this.t;if(e$4&&w===void 0){const D=q!==void 0&&q.length===1;D&&(w=o$5.get(q)),w===void 0&&((this.o=w=new CSSStyleSheet).replaceSync(this.cssText),D&&o$5.set(q,w))}return w}toString(){return this.cssText}};const r$2=F=>new n$1(typeof F=="string"?F:F+"",void 0,s$2),i$3=(F,...w)=>{const q=F.length===1?F[0]:w.reduce(((D,Q,O)=>D+(U=>{if(U._$cssResult$===!0)return U.cssText;if(typeof U=="number")return U;throw Error("Value passed to 'css' function must be a 'css' function result: "+U+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(Q)+F[O+1]),F[0]);return new n$1(q,F,s$2)},S=(F,w)=>{if(e$4)F.adoptedStyleSheets=w.map((q=>q instanceof CSSStyleSheet?q:q.styleSheet));else for(const q of w){const D=document.createElement("style"),Q=t$4.litNonce;Q!==void 0&&D.setAttribute("nonce",Q),D.textContent=q.cssText,F.appendChild(D)}},c$2=e$4?F=>F:F=>F instanceof CSSStyleSheet?(w=>{let q="";for(const D of w.cssRules)q+=D.cssText;return r$2(q)})(F):F;const{is:i$2,defineProperty:e$3,getOwnPropertyDescriptor:h,getOwnPropertyNames:r$1,getOwnPropertySymbols:o$4,getPrototypeOf:n}=Object,a=globalThis,c$1=a.trustedTypes,l=c$1?c$1.emptyScript:"",p$1=a.reactiveElementPolyfillSupport,d=(F,w)=>F,u$2={toAttribute(F,w){switch(w){case Boolean:F=F?l:null;break;case Object:case Array:F=F==null?F:JSON.stringify(F)}return F},fromAttribute(F,w){let q=F;switch(w){case Boolean:q=F!==null;break;case Number:q=F===null?null:Number(F);break;case Object:case Array:try{q=JSON.parse(F)}catch{q=null}}return q}},f=(F,w)=>!i$2(F,w),b={attribute:!0,type:String,converter:u$2,reflect:!1,useDefault:!1,hasChanged:f};Symbol.metadata??=Symbol("metadata"),a.litPropertyMetadata??=new WeakMap;class y extends HTMLElement{static addInitializer(w){this._$Ei(),(this.l??=[]).push(w)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(w,q=b){if(q.state&&(q.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(w)&&((q=Object.create(q)).wrapped=!0),this.elementProperties.set(w,q),!q.noAccessor){const D=Symbol(),Q=this.getPropertyDescriptor(w,D,q);Q!==void 0&&e$3(this.prototype,w,Q)}}static getPropertyDescriptor(w,q,D){const{get:Q,set:O}=h(this.prototype,w)??{get(){return this[q]},set(U){this[q]=U}};return{get:Q,set(U){const G=Q?.call(this);O?.call(this,U),this.requestUpdate(w,G,D)},configurable:!0,enumerable:!0}}static getPropertyOptions(w){return this.elementProperties.get(w)??b}static _$Ei(){if(this.hasOwnProperty(d("elementProperties")))return;const w=n(this);w.finalize(),w.l!==void 0&&(this.l=[...w.l]),this.elementProperties=new Map(w.elementProperties)}static finalize(){if(this.hasOwnProperty(d("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d("properties"))){const q=this.properties,D=[...r$1(q),...o$4(q)];for(const Q of D)this.createProperty(Q,q[Q])}const w=this[Symbol.metadata];if(w!==null){const q=litPropertyMetadata.get(w);if(q!==void 0)for(const[D,Q]of q)this.elementProperties.set(D,Q)}this._$Eh=new Map;for(const[q,D]of this.elementProperties){const Q=this._$Eu(q,D);Q!==void 0&&this._$Eh.set(Q,q)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(w){const q=[];if(Array.isArray(w)){const D=new Set(w.flat(1/0).reverse());for(const Q of D)q.unshift(c$2(Q))}else w!==void 0&&q.push(c$2(w));return q}static _$Eu(w,q){const D=q.attribute;return D===!1?void 0:typeof D=="string"?D:typeof w=="string"?w.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((w=>this.enableUpdating=w)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((w=>w(this)))}addController(w){(this._$EO??=new Set).add(w),this.renderRoot!==void 0&&this.isConnected&&w.hostConnected?.()}removeController(w){this._$EO?.delete(w)}_$E_(){const w=new Map,q=this.constructor.elementProperties;for(const D of q.keys())this.hasOwnProperty(D)&&(w.set(D,this[D]),delete this[D]);w.size>0&&(this._$Ep=w)}createRenderRoot(){const w=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return S(w,this.constructor.elementStyles),w}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((w=>w.hostConnected?.()))}enableUpdating(w){}disconnectedCallback(){this._$EO?.forEach((w=>w.hostDisconnected?.()))}attributeChangedCallback(w,q,D){this._$AK(w,D)}_$ET(w,q){const D=this.constructor.elementProperties.get(w),Q=this.constructor._$Eu(w,D);if(Q!==void 0&&D.reflect===!0){const O=(D.converter?.toAttribute!==void 0?D.converter:u$2).toAttribute(q,D.type);this._$Em=w,O==null?this.removeAttribute(Q):this.setAttribute(Q,O),this._$Em=null}}_$AK(w,q){const D=this.constructor,Q=D._$Eh.get(w);if(Q!==void 0&&this._$Em!==Q){const O=D.getPropertyOptions(Q),U=typeof O.converter=="function"?{fromAttribute:O.converter}:O.converter?.fromAttribute!==void 0?O.converter:u$2;this._$Em=Q;const G=U.fromAttribute(q,O.type);this[Q]=G??this._$Ej?.get(Q)??G,this._$Em=null}}requestUpdate(w,q,D){if(w!==void 0){const Q=this.constructor,O=this[w];if(D??=Q.getPropertyOptions(w),!((D.hasChanged??f)(O,q)||D.useDefault&&D.reflect&&O===this._$Ej?.get(w)&&!this.hasAttribute(Q._$Eu(w,D))))return;this.C(w,q,D)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(w,q,{useDefault:D,reflect:Q,wrapped:O},U){D&&!(this._$Ej??=new Map).has(w)&&(this._$Ej.set(w,U??q??this[w]),O!==!0||U!==void 0)||(this._$AL.has(w)||(this.hasUpdated||D||(q=void 0),this._$AL.set(w,q)),Q===!0&&this._$Em!==w&&(this._$Eq??=new Set).add(w))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(q){Promise.reject(q)}const w=this.scheduleUpdate();return w!=null&&await w,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[Q,O]of this._$Ep)this[Q]=O;this._$Ep=void 0}const D=this.constructor.elementProperties;if(D.size>0)for(const[Q,O]of D){const{wrapped:U}=O,G=this[Q];U!==!0||this._$AL.has(Q)||G===void 0||this.C(Q,void 0,O,G)}}let w=!1;const q=this._$AL;try{w=this.shouldUpdate(q),w?(this.willUpdate(q),this._$EO?.forEach((D=>D.hostUpdate?.())),this.update(q)):this._$EM()}catch(D){throw w=!1,this._$EM(),D}w&&this._$AE(q)}willUpdate(w){}_$AE(w){this._$EO?.forEach((q=>q.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(w)),this.updated(w)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(w){return!0}update(w){this._$Eq&&=this._$Eq.forEach((q=>this._$ET(q,this[q]))),this._$EM()}updated(w){}firstUpdated(w){}}y.elementStyles=[],y.shadowRootOptions={mode:"open"},y[d("elementProperties")]=new Map,y[d("finalized")]=new Map,p$1?.({ReactiveElement:y}),(a.reactiveElementVersions??=[]).push("2.1.1");const s$1=globalThis;let i$1=class extends y{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const w=super.createRenderRoot();return this.renderOptions.renderBefore??=w.firstChild,w}update(w){const q=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(w),this._$Do=B(q,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return T}};i$1._$litElement$=!0,i$1.finalized=!0,s$1.litElementHydrateSupport?.({LitElement:i$1});const o$3=s$1.litElementPolyfillSupport;o$3?.({LitElement:i$1});(s$1.litElementVersions??=[]).push("4.2.1");class QRCGRoute extends i$1{static get styles(){return i$3`
            :host {
                display: block;
            }
        `}static get properties(){return{route:{type:String},except:{type:String},withSearch:{type:Boolean,attribute:"with-search"},_shouldRender:{state:!0},routeMatch:{state:!0},exceptMatch:{state:!0},routeParams:{}}}constructor(){super(),this.routeUpdate=this.routeUpdate.bind(this),this._shouldRender=!1,this.routeParams={},this.onAfterRender=this.onAfterRender.bind(this)}connectedCallback(){super.connectedCallback(),window.addEventListener("popstate",this.routeUpdate),window.addEventListener("qrcg-router:location-changed",this.routeUpdate),window.addEventListener("qrcg-route:after-render",this.onAfterRender)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("popstate",this.routeUpdate),window.removeEventListener("qrcg-router:location-changed",this.routeUpdate),window.removeEventListener("qrcg-route:after-render",this.onAfterRender)}firstUpdated(){this.routeUpdate()}async routeUpdate(){try{await this.prepareUpdate();const w=this._shouldRender;this._shouldRender=this._routeIsMatched()&&this._exceptIsMatched()&&this._willRender(),this._shouldRender&&!w&&this.renderInnerTemplate(),this._shouldRender||this.resetInnerContent(),this._shouldRender&&this.fireAfterRender()}catch{this.handleUnpreparedRoute()}}prepareUpdate(){return!0}handleUnpreparedRoute(){}_willRender(){return this.dispatchEvent(new CustomEvent("qrcg-route:will-render",{detail:{route:this.route},cancelable:!0,bubbles:!0,composed:!0}))}fireAfterRender(){window.dispatchEvent(new CustomEvent("qrcg-route:after-render",{detail:{routeMatch:this.routeMatch}}))}renderInnerTemplate(){const w=this.querySelector("template");w&&this.appendChild(w.content.cloneNode(!0))}resetInnerContent(){this.querySelectorAll(":not(template)").forEach(q=>q.remove())}_routeIsMatched(){return this.routeMatch=this._matchRoute(this.route),this.routeMatch}_exceptIsMatched(){return isEmpty(this.except)?!0:(this.exceptMatch=this._matchRoute(this.except),!this.exceptMatch)}_matchRoute(w){if(isEmpty(w))return!0;let q=isEmpty(w)?"":w;q.match(new RegExp("^/"))||(q=`/${q}`);const D=`^${q.length>1?q:`${q}$`}`;return this.currentPath().match(new RegExp(D,"i"))}currentPath(){const w=document.createElement("a");w.href=Config.get("app.url");const q=w.pathname==="/"?"":w.pathname;w.remove();const D=window.location.pathname.replace(q,"");return this.withSearch?D+window.location.search:D}onAfterRender(w){const{detail:{routeMatch:q}}=w;isEmpty(q.groups)?this.routeParams={}:this.routeParams=q.groups,window.dispatchEvent(new CustomEvent("qrcg-route:route-paramas-change",{detail:{routeParams:this.routeParams}}))}render(){return x`<slot></slot>`}}window.defineCustomElement("qrcg-route",QRCGRoute);class ValidationError extends Error{constructor(w,...q){super(q),this.name="ValidationError",this.response=w.response,this.jsonResponse=w.jsonResponse,this.request=w.request}errors(){return{...this.jsonResponse.validationErrors}}}function resolveRoute(F){const w=`${Config.get("app.url")}/api`;return F=F.replace(w,""),F=`${w}/${F}`,F=F.replace("api//","api/"),F}class ApiError extends Error{constructor(w,...q){super(q),this.response=w.response,this.request=w.request,this.name="ApiError"}json=async()=>await this.response.clone().json()}const request=async(F,{method:w,body:q,headers:D={}})=>{const Q={Accept:"application/json","content-type":"application/json"};hasToken()&&(Q.Authorization=`Bearer ${loadToken()}`);const O={...Q,...D};q instanceof FormData&&delete O["content-type"];const U=resolveRoute(F),G=new Request(U,{method:w,mode:"cors",headers:O,body:q instanceof FormData?q:JSON.stringify(q)}),W=await fetch(G);document.dispatchEvent(new CustomEvent("api:response-ready",{detail:{response:W}}));let K;try{K=await W.clone().json()}catch{}if(!isEmpty(K?.validationErrors))throw new ValidationError({jsonResponse:K,response:W,request:G});if(!W.ok||[200,201].indexOf(W.status)===-1)throw new ApiError({response:W,request:G});return{response:W,request:G,json:K}},upload=async(F,w)=>{const q=Object.entries(w).reduce((D,Q)=>(D.append(...Q),D),new FormData);return request(F,{method:"post",body:q})},post=async(F,w)=>request(F,{method:"post",body:w}),put=async(F,w)=>request(F,{method:"put",body:w}),save=async(F,w)=>{let q="post";return isEmpty(w.id)||(q="put",F+=`/${w.id}`),request(F,{method:q,body:w})},get=async(F,w={})=>{if(isNotEmpty(w)){const q=new URLSearchParams(w);F+=F.match(/\?/)?`&${q.toString()}`:`?${q.toString()}`}return request(F,{method:"get"})},destroy=async F=>request(F,{method:"delete"});document.addEventListener("click",F=>{if(runningSSR())return;const w=F.composedPath()[0]||F.target;if(w.tagName==="A"){if(w.origin!==location.origin||w.getAttribute("download")||w.getAttribute("target")==="_blank"||w.hasAttribute("native-link")||isSSR(w))return;F.preventDefault(),push(w.href)}});function runningSSR(){return isSSR(window.location)}function isSSR(F){const w=/dashboard|account|checkout|install/;if(!F.pathname){const q=document.createElement("a");q.href=F,F=q}return!F.pathname.match(w)||isHomePage(F.href)}function getHost(F){const w=document.createElement("a");w.href=F;const q=w.host;return w.remove(),q}function isHomePage(F){return F==="/"||F===""?!0:removeTrailingSlashes(F)==removeTrailingSlashes(Config.get("app.url"))}function removeTrailingSlashes(F){return F.replace(/(.*)\/+$/,(w,q)=>q)}function shouldChangeLocation(F){return getHost(F)!==location.host||isHomePage(F)||isHomePage(location.href)||isSSR(F)}function doPush(F){if(shouldChangeLocation(F)){window.location=F;return}else history.pushState({},"",F)}function doReplace(F){shouldChangeLocation(F)?window.location=F:history.replaceState({},"",F)}const push=(F="",w=!1)=>{if(!window.dispatchEvent(new CustomEvent("qrcg-router:location-will-change",{detail:{url:F},cancelable:!0})))return;const D=document.createElement("a");D.href=Config.get("app.url");const Q=D.pathname;F.match(new RegExp(Q.replace("/","\\/")))||(F=Q+F.replace(D.origin,"")),D.remove(),w?doReplace(F):doPush(F),setTimeout(()=>window.dispatchEvent(new CustomEvent("qrcg-router:location-changed")),0),setTimeout(()=>{window.scrollTo(0,0)},50)};class Auth0Manager{static isEnabled(){return Config.get("auth0.enabled")==="enabled"}static loginUrl(){return url("/auth0/login")}}class FilterCollection{store=new Map;filters(w){let q=this.store.get(w);return q||(q=[],this.store.set(w,q)),q=q.sort(function(D,Q){return D.sortOrder-Q.sortOrder}),q}addFilter(w,q,D=0){this.filters(w).push(new FilterCallback(q,D))}applyFilters(w,q,...D){return this.filters(w).reduce((Q,O)=>O.doFilter(Q,...D),q)}}class FilterCallback{static store=new Map;callback;sortOrder;constructor(w,q){this.callback=w,this.sortOrder=q}doFilter(w,...q){return this.callback(w,...q)}}class ActionCollection{store=new Map;actions(w){let q=this.store.get(w);return q||(q=[],this.store.set(w,q)),q=q.sort(function(D,Q){return D.sortOrder-Q.sortOrder}),q}addAction(w,q,D=0){this.actions(w).push(new ActionCallback(q,D))}doActions(w,...q){return this.actions(w).map(D=>D.doAction(...q))}}class ActionCallback{static store=new Map;callback;sortOrder;constructor(w,q){this.callback=w,this.sortOrder=q}doAction(w,...q){return this.callback(w,...q)}}class PluginManager{plugins=[];filters=new FilterCollection;actions=new ActionCollection;static get _instance(){return window.__$$$private_qrcg__plugin_manager__}static set _instance(w){window.__$$$private_qrcg__plugin_manager__=w}static instance(){return this._instance||(this._instance=new this),this._instance}static doActions(w,...q){return x` ${this.instance().actions.doActions(w,...q)} `}static addAction(w,q,D=0){return this.instance().actions.addAction(w,q,D)}static applyFilters(w,q,...D){return this.instance().filters.applyFilters(w,q,...D)}static addFilter(w,q,D=0){return this.instance().filters.addFilter(w,q,D)}static registerPlugin(w){this.instance().plugins.push(w)}}const FILTER_CHECKOUT_PRICE="FILTER_CHECKOUT_PRICE",FILTER_PAYLINK_POST_DATA="FILTER_PAYLINK_POST_DATA",FILTER_MENU_GROUPS="FILTER_MENU_GROUPS",FILTER_SIGNUP_DATA="FILTER_SIGNUP_DATA",FILTER_SUBSCRIPTION_PLAN_FREQUENCIES="FILTER_SUBSCRIPTION_PLAN_FREQUENCIES",FILTER_DASHBOARD_LIST_CREATE_BUTTON="FILTER_DASHBOARD_LIST_CREATE_BUTTON",FILTER_WEBSITE_BUILDER_FULLSCREEN_TEXT_COLOR="FILTER_WEBSITE_BUILDER_FULLSCREEN_TEXT_COLOR",FILTER_AFTER_LOGIN_SHOULD_DO_REDIRECT="FILTER_AFTER_LOGIN_SHOULD_DO_REDIRECT",FILTER_DASHBOARD_LIST_SHOULD_RENDER_BULK_CREATE_BUTTON="FILTER_DASHBOARD_LIST_SHOULD_RENDER_BULK_CREATE_BUTTON",FILTER_QRCODE_FORM_CHANGE_TYPE_BUTTON="FILTER_QRCODE_FORM_CHANGE_TYPE_BUTTON",FILTER_QRCODE_LINK_SHOULD_RENDER_SETTINGS_ICON="FILTER_QRCODE_LINK_SHOULD_RENDER_SETTINGS_ICON",FILTER_QRCODE_FORM_SHOULD_RENDER_SAVE_AS_TEMPLATE_BUTTON="FILTER_QRCODE_FORM_SHOULD_RENDER_SAVE_AS_TEMPLATE_BUTTON",FILTER_QRCODE_ROW_COPY="FILTER_QRCODE_ROW_COPY",FILTER_QRCODE_ROW_ARCHIVE="FILTER_QRCODE_ROW_ARCHIVE",FILTER_QRCODE_ROW_FOLDERS_LINK="FILTER_QRCODE_ROW_FOLDERS_LINK",FILTER_QRCODE_ROW_SHOULD_DO_ACT_AS="FILTER_QRCODE_ROW_SHOULD_DO_ACT_AS",FILTER_QRCODE_TYPES="FILTER_QRCODE_TYPES",FILTER_QRCODE_TYPES_CLASS_LIST="FILTER_QRCODE_TYPES_CLASS_LIST",FILTER_PLUGIN_SETTINGS_PAGE="FILTER_PLUGIN_SETTINGS_PAGE",FILTER_PLAN_FEATURES="FILTER_PLAN_FEATURES",FILTER_SUPPORT_LINK="FILTER_SUPPORT_LINK",FILTER_SHOULD_RENDER_UPDATE_BUTTON="FILTER_SHOULD_RENDER_UPDATE_BUTTON",FILTER_OUTLINED_SHAPES="FILTER_OUTLINED_SHAPES",FILTER_IMG_SELECTOR_SOURCE="FILTER_IMG_SELECTOR_SOURCE",userKey="auth:user",tokenKey="auth:token";function userHomePage(){const F=loadUser();if(isEmpty(F))return"";let w="";const q=F.is_sub?"parent_user.roles[0].home_page":"roles[0].home_page";return w=get$1(F,q),w}function isSubUser(){return loadUser()?.is_sub}function isCustomer(){return loadUser()?!loadUser().roles||!loadUser().roles[0]?!1:loadUser().roles[0].name==="Client"||loadUser().roles[0].name==="Sub User":!0}function loadUser(){return loadStoredJson(userKey)}function storeUser(F){storeJson(F,userKey)}function storeToken(F){localStorage[tokenKey]=F}function loadToken(){return localStorage[tokenKey]}function actAs(F,w){const q={user:loadUser(),token:loadToken()};storeJson(q,"mainUser"),storeUser(F),storeToken(w)}function isActingAs(){const F=loadStoredJson("mainUser");return!isEmpty(F)}function removeActingAs(){const F=loadStoredJson("mainUser");storeUser(F.user),storeToken(F.token),delete localStorage.mainUser,push(userHomePage()),setTimeout(()=>{window.location.reload()},10)}function hasToken(){const F=loadToken();return!isEmpty(F)}function loggedIn(){const F=loadUser(),w=loadToken();return!isEmpty(F)&&!isEmpty(w)}function verified(){const F=loadUser();return isEmpty(F)?!1:!isEmpty(F.email_verified_at)}function clearLocalCredentials(){delete localStorage[userKey],delete localStorage[tokenKey],delete localStorage.mainUser}function onInvalidToken(){clearLocalCredentials(),window.dispatchEvent(new CustomEvent("auth:request-logout"))}function redirectToLoginPageAfterLogout(F){let w="";try{const q=get$1(F,"detail.redirect");q&&(w=`?redirect=${q}`)}catch{w=""}push(`/account/login${w}`)}function onLogoutRequested(F){if(clearLocalCredentials(),Auth0Manager.isEnabled()){window.location="/auth0/logout";return}const w=Config.get("app.after_logout_action"),q=()=>{redirectToLoginPageAfterLogout(F),setTimeout(()=>{location.reload()},50)};switch(w){case"redirect_to_login_page":q();break;case"redirect_to_home_page":push("/");break;default:q();break}}async function onAfterLogin(F){let{user:w,token:q,useRouter:D=!0,shouldDoRedirect:Q=!0}=F.detail;storeUser(w),storeToken(q),window.dispatchEvent(new CustomEvent("auth:local-user-ready")),Q=PluginManager.applyFilters(FILTER_AFTER_LOGIN_SHOULD_DO_REDIRECT,Q),Q&&(D?queryParam("redirect")?push(queryParam("redirect")):push(userHomePage()):queryParam("redirect")?window.location=queryParam("redirect"):window.location=userHomePage())}function isSuperAdmin(F=null){return F||(F=loadUser()),isEmpty(F)||isEmpty(F.roles)?!1:F.roles.reduce((q,D)=>q||D.super_admin,!1)}function isClient(){const F=loadUser();return isEmpty(F)||isEmpty(F.roles)?!1:F.roles.filter(w=>w.name==="Client").length>0}function permitted(F){if(isEmpty(F))return!0;const w=loadUser();return isEmpty(w)||isEmpty(w.roles)?!1:w.roles.reduce((Q,O)=>Q||O.super_admin,!1)?!0:verified()?!!w.roles.map(Q=>Q.permissions).reduce((Q,O)=>Q.concat(O),[]).find(Q=>Q.slug===F):!1}function main$1(){window.addEventListener("qrcg-login:after-login",onAfterLogin),document.readyState==="complete"||document.readyState==="loaded"||document.readyState==="interactive"?onDocumentReady():window.addEventListener("DOMContentLoaded",onDocumentReady),window.addEventListener("storage",onWindowStorageChanged),window.addEventListener("auth:invalid-token",onInvalidToken),window.addEventListener("auth:request-logout",onLogoutRequested),window.addEventListener("auth:request-validate",validateCurrentToken)}function logout(){window.dispatchEvent(new CustomEvent("auth:request-logout"))}async function onWindowStorageChanged(){await new Promise(F=>setTimeout(F,0))}function onDocumentReady(){validateCurrentToken()}var isValidatingCurrentToken=!1;async function validateCurrentToken(){if(!(isValidatingCurrentToken||!loadToken())){try{isValidatingCurrentToken=!0;const{response:w}=await get("myself"),q=await w.clone().json();storeUser(q),window.dispatchEvent(new CustomEvent("auth:local-user-ready"))}catch{}isValidatingCurrentToken=!1}}main$1();class ConfigHelper{static pricingPlansUrl(){let w=Config.get("app.frontend_pricing_plans_url");return isEmpty(w)&&(w="/pricing-plans"),w}static isLocal(){return Config.get("app.env")==="local"&&location.host.match(/quickcode\.test/i)}static isBuiltBundle(){return window.QRCG_BUNDLE_TYPE==="build"}static isDemo(){return Config.get("app.env")==="demo"}static getMarketPlace(){try{return window.atob(Config.get("app.marketplace"))}catch{return"CODECANYON"}}static isPaddle(){return this.getMarketPlace()==="PADDLE"}static isCodeCanyon(){return this.getMarketPlace()==="CODECANYON"}static bundleIsBuild(){return window.QRCG_BUNDLE_TYPE==="build"}static isRtl(){return window.QRCG_DIRECTION=="rtl"}static dir(){return window.QRCG_DIRECTION}static emailVerificationEnabled(){return Config.get("app.email_verification_after_sign_up")!="disabled"}static shouldShowSupportPortalLink(w=!0){return!(!isSuperAdmin()||ConfigHelper.isDemo()&&w||Config.get("dashboard.help_button_in_dashboard_header")==="disabled")}static getSupportPortalLink(){let w="https://quickcodesupport.atlassian.net/servicedesk/customer/portal/3";return w=PluginManager.applyFilters(FILTER_SUPPORT_LINK,w),w}}const localStorageKey="translate::db";function getKey(F,w){return F instanceof Array&&(F=F.map((q,D)=>q+(nullOrUndefined(w[D])?"":w[D])).join("")),F}function cacheKey(F,w){if(!ConfigHelper.isLocal())return;F=getKey(F,w),typeof F=="object"&&console.error("key is object, expected type is string",{key:F});const q=loadStoredJson(localStorageKey)||{};q[F]="",storeJson(q,localStorageKey)}const t$3=(F,...w)=>{cacheKey(F,w),F=getKey(F,w);let q=window.QRCG_TRANSLATION;return isEmpty(q)&&(q={}),!q||isEmpty(q[F])?F:q[F]};class QRCGProtectedRoute extends QRCGRoute{static get styles(){return[super.styles,i$3`
                .not-authorized-container {
                    display: flex;
                    flex-direction: column;
                    position: fixed;
                    width: 100%;
                    height: 100%;
                    top: 0;
                    bottom: 0;
                    left: 0;
                    right: 0;
                    background-color: white;
                    align-items: center;
                    justify-content: center;
                }

                .login-link {
                    color: var(--primary-0);
                    display: block;
                    margin-top: 2rem;
                }
            `]}static get properties(){return{route:{},permission:{},routeIsAuthorized:{}}}constructor(){super(),this.onInvalidToken=this.onInvalidToken.bind(this),this.routeIsAuthorized=!0}connectedCallback(){super.connectedCallback(),window.addEventListener("auth:invalid-token",this.onInvalidToken)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("auth:invalid-token",this.onInvalidToken),clearTimeout(this.logoutTimeoutHandle)}onInvalidToken(){this.routeUpdate()}prepareUpdate(){return this._routeIsMatched()&&this._exceptIsMatched()?this.authorizeRoute():!0}handleUnpreparedRoute(){this.logoutTimeoutHandle=setTimeout(()=>{window.dispatchEvent(new CustomEvent("auth:request-logout",{detail:{redirect:window.location.pathname}}))},2e3)}authorizeRoute(){if(this.routeIsAuthorized=permitted(this.permission),!this.routeIsAuthorized)throw new Error("Route is not permitted")}renderUnauthorizedView(){return this._routeIsMatched()&&this._exceptIsMatched()?x`
            <div class="not-authorized-container">
                <qrcg-loader></qrcg-loader>

                <a href="/account/login" class="login-link">
                    ${t$3`Click here if you are not redirected automatically.`}
                </a>
            </div>
        `:null}render(){return this.routeIsAuthorized?x`<slot></slot>`:this.renderUnauthorizedView()}}window.defineCustomElement("qrcg-protected-route",QRCGProtectedRoute);var mdiAccount="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z",mdiAccountMultiple="M16 17V19H2V17S2 13 9 13 16 17 16 17M12.5 7.5A3.5 3.5 0 1 0 9 11A3.5 3.5 0 0 0 12.5 7.5M15.94 13A5.32 5.32 0 0 1 18 17V19H22V17S22 13.37 15.94 13M15 4A3.39 3.39 0 0 0 13.07 4.59A5 5 0 0 1 13.07 10.41A3.39 3.39 0 0 0 15 11A3.5 3.5 0 0 0 15 4Z",mdiAlertCircleOutline="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z",mdiAlertOctagon="M13 13H11V7H13M11 15H13V17H11M15.73 3H8.27L3 8.27V15.73L8.27 21H15.73L21 15.73V8.27L15.73 3Z",mdiArchiveArrowDownOutline="M20 21H4V10H6V19H18V10H20V21M3 3H21V9H3V3M5 5V7H19V5M10.5 11V14H8L12 18L16 14H13.5V11",mdiArchiveArrowUpOutline="M20 21H4V10H6V19H18V10H20V21M3 3H21V9H3V3M5 5V7H19V5M10.5 17V14H8L12 10L16 14H13.5V17",mdiArrowLeft="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z",mdiArrowRight="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z",mdiArrowUp="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",mdiBackburger="M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z",mdiBitcoin="M14.24 10.56C13.93 11.8 12 11.17 11.4 11L11.95 8.82C12.57 9 14.56 9.26 14.24 10.56M11.13 12.12L10.53 14.53C11.27 14.72 13.56 15.45 13.9 14.09C14.26 12.67 11.87 12.3 11.13 12.12M21.7 14.42C20.36 19.78 14.94 23.04 9.58 21.7C4.22 20.36 .963 14.94 2.3 9.58C3.64 4.22 9.06 .964 14.42 2.3C19.77 3.64 23.03 9.06 21.7 14.42M14.21 8.05L14.66 6.25L13.56 6L13.12 7.73C12.83 7.66 12.54 7.59 12.24 7.53L12.68 5.76L11.59 5.5L11.14 7.29C10.9 7.23 10.66 7.18 10.44 7.12L10.44 7.12L8.93 6.74L8.63 7.91C8.63 7.91 9.45 8.1 9.43 8.11C9.88 8.22 9.96 8.5 9.94 8.75L8.71 13.68C8.66 13.82 8.5 14 8.21 13.95C8.22 13.96 7.41 13.75 7.41 13.75L6.87 15L8.29 15.36C8.56 15.43 8.82 15.5 9.08 15.56L8.62 17.38L9.72 17.66L10.17 15.85C10.47 15.93 10.76 16 11.04 16.08L10.59 17.87L11.69 18.15L12.15 16.33C14 16.68 15.42 16.54 16 14.85C16.5 13.5 16 12.7 15 12.19C15.72 12 16.26 11.55 16.41 10.57C16.61 9.24 15.59 8.53 14.21 8.05Z",mdiCallMade="M9,5V7H15.59L4,18.59L5.41,20L17,8.41V15H19V5",mdiCartOutline="M17,18A2,2 0 0,1 19,20A2,2 0 0,1 17,22C15.89,22 15,21.1 15,20C15,18.89 15.89,18 17,18M1,2H4.27L5.21,4H20A1,1 0 0,1 21,5C21,5.17 20.95,5.34 20.88,5.5L17.3,11.97C16.96,12.58 16.3,13 15.55,13H8.1L7.2,14.63L7.17,14.75A0.25,0.25 0 0,0 7.42,15H19V17H7C5.89,17 5,16.1 5,15C5,14.65 5.09,14.32 5.24,14.04L6.6,11.59L3,4H1V2M7,18A2,2 0 0,1 9,20A2,2 0 0,1 7,22C5.89,22 5,21.1 5,20C5,18.89 5.89,18 7,18M16,11L18.78,6H6.14L8.5,11H16Z",mdiCastAudio="M2 11V13C7 13 11 17 11 22H13C13 15.9 8.1 11 2 11M20 2H10C8.9 2 8 2.9 8 4V10.5C9 11 9.9 11.7 10.7 12.4C11.6 11 13.2 10 15 10C17.8 10 20 12.2 20 15S17.8 20 15 20H14.8C14.9 20.7 15 21.3 15 22H20C21.1 22 22 21.1 22 20V4C22 2.9 21.1 2 20 2M15 8C13.9 8 13 7.1 13 6C13 4.9 13.9 4 15 4C16.1 4 17 4.9 17 6S16.1 8 15 8M15 18C14.8 18 14.5 18 14.3 17.9C13.8 16.4 13.1 15.1 12.2 13.9C12.6 12.8 13.7 11.9 15 11.9C16.7 11.9 18 13.2 18 14.9S16.7 18 15 18M2 15V17C4.8 17 7 19.2 7 22H9C9 18.1 5.9 15 2 15M2 19V22H5C5 20.3 3.7 19 2 19",mdiCellphone="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z",mdiChartBar="M22,21H2V3H4V19H6V10H10V19H12V6H16V19H18V14H22V21Z",mdiChartLine="M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z",mdiChatQuestion="M12 3C6.5 3 2 6.6 2 11C2 13.1 3 15.1 4.8 16.5C4.8 17.1 4.4 18.7 2 21C2 21 5.5 21 8.5 18.5C9.6 18.8 10.8 19 12 19C17.5 19 22 15.4 22 11S17.5 3 12 3M13 15H11V13H13V15M14.8 10C14.5 10.4 14.1 10.6 13.7 10.8C13.4 11 13.3 11.1 13.2 11.3C13 11.5 13 11.7 13 12H11C11 11.5 11.1 11.2 11.3 10.9C11.5 10.7 11.9 10.4 12.4 10.1C12.7 10 12.9 9.8 13 9.6C13.1 9.4 13.2 9.1 13.2 8.9C13.2 8.6 13.1 8.4 12.9 8.2C12.7 8 12.4 7.9 12.1 7.9C11.8 7.9 11.6 8 11.4 8.1C11.2 8.2 11.1 8.4 11.1 8.7H9.1C9.2 8 9.5 7.4 10 7C10.5 6.6 11.2 6.5 12.1 6.5C13 6.5 13.8 6.7 14.3 7.1C14.8 7.5 15.1 8.1 15.1 8.8C15.2 9.2 15.1 9.6 14.8 10Z",mdiCheck="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",mdiCheckBold="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z",mdiCheckboxBlankOutline="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z",mdiCheckboxMarked="M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z",mdiChevronDoubleRight="M5.59,7.41L7,6L13,12L7,18L5.59,16.59L10.17,12L5.59,7.41M11.59,7.41L13,6L19,12L13,18L11.59,16.59L16.17,12L11.59,7.41Z",mdiChevronDown="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",mdiChevronLeft="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z",mdiChevronUp="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",mdiClose="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",mdiCloseCircle="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",mdiCloseThick="M20 6.91L17.09 4L12 9.09L6.91 4L4 6.91L9.09 12L4 17.09L6.91 20L12 14.91L17.09 20L20 17.09L14.91 12L20 6.91Z",mdiCodeBraces="M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z",mdiCog="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",mdiContactlessPayment="M16.79,23C16.37,22.83 16.07,22.45 16,22C15.95,21.74 16,21.56 16.4,20.84C17.9,18.14 18.67,15.09 18.63,12C18.67,9 17.94,6.07 16.5,3.44C16.29,3 16.1,2.58 15.94,2.13C16,1.75 16.19,1.4 16.5,1.19C16.95,0.95 17.5,1 17.91,1.28C18.19,1.64 18.43,2 18.63,2.42C19.71,4.5 20.44,6.7 20.8,9C21.03,10.81 21.06,12.65 20.89,14.47C20.58,16.81 19.89,19.07 18.83,21.18C18.19,22.46 17.83,23 17.45,23C17.37,23 17.28,23 17.2,23C17.06,23 16.93,23 16.79,23V23M12.43,20.79C11.86,20.63 11.5,20.05 11.62,19.47C11.62,19.35 11.93,18.8 12.21,18.24C13.39,15.97 13.9,13.41 13.67,10.86C13.53,9.03 13,7.25 12.13,5.64C11.5,4.38 11.46,4.18 11.83,3.64C12.27,3.15 13,3.08 13.54,3.5C14.26,4.56 14.83,5.72 15.25,6.94C16.53,10.73 16.33,14.86 14.69,18.5C13.85,20.39 13.26,21 12.43,20.74V20.79M7.93,18.56C7.57,18.4 7.3,18.08 7.2,17.7C7.2,17.5 7.2,17.24 7.65,16.44C9.14,13.74 9.14,10.46 7.65,7.76C7,6.5 7,6.24 7.53,5.76C7.72,5.54 8,5.43 8.3,5.47C8.94,5.47 9.3,5.78 9.84,6.91C10.69,8.47 11.13,10.22 11.12,12C11.16,13.81 10.72,15.61 9.85,17.2C9.31,18.25 9.04,18.5 8.5,18.59C8.31,18.61 8.11,18.59 7.93,18.5V18.56M3.72,16.43C3.39,16.27 3.13,16 3,15.65C2.9,15.3 3,15 3.4,14.36C3.9,13.68 4.14,12.84 4.09,12C4.16,11.15 3.93,10.31 3.44,9.61C3.27,9.36 3.13,9.09 3,8.82C2.89,8.19 3.31,7.59 4,7.47C4.54,7.37 4.92,7.6 5.42,8.36C6.87,10.57 6.87,13.42 5.42,15.63C4.91,16.4 4.33,16.63 3.73,16.43H3.72Z",mdiContacts="M20,0H4V2H20V0M4,24H20V22H4V24M20,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6A2,2 0 0,0 20,4M12,6.75A2.25,2.25 0 0,1 14.25,9A2.25,2.25 0 0,1 12,11.25A2.25,2.25 0 0,1 9.75,9A2.25,2.25 0 0,1 12,6.75M17,17H7V15.5C7,13.83 10.33,13 12,13C13.67,13 17,13.83 17,15.5V17Z",mdiContentCopy="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",mdiCurrencyUsd="M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z",mdiDelete="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",mdiDotsHorizontal="M16,12A2,2 0 0,1 18,10A2,2 0 0,1 20,12A2,2 0 0,1 18,14A2,2 0 0,1 16,12M10,12A2,2 0 0,1 12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z",mdiDownload="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",mdiDrag="M7,19V17H9V19H7M11,19V17H13V19H11M15,19V17H17V19H15M7,15V13H9V15H7M11,15V13H13V15H11M15,15V13H17V15H15M7,11V9H9V11H7M11,11V9H13V11H11M15,11V9H17V11H15M7,7V5H9V7H7M11,7V5H13V7H11M15,7V5H17V7H15Z",mdiDrawing="M8.5,3A5.5,5.5 0 0,1 14,8.5C14,9.83 13.53,11.05 12.74,12H21V21H12V12.74C11.05,13.53 9.83,14 8.5,14A5.5,5.5 0 0,1 3,8.5A5.5,5.5 0 0,1 8.5,3Z",mdiEmailFastOutline="M22 5.5H9C7.9 5.5 7 6.4 7 7.5V16.5C7 17.61 7.9 18.5 9 18.5H22C23.11 18.5 24 17.61 24 16.5V7.5C24 6.4 23.11 5.5 22 5.5M22 16.5H9V9.17L15.5 12.5L22 9.17V16.5M15.5 10.81L9 7.5H22L15.5 10.81M5 16.5C5 16.67 5.03 16.83 5.05 17H1C.448 17 0 16.55 0 16S.448 15 1 15H5V16.5M3 7H5.05C5.03 7.17 5 7.33 5 7.5V9H3C2.45 9 2 8.55 2 8S2.45 7 3 7M1 12C1 11.45 1.45 11 2 11H5V13H2C1.45 13 1 12.55 1 12Z",mdiEmoticonHappyOutline="M20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M10,9.5C10,10.3 9.3,11 8.5,11C7.7,11 7,10.3 7,9.5C7,8.7 7.7,8 8.5,8C9.3,8 10,8.7 10,9.5M17,9.5C17,10.3 16.3,11 15.5,11C14.7,11 14,10.3 14,9.5C14,8.7 14.7,8 15.5,8C16.3,8 17,8.7 17,9.5M12,17.23C10.25,17.23 8.71,16.5 7.81,15.42L9.23,14C9.68,14.72 10.75,15.23 12,15.23C13.25,15.23 14.32,14.72 14.77,14L16.19,15.42C15.29,16.5 13.75,17.23 12,17.23Z",mdiExclamationThick="M10 3H14V14H10V3M10 21V17H14V21H10Z",mdiEye="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",mdiEyeOff="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z",mdiFile="M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z",mdiFileCode="M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M6.12,15.5L9.86,19.24L11.28,17.83L8.95,15.5L11.28,13.17L9.86,11.76L6.12,15.5M17.28,15.5L13.54,11.76L12.12,13.17L14.45,15.5L12.12,17.83L13.54,19.24L17.28,15.5Z",mdiFileDocument="M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z",mdiFileEdit="M6 2C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H10V20.1L20 10.1V8L14 2H6M13 3.5L18.5 9H13V3.5M20.1 13C20 13 19.8 13.1 19.7 13.2L18.7 14.2L20.8 16.3L21.8 15.3C22 15.1 22 14.7 21.8 14.5L20.5 13.2C20.4 13.1 20.3 13 20.1 13M18.1 14.8L12 20.9V23H14.1L20.2 16.9L18.1 14.8Z",mdiFileExcel="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M15.8,20H14L12,16.6L10,20H8.2L11.1,15.5L8.2,11H10L12,14.4L14,11H15.8L12.9,15.5L15.8,20M13,9V3.5L18.5,9H13Z",mdiFileUpload="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z",mdiFilter="M14,12V19.88C14.04,20.18 13.94,20.5 13.71,20.71C13.32,21.1 12.69,21.1 12.3,20.71L10.29,18.7C10.06,18.47 9.96,18.16 10,17.87V12H9.97L4.21,4.62C3.87,4.19 3.95,3.56 4.38,3.22C4.57,3.08 4.78,3 5,3V3H19V3C19.22,3 19.43,3.08 19.62,3.22C20.05,3.56 20.13,4.19 19.79,4.62L14.03,12H14Z",mdiFitToScreen="M17 4H20C21.1 4 22 4.9 22 6V8H20V6H17V4M4 8V6H7V4H4C2.9 4 2 4.9 2 6V8H4M20 16V18H17V20H20C21.1 20 22 19.1 22 18V16H20M7 18H4V16H2V18C2 19.1 2.9 20 4 20H7V18M18 8H6V16H18V8Z",mdiFlash="M7,2V13H10V22L17,10H13L17,2H7Z",mdiFloppy="M5,3A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5.5L18.5,3H17V9A1,1 0 0,1 16,10H8A1,1 0 0,1 7,9V3H5M12,4V9H15V4H12M7,12H17A1,1 0 0,1 18,13V19H6V13A1,1 0 0,1 7,12Z",mdiFolder="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z",mdiGoogle="M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1V11.1Z",mdiGrid="M10,4V8H14V4H10M16,4V8H20V4H16M16,10V14H20V10H16M16,16V20H20V16H16M14,20V16H10V20H14M8,20V16H4V20H8M8,14V10H4V14H8M8,8V4H4V8H8M10,14H14V10H10V14M4,2H20A2,2 0 0,1 22,4V20A2,2 0 0,1 20,22H4C2.92,22 2,21.1 2,20V4A2,2 0 0,1 4,2Z",mdiHelpCircle="M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z",mdiHorizontalRotateClockwise="M12 14L8 10L4 14H7.1C7.56 18.56 9.58 22 12 22S16.44 18.56 16.9 14H14.91C14.57 17.45 13.4 20 12 20S9.43 17.45 9.09 14H12M12 4C13.4 4 14.57 6.55 14.91 10H16.9C16.44 5.44 14.42 2 12 2C9.84 2 8 4.74 7.3 8.58L8 7.88L9.21 9.08C9.64 6.11 10.73 4 12 4M22 13V11H11L13 13H22M2 13H3L5 11H2V13Z",mdiImage="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z",mdiImageMultiple="M22,16V4A2,2 0 0,0 20,2H8A2,2 0 0,0 6,4V16A2,2 0 0,0 8,18H20A2,2 0 0,0 22,16M11,12L13.03,14.71L16,11L20,16H8M2,6V20A2,2 0 0,0 4,22H18V20H4V6",mdiLifebuoy="M19.79,15.41C20.74,13.24 20.74,10.75 19.79,8.59L17.05,9.83C17.65,11.21 17.65,12.78 17.06,14.17L19.79,15.41M15.42,4.21C13.25,3.26 10.76,3.26 8.59,4.21L9.83,6.94C11.22,6.35 12.79,6.35 14.18,6.95L15.42,4.21M4.21,8.58C3.26,10.76 3.26,13.24 4.21,15.42L6.95,14.17C6.35,12.79 6.35,11.21 6.95,9.82L4.21,8.58M8.59,19.79C10.76,20.74 13.25,20.74 15.42,19.78L14.18,17.05C12.8,17.65 11.22,17.65 9.84,17.06L8.59,19.79M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z",mdiLink="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z",mdiLinkVariant="M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C7.22,12.88 7.22,9.71 9.17,7.76V7.76L12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.59,9.17C9.41,10.34 9.41,12.24 10.59,13.41M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.78,11.12 16.78,14.29 14.83,16.24V16.24L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L13.41,14.83C14.59,13.66 14.59,11.76 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z",mdiLock="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z",mdiLockOpenOutline="M18,20V10H6V20H18M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V10A2,2 0 0,1 6,8H15V6A3,3 0 0,0 12,3A3,3 0 0,0 9,6H7A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,17A2,2 0 0,1 10,15A2,2 0 0,1 12,13A2,2 0 0,1 14,15A2,2 0 0,1 12,17Z",mdiMagicStaff="M17.5 9C16.12 9 15 7.88 15 6.5S16.12 4 17.5 4 20 5.12 20 6.5 18.88 9 17.5 9M14.43 8.15L2 20.59L3.41 22L15.85 9.57C15.25 9.24 14.76 8.75 14.43 8.15M13 5L13.63 3.63L15 3L13.63 2.37L13 1L12.38 2.37L11 3L12.38 3.63L13 5M21 5L21.63 3.63L23 3L21.63 2.37L21 1L20.38 2.37L19 3L20.38 3.63L21 5M21 9L20.38 10.37L19 11L20.38 11.63L21 13L21.63 11.63L23 11L21.63 10.37L21 9Z",mdiMagnify="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",mdiMenu="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",mdiMenuDown="M7,10L12,15L17,10H7Z",mdiMenuUp="M7,15L12,10L17,15H7Z",mdiMessageProcessing="M17,11H15V9H17M13,11H11V9H13M9,11H7V9H9M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4C22,2.89 21.1,2 20,2Z",mdiMicrophone="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z",mdiMinus="M19,13H5V11H19V13Z",mdiMinusThick="M20 14H4V10H20",mdiOpenInNew="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z",mdiPen="M20.71,7.04C20.37,7.38 20.04,7.71 20.03,8.04C20,8.36 20.34,8.69 20.66,9C21.14,9.5 21.61,9.95 21.59,10.44C21.57,10.93 21.06,11.44 20.55,11.94L16.42,16.08L15,14.66L19.25,10.42L18.29,9.46L16.87,10.87L13.12,7.12L16.96,3.29C17.35,2.9 18,2.9 18.37,3.29L20.71,5.63C21.1,6 21.1,6.65 20.71,7.04M3,17.25L12.56,7.68L16.31,11.43L6.75,21H3V17.25Z",mdiPhone="M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z",mdiPin="M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z",mdiPlus="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",mdiPlusBox="M17,13H13V17H11V13H7V11H11V7H13V11H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z",mdiPlusCircle="M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",mdiPlusThick="M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z",mdiQrcode="M3,11H5V13H3V11M11,5H13V9H11V5M9,11H13V15H11V13H9V11M15,11H17V13H19V11H21V13H19V15H21V19H19V21H17V19H13V21H11V17H15V15H17V13H15V11M19,19V15H17V19H19M15,3H21V9H15V3M17,5V7H19V5H17M3,3H9V9H3V3M5,5V7H7V5H5M3,15H9V21H3V15M5,17V19H7V17H5Z",mdiQrcodePlus="M5 5H7V7H5V5M1 1H11V11H1V1M3 3V9H9V3H3M5 17H7V19H5V17M1 13H11V23H1V13M3 15V21H9V15H3M13 13H17V15H19V13H23V15H19V17H23V23H19V21H15V23H13V21H15V19H13V13M21 21V19H19V21H21M19 17H17V15H15V19H19V17M17 2V5H14V7H17V10H19V7H22V5H19V2Z",mdiRadioboxBlank="M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",mdiRadioboxMarked="M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z",mdiRecycle="M21.82,15.42L19.32,19.75C18.83,20.61 17.92,21.06 17,21H15V23L12.5,18.5L15,14V16H17.82L15.6,12.15L19.93,9.65L21.73,12.77C22.25,13.54 22.32,14.57 21.82,15.42M9.21,3.06H14.21C15.19,3.06 16.04,3.63 16.45,4.45L17.45,6.19L19.18,5.19L16.54,9.6L11.39,9.69L13.12,8.69L11.71,6.24L9.5,10.09L5.16,7.59L6.96,4.47C7.37,3.64 8.22,3.06 9.21,3.06M5.05,19.76L2.55,15.43C2.06,14.58 2.13,13.56 2.64,12.79L3.64,11.06L1.91,10.06L7.05,10.14L9.7,14.56L7.97,13.56L6.56,16H11V21H7.4C6.47,21.07 5.55,20.61 5.05,19.76Z",mdiRefresh="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",mdiSelect="M4,3H5V5H3V4A1,1 0 0,1 4,3M20,3A1,1 0 0,1 21,4V5H19V3H20M15,5V3H17V5H15M11,5V3H13V5H11M7,5V3H9V5H7M21,20A1,1 0 0,1 20,21H19V19H21V20M15,21V19H17V21H15M11,21V19H13V21H11M7,21V19H9V21H7M4,21A1,1 0 0,1 3,20V19H5V21H4M3,15H5V17H3V15M21,15V17H19V15H21M3,11H5V13H3V11M21,11V13H19V11H21M3,7H5V9H3V7M21,7V9H19V7H21Z",mdiSend="M2,21L23,12L2,3V10L17,12L2,14V21Z",mdiShare="M21,12L14,5V9C7,10 4,15 3,20C5.5,16.5 9,14.9 14,14.9V19L21,12Z",mdiSmartCard="M2 3H22A2.07 2.07 0 0 1 24 5V19A2.07 2.07 0 0 1 22 21H2A2.07 2.07 0 0 1 0 19V5A2.07 2.07 0 0 1 2 3M8 13.91C6 13.91 2 15 2 17V18H14V17C14 15 10 13.91 8 13.91M8 6A3 3 0 1 0 11 9A3 3 0 0 0 8 6M17 10V13H21V10H17",mdiSort="M18 21L14 17H17V7H14L18 3L22 7H19V17H22M2 19V17H12V19M2 13V11H9V13M2 7V5H6V7H2Z",mdiSquareEditOutline="M5,3C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19H5V5H12V3H5M17.78,4C17.61,4 17.43,4.07 17.3,4.2L16.08,5.41L18.58,7.91L19.8,6.7C20.06,6.44 20.06,6 19.8,5.75L18.25,4.2C18.12,4.07 17.95,4 17.78,4M15.37,6.12L8,13.5V16H10.5L17.87,8.62L15.37,6.12Z",mdiStar="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z",mdiSwapHorizontal="M21,9L17,5V8H10V10H17V13M7,11L3,15L7,19V16H14V14H7V11Z",mdiTag="M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M21.41,11.58L12.41,2.58C12.05,2.22 11.55,2 11,2H4C2.89,2 2,2.89 2,4V11C2,11.55 2.22,12.05 2.59,12.41L11.58,21.41C11.95,21.77 12.45,22 13,22C13.55,22 14.05,21.77 14.41,21.41L21.41,14.41C21.78,14.05 22,13.55 22,13C22,12.44 21.77,11.94 21.41,11.58Z",mdiText="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z",mdiTextBoxOutline="M5,3C3.89,3 3,3.89 3,5V19C3,20.11 3.89,21 5,21H19C20.11,21 21,20.11 21,19V5C21,3.89 20.11,3 19,3H5M5,5H19V19H5V5M7,7V9H17V7H7M7,11V13H17V11H7M7,15V17H14V15H7Z",mdiTimer="M19.03 7.39L20.45 5.97C20 5.46 19.55 5 19.04 4.56L17.62 6C16.07 4.74 14.12 4 12 4C7.03 4 3 8.03 3 13S7.03 22 12 22C17 22 21 17.97 21 13C21 10.88 20.26 8.93 19.03 7.39M13 14H11V7H13V14M15 1H9V3H15V1Z",mdiTranslate="M12.87,15.07L10.33,12.56L10.36,12.53C12.1,10.59 13.34,8.36 14.07,6H17V4H10V2H8V4H1V6H12.17C11.5,7.92 10.44,9.75 9,11.35C8.07,10.32 7.3,9.19 6.69,8H4.69C5.42,9.63 6.42,11.17 7.67,12.56L2.58,17.58L4,19L9,14L12.11,17.11L12.87,15.07M18.5,10H16.5L12,22H14L15.12,19H19.87L21,22H23L18.5,10M15.88,17L17.5,12.67L19.12,17H15.88Z",mdiTwitter="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z",mdiUnfoldMoreHorizontal="M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z",mdiUpload="M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z",mdiVideo="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z",mdiWeb="M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",mdiWhatsapp="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.36 3.45 16.86L2.05 22L7.3 20.62C8.75 21.41 10.38 21.83 12.04 21.83C17.5 21.83 21.95 17.38 21.95 11.92C21.95 9.27 20.92 6.78 19.05 4.91C17.18 3.03 14.69 2 12.04 2M12.05 3.67C14.25 3.67 16.31 4.53 17.87 6.09C19.42 7.65 20.28 9.72 20.28 11.92C20.28 16.46 16.58 20.15 12.04 20.15C10.56 20.15 9.11 19.76 7.85 19L7.55 18.83L4.43 19.65L5.26 16.61L5.06 16.29C4.24 15 3.8 13.47 3.8 11.91C3.81 7.37 7.5 3.67 12.05 3.67M8.53 7.33C8.37 7.33 8.1 7.39 7.87 7.64C7.65 7.89 7 8.5 7 9.71C7 10.93 7.89 12.1 8 12.27C8.14 12.44 9.76 14.94 12.25 16C12.84 16.27 13.3 16.42 13.66 16.53C14.25 16.72 14.79 16.69 15.22 16.63C15.7 16.56 16.68 16.03 16.89 15.45C17.1 14.87 17.1 14.38 17.04 14.27C16.97 14.17 16.81 14.11 16.56 14C16.31 13.86 15.09 13.26 14.87 13.18C14.64 13.1 14.5 13.06 14.31 13.3C14.15 13.55 13.67 14.11 13.53 14.27C13.38 14.44 13.24 14.46 13 14.34C12.74 14.21 11.94 13.95 11 13.11C10.26 12.45 9.77 11.64 9.62 11.39C9.5 11.15 9.61 11 9.73 10.89C9.84 10.78 10 10.6 10.1 10.45C10.23 10.31 10.27 10.2 10.35 10.04C10.43 9.87 10.39 9.73 10.33 9.61C10.27 9.5 9.77 8.26 9.56 7.77C9.36 7.29 9.16 7.35 9 7.34C8.86 7.34 8.7 7.33 8.53 7.33Z",mdiWifi="M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z";class BrandUrl{static base="aHR0cHM6Ly9xdWlja2NvZGUuZGlnaXRhbA==";static url(w){return w[0]!="/"&&(w="/"+w),window.atob(this.base)+w}static pricingUrl(){return this.url("/pricing")}}class QrcgBuyToolbar extends i$1{static instances=[];static styles=[i$3`
            :host {
                display: flex;
                padding: 0.8rem 1rem;
                background-color: black;
                color: white;
                align-items: center;
                font-size: 0.8rem;
            }

            :host(.hide) {
                display: none;
            }

            .button {
                display: block;
                background-color: white;
                color: black;
                padding: 0.25rem 0.5rem;
                border-radius: 0.2rem;
                text-decoration: none;
                user-select: none;
                -webkit-user-select: none;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
                animation: buy-animation 1s cubic-bezier(0.215, 0.61, 0.355, 1)
                    infinite alternate both;

                text-transform: uppercase;
                margin: 0 0.5rem;
            }

            @keyframes buy-animation {
                from {
                    opacity: 0.1;
                }

                to {
                    opacity: 1;
                }
            }

            .button:hover,
            .button:focus {
                background-color: var(--primary-0);
                color: white;
                animation: none;
            }

            .link {
                color: white;
                text-decoration: none;
                margin-right: 1rem;
                display: flex;
                align-items: center;
            }

            .link:hover {
                text-decoration: underline;
            }

            .link {
                display: none;
            }

            @media (min-width: 800px) {
                .link {
                    display: flex;
                }
            }

            @media (min-width: 900px) and (max-width: 1100px) {
                .link:last-child {
                    display: none;
                }
            }

            qrcg-icon {
                margin-right: 0.5rem;
            }

            .center-cta {
                display: flex;
                align-items: center;
                margin: 0 auto;
            }

            .center-cta-text {
                text-transform: uppercase;
            }

            @media (max-width: 900px) {
                .center-cta {
                    margin: 0 0 0 auto;
                }
                .center-cta-text {
                    display: none;
                }
            }

            .actions {
                display: flex;
                align-items: center;
            }

            .discount {
                text-transform: uppercase;
                letter-spacing: 1px;
                display: none;
                text-align: center;
                margin-right: 1rem;
            }

            @media (min-width: 900px) {
                .discount {
                    display: block;
                }
            }

            .date {
                font-weight: bold;
            }
        `];constructor(){super(),this.constructor.shouldShow()||this.classList.add("hide")}static shouldShow(){return Config.get("app.env")=="demo"&&!this.isPieceXDemo()}static isPieceXDemo(){return!isEmpty(localStorage.is_piecex_demo)}connectedCallback(){super.connectedCallback(),this.constructor.instances.push(this)}disconnectedCallback(){super.disconnectedCallback(),this.constructor.instances=this.constructor.instances.filter(w=>w!=this)}static get toolbarHeight(){return!this.shouldShow()||!this.instances[0]?0:this.instances[0].clientHeight}renderLinks(){return x`
            <a
                class="link"
                href="https://trello.com/b/qblhQglC/quick-code-roadmap-https-quickcodedigital"
                target="_blank"
            >
                <qrcg-icon mdi-icon=${mdiHelpCircle}></qrcg-icon>
                Roadmap
            </a>
            <a
                class="link"
                href="https://quickcodesupport.atlassian.net/servicedesk/customer/portal/3?envato_item_id=37713672"
                target="_blank"
            >
                <qrcg-icon mdi-icon=${mdiLifebuoy}></qrcg-icon>
                Customer Support
            </a>
        `}render(){return x`
            <div>Quick Code - QR Code Generator</div>

            <!-- this.renderDiscountMessage() -->

            <div class="center-cta">
                <div class="center-cta-text">
                    Extended license is available for just $150
                </div>
                <a class="button" href="${BrandUrl.pricingUrl()}"> Buy now </a>
            </div>

            <div class="actions">${this.renderLinks()}</div>
        `}}window.defineCustomElement("qrcg-buy-toolbar",QrcgBuyToolbar);class QrcgAnimatedBadge extends i$1{static styles=[i$3`
            :host {
                display: block;
                animation: badge-animation 1s ease-in-out alternate infinite
                    both;

                font-size: 0.5rem;
                background-color: var(--danger-0);
                color: white;
                padding: 0.25rem;
                border-radius: 0.25rem;
                font-weight: bold;
                display: flex;
                align-items: center;
                justify-content: center;
                letter-spacing: 1px;
            }

            @keyframes badge-animation {
                from {
                    opacity: 0.5;
                }

                to {
                    opacity: 1;
                }
            }
        `];render(){return x` <slot></slot> `}}window.defineCustomElement("qrcg-animated-badge",QrcgAnimatedBadge);const t$2={ATTRIBUTE:1,CHILD:2},e$2=F=>(...w)=>({_$litDirective$:F,values:w});class i{constructor(w){}get _$AU(){return this._$AM._$AU}_$AT(w,q,D){this._$Ct=w,this._$AM=q,this._$Ci=D}_$AS(w,q){return this.update(w,q)}update(w,q){return this.render(...q)}}const e$1=e$2(class extends i{constructor(F){if(super(F),F.type!==t$2.ATTRIBUTE||F.name!=="class"||F.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(F){return" "+Object.keys(F).filter((w=>F[w])).join(" ")+" "}update(F,[w]){if(this.st===void 0){this.st=new Set,F.strings!==void 0&&(this.nt=new Set(F.strings.join(" ").split(/\s/).filter((D=>D!==""))));for(const D in w)w[D]&&!this.nt?.has(D)&&this.st.add(D);return this.render(w)}const q=F.element.classList;for(const D of this.st)D in w||(q.remove(D),this.st.delete(D));for(const D in w){const Q=!!w[D];Q===this.st.has(D)||this.nt?.has(D)||(Q?(q.add(D),this.st.add(D)):(q.remove(D),this.st.delete(D)))}return T}});class CustomStyleInjector{constructor(w){this.host=w,this.host.addController(this)}hostConnected(){this.injectStyles()}injectStyles=()=>{if(!this.host)return;const w=Array.from(document.querySelectorAll(`.${this.host.tagName.toLowerCase()}-custom-style`));if(!isEmpty(w))for(const q of w){const D=new CSSStyleSheet;D.replaceSync(q.innerHTML),this.host.shadowRoot.adoptedStyleSheets=[...this.host.shadowRoot.adoptedStyleSheets,D]}};hostDisconnected(){this.host=null}}const WHATSAPP=`<svg viewBox="0 0 24 24">
<path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.36 3.45 16.86L2.05 22L7.3 20.62C8.75 21.41 10.38 21.83 12.04 21.83C17.5 21.83 21.95 17.38 21.95 11.92C21.95 9.27 20.92 6.78 19.05 4.91C17.18 3.03 14.69 2 12.04 2M12.05 3.67C14.25 3.67 16.31 4.53 17.87 6.09C19.42 7.65 20.28 9.72 20.28 11.92C20.28 16.46 16.58 20.15 12.04 20.15C10.56 20.15 9.11 19.76 7.85 19L7.55 18.83L4.43 19.65L5.26 16.61L5.06 16.29C4.24 15 3.8 13.47 3.8 11.91C3.81 7.37 7.5 3.67 12.05 3.67M8.53 7.33C8.37 7.33 8.1 7.39 7.87 7.64C7.65 7.89 7 8.5 7 9.71C7 10.93 7.89 12.1 8 12.27C8.14 12.44 9.76 14.94 12.25 16C12.84 16.27 13.3 16.42 13.66 16.53C14.25 16.72 14.79 16.69 15.22 16.63C15.7 16.56 16.68 16.03 16.89 15.45C17.1 14.87 17.1 14.38 17.04 14.27C16.97 14.17 16.81 14.11 16.56 14C16.31 13.86 15.09 13.26 14.87 13.18C14.64 13.1 14.5 13.06 14.31 13.3C14.15 13.55 13.67 14.11 13.53 14.27C13.38 14.44 13.24 14.46 13 14.34C12.74 14.21 11.94 13.95 11 13.11C10.26 12.45 9.77 11.64 9.62 11.39C9.5 11.15 9.61 11 9.73 10.89C9.84 10.78 10 10.6 10.1 10.45C10.23 10.31 10.27 10.2 10.35 10.04C10.43 9.87 10.39 9.73 10.33 9.61C10.27 9.5 9.77 8.26 9.56 7.77C9.36 7.29 9.16 7.35 9 7.34C8.86 7.34 8.7 7.33 8.53 7.33Z" />
</svg>`,WIFI=`<svg viewBox="0 0 24 24">
<path d="M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z" />
</svg>`,ZOOM=`<svg viewBox="0 0 24 24">
<path d="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z" />
</svg>`,VCARD=`<svg viewBox="0 0 24 24">
<path d="M22,3H2C0.91,3.04 0.04,3.91 0,5V19C0.04,20.09 0.91,20.96 2,21H22C23.09,20.96 23.96,20.09 24,19V5C23.96,3.91 23.09,3.04 22,3M22,19H2V5H22V19M14,17V15.75C14,14.09 10.66,13.25 9,13.25C7.34,13.25 4,14.09 4,15.75V17H14M9,7A2.5,2.5 0 0,0 6.5,9.5A2.5,2.5 0 0,0 9,12A2.5,2.5 0 0,0 11.5,9.5A2.5,2.5 0 0,0 9,7M14,7V8H20V7H14M14,9V10H20V9H14M14,11V12H18V11H14" />
</svg>`,URL_ICON=`<svg viewBox="0 0 24 24">
<path d="M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
</svg>`,VIBER=`<svg viewBox="0 0 50 50">
<path d="M 24.425781 3 C 23.0625 3.007813 21.695313 3.089844 20.316406 3.257813 C 17.679688 3.582031 15.066406 4.121094 12.558594 5.273438 C 8.570313 7.105469 5.742188 10.214844 4.921875 14.734375 C 4.574219 16.640625 4.292969 18.574219 4.132813 20.519531 C 3.824219 24.296875 4.015625 28.085938 5.085938 31.808594 C 5.929688 34.742188 7.484375 37.378906 10.207031 39.089844 C 11.359375 39.8125 12.878906 40.164063 13.671875 40.53125 C 13.894531 40.636719 13.949219 40.699219 13.960938 40.714844 C 13.972656 40.726563 14.003906 40.753906 14 40.988281 C 13.972656 43.378906 14 48.003906 14 48.003906 L 14.003906 49 L 15.789063 49 L 16.078125 48.71875 C 16.078125 48.71875 20.613281 44.355469 22.253906 42.558594 C 22.550781 42.238281 22.703125 42.058594 22.734375 42.039063 C 22.761719 42.019531 22.714844 42.007813 23.019531 42 C 25.171875 41.957031 27.320313 41.875 29.46875 41.757813 C 32.300781 41.601563 35.1875 41.332031 37.964844 40.171875 C 40.382813 39.160156 42.402344 37.507813 43.625 35.03125 C 44.875 32.492188 45.542969 29.800781 45.792969 27.015625 C 46.207031 22.378906 46.0625 17.734375 44.78125 13.15625 C 44.027344 10.472656 42.511719 8.203125 40.1875 6.601563 C 37.40625 4.6875 34.269531 3.96875 31.199219 3.511719 C 29.40625 3.246094 27.601563 3.070313 25.789063 3.015625 C 25.335938 3.003906 24.882813 2.996094 24.425781 3 Z M 25.734375 5.015625 C 27.457031 5.0625 29.179688 5.230469 30.90625 5.488281 C 33.867188 5.929688 36.660156 6.601563 39.054688 8.25 C 40.996094 9.585938 42.207031 11.390625 42.855469 13.691406 C 44.050781 17.972656 44.203125 22.359375 43.800781 26.839844 C 43.570313 29.421875 42.957031 31.855469 41.828125 34.148438 C 40.832031 36.171875 39.277344 37.457031 37.191406 38.328125 C 34.769531 39.339844 32.136719 39.609375 29.363281 39.761719 C 27.238281 39.878906 25.109375 39.957031 22.980469 40 C 22.445313 40.011719 21.921875 40.152344 21.550781 40.425781 C 21.179688 40.699219 21.011719 40.953125 20.78125 41.203125 C 19.609375 42.484375 17.273438 44.738281 16 45.972656 C 15.992188 44.480469 15.980469 42.675781 16 41.011719 C 16.007813 40.5 15.890625 39.976563 15.597656 39.5625 C 15.304688 39.148438 14.902344 38.898438 14.515625 38.71875 C 13.386719 38.195313 11.910156 37.796875 11.269531 37.394531 C 9.03125 35.988281 7.761719 33.878906 7.007813 31.253906 C 6.019531 27.820313 5.832031 24.285156 6.125 20.6875 C 6.28125 18.820313 6.550781 16.949219 6.890625 15.09375 C 7.601563 11.183594 9.835938 8.722656 13.390625 7.089844 C 15.636719 6.058594 18.035156 5.550781 20.5625 5.242188 C 22.285156 5.03125 24.007813 4.964844 25.734375 5.015625 Z M 26.15625 10 C 25.332031 10 24.53125 10.09375 23.753906 10.265625 C 23.21875 10.390625 22.878906 10.925781 23 11.464844 C 23.121094 12.003906 23.660156 12.339844 24.199219 12.21875 C 24.828125 12.074219 25.484375 12 26.15625 12 C 31.039063 12 34.976563 15.9375 34.976563 20.816406 C 34.976563 21.492188 34.902344 22.148438 34.757813 22.78125 C 34.636719 23.316406 34.972656 23.855469 35.511719 23.976563 C 36.050781 24.097656 36.585938 23.757813 36.707031 23.21875 C 36.882813 22.445313 36.976563 21.644531 36.976563 20.816406 C 36.976563 14.855469 32.121094 10 26.15625 10 Z M 16.179688 12.003906 C 16.015625 11.996094 15.847656 12.007813 15.671875 12.046875 C 13.855469 12.449219 12.050781 13.765625 12 16.117188 C 12.050781 16.445313 12.046875 16.796875 12.167969 17.09375 C 12.761719 18.546875 13.277344 20.046875 14.019531 21.421875 C 17.632813 28.101563 23.097656 32.746094 30.0625 35.695313 C 30.894531 36.046875 31.753906 36.121094 32.59375 35.769531 C 33.75 35.289063 34.730469 34.546875 35.382813 33.480469 C 36.277344 32.015625 36.289063 31 34.816406 29.917969 C 33.851563 29.207031 32.902344 28.476563 31.925781 27.78125 C 30.4375 26.726563 28.828125 26.542969 27.71875 28.394531 C 27.660156 28.488281 27.574219 28.566406 27.5 28.644531 C 26.929688 29.25 26.230469 29.398438 25.488281 29.09375 C 22.671875 27.933594 20.496094 26.0625 19.183594 23.277344 C 18.410156 21.640625 18.621094 20.820313 20.066406 19.730469 C 20.210938 19.625 20.347656 19.511719 20.480469 19.390625 C 21.113281 18.8125 21.28125 18.125 20.90625 17.347656 C 20.058594 15.574219 18.929688 13.992188 17.5 12.628906 C 17.113281 12.261719 16.671875 12.03125 16.179688 12.003906 Z M 26.140625 13 C 25.699219 13 25.261719 13.035156 24.832031 13.109375 C 24.46875 13.15625 24.160156 13.398438 24.027344 13.738281 C 23.894531 14.082031 23.960938 14.46875 24.195313 14.75 C 24.433594 15.027344 24.808594 15.15625 25.167969 15.078125 C 25.480469 15.027344 25.808594 15 26.140625 15 C 29.390625 15 32 17.609375 32 20.859375 C 32 21.191406 31.972656 21.519531 31.921875 21.832031 C 31.84375 22.191406 31.972656 22.566406 32.25 22.804688 C 32.53125 23.039063 32.917969 23.105469 33.261719 22.972656 C 33.601563 22.839844 33.84375 22.53125 33.890625 22.167969 C 33.964844 21.738281 34 21.300781 34 20.859375 C 34 16.53125 30.46875 13 26.140625 13 Z M 26 16 C 25.640625 15.996094 25.304688 16.183594 25.121094 16.496094 C 24.941406 16.808594 24.941406 17.191406 25.121094 17.503906 C 25.304688 17.816406 25.640625 18.003906 26 18 C 27.667969 18 29 19.332031 29 21 C 28.996094 21.359375 29.183594 21.695313 29.496094 21.878906 C 29.808594 22.058594 30.191406 22.058594 30.503906 21.878906 C 30.816406 21.695313 31.003906 21.359375 31 21 C 31 18.25 28.75 16 26 16 Z"></path>
</svg>`,CALL=`<svg viewBox="0 0 24 24">
<path d="M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z" />
</svg>

`,CRYPTO=`<svg viewBox="0 0 24 24">
<path d="M14.24 10.56C13.93 11.8 12 11.17 11.4 11L11.95 8.82C12.57 9 14.56 9.26 14.24 10.56M11.13 12.12L10.53 14.53C11.27 14.72 13.56 15.45 13.9 14.09C14.26 12.67 11.87 12.3 11.13 12.12M21.7 14.42C20.36 19.78 14.94 23.04 9.58 21.7C4.22 20.36 .963 14.94 2.3 9.58C3.64 4.22 9.06 .964 14.42 2.3C19.77 3.64 23.03 9.06 21.7 14.42M14.21 8.05L14.66 6.25L13.56 6L13.12 7.73C12.83 7.66 12.54 7.59 12.24 7.53L12.68 5.76L11.59 5.5L11.14 7.29C10.9 7.23 10.66 7.18 10.44 7.12L10.44 7.12L8.93 6.74L8.63 7.91C8.63 7.91 9.45 8.1 9.43 8.11C9.88 8.22 9.96 8.5 9.94 8.75L8.71 13.68C8.66 13.82 8.5 14 8.21 13.95C8.22 13.96 7.41 13.75 7.41 13.75L6.87 15L8.29 15.36C8.56 15.43 8.82 15.5 9.08 15.56L8.62 17.38L9.72 17.66L10.17 15.85C10.47 15.93 10.76 16 11.04 16.08L10.59 17.87L11.69 18.15L12.15 16.33C14 16.68 15.42 16.54 16 14.85C16.5 13.5 16 12.7 15 12.19C15.72 12 16.26 11.55 16.41 10.57C16.61 9.24 15.59 8.53 14.21 8.05Z" />
</svg>

`,EMAIL=`<svg viewBox="0 0 24 24">
<path d="M22 5.5H9C7.9 5.5 7 6.4 7 7.5V16.5C7 17.61 7.9 18.5 9 18.5H22C23.11 18.5 24 17.61 24 16.5V7.5C24 6.4 23.11 5.5 22 5.5M22 16.5H9V9.17L15.5 12.5L22 9.17V16.5M15.5 10.81L9 7.5H22L15.5 10.81M5 16.5C5 16.67 5.03 16.83 5.05 17H1C.448 17 0 16.55 0 16S.448 15 1 15H5V16.5M3 7H5.05C5.03 7.17 5 7.33 5 7.5V9H3C2.45 9 2 8.55 2 8S2.45 7 3 7M1 12C1 11.45 1.45 11 2 11H5V13H2C1.45 13 1 12.55 1 12Z" />
</svg>`,PAYPAL=`<svg viewBox="0 0 50 50">
<path d="M 11.40625 2 C 10.40625 2 9.511719 2.6875 9.3125 3.6875 C 9.3125 3.6875 3.414063 30.695313 2.3125 36.09375 C 2.113281 37.195313 2.386719 37.789063 2.6875 38.1875 C 3.085938 38.6875 3.699219 39 4.5 39 L 12 39 L 17.90625 11.8125 C 18.105469 10.8125 19.011719 9 21.8125 9 L 38 9 C 36.601563 4.398438 32.105469 2 27.90625 2 Z M 22 11.09375 L 20.40625 11.40625 C 20.105469 11.605469 19.914063 12.011719 19.8125 12.3125 L 17.40625 23.5 C 18.105469 23.199219 18.792969 23.09375 19.59375 23.09375 L 26.8125 23.09375 C 33.210938 23.09375 36.800781 20.507813 38 14.90625 C 38.199219 13.90625 38.3125 13.113281 38.3125 12.3125 L 38.1875 11.1875 L 38.1875 11.09375 Z M 40.09375 11.3125 L 40.1875 12 C 40.289063 13 40.105469 13.894531 39.90625 15.09375 C 38.507813 21.59375 33.988281 24.90625 26.6875 24.90625 L 19.5 24.90625 C 17.898438 24.90625 16.800781 25.605469 16.5 26.90625 C 16.101563 28.707031 12.601563 45.199219 12.5 45.5 C 12.398438 46 12.507813 46.6875 12.90625 47.1875 C 13.207031 47.585938 13.6875 48 14.6875 48 L 22.6875 48 C 23.6875 48 24.613281 47.289063 24.8125 46.1875 C 25.710938 42.386719 26.898438 36.613281 27 36.3125 C 27 36.210938 27.09375 36 27.09375 36 L 32.40625 36 C 40.207031 36 46.101563 31.3125 47.5 23.8125 C 48.5 19.210938 47.207031 16.289063 45.90625 14.6875 C 44.105469 12.386719 40.792969 11.3125 40.09375 11.3125 Z"></path>
</svg>`,EVENT_ICON=`<svg viewBox="0 0 24 24">
<path d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z" />
</svg> 
`,SMS=`<svg viewBox="0 0 24 24">
<path d="M20,2A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H6L2,22V4C2,2.89 2.9,2 4,2H20M4,4V17.17L5.17,16H20V4H4M6,7H18V9H6V7M6,11H15V13H6V11Z" />
</svg> 

`,TELEGRAM=`<svg width="27px" height="27px" viewBox="0 0 27 27">
<path d="M13.5,0.19C6.14,0.19,0.18,6.15,0.18,13.5c0,7.35,5.96,13.31,13.32,13.31c7.36,0,13.32-5.96,13.32-13.31
	C26.82,6.15,20.86,0.19,13.5,0.19z M20.25,8.51l-2.33,10.95c-0.16,0.78-0.63,0.97-1.28,0.61L10.93,15.85l6.57-5.93
	c0.29-0.26-0.06-0.38-0.45-0.15l-8.11,5.12l-3.5-1.1c-0.76-0.23-0.76-0.75,0.17-1.12L19.26,7.4C19.88,7.12,20.49,7.55,20.25,8.51z"
	/>
</svg>`,LOCATION_ICON=`<svg viewBox="0 0 24 24">
<path d="M12,2C15.31,2 18,4.66 18,7.95C18,12.41 12,19 12,19C12,19 6,12.41 6,7.95C6,4.66 8.69,2 12,2M12,6A2,2 0 0,0 10,8A2,2 0 0,0 12,10A2,2 0 0,0 14,8A2,2 0 0,0 12,6M20,19C20,21.21 16.42,23 12,23C7.58,23 4,21.21 4,19C4,17.71 5.22,16.56 7.11,15.83L7.75,16.74C6.67,17.19 6,17.81 6,18.5C6,19.88 8.69,21 12,21C15.31,21 18,19.88 18,18.5C18,17.81 17.33,17.19 16.25,16.74L16.89,15.83C18.78,16.56 20,17.71 20,19Z" />
</svg> 
`,FACETIME=`<svg viewBox="0 0 27 27">
<path d="M19.689,3.38H7.31c-2.19,0-3.93,1.74-3.93,3.93v12.379c0,2.189,1.74,3.931,3.93,3.931h12.379
	c2.189,0,3.931-1.74,3.931-3.931V7.31C23.62,5.12,21.88,3.38,19.689,3.38z M20.811,16.82c0,0.619-0.729,0.959-1.229,0.56
	l-1.97-1.739c-0.12-0.109-0.17-0.279-0.17-0.449v-3.38c0-0.17,0.05-0.33,0.17-0.39l1.97-1.75c0.45-0.39,1.229-0.11,1.229,0.57V16.82
	z M16.311,16.029c0,1.07-0.899,1.971-1.971,1.971H8.16c-1.07,0-1.97-0.9-1.97-1.971V10.97C6.19,9.9,7.09,9,8.16,9h6.18
	c1.07,0,1.971,0.9,1.971,1.97V16.029z"/>
</svg>`,FACEBOOK_MESSENGER=`<svg viewBox="0 0 24 24">
<path d="M12,2C6.36,2 2,6.13 2,11.7C2,14.61 3.19,17.14 5.14,18.87C5.3,19 5.4,19.22 5.41,19.44L5.46,21.22C5.5,21.79 6.07,22.16 6.59,21.93L8.57,21.06C8.74,21 8.93,20.97 9.1,21C10,21.27 11,21.4 12,21.4C17.64,21.4 22,17.27 22,11.7C22,6.13 17.64,2 12,2M18,9.46L15.07,14.13C14.6,14.86 13.6,15.05 12.9,14.5L10.56,12.77C10.35,12.61 10.05,12.61 9.84,12.77L6.68,15.17C6.26,15.5 5.71,15 6,14.54L8.93,9.87C9.4,9.14 10.4,8.95 11.1,9.47L13.44,11.23C13.66,11.39 13.95,11.39 14.16,11.23L17.32,8.83C17.74,8.5 18.29,9 18,9.46Z" />
</svg> 
`,TEXT=`<svg viewBox="0 0 24 24">
<path d="M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C7.22,12.88 7.22,9.71 9.17,7.76V7.76L12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.59,9.17C9.41,10.34 9.41,12.24 10.59,13.41M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.78,11.12 16.78,14.29 14.83,16.24V16.24L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L13.41,14.83C14.59,13.66 14.59,11.76 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z" />
</svg>`,BRAZILPIX=`<svg width="25.746px" height="27px" viewBox="0 0 25.746 27">
<path d="M19.589,19.86c-0.941,0-1.826-0.367-2.492-1.032l-3.601-3.601c-0.252-0.254-0.693-0.252-0.946,0
	l-3.613,3.613c-0.666,0.666-1.552,1.032-2.493,1.032H5.735l4.559,4.56c1.424,1.424,3.732,1.424,5.156,0l4.572-4.572H19.589z
	 M6.444,7.126c0.942,0,1.828,0.367,2.493,1.033l3.613,3.613c0.26,0.26,0.685,0.262,0.946,0l3.601-3.601
	c0.665-0.665,1.551-1.032,2.492-1.032h0.434l-4.572-4.572c-1.424-1.424-3.732-1.424-5.156,0L5.735,7.126H6.444z M23.805,10.921
	l-2.763-2.762c-0.061,0.023-0.127,0.039-0.196,0.039h-1.257c-0.648,0-1.285,0.264-1.744,0.723l-3.6,3.6
	c-0.337,0.337-0.779,0.506-1.222,0.506s-0.885-0.169-1.222-0.506L8.189,8.907C7.73,8.448,7.094,8.185,6.445,8.185H4.9
	c-0.066,0-0.127-0.016-0.186-0.037L1.94,10.921c-1.424,1.425-1.424,3.732,0,5.157l2.774,2.774c0.058-0.022,0.12-0.038,0.186-0.038
	h1.545c0.649,0,1.285-0.263,1.744-0.723l3.613-3.612c0.653-0.653,1.792-0.653,2.444,0l3.6,3.6c0.459,0.459,1.096,0.723,1.744,0.723
	h1.257c0.069,0,0.136,0.015,0.196,0.039l2.763-2.763C25.229,14.653,25.229,12.346,23.805,10.921"/>
</svg>`,BLANK_SVG=`<svg data-name="Layer 1" version="1.1" viewBox="0 0 724.52 348.5" xmlns="http://www.w3.org/2000/svg"><path d="m330.69 176h-330.69v-176h330.69z" fill="#fff"/>
<rect x="1.1839" y="1.1839" width="329.11" height="41.83" fill="#e4e4e4"/>
<path d="m330.69 176h-330.69v-176h330.69zm-328.32-2.3677h325.96v-171.26h-325.96z" fill="#cacaca"/>
<path d="m149.19 77.905c-1.5635 5e-3 -2.8285 2.0354-2.8254 4.535 3e-3 2.4927 1.2663 4.5122 2.8254 4.5171h133.47c1.5635-5e-3 2.8285-2.0354 2.8254-4.535-3e-3 -2.4927-1.2663-4.5122-2.8254-4.5171z" fill="#e4e4e4" data-name="Path 155"/>
<path d="m149.19 104.13c-1.5635 5e-3 -2.8285 2.0354-2.8254 4.535 3e-3 2.4927 1.2663 4.5122 2.8254 4.5171h133.47c1.5635-5e-3 2.8285-2.0354 2.8254-4.535-3e-3 -2.4927-1.2663-4.5122-2.8254-4.5171z" fill="#e4e4e4" data-name="Path 156"/>
<path d="m149.19 130.04c-1.5635 5e-3 -2.8285 2.0354-2.8254 4.535 3e-3 2.4927 1.2663 4.5122 2.8254 4.5171h57.433c1.5635-5e-3 2.8285-2.0354 2.8254-4.535-3e-3 -2.4927-1.2663-4.5122-2.8254-4.5171z" fill="#e4e4e4" data-name="Path 157"/>
<circle cx="81.422" cy="108.16" r="36.219" fill="#e4e4e4"/>
<path d="m724.52 176h-330.69v-176h330.69z" fill="#fff"/>
<rect x="395.01" y="1.1839" width="329.11" height="41.83" fill="#e4e4e4"/>
<path d="m724.52 176h-330.69v-176h330.69zm-328.32-2.3677h325.96v-171.26h-325.96z" fill="#cacaca"/>
<path d="m543.02 77.905c-1.5635 5e-3 -2.8285 2.0354-2.8254 4.535 3e-3 2.4927 1.2663 4.5122 2.8254 4.5171h133.47c1.5635-5e-3 2.8285-2.0354 2.8254-4.535-3e-3 -2.4927-1.2663-4.5122-2.8254-4.5171z" fill="#e4e4e4" data-name="Path 155"/>
<path d="m543.02 104.13c-1.5635 5e-3 -2.8285 2.0354-2.8254 4.535 3e-3 2.4927 1.2663 4.5122 2.8254 4.5171h133.47c1.5635-5e-3 2.8285-2.0354 2.8254-4.535-3e-3 -2.4927-1.2663-4.5122-2.8254-4.5171z" fill="#e4e4e4" data-name="Path 156"/>
<path d="m543.02 130.04c-1.5635 5e-3 -2.8285 2.0354-2.8254 4.535 3e-3 2.4927 1.2663 4.5122 2.8254 4.5171h57.433c1.5635-5e-3 2.8285-2.0354 2.8254-4.535-3e-3 -2.4927-1.2663-4.5122-2.8254-4.5171z" fill="#e4e4e4" data-name="Path 157"/>
<circle cx="475.25" cy="108.16" r="36.219" fill="#e4e4e4"/>
<path d="m571.76 348.5h-419v-223h419z" fill="#fff"/>
<rect x="154.26" y="127" width="417" height="53" fill="PRIMARY_COLOR"/>
<path d="m571.76 348.5h-419v-223h419zm-416-3h413v-217h-413z" fill="#3f3d56"/>
<path d="m341.79 224.21c-1.981 6e-3 -3.5838 2.5789-3.5799 5.7461 4e-3 3.1584 1.6044 5.7172 3.5799 5.7234h169.11c1.981-6e-3 3.5838-2.5789 3.5799-5.7461-4e-3 -3.1584-1.6044-5.7172-3.5799-5.7234z" fill="#e4e4e4" data-name="Path 155"/>
<path d="m341.79 257.44c-1.981 6e-3 -3.5838 2.5789-3.5799 5.7461 4e-3 3.1584 1.6044 5.7172 3.5799 5.7234h169.11c1.981-6e-3 3.5838-2.5789 3.5799-5.7461-4e-3 -3.1584-1.6044-5.7172-3.5799-5.7234z" fill="#e4e4e4" data-name="Path 156"/>
<path d="m341.79 290.27c-1.981 6e-3 -3.5838 2.5789-3.5799 5.7461 4e-3 3.1584 1.6044 5.7172 3.5799 5.7234h72.77c1.981-6e-3 3.5838-2.5789 3.5799-5.7461-4e-3 -3.1584-1.6044-5.7172-3.5799-5.7234z" fill="#e4e4e4" data-name="Path 157"/>
<circle cx="255.93" cy="262.54" r="45.891" fill="#e4e4e4"/>
</svg>`,qrTypes=[{id:"url",name:"Dynamic URL",cat:"dynamic",icon:mdiLinkVariant,svgIcon:URL_ICON},{id:"biolinks",name:"Bio Links (List of Links)",cat:"dynamic",icon:mdiMenu},{id:"business-profile",name:"Business Profile",cat:"dynamic",icon:mdiContacts},{id:"business-review",name:"Business Review",cat:"dynamic",icon:mdiStar},{id:"website-builder",name:"Website Builder",cat:"dynamic",icon:mdiWeb},{id:"vcard-plus",name:"vCard Plus",cat:"dynamic",icon:mdiContacts},{id:"lead-form",name:"Lead Form",cat:"dynamic",icon:mdiMenu},{id:"restaurant-menu",name:"Restaurant Menu",cat:"dynamic",icon:mdiMenu},{id:"product-catalogue",name:"Product Catalogue",cat:"dynamic",icon:mdiMenu},{id:"app-download",name:"App Download",cat:"dynamic",icon:mdiCellphone},{id:"google-review",name:"Google Review",cat:"dynamic",icon:mdiGoogle},{id:"resume",name:"Resume QR Code",cat:"dynamic",icon:mdiFile},{id:"file-upload",name:"File Upload",cat:"dynamic",icon:mdiFileUpload},{id:"event",name:"Event",cat:"dynamic",svgIcon:EVENT_ICON},{id:"text",name:"Static Text / URL",cat:"static",icon:mdiTextBoxOutline,svgIcon:TEXT},{id:"vcard",name:"VCard",cat:"static",icon:mdiSmartCard,svgIcon:VCARD},{id:"email-dynamic",name:"Email (Dynamic)",cat:"dynamic",icon:mdiEmailFastOutline,svgIcon:EMAIL},{id:"email",name:"Email (Static)",cat:"static",icon:mdiEmailFastOutline,svgIcon:EMAIL},{id:"sms",name:"SMS (Static)",cat:"static",icon:mdiMessageProcessing,svgIcon:SMS},{id:"sms-dynamic",name:"SMS (Dynamic)",cat:"dynamic",icon:mdiMessageProcessing,svgIcon:SMS},{id:"call",name:"Call",cat:"static",icon:mdiPhone,svgIcon:CALL},{id:"wifi",name:"WIFI",cat:"static",icon:mdiWifi,svgIcon:WIFI},{id:"whatsapp",name:"WhatsApp",cat:"dynamic",icon:mdiWhatsapp,svgIcon:WHATSAPP},{id:"facetime",name:"FaceTime",cat:"static",icon:mdiCallMade,svgIcon:FACETIME},{id:"location",name:"Location",cat:"static",icon:mdiPin,svgIcon:LOCATION_ICON},{id:"crypto",name:"Crypto",cat:"static",icon:mdiBitcoin,svgIcon:CRYPTO},{id:"paypal",name:"PayPal",cat:"dynamic",icon:mdiContactlessPayment,svgIcon:PAYPAL},{id:"upi",name:"UPI (Static)",cat:"static",icon:mdiContactlessPayment},{id:"upi-dynamic",name:"UPI (Dynamic)",cat:"dynamic",icon:mdiContactlessPayment},{id:"zoom",name:"Zoom",cat:"static",icon:mdiPhone,svgIcon:ZOOM},{id:"brazilpix",name:"Brazillian PIX",cat:"static",icon:mdiContactlessPayment,svgIcon:BRAZILPIX},{id:"telegram",name:"Telegram",cat:"static",icon:mdiMessageProcessing,svgIcon:TELEGRAM},{id:"facebookmessenger",name:"Messenger",cat:"static",icon:mdiMessageProcessing,svgIcon:FACEBOOK_MESSENGER},{id:"viber",name:"Viber Chat",cat:"static",icon:mdiMessageProcessing,svgIcon:VIBER}];function getAvailableQrCodeTypes(){return new QRCodeTypeManager$1().getAvailableQrCodeTypes()}let QRCodeTypeManager$1=class{static filters=[];static registerFilter(w){this.filters.push(w)}getAvailableQrCodeTypes(){const w=Config.get("app.available_qrcode_types");let q=qrTypes;return isArray$1(w)&&!isEmpty(w)&&(q=q.filter(D=>w.find(Q=>Q==D.id))),q=this.executeFilters(q),q=PluginManager.applyFilters(FILTER_QRCODE_TYPES,q),this.sortQrCodeTypes(q)}find(w){return this.getAvailableQrCodeTypes().find(q=>q.id===w)}executeFilters(w){for(const q of this.constructor.filters)w=w.filter(q);return w}sortQrCodeTypes(w){const q=D=>{try{const Q=window.QRCG_QR_TYPES_SORT_ORDER.find(O=>O.slug==D.id).sort_order;return parseNumberValue(Q,200)}catch{return 0}};return w.sort(function(D,Q){return q(D)-q(Q)}),w}getDynamicTypes(){return this.getAvailableQrCodeTypes().filter(q=>q.cat=="dynamic")}getDynamicSlugs(){return this.getDynamicTypes().map(w=>w.id)}isDynamic(w){return!!this.getDynamicTypes().find(q=>q.id===w)}};class Droplet{static boot(){const w=new Droplet;QRCodeTypeManager$1.registerFilter(w.filterQRCTItems)}filterQRCTItems=w=>["YnVzaW5lc3MtcHJvZmlsZQ==","dmNhcmQtcGx1cw==","cmVzdGF1cmFudC1tZW51","cHJvZHVjdC1jYXRhbG9ndWU=","YmlvbGlua3M=","bGVhZC1mb3Jt","cmVzdW1l","ZmlsZS11cGxvYWQ=","YXBwLWRvd25sb2Fk","d2Vic2l0ZS1idWlsZGVy","YnVzaW5lc3MtcmV2aWV3","dXBpLWR5YW5taWM="].find(Q=>w.id==this.bd(Q))?this.isLarge():!0;isLarge(){return Config.get("droplet.is_large",Boolean)}isSmall(){return!this.isLarge()}bd(w){let q="WSSFaOPWIEURXtXFALHQWEROUIoASDFbDSAFCCSS";return q=q.replace(/[A-Z]/g,""),window[q](w)}}Droplet.boot();const style$2n=":host{display:none;padding:.5rem 1rem;text-align:center;font-size:.8rem;background-color:var(--danger);color:#fff;position:relative;margin:-1rem -1.6rem .5rem;border-top-right-radius:2rem;border-top-left-radius:2rem;user-select:none;-webkit-user-select:none;line-height:1.8;animation:notice-in .3s ease-in both;z-index:1}@media(max-width:900px){:host{margin:-1rem 0 0}}:host([visible]){display:block}a{opacity:0;position:absolute;inset:0}@keyframes notice-in{0%{transform:translateY(-2rem);opacity:0}80%{opacity:.4}to{transform:translate(0);opacity:1}}",style$2m=":host{display:block;-webkit-user-select:none;user-select:none;box-sizing:border-box;-webkit-tap-highlight-color:transparent;touch-action:manipulation}*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;touch-action:manipulation}:host([hidden]),[hidden],.hidden{display:none!important}a{color:var(--info-0);text-decoration:none}a:hover{text-decoration:underline}:host(.dir-rtl),:host(.dir-rtl) *{font-family:var(--qrcg-rtl-font-family)}";class BaseComponent extends i$1{static styleSheets=[style$2m];static tag="";static get styles(){return[]}static register(){defineCustomElement(this.tag,this)}static renderSelf(w={}){let q="";return typeof w=="object"&&(q=Object.keys(w).map(D=>{const Q=w[D];return`${D}="${Q}"`}).join(" ")),u$3`${s$3(`<${this.tag} ${q}></${this.tag}>`)}`}static findSelf(w){return w.querySelector(this.tag)}static async injectInDocumentBody(){return await new this().injectInDocumentBody()}async injectInDocumentBody(){for(;!document.body;)await sleep(0);return document.body.appendChild(this),this}connectedCallback(){super.connectedCallback(),this.injectStylesheets()}injectStylesheets(){for(const w of this.constructor.styleSheets)this.injectStyleString(w)}injectStyleString(w){const q=document.createElement("style");q.innerHTML=w,this.shadowRoot.appendChild(q)}waitForTransition(w){return new Promise(q=>{w.addEventListener("transitionend",()=>{q()})})}$(w){return this.shadowRoot.querySelector(w)}$$(w){return Array.from(this.shadowRoot.querySelectorAll(w))}getDirectParent(){return parentMatches(this,"*:not("+this.constructor.tag+")")}}class QrcgDashboardNotice extends BaseComponent{static styleSheets=[...super.styleSheets,style$2n];constructor(){super(),this.apiEvents=[],this.visible=!1,this.onShowRequested=this.onShowRequested.bind(this),this.onHideRequested=this.onHideRequested.bind(this)}static get properties(){return{link:{},message:{},visible:{type:Boolean,reflect:!0}}}connectedCallback(){super.connectedCallback(),this.addApiEvent("request-show",this.onShowRequested),this.addApiEvent("request-hide",this.onHideRequested),this.registerApiEvents()}disconnectedCallback(){super.disconnectedCallback(),this.removeApiEvents()}addApiEvent(w,q){this.apiEvents.push({name:w,cp:q})}registerApiEvents(){for(const{name:w,cp:q}of this.apiEvents)document.addEventListener(this.eventName(w),q)}removeApiEvents(){for(const{name:w,cp:q}of this.apiEvents)document.removeEventListener(this.eventName(w),q)}eventName(w){return this.tagName.toLowerCase()+":"+w}onShowRequested(w){this.visible=!0,this.message=w.detail.message,this.link=w.detail.link}onHideRequested(){this.visible=!1,this.reset()}reset(){this.message="",this.link=null}render(){let w="";return this.link&&(w=x`<a href="${this.link}"></a>`),x`${w}${this.message}`}}window.defineCustomElement("qrcg-dashboard-notice",QrcgDashboardNotice);const showNotice=({message:F,link:w})=>{document.dispatchEvent(new CustomEvent("qrcg-dashboard-notice:request-show",{detail:{message:F,link:w}}))};class QRCGBox extends i$1{static boxShadow=r$2("rgb(0 0 0 / 15%) 0px 0px 3px 0px, rgb(0 0 0 / 5%) 5px 5px 10px 0px");static get styles(){return i$3`
            :host {
                display: block;
                padding: 1rem 2rem;
                border-radius: 0.5rem;
            }

            .container {
                border-radius: 0.5rem;
                overflow: hidden;
            }
        `}render(){return x`
            <div class="container" part="container">
                <slot></slot>
            </div>
        `}}defineCustomElement("qrcg-box",QRCGBox);class QRCGICon extends i$1{static get styles(){return i$3`
            :host {
                display: inline-flex;
                font-size: 0;
                width: 1rem;
                height: 1rem;
                position: relative;
            }

            :host([disabled]) {
                pointer-events: none;
                opacity: 0.1;
            }

            svg {
                width: 100%;
                height: 100%;
                pointer-events: none;
            }

            svg * {
                pointer-events: none;
            }

            path {
                fill: currentColor;
            }
        `}static get properties(){return{mdiIcon:{type:String,attribute:"mdi-icon"},icon:{type:String},disabled:{type:Boolean,reflect:!0}}}constructor(){super()}render(){return isEmpty(this.mdiIcon)?u$3`${s$3(this.icon)}`:b$1`
                <svg
                    viewBox="0 0 24 24"
                >
                    <path fill="currentColor" d=${this.mdiIcon} />
                </svg>
            `}}window.defineCustomElement("qrcg-icon",QRCGICon);class DirectionAwareController{constructor(w){this.host=w,w.addController(this)}hostConnected(){ConfigHelper.dir()&&this.host.classList.add("dir-"+ConfigHelper.dir())}get rtl(){return ConfigHelper.dir()==="rtl"}}const style$2l=":host{display:none;--desktop-max-width: 550px;--qrcg-input-box-shadow: inset 0 0 0 2px var(--gray-1);--qrcg-input-box-shadow-focus: inset 0 0 0 2px var(--gray-2)}:host([opened]){display:flex;position:fixed;inset:0;z-index:999;align-items:center;justify-content:center;padding:1rem;animation:modal-fade-in ease-in .2s both}:host([opened][closing]){animation:modal-fade-out ease-out .2s both}.overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;opacity:.8}.container{position:relative;z-index:1;padding:0;width:100%;background-color:#fff;border-radius:1rem}.loader-container{display:flex;align-items:center;justify-content:center}*:not(qrcg-input,qrcg-textarea){-webkit-user-select:none;user-select:none}a{color:var(--primary-0)}.instructions{padding:.5rem;background-color:var(--gray-0);font-size:.8rem;margin-bottom:.5rem}@media(min-width:500px){.container{max-width:450px}}@media(min-width:1300px){.container{max-width:var(--desktop-max-width)}}.close{color:var(--primary-0);cursor:pointer;width:2rem;height:2rem}@media(min-width:900px){.close{width:1.5rem;height:1.5rem}}.toolbar{display:flex;align-items:center;padding:1rem;justify-content:space-between;border-bottom:1px solid var(--gray-1)}h3{margin:0}.body{padding:1rem;border-bottom:1px solid var(--gray-1);line-height:1.7;max-height:40vh;overflow:auto}.body.restrict-height{max-height:60vh;overflow:auto}.actions{display:flex;padding:1rem;align-items:center;justify-content:flex-end}.actions qrcg-button:last-child{margin-left:1rem}:host(.dir-rtl) .actions qrcg-button:last-child{margin-left:0;margin-right:1rem}@keyframes modal-fade-in{0%{opacity:0;transform:translateY(1%)}to{opacity:1;transform:translateY(0)}}@keyframes modal-fade-out{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(1%)}}";class QrcgModal extends BaseComponent{static styleSheets=[...super.styleSheets,style$2l];static get properties(){return{...super.properties,title:{},modalRootId:{},closing:{type:Boolean,reflect:!0},opened:{type:Boolean,reflect:!0},dismissable:{type:Boolean}}}static open(w={}){const q=new this;document.body.appendChild(q);for(const D of Object.keys(w))q[D]=w[D];return q.open()}constructor(){super(),this.dismissable=!1,this.directionController=new DirectionAwareController(this)}connectedCallback(){super.connectedCallback(),document.addEventListener("keyup",this.onKeyup),this.addEventListener("keypress",this.onKeyPress),this.addEventListener("click",this.onModalClick),this.addEventListener("animationend",this.onAnimationEnd)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keyup",this.onKeyup),this.removeEventListener("click",this.onModalClick),this.removeEventListener("animationend",this.onAnimationEnd),this.removeEventListener("keypress",this.onKeyPress)}initPromise(){return this.openPromise=new Promise((w,q)=>{this.resolve=w,this.reject=q}),this.openPromise}onAfterOpen(){}async open(){return this.opened=!0,setTimeout(()=>{this.onAfterOpen()}),this.initPromise()}onOverlayClick(){this.dismissable&&this.onNeutralClose()}close=()=>{this.closing=!0};onEnterPress(w){}onKeyPress(w){w.key==="Enter"&&this.onEnterPress(w)}onAnimationEnd=()=>{this.closing&&(this.opened=!1,this.closing=!1,this.remove())};onKeyup=w=>{w.key==="Escape"&&this.close()};onModalClick(w){let q=w.composedPath()[0];parentMatches(q,"[modal-affirmative")&&this.onAffirmativeClick(),parentMatches(q,"[modal-negative]")&&this.onNegativeClick(),parentMatches(q,".close")&&this.onNeutralClose(),parentMatches(q,".overlay")&&this.onOverlayClick()}onNeutralClose(){this.reject(),this.close()}affiramtivePromise(){}async onAffirmativeClick(){try{this.setLoading(!0),await this.affiramtivePromise(),this.resolve(this.resolvedData()),this.close()}catch{}this.setLoading(!1)}resolvedData(){}setLoading(w){this.getLoadableElements().forEach(q=>q.loading=w),this.getElementsToDisableWhenLoading().forEach(q=>q.disabled=w)}getLoadableElements(){return Array.from(this.shadowRoot.querySelectorAll("qrcg-button[modal-affirmative]"))}getElementsToDisableWhenLoading(){return Array.from(this.shadowRoot.querySelectorAll("qrcg-button[modal-negative], qrcg-input, qrcg-textarea, qrcg-balloon-selector"))}onNegativeClick(){this.reject(),this.close()}getAffirmativeText(){return t$3`OK`}getNegativeText(){return t$3`Cancel`}renderNegativeAction(){return x`
            <qrcg-button transparent modal-negative>
                ${this.getNegativeText()}
            </qrcg-button>
        `}renderActions(){return x`
            ${this.renderNegativeAction()}
            <!--  -->
            ${this.renderAffirmativeAction()}
        `}renderAffirmativeAction(){if(this.getAffirmativeText())return x`
            <qrcg-button modal-affirmative>
                ${this.getAffirmativeText()}
            </qrcg-button>
        `}renderTitle(){}renderBody(){}renderInstructions(){}renderBodyLoader(){return x`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}mRenderInstructions(){if(this.renderInstructions())return x`
            <div class="instructions">${this.renderInstructions()}</div>
        `}bodyClasses(){if(this.shouldRestrictBodyHeight())return"restrict-height"}shouldRestrictBodyHeight(){return!1}renderModalActions(){return x` <div class="actions">${this.renderActions()}</div> `}getCloseIcon(){return mdiCloseCircle}renderCloseIcon(){return x`
            <qrcg-icon
                mdi-icon=${this.getCloseIcon()}
                class="close"
            ></qrcg-icon>
        `}renderModalToolbar(){return x`
            <div class="toolbar">
                <h3>${this.renderTitle()}</h3>
                ${this.renderCloseIcon()}
            </div>
        `}render(){return x`
            <div class="overlay"></div>

            <div class="container">
                ${this.renderModalToolbar()}

                <div class="body ${this.bodyClasses()}">
                    ${this.mRenderInstructions()}
                    <!-- -->
                    ${this.renderBody()}
                </div>

                ${this.renderModalActions()}
            </div>
        `}}class QRCGSubscriptionModal extends QrcgModal{static get properties(){return{title:{},message:{},affirmativeText:{},negativeText:{},link:{}}}renderTitle(){return this.title}renderBody(){return this.message}renderActions(){return x`
            <qrcg-button transparent modal-negative slot="actions"
                >${this.negativeText}</qrcg-button
            >
            <qrcg-button modal-affirmative href=${this.link} slot="actions"
                >${this.affirmativeText}</qrcg-button
            >
        `}}async function showSubscriptionModal({title:F=t$3("Your plan is expired"),message:w=t$3("Subscribe now to enjoy uninterrupted services."),affirmativeText:q=t$3("Subscribe"),negativeText:D=t$3("Cancel"),link:Q=ConfigHelper.pricingPlansUrl()}={}){console.trace();const O=new QRCGSubscriptionModal;return O.title=F,O.message=w,O.affirmativeText=q,O.negativeText=D,O.link=Q,document.body.appendChild(O),await new Promise(U=>setTimeout(U,0)),O.open()}window.defineCustomElement("qrcg-subscription-modal",QRCGSubscriptionModal);const STATUS_PENDING_PAYMENT="pending_payment",STATUS_ACTIVE="active",STATUS_EXPIRED="expired";function currentSubscription(){let F=loadUser();return F?.is_sub&&F?.parent_user&&(F=F.parent_user),(F?.subscriptions??[]).find(D=>D.statuses[0]?.status!==STATUS_PENDING_PAYMENT)}function currentPlan(){return currentSubscription()?.subscription_plan}window.currentPlan=currentPlan;function trialSubscription(){let F=loadUser();return F.is_sub&&(F=F.parent_user),F.subscriptions.find(w=>w.subscription_plan.is_trial)}function onTrial(){return currentSubscription()?.subscription_plan.is_trial}function requiresSubscription(F){return!!F.match(/qrcodes\/new|qrcodes\/edit/)}function hasActiveSubscription(){return currentSubscriptionStatus()===STATUS_ACTIVE}function getTrialRemainingDays(){const F=trialSubscription();if(F.statuses[0].status===STATUS_EXPIRED)return 0;const w=new Date(F.created_at),q=F.subscription_plan.trial_days,D=Math.floor((Date.now()-w)/(1e3*3600*24));return Math.max(0,q-D)}function showExpirationAction(){showSubscriptionModal()}function currentSubscriptionStatus(){return currentSubscription()?.statuses[0].status}function currentSubscriptionIsCanceled(){try{return currentSubscription()?.statuses[0]?.status==="canceled"}catch{return!1}}async function showSubsciptionNotice({message:F,link:w=ConfigHelper.pricingPlansUrl()}){await new Promise(q=>setTimeout(q,0)),showNotice({message:F,link:w})}function legacyRemaningDays(){const F=currentSubscription(),w=new Date(F.created_at),q=currentPlan();if(q?.frequency==="ONE_TIME")return Number.MAX_SAFE_INTEGER;let D=30;q.is_trial?D=q.trial_days:q.frequency==="yearly"?D=365:D=30;const Q=Math.floor((Date.now()-w)/(1e3*3600*24));return Math.max(0,D-Q)}function getPlanRemainingDays(){const F=currentSubscription();if(!F)return 0;if(!F.expires_at)return legacyRemaningDays();const w=new Date(F?.expires_at);return currentPlan()?.frequency==="ONE_TIME"?Number.MAX_SAFE_INTEGER:Math.floor((w.getTime()-Date.now())/(1e3*3600*24))}const EXPIRING_SOON_DAYS=3;function featureAllowed(F){if(!shouldEnforceSubscriptionRules()||isSuperAdmin())return!0;try{return!!currentPlan().features?.find(q=>q==F)}catch{return!1}}function shouldEnforceSubscriptionRules(){if(isSuperAdmin()||!isCustomer()||new BillingMode().isAccountCredit())return!1;const w=Config.get("app.paid_subscriptions");return!(w&&w==="disabled"||Config.get("app.wplus_integration_enabled"))}function currentPlanHasQrCodeType(F){return isSuperAdmin()||!shouldEnforceSubscriptionRules()?!0:currentPlan()?.qr_types?.find(w=>w==F)}function userInvitedUsersLimitReached(F,w){if(isSuperAdmin(F)||!shouldEnforceSubscriptionRules())return!1;const q=currentPlan()?.number_of_users;return q==-1?!1:q<=w.length}class BillingMode{static SUBSCRIPTION_URL="/dashboard/subscription-plans";static ACCOUNT_CREDIT_URL="/dashboard/subscription-plans/credit-pricing";#e(){return Config.get("billing.mode")}menuItemLabel(){return this.isSubscription()?t$3`Plans`:t$3`Pricing`}pricingManagementUrl(){return this.isSubscription()?BillingMode.SUBSCRIPTION_URL:BillingMode.ACCOUNT_CREDIT_URL}isSubscription(){return this.#e()!="account_credit"}isAccountCredit(){return!this.isSubscription()}isTotalValueUnlimited(w){return isSuperAdmin()||!shouldEnforceSubscriptionRules()||w==-1}formatTotalNumber(w){return this.isTotalValueUnlimited(w)?t$3`Unlimited`:w}isRemainingValueUnlimited(w){return isSuperAdmin()||!shouldEnforceSubscriptionRules()||w<1}formatRemainingNumber(w){return this.isRemainingValueUnlimited(w)?t$3`Unlimited`:Math.max(0,w)}}class MenuItemModel{label;link;permission;target=null;renderer=null;isQueryStringIgnored=!1;data;badgeBackgroundColor;badgeTextColor;badge;group=null;constructor(w,q,D){this.label=w,this.link=q,this.permission=D}ignoreQueryString(){return this.isQueryStringIgnored=!0,this}setData(w){return this.data=w,this}setRenderer(w){return this.renderer=w,this}isActive(){const w=this,q=w.link.match(/\?/)?w.link.replace(/.*(\?.*)/,(Y,J)=>J):"";let D=new URLSearchParams(q);const Q=w.link.replace(q,"");let O=window.location.search;O=new URLSearchParams(O);const U=Array.from(D.keys()).reduce((Y,J)=>Y&&D.get(J)===O.get(J),!0),G=["page"],W=Array.from(O.keys()).reduce((Y,J)=>{const X=Array.from(D.keys()).find(te=>J===te);return G.find(te=>te===J)||X?Y:!0},!1),K=w.isQueryStringIgnored?!0:!W;return Q===window.location.pathname&&U&&K}}class MenuGroupModel{items=[];name;isLocked;get id(){return hash(this.name)}get isExpanded(){return this.getSessionStorage("isExpanded")}set isExpanded(w){this.setSessionStorage("isExpanded",w)}constructor(w){this.name=w}static fromRawGroupList(w){return w=isEmpty(w)||!isArray$1(w)?[]:w,w=w.filter(q=>{let D=q?.items??[];return D=D.filter(Q=>Q?.link),!(isEmpty(q)||isEmpty(q.name)||isEmpty(D))}),w=w.map(function(q){const D=new MenuGroupModel(q.name);return D.addItems(q.items.map(function(Q){const O=new MenuItemModel(Q.label,Q.link,Q.permission);return O.target=Q.target,O.badge=Q.badge,O.badgeBackgroundColor=Q.badgeBackgroundColor,O.badgeTextColor=Q.badgeTextColor,O})),D}),w}addItem(w){return typeof w=="function"&&(w=w()),w?(w.group=this,this.items.push(w),this):this}addItems(w){return w.forEach(q=>{this.addItem(q)}),this}lock(){return this.isLocked=!0,this}setSessionStorage(w,q){sessionStorage.MenuGroupModel||(sessionStorage.MenuGroupModel="{}");const D=JSON.parse(sessionStorage.MenuGroupModel);D[this.getSessionStorageKey(w)]=q,sessionStorage.MenuGroupModel=JSON.stringify(D)}getSessionStorage(w){try{return JSON.parse(sessionStorage.MenuGroupModel)[this.getSessionStorageKey(w)]}catch{}return null}getSessionStorageKey(w){return w+"-"+this.id}}class FolderStore{static getFolders(){if(!new Droplet().isLarge())return[];try{return JSON.parse(localStorage.__folders__)}catch{return[]}}static setFolders(w){localStorage.__folders__=JSON.stringify(w)}static find(w){return this.getFolders().find(q=>q.id==w)}}class QrcgDashboardSidebarMenuStore{dropletManager=new Droplet;billing=new BillingMode;static get onChangeEventName(){return"qrcg-dashboard-sidebar-menu-store:on-change"}get folders(){return FolderStore.getFolders()}set folders(w){FolderStore.setFolders(w),this.fireOnChange()}get templateCategories(){if(!this.dropletManager.isLarge())return[];try{return JSON.parse(localStorage.__templateCategories__)}catch{return[]}}set templateCategories(w){localStorage.__templateCategories__=JSON.stringify(w),this.fireOnChange()}constructor(){this.fetchFolders(),this.fetchTemplateCategories()}fetchTemplateCategories=async()=>{this.dropletManager.isLarge()&&(clearTimeout(QrcgDashboardSidebarMenuStore.__fetchTemplateCategoriesTimeout),QrcgDashboardSidebarMenuStore.__fetchTemplateCategoriesTimeout=setTimeout(async()=>{const{json:w}=await get("template-categories?no-pagination=true");this.templateCategories=w,this.fireOnChange()},500))};fetchFolders=async()=>{this.dropletManager.isLarge()&&(clearTimeout(QrcgDashboardSidebarMenuStore.__fetchFolderTimeout),QrcgDashboardSidebarMenuStore.__fetchFolderTimeout=setTimeout(async()=>{const{response:w}=await get(`folders/${loadUser().id}`);this.folders=await w.json()},500))};fireOnChange(){document.dispatchEvent(new CustomEvent(QrcgDashboardSidebarMenuStore.onChangeEventName))}templateCategoriesGroup(){if(isClient())return new MenuGroupModel(t$3`Categories`).lock().addItems(this.templateCategories.map(w=>new MenuItemModel(w.name,"/dashboard/qrcodes/new?template-category-id="+w.id)))}qrcodesGroup(){return new MenuGroupModel(t$3`QR Codes`).lock().addItem(new MenuItemModel(t$3`All`,"/dashboard/qrcodes","qrcode.list")).addItem(new MenuItemModel(t$3`Archived`,"/dashboard/qrcodes?archived=true","qrcode.archive")).addItem(()=>{if(this.dropletManager.isLarge())return new MenuItemModel(t$3("Templates"),"/dashboard/qrcode-templates","qrcode-template.list")})}addPayingUsers(w){if(Config.get("menu.show_paying_non_paying_users")!=="disabled")return w.addItem(new MenuItemModel(t$3("Paying users"),"/dashboard/users?paying=true","user.list-all")).addItem(new MenuItemModel(t$3("Non paying users"),"/dashboard/users?paying=false","user.list-all"))}usersGroup(){const w=new MenuGroupModel(t$3`Users`);return w.addItem(new MenuItemModel(t$3`All Users`,"/dashboard/users","user.list-all")),this.addPayingUsers(w),w.addItem(new MenuItemModel(t$3("Roles"),"/dashboard/roles","role.list-all")),w}financeGroup(){return new MenuGroupModel(t$3("Finance")).addItem(new MenuItemModel(this.billing.menuItemLabel(),this.billing.pricingManagementUrl(),"subscription-plan.list-all")).addItem(new MenuItemModel(t$3("Subscriptions"),"/dashboard/subscriptions","subscription.list-all")).addItem(new MenuItemModel(t$3`Billing`,"/dashboard/billing","billing.manage")).addItem(new MenuItemModel(t$3`Taxes & Invoicing`,"/dashboard/tax","tax.manage")).addItem(new MenuItemModel(t$3("Transactions"),"/dashboard/transactions","transaction.list-all")).addItem(new MenuItemModel(t$3`Payment Processors`,"/dashboard/payment-processors","payment-processors.manage").ignoreQueryString()).addItem(new MenuItemModel(t$3`Currencies`,"/dashboard/currencies","currency.list-all"))}scannerGroup(){return new MenuGroupModel(t$3("Scan")).addItem(new MenuItemModel(t$3("Scan"),"/dashboard/scanner/page","scanner.page")).addItem(new MenuItemModel(t$3("List"),"/dashboard/scanner/list","scanner.list"))}contentGroup(){return new MenuGroupModel(t$3`Content`).addItem(new MenuItemModel(t$3("Blog posts"),"/dashboard/blog-posts","blog-post.list-all")).addItem(new MenuItemModel(t$3("Content blocks"),"/dashboard/content-blocks","content-block.list-all")).addItem(new MenuItemModel(t$3`Translations`,"/dashboard/translations","translations.list-all")).addItem(new MenuItemModel(t$3("Custom Code"),"/dashboard/custom-codes","custom-code.list-all")).addItem(new MenuItemModel(t$3("Pages"),"/dashboard/pages","pages.list-all")).addItem(()=>this.dropletManager.isLarge()?new MenuItemModel(t$3("Dynamic BioLinks"),"/dashboard/dynamic-biolink-blocks","dynamic-biolinks-block.list-all"):null)}contactsGroup(){const w=new MenuGroupModel(t$3`Contacts`).addItem(new MenuItemModel(t$3("Contact form"),"/dashboard/contacts","contact.list-all")).addItem(new MenuItemModel(t$3`Feedbacks`,"/feedbacks"));return currentPlanHasQrCodeType("lead-form")&&w.addItem(new MenuItemModel(t$3`Lead Form`,"/dashboard/lead-forms","lead-form.list")),w}systemGroup(){const w=new MenuGroupModel(t$3`System`).addItem(new MenuItemModel(t$3("Status"),"/dashboard/system/status","system.status")).addItem(new MenuItemModel(t$3("Settings"),"/dashboard/system/settings","system.settings").ignoreQueryString()).addItem(new MenuItemModel(t$3`Logs`,"/dashboard/system/logs","system.logs")).addItem(new MenuItemModel(t$3`Cache`,"/dashboard/system/cache","system.cache")).addItem(new MenuItemModel(t$3("Notifications"),"/dashboard/system/notifications","system.notifications").ignoreQueryString()).addItem(new MenuItemModel(t$3("Sms Portals"),"/dashboard/system/sms","system.sms-portals").ignoreQueryString()).addItem(new MenuItemModel(t$3`Auth Workflow`,"/dashboard/system/auth-workflow","system.auth-workflow",!0)).addItem(new MenuItemModel(t$3`Domains`,"/dashboard/domains","domain.list-all")).addItem(new MenuItemModel(t$3`Events`,"/dashboard/system/events","system.events"));return this.dropletManager.isLarge()&&w.addItem(new MenuItemModel(t$3`Template Categories`,"/dashboard/template-categories","template-category.store")),w}pluginsGroup(){return new MenuGroupModel(t$3`Plugins`).addItem(new MenuItemModel(t$3`Available Plugins`,"/dashboard/plugins/available","plugins.manage")).addItem(new MenuItemModel(t$3("Installed Plugins"),"/dashboard/plugins/installed","plugins.manage"))}foldersGroup(){return new MenuGroupModel(t$3`Folders`).lock().addItems(this.folders.map(w=>new MenuItemModel(w.name,`/dashboard/qrcodes?folder_id=${w.id}`,"qrcode.list").setData(w).setRenderer(q=>x`
                            <qrcg-dashboard-sidebar-folder-menu-item
                                class="item"
                                .item=${q}
                                .isActive=${q.isActive()}
                            ></qrcg-dashboard-sidebar-folder-menu-item>
                        `)))}dashboardGroup(){if(isSuperAdmin())return new MenuGroupModel(t$3`Home`).lock().addItem(new MenuItemModel(t$3`Dashboard`,"/dashboard/home"))}buildGroups(){let w=[this.dashboardGroup(),this.qrcodesGroup(),this.foldersGroup(),this.templateCategoriesGroup(),this.usersGroup(),this.financeGroup(),this.contentGroup(),this.contactsGroup(),this.pluginsGroup(),this.systemGroup()];return isClient()?w.push(this.scannerGroup()):w.splice(6,0,this.scannerGroup()),w.push(...this.userGeneratedMenu()),w=w.filter(q=>q),w=PluginManager.applyFilters(FILTER_MENU_GROUPS,w),w}userGeneratedMenu(){if(isSuperAdmin())return[];let w=Config.get("app.dashboard-client-menu");return MenuGroupModel.fromRawGroupList(w)}}class QrcgDashboardSidebarFolderMenuItem extends i$1{menuStore=new QrcgDashboardSidebarMenuStore;static styles=[i$3`
            :host {
                display: block;
                position: relative;
            }

            .container {
                display: flex;
                align-items: center;
                justify-content: space-between;
            }

            .folder-name {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                padding-right: 1rem;
            }

            .badge {
                font-size: 0.8rem;

                color: white;
                width: 2rem;
                box-shadow: 0px 0px 0 0.25rem white;
                border-radius: 1rem;
                font-weight: bold;
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: white;
                color: black;
                text-align: center;
            }

            :host(.active) .badge,
            :host(:hover) .badge {
                box-shadow: 0px 0px 0 0.25rem var(--primary-0);
                background-color: var(--primary-0);
                color: white;
            }

            a {
                display: block;
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }
        `];static get properties(){return{item:{}}}connectedCallback(){super.connectedCallback(),window.addEventListener("qrcg-router:location-changed",this.onLocationChanged)}disconnectedCallback(){super.disconnectedCallback(),window.addEventListener("qrcg-router:location-changed",this.onLocationChanged)}onLocationChanged=()=>{this.syncActiveClass()};updated(){this.syncActiveClass()}syncActiveClass(){this.item.isActive()?this.classList.add("active"):this.classList.remove("active")}render(){return x`
            <a href="${this.item.link}"></a>
            <div class="container">
                <div class="folder-name">${this.item.label}</div>

                <div>
                    <div class="badge">${this.item.data.qrcode_count}</div>
                </div>
            </div>
        `}}window.defineCustomElement("qrcg-dashboard-sidebar-folder-menu-item",QrcgDashboardSidebarFolderMenuItem);const style$2k=":host{display:block}qrcg-animated-badge{position:absolute;right:.5rem;top:50%;transform:translateY(-50%)}.item,.group:not(.locked):not(.expanded) label{display:block;padding:.6rem 1rem;color:var(--dashboard-sidebar-text-color, white);font-size:.9rem;border-radius:.3rem;cursor:pointer;text-decoration:none;-webkit-tap-highlight-color:transparent;transition:.1s ease;-webkit-touch-callout:none;position:relative;white-space:nowrap;max-height:3rem;overflow:hidden;text-overflow:ellipsis}.item:hover,.group:not(.locked):not(.expanded) label:hover{text-decoration:none}.item.active,.group:not(.locked):not(.expanded) label.active{background-color:#0003}@media(hover){.item:hover,.group:not(.locked):not(.expanded) label:hover{background-color:var(--dashboard-sidebar-hover-background-color, var(--gray-0));color:var(--dashboard-sidebar-hover-text-color, var(--primary-0))}}:host(.dir-rtl) qrcg-icon{transform:scaleX(-1)}:host(.dir-rtl) .group label{letter-spacing:0}.group label{font-weight:700;display:block;color:var(--dashboard-sidebar-text-color, white);font-size:.65rem;margin:0 0 .5rem 1rem;letter-spacing:.05rem;text-transform:uppercase;display:flex;align-items:center;justify-content:space-between;gap:.5rem}.group.locked qrcg-icon{display:none}.group.locked{margin-bottom:1rem}.group.locked label{color:var(--dashboard-sidebar-label-color, #18d8ea)}.group:not(.locked).expanded{margin:1rem 0;background-color:#0003;padding:1rem 0;border-radius:.2rem}.group:not(.locked).expanded label{color:var(--dashboard-sidebar-label-color, #18d8ea);cursor:pointer;margin-inline-start:1rem;margin-inline-end:1rem}.group:not(.locked).expanded .item,.group:not(.locked).expanded .group:not(.locked):not(.expanded) label,.group:not(.locked):not(.expanded) .group:not(.locked).expanded label{margin:0 1rem}.group:not(.locked).expanded qrcg-icon{opacity:.5;transform:rotate(90deg)}.group:not(.locked):not(.expanded) label{display:flex;font-weight:400;font-size:.8rem;text-transform:none;margin:0}.group:not(.locked):not(.expanded) label qrcg-icon{opacity:.5}";class QRCGCustomCodeRenderer extends HTMLElement{static get tag(){return"qrcg-custom-code-renderer"}get position(){return this.getAttribute("position")}static hasCode(w){const q=new QRCGCustomCodeRenderer;q.setAttribute("position",w);const D=q.getTemplate();return D?D.innerHTML.trim().length>0:!1}constructor(){super(),this.attachShadow({mode:"open"}),this.renderStyles(),this.renderCustomCode()}renderStyles(){const w=document.createElement("style");w.innerHTML=":host { display: block; }",this.shadowRoot.appendChild(w)}renderCustomCode(){if(!this.position)return;const w=this.getTemplate();if(!w)return;let q=Base64Encoder.decode(w.innerHTML);this.shadowRoot.appendChild(this.renderFragement(q))}renderFragement(w){return document.createRange().createContextualFragment(w)}getTemplate(){return Array.from(document.querySelectorAll("template")).find(q=>q.getAttribute("position")===this.position)}}window.defineCustomElement(QRCGCustomCodeRenderer.tag,QRCGCustomCodeRenderer);class QrcgDashboardSidebarMenu extends BaseComponent{dir=new DirectionAwareController(this);customStyleInjector=new CustomStyleInjector(this);menuStore=new QrcgDashboardSidebarMenuStore;static styleSheets=[...super.styleSheets,style$2k];static get properties(){return{groups:{type:Array}}}constructor(){super(),this.groups=this.menuStore.buildGroups()}connectedCallback(){super.connectedCallback(),document.addEventListener(QrcgDashboardSidebarMenuStore.onChangeEventName,this.onSidebarMenuChanged),window.addEventListener("qrcg-router:location-changed",this.onLocationChanged),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener(QrcgDashboardSidebarMenuStore.onChangeEventName,this.onSidebarMenuChanged),window.removeEventListener("qrcg-router:location-changed",this.onLocationChanged),this.removeEventListener("click",this.onClick)}onClick(w){mapEventDelegate(w,{".group label":this.onGroupLabelClick})}onGroupLabelClick=(w,q)=>{q.group.isExpanded=!q.group.isExpanded,this.requestUpdate()};onLocationChanged=()=>{this.requestUpdate()};onSidebarMenuChanged=()=>{this.groups=this.menuStore.buildGroups()};renderGroupItems(w){if(!(!w.isExpanded&&!w.isLocked))return w.items.map(q=>this.renderItem(q))}renderGroup(w){if(isEmpty(w)||isEmpty(w.items))return;if(!w.items.reduce((Q,O)=>Q||permitted(O.permission),!1))return null;const D=e$1({group:!0,expanded:w.isExpanded,locked:w.isLocked});return x`
            <div class="${D}">
                <label .group=${w}>
                    <span> ${w.name} </span>
                    <qrcg-icon mdi-icon=${mdiChevronDoubleRight}></qrcg-icon>
                </label>

                ${this.renderGroupItems(w)}
            </div>
        `}renderGroups(){return this.groups.map(w=>this.renderGroup(w))}renderBadge(w){if(w.hasBadge)return x`
            <qrcg-animated-badge
                style="background-color: ${w.badgeBackgroundColor}; color: ${w.badgeTextColor}"
            >
                ${w.badge}
            </qrcg-animated-badge>
        `}shouldRenderFrontendLinks(){const w=Config.get("app.frontend_links");return!w||w==="enabled"}renderItem(w){return permitted(w.permission)?isFunction(w.renderer)?w.renderer(w):x`
            <a
                class="item ${e$1({active:w.isActive()})}"
                href="${w.link}"
                target=${w.target||"_self"}
            >
                ${w.label}

                <!--  -->
                ${this.renderBadge(w)}
            </a>
        `:null}renderCustomCode(){if(!(!isCustomer()||!QRCGCustomCodeRenderer.hasCode("Dashboard Sidebar: After Customer Menu")))return x`
            <qrcg-custom-code-renderer
                position="Dashboard Sidebar: After Customer Menu"
            ></qrcg-custom-code-renderer>
        `}render(){return[this.renderGroups(),this.renderCustomCode()]}}window.defineCustomElement("qrcg-dashboard-sidebar-menu",QrcgDashboardSidebarMenu);function homePage(){return userHomePage()}async function getTotalScans({type:F}={}){F||(F=new QRCodeTypeManager$1().getDynamicSlugs().join(","));const{response:w}=await get(`qrcodes/count/scans?type=${F}`);return(await w.json()).count}async function getDynamicQRCodeCount(){const F=new QRCodeTypeManager$1().getDynamicSlugs().join(","),{response:w}=await get(`qrcodes/count?qrcode_type=${F}`);return(await w.json()).count}async function getTotalQRCodeCount({type:F="url"}={}){const{response:w}=await get(`qrcodes/count?qrcode_type=${F}`);return(await w.json()).count}const style$2j=":host{display:block;background-color:var(--dashboard-sidebar-background-color, var(--primary-0));color:#fff;text-align:center}.container{background-color:#0003;padding:1.5rem 1rem 1rem;padding:1rem;box-sizing:border-box}.account-container{margin-top:1rem;border-radius:.5rem;display:flex;background-color:var(--dashboard-sidebar-background-color, var(--primary-0));padding:.5rem;align-items:center;justify-content:space-between;font-size:.8rem;gap:.5rem}.email{overflow:hidden;display:block;text-overflow:ellipsis;font-size:.8rem}.account-container.trial qrcg-button::part(button){background-color:var(--accent-0);color:#000}.account-container.normal-account qrcg-button::part(button){background-color:#fff;color:#000}.stats{display:flex;text-align:left;user-select:none;-webkit-user-select:none;background-color:var(--dashboard-sidebar-background-color, var(--primary-0));margin-bottom:.5rem;border-radius:.25rem}.stats-item{display:flex;flex-direction:column;font-size:.6rem;flex:1;padding:.5rem}.stats-item label{font-weight:700;display:block;margin-bottom:.5rem;font-size:.5rem;line-height:.5rem;height:.5rem;overflow:hidden;text-overflow:ellipsis}.stats-item span{line-height:.6rem;height:.6rem;overflow:hidden;white-space:nowrap;width:4rem;text-overflow:ellipsis}.plan-name{font-size:.8rem;margin-right:.5rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.minimal-container{display:flex;flex-direction:column;align-items:center;justify-content:center}.minimal-container .plan-name{display:none}.minimal-container .email{margin-top:1rem;width:10rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.minimal-container img{width:4rem;height:4rem;border-radius:50%;object-fit:cover;object-position:center}.minimal-container .account-container{margin-top:.5rem}";class QrcgDashboardSidebarAccount extends BaseComponent{static tag="qrcg-dashboard-sidebar-account";billing=new BillingMode;static styleSheets=[...super.styleSheets,style$2j];static get properties(){return{user:{type:Object},plan:{type:Object},qrCodeCount:{},qrCodeScans:{}}}connectedCallback(){super.connectedCallback(),this.user=loadUser();try{this.plan=currentPlan()}catch{}this.fetchCount()}fetchCount(){const q=new QRCodeTypeManager$1().getDynamicSlugs().join(",");getTotalScans({type:q}).then(D=>this.qrCodeScans=D),getDynamicQRCodeCount().then(D=>this.qrCodeCount=D)}upgradeUrl(){return QRCGCustomCodeRenderer.hasCode("Account Upgrade: Hosted Upgrade Page")?url("/account/upgrade"):ConfigHelper.pricingPlansUrl()}shouldRenderMinimalView(){return Config.get("dashboard.sidebar_account_widget_style")!="detailed"}renderTrial(){return x`
            <div class="account-container trial">
                <span>${t$3`Trial`}</span>
                <qrcg-button href="${this.upgradeUrl()}">
                    ${t$3`Upgrade`}
                </qrcg-button>
            </div>
        `}renderAccountBox(){let w=this.plan?.name;return shouldEnforceSubscriptionRules()||(w=this.user.name),isSuperAdmin()&&(w=t$3(this.user.roles[0].name)),x`
            <div class="account-container normal-account">
                <span class="plan-name">${w}</span>
                <qrcg-button href="/account/my-account">
                    ${t$3`Account`}
                </qrcg-button>
            </div>
        `}renderAccountButton(){return shouldEnforceSubscriptionRules()&&get$1(this.plan,"is_trial")&&!isSuperAdmin()?this.renderTrial():this.renderAccountBox()}renderStats(){const w=`${this.qrCodeCount??0} / ${this.billing.formatTotalNumber(currentPlan()?.number_of_dynamic_qrcodes)}`,q=`${this.qrCodeScans??0} / ${this.billing.formatTotalNumber(currentPlan()?.number_of_scans)}`,D=t$3`Dynamic QRs`;return x`
            <div class="stats">
                <div class="stats-item">
                    <label title=${D}
                        >${D}</label
                    >
                    <span title=${w}> ${w} </span>
                </div>

                <div class="stats-item">
                    <label>${t$3`Scans`}</label>
                    <span title=${q}> ${q} </span>
                </div>
            </div>
        `}renderProfileImage(){let w=loadUser()?.profile_image_url;return isEmpty(w)&&(w="/assets/images/user.jpg"),x` <img src=${w} /> `}renderMinimalView(){return x`
            <div class="minimal-container">
                ${this.renderProfileImage()}

                <!--  -->

                <div class="email">${loadUser().email}</div>
                <!--  -->

                ${this.renderAccountButton()}
            </div>
        `}render(){return this.shouldRenderMinimalView()?this.renderMinimalView():x`
            <div class="container">
                ${this.renderStats()}
                <span class="email">${this.user.email}</span>
                ${this.renderAccountButton()}
            </div>
        `}}QrcgDashboardSidebarAccount.register();class QRCGDashboardSidebar extends i$1{#e=new DirectionAwareController(this);static TRANSITION_DURATION=".2s";static get scrollBarStyle(){return Config.get("theme.default_scrollbar")==="enabled"?i$3``:i$3`
            .content {
                scrollbar-width: none;
            }

            .content::-webkit-scrollbar {
                display: none;
            }
        `}customStyleInjector=new CustomStyleInjector(this);static get styles(){return[i$3`
                :host {
                    --transition-duration: 0.2s;
                    --sidebar-account-height: 10.5rem;
                    display: none;
                    background-color: var(
                        --dashboard-sidebar-background-color,
                        var(--primary-0)
                    );
                    height: min-content;
                    min-height: calc(
                        var(--available-dashboard-sidebar-height) -
                            var(--dashboard-header-height)
                    );
                    width: var(--dashboard-sidebar-width, 15rem);
                    min-width: var(--dashboard-sidebar-width, 15rem);
                    overflow: hidden;
                    transition: width ${r$2(this.TRANSITION_DURATION)}
                        ease-in-out;
                    user-select: none;
                    -webkit-user-select: none;
                    touch-action: manipulation;
                    z-index: 20000;
                }

                @media (min-width: 800px) {
                    :host {
                        display: block;
                    }
                }

                :host(.updated) {
                    display: block;
                }

                :host([mode='fixed']) {
                    position: fixed;
                    top: var(--dashboard-header-height);
                    bottom: 0;
                    left: 0;
                }

                :host([mode='relative']) {
                    position: sticky;
                    top: var(--dashboard-header-height);
                    height: min-content;
                    min-height: calc(
                        var(--available-dashboard-sidebar-height) -
                            var(--dashboard-header-height)
                    );
                }

                :host([closed]) {
                    width: 0;
                    min-width: 0;
                }

                @media (min-width: 900px) {
                    :host([closed]) {
                        min-width: 0;
                        width: 1.5rem;
                    }
                }

                qrcg-dashboard-sidebar-account {
                    height: var(--sidebar-account-height);
                    position: absolute;
                    left: 0;
                    width: var(--dashboard-sidebar-width, 15rem);
                    bottom: 0;

                    transition: transform ${r$2(this.TRANSITION_DURATION)}
                        ease-in-out;
                }

                .content {
                    position: absolute;
                    width: var(--dashboard-sidebar-width, 15rem);
                    top: 0;
                    left: 0;
                    bottom: var(--sidebar-account-height);
                    transition: transform ${r$2(this.TRANSITION_DURATION)}
                        ease-in-out;
                    padding: 0.5rem;
                    box-sizing: border-box;
                    overflow-y: scroll;

                    animation: fade-in-content 0.2s 0.2s ease-in both;
                }

                @keyframes fade-in-content {
                    from {
                        opacity: 0;
                    }

                    to {
                        opacity: 1;
                    }
                }

                :host([closed]) .content,
                :host([closed]) qrcg-dashboard-sidebar-account {
                    transform: translateX(-100%);
                }

                :host(.dir-rtl):host([closed]) qrcg-dashboard-sidebar-account,
                :host(.dir-rtl):host([closed]) .content {
                    transform: translateX(100%);
                }
            `,this.scrollBarStyle]}static get properties(){return{closed:{type:Boolean,reflect:!0},bodyStyleId:{},overlayId:{},overlayStyleId:{},overlayAnimation:{},mode:{type:String,reflect:!0}}}constructor(){super(),this.onOverlayClick=this.onOverlayClick.bind(this),this.requestClose=this.requestClose.bind(this),this.requestOpen=this.requestOpen.bind(this),this.onStatusChanged=this.onStatusChanged.bind(this),this.onLargeScreenMediaQueryChange=this.onLargeScreenMediaQueryChange.bind(this),this.bodyStyleId="qrcg-dashboard-sidebar-body-style",this.overlayId="qrcg-dashboard-sidebar-overlay",this.overlayStyleId="qrcg-dashboard-sidebar-overlay-style",this.overlayAnimation="qrcg-dashboard-sidebar-animation",this.mode="fixed|relative".split("|")[1],this.largeScreenMediaQuery=window.matchMedia("(min-width: 800px)")}connectedCallback(){super.connectedCallback(),this.addEventListener("qrcg-dashboard-sidebar:status-changed",this.onStatusChanged),this.addEventListener("mouseenter",this.onMouseEnter),this.addEventListener("mouseleave",this.onMouseLeave),this.largeScreenMediaQuery.addEventListener("change",this.onLargeScreenMediaQueryChange),window.addEventListener("resize",this.adjustVisualViewportRendering),window.addEventListener("scroll",this.adjustVisualViewportRendering)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("qrcg-dashboard-sidebar:status-changed",this.onStatusChanged),this.removeEventListener("mouseenter",this.onMouseEnter),this.removeEventListener("mouseleave",this.onMouseLeave),this.largeScreenMediaQuery.removeEventListener("change",this.onLargeScreenMediaQueryChange),this.removeOverlay(),this.removeBodyStyles(),window.removeEventListener("resize",this.adjustVisualViewportRendering),window.removeEventListener("scroll",this.adjustVisualViewportRendering)}onMouseEnter(){document.dispatchEvent(new CustomEvent("qrcg-dashboard-sidebar:mouseenter"))}onMouseLeave(){document.dispatchEvent(new CustomEvent("qrcg-dashboard-sidebar:mouseleave"))}firstUpdated(){this.initializeModeBasedOnLargeScreenMediaQuery(),this.listenContentScroll(),setTimeout(()=>{this.classList.add("updated")},0)}get content(){return this.shadowRoot.querySelector(".content")}get contentScrollSessionStorageKey(){return this.tagName+":content-scroll"}listenContentScroll(){setTimeout(()=>{this.content.scrollTo(0,sessionStorage[this.contentScrollSessionStorageKey])},50),this.content.addEventListener("scroll",this.onContentScroll)}onContentScroll=()=>{sessionStorage[this.contentScrollSessionStorageKey]=this.content.scrollTop};adjustVisualViewportRendering=()=>{const w=this.shadowRoot.querySelector(".content"),q=this.renderRoot.querySelector("qrcg-dashboard-sidebar-account"),D=QrcgBuyToolbar.toolbarHeight;let Q=Math.max(0,D-document.documentElement.scrollTop);this.mode==="fixed"&&(this.style.top=`calc(var(--dashboard-header-height) + ${Q}px)`);const O=window.visualViewport.height-Q;q.style.bottom=`calc(100vh - ${O}px)`,w.style.bottom=`calc(var(--sidebar-account-height) + (100vh - ${O}px))`};updated(w){w.has("closed")&&this.dispatchEvent(new CustomEvent("qrcg-dashboard-sidebar:status-changed",{bubbles:!0,composed:!0,detail:{closed:this.closed}})),w.has("mode")&&this.onModeChange(),setTimeout(()=>this.adjustVisualViewportRendering(),0)}createBodyStyles(){const w=document.createElement("style");w.innerHTML="body { position: fixed; top: 0; left: 0; bottom: 0; right: 0; overflow: hidden; }",w.id=this.bodyStyleId,document.head.appendChild(w)}removeBodyStyles(){document.getElementById(this.bodyStyleId)?.remove()}createOverlay(){const w=document.createElement("style");w.innerHTML=`#${this.overlayId} { 
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: black;
            opacity: 0.8;
            animation: ${this.overlayAnimation} ${this.constructor.TRANSITION_DURATION} ease-in both;
        }

        @keyframes ${this.overlayAnimation} {
            from {
                opacity: 0;
            }

            to {
                opacity: 0.5;
            }
        }
        `,w.id=this.overlayStyleId,document.head.appendChild(w);const q=document.createElement("div");q.id=this.overlayId,q.addEventListener("click",this.onOverlayClick),this.overlay=q,this.overlayStyle=w,this.parentElement.appendChild(this.overlay),this.parentElement.appendChild(this.overlayStyle)}removeOverlay(){this.overlay?.remove(),this.overlayStyle?.remove()}onOverlayClick(){this.requestClose()}requestClose(){document.dispatchEvent(new CustomEvent("qrcg-dashboard-sidebar:request-close"))}requestOpen(){document.dispatchEvent(new CustomEvent("qrcg-dashboard-sidebar:request-open"))}onStatusChanged(w){setTimeout(()=>{this.syncWidthVariable()},201),this.mode!=="relative"&&(w.detail.closed?(this.removeBodyStyles(),this.removeOverlay()):(this.createBodyStyles(),this.createOverlay()))}syncWidthVariable(){if(!QRCGDashboardSidebar.__width_global_style__){const D=document.createElement("style");document.head.appendChild(D),QRCGDashboardSidebar.__width_global_style__=D}const w=QRCGDashboardSidebar.__width_global_style__,{width:q}=this.getBoundingClientRect();w.innerHTML=`:root { --dashboard-sidebar-actual-width: ${q}px; }`}onModeChange(){this.mode==="relative"&&(this.removeBodyStyles(),this.removeOverlay())}onLargeScreenMediaQueryChange(){this.largeScreenMediaQuery.matches?(this.mode="relative",this.requestOpen()):(this.mode="fixed",this.requestClose())}initializeModeBasedOnLargeScreenMediaQuery(){this.largeScreenMediaQuery.matches?this.mode="relative":(this.mode="fixed",sessionStorage[this.contentScrollSessionStorageKey]||this.requestClose())}render(){return x`
            <div class="content">
                <qrcg-dashboard-sidebar-menu></qrcg-dashboard-sidebar-menu>

                <div class="content-bottom-gap"></div>
            </div>
            <qrcg-dashboard-sidebar-account></qrcg-dashboard-sidebar-account>
        `}}window.defineCustomElement("qrcg-dashboard-sidebar",QRCGDashboardSidebar);class QrcgLanguagePickerModal extends QrcgModal{static get tag(){return"qrcg-language-picker-modal"}static get styles(){return[super.styles,i$3`
                .flag {
                    height: 1.5rem;
                    margin-right: 1rem;
                }

                qrcg-button {
                    margin-bottom: 1rem;
                    border: 1px solid var(--gray-1);
                    border-radius: 0.5rem;

                    width: fit-content;
                }
            `]}static get properties(){return{...super.properties,translations:{type:Array}}}renderTitle(){return t$3`Select Language`}renderActions(){}renderFlag(w){if(w.flag_url)return x` <img class"flag" src=${w.flag_url} /> `}renderTranslation(w){return x`
            <qrcg-button
                transparent
                href=${url("/language/"+w.locale)}
            >
                ${this.renderFlag(w)}

                <div class="display-name">${w.display_name}</div>
            </qrcg-button>
        `}renderBody(){return x`
            <div class="languages-container">
                ${this.translations.map(w=>this.renderTranslation(w))}
            </div>
        `}}defineCustomElement(QrcgLanguagePickerModal.tag,QrcgLanguagePickerModal);class QRCGLoaderH extends i$1{static get styles(){return i$3`
            :host {
                display: block;
            }

            .lds-ellipsis {
                display: inline-block;
                position: relative;
                width: 80px;
                height: 80px;
            }
            .lds-ellipsis div {
                position: absolute;
                top: 33px;
                width: 13px;
                height: 13px;
                border-radius: 50%;
                background: var(--qrcg-loader-h-color, white);
                animation-timing-function: cubic-bezier(0, 1, 1, 0);
            }
            .lds-ellipsis div:nth-child(1) {
                left: 8px;
                animation: lds-ellipsis1 0.6s infinite;
            }
            .lds-ellipsis div:nth-child(2) {
                left: 8px;
                animation: lds-ellipsis2 0.6s infinite;
            }
            .lds-ellipsis div:nth-child(3) {
                left: 32px;
                animation: lds-ellipsis2 0.6s infinite;
            }
            .lds-ellipsis div:nth-child(4) {
                left: 56px;
                animation: lds-ellipsis3 0.6s infinite;
            }
            @keyframes lds-ellipsis1 {
                0% {
                    transform: scale(0);
                }
                100% {
                    transform: scale(1);
                }
            }
            @keyframes lds-ellipsis3 {
                0% {
                    transform: scale(1);
                }
                100% {
                    transform: scale(0);
                }
            }
            @keyframes lds-ellipsis2 {
                0% {
                    transform: translate(0, 0);
                }
                100% {
                    transform: translate(24px, 0);
                }
            }
        `}render(){return x`
            <div class="lds-ellipsis">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
        `}}window.defineCustomElement("qrcg-loader-h",QRCGLoaderH);const style$2i=":host{display:flex;position:relative;transition:opacity .5s ease-in-out;cursor:pointer;-webkit-tap-highlight-color:transparent;--button-color: white;--button-color-hover: var(--button-color);--button-color-active: var(--button-color);--button-color-focused: var(--button-color-hover);--button-background-color: var(--primary-0);--button-background-color-hover: var(--primary-1);--button-outline-focus: var(--primary-1);--button-box-shadow: .5rem .5rem 1rem rgba(0, 0, 0, .1);--button-hover-box-shadow: .5rem .5rem 1rem rgba(0, 0, 0, .15)}::slotted(qrcg-icon){pointer-events:none}:host([round]){padding-inline-end:1rem}:host([round]) button{min-width:0;border-radius:50%;width:2.5rem;height:2.5rem}:host([danger]){--button-background-color: var(--danger);--button-background-color-hover: var(--danger-1)}:host([hidden]){display:none}:host([disabled]),:host([loading]){pointer-events:none;opacity:.8}button{padding:.85rem .8rem;width:100%;background-color:var(--button-background-color);color:var(--button-color);display:flex;align-items:center;justify-content:center;-webkit-appearance:none;appearance:none;border:0;cursor:pointer;font-weight:700;font-size:.85rem;letter-spacing:1px;min-width:110px;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;touch-action:manipulation;border-radius:.5rem;outline:0;position:relative;box-shadow:var(--button-box-shadow);transition:all .3s ease}:host(.dir-rtl) button{letter-spacing:0;font-family:var(--qrcg-rtl-font-family)}button:focus{color:var(--button-color);outline:1px solid var(--button-outline-focus);box-shadow:var(--button-hover-box-shadow)}button:active{color:var(--button-color-active);box-shadow:var(--button-hover-box-shadow)}button:hover{color:var(--button-color-hover);background-color:var(--button-background-color-hover);box-shadow:var(--button-hover-box-shadow)}:host([transparent]) button{background-color:transparent;color:#000}:host([transparent]) button:hover{background-color:var(--gray-1);color:#000}:host([no-shadow]) button{box-shadow:none!important}:host([transparent]) button{box-shadow:none!important}qrcg-loader-h{position:absolute;pointer-events:none;transform:translateY(-50%) scale(.8);top:calc(50% + 2px);display:none}:host([transparent]){--qrcg-loader-h-color: black}:host([loading]) qrcg-loader-h{display:block}:host([loading]) .content{opacity:0}.content{display:flex;align-items:center}a{position:absolute;inset:0}::slotted(*) svg{pointer-events:none}:host(.elegant){--button-color: var(--primary-0);--button-background-color: transparent;--button-background-color-hover: var(--gray-0);--button-outline-focus: var(--gray-1)}:host(.elegant) .content{display:flex;justify-content:center}:host(.elegant) ::slotted(qrcg-icon),:host(.elegant) qrcg-icon{color:var(--gray-2);margin-inline-end:.5rem;pointer-events:none}:host(.elegant) button{box-shadow:none;min-width:initial}:host(.elegant.outlined) button{border:1px solid var(--gray-1)}:host(.elegant[loading]){--qrcg-loader-h-color: var(--gray-2)}";class QRCGButton extends BaseComponent{_dir=new DirectionAwareController(this);static tag="qrcg-button";static styleSheets=[...super.styleSheets,style$2i];static get properties(){return{type:{},loading:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0},href:{},target:{},transparent:{type:Boolean,reflect:!0},download:{reflect:!0}}}constructor(){super(),this.loading=!1,this.disabled=!1}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick(w){}updated(w){(w.has("href")||w.has("download"))&&this.updateLink()}updateLink(){const w=this.renderRoot.querySelector("a");w&&(isEmpty(this.download)?w.removeAttribute("download"):w.setAttribute("download",this.download))}renderContent(){return x`<slot></slot>`}render(){return x`
            <button
                type=${this.type}
                part="button"
                .disabled=${this.disabled||this.loading}
            >
                ${this.href?x`<a
                          href=${this.href}
                          target="${this.target}"
                          tabindex="-1"
                          ?download=${this.download}
                      ></a>`:""}
                <qrcg-loader-h></qrcg-loader-h>
                <div class="content" part="content">
                    ${this.renderContent()}
                </div>
            </button>
        `}}QRCGButton.register();class QrcgLanguagePicker extends QRCGButton{__dir=new DirectionAwareController(this);static styles=[super.styles,i$3`
            :host {
                --button-color: black;
                --button-background-color: var(--gray-0);

                --button-color-hover: black;
                --button-background-color-hover: var(--gray-2);
            }
            .flag {
                height: 1.5rem;
                width: auto;
                display: block;
                border-radius: 0.25rem;
                margin-right: 0.5rem;
            }

            button {
                border: 1px solid var(--gray-1);
                background-color: var(--gray-1);
                min-width: 0;
                padding: 0.25rem;
            }

            button:hover {
                color: var(--dark);
            }
        `];static get properties(){return{...super.properties,translations:{type:Array}}}constructor(){super(),this.translations=[]}connectedCallback(){super.connectedCallback(),this.fetchActiveTranslations()}async fetchActiveTranslations(){const{response:w}=await get("translations/active"),q=await w.json();this.translations=q.map(D=>D.is_default?{...D,name:"English"}:D)}onClick(){this.openTranslationsModal()}renderFlag(w){if(w?.flag_url)return x`
            <img src=${w.flag_url} class="flag" part="flag" />
        `}getCurrentTranslation(){if(!isEmpty(this.translations))return this.translations.find(w=>w.locale===this.getCurrentLocale())}getCurrentLocale(){return ConfigHelper.isBuiltBundle()?window.QRCG_CURRENT_LOCALE:"en"}async openTranslationsModal(){QrcgLanguagePickerModal.open({translations:this.translations})}shouldRenderSelf(){return this.translations.length>=2}render(){if(this.shouldRenderSelf())return super.render()}renderContent(){if(this.translations.length<2)return;const w=this.getCurrentTranslation();return x`
            ${this.renderFlag(w)}
            <div class="display-name" part="display-name">
                ${w?.display_name}
            </div>
        `}}window.defineCustomElement("qrcg-language-picker",QrcgLanguagePicker);let _currency=null;function currency(){return _currency||(_currency=Config.get("currency")),_currency}function isCurrencyBefore(){const F=currency().symbol_position;return isEmpty(F)||F=="before"}function price(F){return isNaN(F)?F:(F===null&&(F=0),F=formatPrice(F),isCurrencyBefore()?currency().symbol+F:F+currency().symbol)}function formatPrice(F){let w=0;return currency().decimal_separator_enabled==="enabled"&&(w=2),number_format(F,w,currency().decimal_separator,currency().thousands_separator)}class QRCGConfirmationModal extends QrcgModal{static get properties(){return{...super.properties,title:{},message:{},affirmativeText:{},negativeText:{}}}renderTitle(){return this.title}renderBody(){return this.message}shouldRestrictBodyHeight(){return!0}renderActions(){return x`
            ${this.negativeText&&x`<qrcg-button transparent modal-negative
                    >${this.negativeText}</qrcg-button
                >`||""}
            <qrcg-button modal-affirmative>${this.affirmativeText}</qrcg-button>
        `}}async function confirm$1({title:F=t$3("Confirmation"),message:w=t$3("Are you sure you want to perform this action"),affirmativeText:q=t$3("Confirm"),negativeText:D=t$3("Cancel")}={}){const Q=new QRCGConfirmationModal;return Q.title=F,Q.message=w,Q.affirmativeText=q,Q.negativeText=D,document.body.appendChild(Q),await new Promise(O=>setTimeout(O,0)),Q.open()}window.confirmModal=confirm$1;window.defineCustomElement("qrcg-confirmation-modal",QRCGConfirmationModal);class QrcgCartItem{type;quantity;#e;#t;constructor({type:w,quantity:q=1}){this.#e=new AccountCreditManager,this.#t=new QRCodeTypeManager$1,this.type=w,this.quantity=q}get name(){return t$3(this.#t.find(this.type).name)}get price(){return this.#t.isDynamic(this.type)?this.#e.dynamicQRCodePrice():this.#e.staticQRCodePrice()}get isDynamic(){return this.#t.isDynamic(this.type)}}class QrcgAccountCreditCart{#e="qrcg-account-credit-cart";#t;static#r={items:[],accountBalance:0};static#s=new QrcgAccountCreditCart;static instance(){return this.#s}constructor(){setTimeout(()=>{this.#t=new AccountCreditManager,this.#i()},0)}async#i(){const w=await this.#t.getAccountBalance(!0);this.data={...this.data,accountBalance:w}}items(){return this.data.items}total(){return this.data.items.reduce(function(w,q){return w+q.price*q.quantity},0)}amountToPay(){return Math.max(0,this.total()-this.data.accountBalance)}numberOfItems(){return this.data.items.reduce(function(w,q){return w+q.quantity},0)}addToCart(w){const q=this.data.items,D=q.find(Q=>Q.type===w);D?D.quantity+=1:q.push(new QrcgCartItem({type:w})),this.data={...this.data,items:q}}removeItem(w){const q=this.data.items.filter(D=>D.type!=w.type);this.data={...this.data,items:q}}increaseQuantity(w){this.#n(w,w.quantity+1)}decreaseQuantity(w){this.#n(w,Math.max(1,w.quantity-1))}#n(w,q){const D=this.data.items,Q=D.find(O=>O.type===w.type);Q.quantity=q,this.data={...this.data,items:D}}get data(){return this.load()??QrcgAccountCreditCart.#r}set data(w){this.save(w),this.fireOnChange()}fireOnChange(){document.dispatchEvent(new CustomEvent("qrcg-account-credit-cart:on-change",{detail:{data:this.data}}))}save(w){localStorage[this.#e]=JSON.stringify(w)}load(){try{const w=JSON.parse(localStorage[this.#e]);return w.items=w.items.map(q=>new QrcgCartItem(q)),w}catch{return null}}}class AccountCreditManager{qrcodeTypeManager=new QRCodeTypeManager$1;#e=void 0;#t=QrcgAccountCreditCart.instance();async getUserBalance(w){if(!loggedIn())return 0;try{const{response:q}=await get(`users/${w}/account-balance`),{account_balance:D}=await q.json();return D}catch{return 0}}async getAccountBalance(w=!0){if(!loggedIn())return"";if(typeof this.#e<"u"&&w)return this.#e;const{response:q}=await get("myself"),D=await q.json();return this.#e=isNaN(+D.account_balance)?0:+D.account_balance,this.#e}dynamicQRCodePrice(){return Config.get("account_credit.dynamic_qrcode_price")}staticQRCodePrice(){return Config.get("account_credit.static_qrcode_price")}getQRCodeTypePrice(w){return this.qrcodeTypeManager.isDynamic(w)?this.dynamicQRCodePrice():this.staticQRCodePrice()}async#r(w){return this.qrcodeTypeManager.isDynamic(w)?await this.getAccountBalance()>=this.dynamicQRCodePrice():await this.getAccountBalance()>=this.staticQRCodePrice()}async canCreateQRCode(w){if(!await this.#r(w))throw new Error("cannot create QR code")}async showAddToCartModal(w){const q=this.qrcodeTypeManager.isDynamic(w)?t$3`dynamic`:t$3`static`;try{await confirm$1({title:t$3`Buy QR Code`,message:t$3`Are you sure you want to buy `+q+t$3` QR Code?`,affirmativeText:t$3`Add To Cart`,negativeText:t$3`Cancel`}),this.#t.addToCart(w)}catch{}}}class QrcgAccountBalance extends i$1{billing=new BillingMode;accountCredit=new AccountCreditManager;static styles=[i$3`
            :host {
                display: flex;
                user-select: none;
                -webkit-user-select: none;

                align-items: center;
            }

            .container {
                padding: 0.5rem 0.8rem;
                background-color: var(--gray-0);
                font-size: 0.8rem;
                border-radius: 1rem;
                display: flex;
                margin-left: 3rem;
            }
            .amount {
                font-weight: bold;
            }

            .text {
                margin-right: 0.5rem;
            }

            .recharge {
                background-color: var(--gray-0);
                color: black;
                font-weight: bold;
                margin-left: 1rem;
                font-size: 0.8rem;
                padding: 0.25rem 0.5rem;
                border-radius: 0.25rem;
                text-decoration: none;
            }
        `];static get properties(){return{loading:{type:Boolean},balance:{},showAddBalance:{type:Boolean,attribute:"show-add-balance"}}}static requestRefresh(){document.dispatchEvent(new CustomEvent(this.requestRefreshEventName))}static get requestRefreshEventName(){return"account-balance:request-refresh"}constructor(){super(),this.loading=!0,this.fetchAccountBalance()}connectedCallback(){super.connectedCallback(),document.addEventListener(QrcgAccountBalance.requestRefreshEventName,this.refresh)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener(QrcgAccountBalance.requestRefreshEventName,this.refresh)}refresh=()=>{this.fetchAccountBalance(!1)};async fetchAccountBalance(w=!0){const q=await this.accountCredit.getAccountBalance(w);this.balance=price(q??0),q>0?this.classList.add("gt-zero"):this.classList.remove("gt-zero"),this.loading=!1}renderAddBalanceButton(){if(this.showAddBalance)return x`
            <a class="recharge" href="/checkout-account-credit"
                >${t$3`Add Balance`}</a
            >
        `}render(){if(!this.billing.isSubscription()&&!this.loading)return x`
            <div class="container" part="container">
                <span class="text" part="text">${t$3`Account Balance`} </span>

                <span class="amount" part="amount"> ${this.balance} </span>
            </div>

            ${this.renderAddBalanceButton()}
        `}}window.defineCustomElement("qrcg-account-balance",QrcgAccountBalance);const style$2h=":host{display:flex}@media(max-width:900px){:host{display:none}}a{color:var(--dashboard-sidebar-text-color, white);margin-right:1rem;display:flex;align-items:center;text-decoration:none}:host(.dir-rtl) a{margin-left:1rem;margin-right:0}a span{font-weight:700;font-size:.8rem;margin-left:.5rem}:host(.dir-rtl) a span{margin-left:0;margin-right:.5rem}a:hover{text-decoration:underline}qrcg-icon{width:1.2rem;height:1.2rem}";class QrcgScriptSupportLink extends BaseComponent{static tag="qrcg-script-support-link";static styleSheets=[...super.styleSheets,style$2h];_dir=new DirectionAwareController(this);shouldRender(){return ConfigHelper.shouldShowSupportPortalLink()}render(){if(this.shouldRender())return x`
            <a target="_blank" href="${ConfigHelper.getSupportPortalLink()}">
                <qrcg-icon mdi-icon=${mdiLifebuoy}></qrcg-icon>
                <span>${t$3`Support`}</span>
            </a>
        `}}QrcgScriptSupportLink.register();const style$2g=":host{position:relative}@media(max-width:900px){:host{display:none}}input{background-color:#fff;border:0;border-radius:2rem;padding:.5rem 2rem;margin:.5rem;width:25rem}input:focus{outline:0}input::placeholder{color:var(--gray-1);font-weight:700;font-style:italic}qrcg-icon.search{pointer-events:none;position:absolute;inset-inline-start:1rem;inset-block-start:1rem;color:var(--primary-0)}qrcg-icon.close{position:absolute;inset-inline-end:1rem;inset-block-start:1rem;color:var(--gray-2);cursor:pointer}";class DashboardSearchBox extends BaseComponent{static tag="qrcg-dashboard-search-box";static styleSheets=[...super.styleSheets,style$2g];static EVENT_ON_SEARCH=`${this.tag}::on-search`;get nativeInput(){return this.$("input")}static get properties(){return{...super.properties,keyword:{type:String}}}constructor(){super(),this.keyword="",this.isFirstLoad=!0}connectedCallback(){super.connectedCallback(),this.addEventListener("input",this.onNativeInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("input",this.onNativeInput)}onNativeInput(){this.keyword=this.nativeInput.value}updated(w){w.has("keyword")&&this.dispatchSearchEvent()}dispatchSearchEvent(){this.isFirstLoad&&isEmpty(this.keyword)||(clearTimeout(this._keywordTimeout),this._keywordTimeout=setTimeout(()=>{this.dispatchEvent(new CustomEvent(DashboardSearchBox.EVENT_ON_SEARCH,{bubbles:!0,composed:!0,detail:{keyword:this.keyword}})),this.isFirstLoad=!1},500))}clear(){this.keyword=""}renderClearIcon(){if(!isEmpty(this.keyword))return x`
            <qrcg-icon
                class="close"
                mdi-icon=${mdiClose}
                @click=${this.clear}
            ></qrcg-icon>
        `}render(){return x`
            <qrcg-icon class="search" mdi-icon=${mdiMagnify}></qrcg-icon>

            <input
                name="keyword"
                placeholder="${t$3`Search in QR codes ....`}"
                .value=${this.keyword}
            />

            ${this.renderClearIcon()}
        `}}DashboardSearchBox.register();const style$2f=":host{display:flex;height:var(--dashboard-header-height);background-color:var(--dashboard-sidebar-background-color);padding:0 1rem;align-items:center;position:sticky;top:0;z-index:10}.sidebar-toggle::part(button){padding:.3rem;min-width:fit-content;border-radius:.2rem;display:flex;align-items:center;justify-content:center}.push{flex:1}.logout{font-weight:700;text-transform:uppercase;letter-spacing:1px;font-size:.8rem;text-decoration:none;color:var(--dashboard-sidebar-text-color, white);cursor:pointer}:host(.dir-rtl) .logout{letter-spacing:0}.logout:hover{text-decoration:underline}.sidebar-toggle.closed{transform:scaleX(-1)}.sidebar-toggle{display:block}.sidebar-toggle::part(button){border-radius:50%;width:2rem;height:2rem}.sidebar-toggle qrcg-icon{width:1rem;height:1rem}.username{display:flex;gap:.5rem;align-items:center;color:var(--dashboard-sidebar-text-color, white);font-weight:700;margin-inline-end:1rem;-webkit-user-select:none;user-select:none;cursor:pointer;text-decoration:none;font-size:.8rem}.username img{width:1.7rem;height:1.7rem;object-fit:cover;border-radius:50%;object-position:center}.username:hover{text-decoration:underline}@media(max-width:450px){.username{display:none}}@media(min-width:900px){.sidebar-toggle{display:none}}qrcg-app-logo{margin-inline-end:1rem;height:calc(var(--dashboard-header-height) - 1rem)}qrcg-language-picker{margin-inline-end:1rem;color:var(--dashboard-sidebar-text-color, black)}.search-box{background-color:#fff;border-radius:2rem}";class QRCGDashboardHeader extends BaseComponent{#e=new DirectionAwareController(this);static styleSheets=[...super.styleSheets,style$2f];static get properties(){return{...super.properties,sideBarClosed:{state:!0}}}constructor(){super(),this.setSidebarClosed=this.setSidebarClosed.bind(this)}connectedCallback(){super.connectedCallback(),document.addEventListener("qrcg-dashboard-sidebar:status-changed",this.setSidebarClosed),this.constructor._isRendered=!0}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("qrcg-dashboard-sidebar:status-changed",this.setSidebarClosed),this.constructor._isRendered=!1}setSidebarClosed(w){this.sideBarClosed=w.detail.closed}toggleSidebar(){document.dispatchEvent(new CustomEvent("qrcg-dashboard-sidebar:request-toggle"))}static get isRendered(){return this._isRendered}onLogout(){logout()}renderProfileImage(){const w=loadUser();if(!w)return;let q=w.profile_image_url;return q||(q="/assets/images/user.jpg"),x` <img src=${q} /> `}renderProfileLink(){let q=loadUser()?.name;return q||(q=t$3`My Account`),x`
            <a class="username" href="${url("/account/my-account")}">
                ${this.renderProfileImage()}
                <span> ${q} </span>
            </a>
        `}render(){return x`
            <qrcg-app-logo href="/"></qrcg-app-logo>

            <qrcg-button
                class="sidebar-toggle ${e$1({closed:this.sideBarClosed})}"
                @click=${this.toggleSidebar}
            >
                <qrcg-icon mdi-icon=${mdiBackburger}></qrcg-icon>
            </qrcg-button>

            <qrcg-account-balance show-add-balance></qrcg-account-balance>

            <div class="push"></div>

            <qrcg-script-support-link></qrcg-script-support-link>

            ${this.renderProfileLink()}

            <qrcg-language-picker></qrcg-language-picker>

            <div class="logout" @click=${this.onLogout}>${t$3`Logout`}</div>
        `}}window.defineCustomElement("qrcg-dashboard-header",QRCGDashboardHeader);const observeState=F=>class extends F{constructor(){super(),this._observers=[]}update(w){stateRecorder.start(),super.update(w),this._initStateObservers()}connectedCallback(){super.connectedCallback(),this._wasConnected&&(this.requestUpdate(),delete this._wasConnected)}disconnectedCallback(){super.disconnectedCallback(),this._wasConnected=!0,this._clearStateObservers()}_initStateObservers(){this._clearStateObservers(),this.isConnected&&this._addStateObservers(stateRecorder.finish())}_addStateObservers(w){for(let[q,D]of w){const Q=()=>this.requestUpdate();this._observers.push([q,Q]),q.addObserver(Q,D)}}_clearStateObservers(){for(let[w,q]of this._observers)w.removeObserver(q);this._observers=[]}};class LitState{constructor(){this._observers=[],this._initStateVars()}addObserver(w,q){this._observers.push({observer:w,keys:q})}removeObserver(w){this._observers=this._observers.filter(q=>q.observer!==w)}_initStateVars(){if(this.constructor.stateVarOptions)for(let[w,q]of Object.entries(this.constructor.stateVarOptions))this._initStateVar(w,q);if(this.constructor.stateVars)for(let[w,q]of Object.entries(this.constructor.stateVars))this._initStateVar(w,{}),this[w]=q}_initStateVar(w,q){if(this.hasOwnProperty(w))return;q=this._parseOptions(q);const D=new q.handler({options:q,recordRead:()=>this._recordRead(w),notifyChange:()=>this._notifyChange(w)});Object.defineProperty(this,w,{get(){return D.get()},set(Q){D.shouldSetValue(Q)&&D.set(Q)},configurable:!0,enumerable:!0})}_parseOptions(w){return w.handler?w.propertyMethod&&w.propertyMethod.kind==="method"&&Object.assign(w,w.propertyMethod.descriptor.value.call(this)):w.handler=StateVar,w}_recordRead(w){stateRecorder.recordRead(this,w)}_notifyChange(w){for(const q of this._observers)(!q.keys||q.keys.includes(w))&&q.observer(w)}}class StateVar{constructor(w){this.options=w.options,this.recordRead=w.recordRead,this.notifyChange=w.notifyChange,this.value=void 0}get(){return this.recordRead(),this.value}shouldSetValue(w){return this.value!==w}set(w){this.value=w,this.notifyChange()}}class StateRecorder{constructor(){this._log=null}start(){this._log=new Map}recordRead(w,q){if(this._log===null)return;const D=this._log.get(w)||[];D.includes(q)||D.push(q),this._log.set(w,D)}finish(){const w=this._log;return this._log=null,w}}const stateRecorder=new StateRecorder;class DashboardState extends LitState{static get stateVars(){return{sidebarClosed:!1}}}const state$2=new DashboardState;class QrcgBreadcrumbs extends i$1{customStyleInjector=new CustomStyleInjector(this);static styles=[i$3`
            :host {
                display: flex;
                font-size: 0.8rem;
            }

            @media (min-width: 500px) {
                :host {
                    font-size: 1rem;
                }
            }

            ::slotted(a),
            a {
                color: var(--primary-0);
                text-decoration: none;
            }

            ::slotted(.separator),
            .separator {
                color: var(--gray-2);
                margin: 0 1rem;
                font-weight: bold;
            }
        `];static get properties(){return{links:{type:Array}}}constructor(){super(),this.links=[]}disconnectedCallback(){super.disconnectedCallback(),this.links=[],this.innerHTML=""}firstUpdated(){isEmpty(this.links)&&this.renderLinks()}renderLinks=()=>{this.insertSeparators(),this.nullifyLastLink()};insertSeparators(){this.querySelectorAll("a").forEach(w=>{const q=document.createElement("div");q.className="separator",q.innerHTML="/",w.nextElementSibling&&this.insertBefore(q,w.nextElementSibling)})}nullifyLastLink(){const w=this.querySelector("a:last-of-type");if(!w)return;const q=w?.textContent,D=document.createElement("span");D.innerText=q,D.className="current",this.appendChild(D),w.remove()}transformLinks(){return this.links.map(w=>{const q={...w};return w.href==="/dashboard"&&(q.href="/dashboard/qrcodes"),q})}willUpdate(w){w.has("links")&&(this.innerHTML=this.transformLinks().map(q=>`<a href=${q.href}>${t$3(q.text)}</a>`).join(""),this.renderLinks())}render(){return x`<slot></slot>`}}window.defineCustomElement("qrcg-breadcrumbs",QrcgBreadcrumbs);class QrcgDashboardBreadcrumbs extends i$1{static links=[];static instances=[];static styles=[i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{}}constructor(){super(),this.constructor.instances.push(this)}connectedCallback(){super.connectedCallback()}render(){return x`
            <qrcg-breadcrumbs .links=${this.constructor.links}>
            </qrcg-breadcrumbs>
        `}static setLinks(w){this.links=w,this.instances.forEach(q=>q.requestUpdate())}static buildBreadcrumbFromCurrentPath(w=titleCase){return window.location.pathname.split("/").filter(q=>!isEmpty(q)).map(q=>{const D=window.location.pathname.split("/"),Q=D.indexOf(q),O=D.filter((U,G)=>G<=Q).join("/");return{text:w(q),href:O}})}}window.defineCustomElement("qrcg-dashboard-breadcrumbs",QrcgDashboardBreadcrumbs);class QrcgDashboardSidebarToggle extends i$1{#e=new DirectionAwareController(this);static styles=[i$3`
            :host {
                display: none;
                position: relative;
                z-index: 99999;
                height: 2rem;
                /* overflow: visible; */
                cursor: pointer;
            }

            @media (min-width: 900px) {
                :host {
                    display: block;
                }
            }

            .sidebar-toggle {
                position: absolute;
                transform: translateX(-1.2rem);
                top: calc(var(--dashboard-header-height) + 5rem);
                margin: 0;
                z-index: 9999999;
                transition: opacity 0.2s ease;
                opacity: 0;
                cursor: pointer;
            }

            :host(.dir-rtl) .sidebar-toggle {
                transform: translateX(1.2rem) scaleX(-1);
            }

            .sidebar-toggle::part(button) {
                min-width: 0;
                border-radius: 50%;
                width: 2rem;
                height: 2rem;
                margin: 0;
                transition: box-shadow 0.2s 0.1s ease;
            }

            .sidebar-toggle.closed {
                transform: translateX(-1.2rem) scaleX(-1);
            }

            :host(.dir-rtl) .sidebar-toggle.closed {
                transform: translateX(1.2rem) scaleX(1);
            }

            .sidebar-toggle.visible {
                opacity: 1;
            }

            .sidebar-toggle.visible::part(button) {
                box-shadow: 0.2rem 0.2rem 0.5rem rgba(0, 0, 0, 0.5);
            }
        `];static get properties(){return{sideBarClosed:{type:Boolean},sidebarHover:{type:Boolean}}}connectedCallback(){super.connectedCallback(),document.addEventListener("qrcg-dashboard-sidebar:status-changed",this.setSidebarClosed),this.addEventListener("mouseenter",this.onSidebarHoverChange),this.addEventListener("mouseleave",this.onSidebarHoverChange),document.addEventListener("qrcg-dashboard-sidebar:mouseenter",this.onSidebarHoverChange),document.addEventListener("qrcg-dashboard-sidebar:mouseleave",this.onSidebarHoverChange),document.addEventListener("scroll",this.onScroll)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("mouseenter",this.onSidebarHoverChange),this.removeEventListener("mouseleave",this.onSidebarHoverChange),document.removeEventListener("qrcg-dashboard-sidebar:status-changed",this.setSidebarClosed),document.removeEventListener("qrcg-dashboard-sidebar:mouseenter",this.onSidebarHoverChange),document.removeEventListener("qrcg-dashboard-sidebar:mouseleave",this.onSidebarHoverChange),document.removeEventListener("scroll",this.onScroll)}onScroll=()=>{this.style.transform=`translateY(${window.scrollY}px)`};onSidebarHoverChange=w=>{w.type.match(/enter/)?this.sidebarHover=!0:this.sidebarHover=!1};setSidebarClosed=w=>{this.sideBarClosed=w.detail.closed};toggleSidebar(){document.dispatchEvent(new CustomEvent("qrcg-dashboard-sidebar:request-toggle"))}render(){return x`
            <qrcg-button
                class="sidebar-toggle ${e$1({closed:this.sideBarClosed,"sidebar-hover":this.sidebarHover,visible:this.sideBarClosed||this.sidebarHover})}"
                @click=${this.toggleSidebar}
            >
                <qrcg-icon mdi-icon=${mdiBackburger}></qrcg-icon>
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-dashboard-sidebar-toggle",QrcgDashboardSidebarToggle);class QrcgAccountCreditCartWidget extends i$1{#e=QrcgAccountCreditCart.instance();static styles=[i$3`
            :host {
                display: block;
            }

            .container {
                position: fixed;
                left: 50%;
                transform: translateX(-50%);
                bottom: 1rem;
                background-color: var(--primary-0);
                padding: 1rem;

                border-radius: 0.5rem;
                padding: 1rem;
                color: white;
                display: flex;
                align-items: center;

                animation: intro 1s 0.5s ease both;
            }

            @keyframes intro {
                from {
                    opacity: 0;
                    transform: scale(0.98);
                    bottom: 0;
                }

                to {
                    opacity: 1;
                    transform: scale(1);
                    bottom: 1rem;
                }
            }

            qrcg-button {
                --button-color: var(--primary-0);
                --button-background-color: white;

                --button-color-hover: var(--primary-1);
                --button-background-color-hover: white;
            }

            .number-of-items {
                font-weight: bold;
                margin-right: 1rem;
            }
        `];constructor(){super()}connectedCallback(){super.connectedCallback(),document.addEventListener("qrcg-account-credit-cart:on-change",this.onCartChange)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("qrcg-account-credit-cart:on-change",this.onCartChange)}static get properties(){return{cartData:{}}}onCartChange=()=>{this.requestUpdate()};goToCartPage(){window.location="/account-credit-cart"}render(){if(!isEmpty(this.#e.data.items))return x`
            <div class="container">
                <div class="number-of-items">
                    ${this.#e.numberOfItems()} ${t$3`Items in your cart`}
                </div>

                <qrcg-button @click=${this.goToCartPage}>
                    ${t$3`Checkout Now`}
                </qrcg-button>
            </div>
        `}}window.defineCustomElement("qrcg-account-credit-cart-widget",QrcgAccountCreditCartWidget);const style$2e=":host{display:block;--dashboard-header-height: var(--settings-dashboard-header-height, 3.5rem);--qrcg-input-box-shadow: inset 0 0 0 2px var(--gray-1);--qrcg-input-box-shadow-focus: inset 0 0 0 2px var(--gray-2)}.sidebar-and-content{display:flex;position:relative;z-index:0;background-color:var(--dashboard-sidebar-background-color, var(--primary-0))}.page-content{flex:1;padding:1rem 1.6rem;box-sizing:border-box;background-color:#fff;border-radius:2rem;margin-inline-end:1rem;margin-block-end:1rem;margin-inline-start:1rem;padding-bottom:var(--dashboard-page-content-padding-bottom, 1rem);max-width:100vw;overflow-x:auto;transition:max-width .2s ease}@media(max-width:900px){.page-content{padding:1rem 0;margin-inline-end:.5rem;margin-inline-start:.5rem}}@media(min-width:900px){.page-content{max-width:calc(100vw - var(--dashboard-sidebar-actual-width))}}.page-content.colored{background-image:radial-gradient(#e7e5ff80,#ffffff80),linear-gradient(-45deg,#0004ff1a,#4cff431a,#ffffff1a)}qrcg-dashboard-breadcrumbs{margin-bottom:1rem}.content-header{display:flex;flex-wrap:wrap;align-items:center;margin-bottom:1rem}.header-actions{margin-left:auto;padding-top:.16rem}:host(.dir-rtl) .header-actions{margin-left:0;margin-right:auto}h1{font-size:1rem;margin:0;color:var(--gray-2)}.page-content>qrcg-box{padding:1rem}@media(max-width:900px){.page-content>qrcg-box{padding:.5rem}}.bottom-gap{padding:12%}",style$2d=".background-image{background-size:cover;background-position:top;background-repeat:no-repeat;padding-bottom:1rem;display:flex;flex-direction:column;height:var(--banner-height, 10rem);justify-content:flex-end}.background-video-container{position:relative;padding:5rem 0 1rem}.background-video-container video{position:absolute;top:0;left:0;width:100%;z-index:0}.container{margin:0 1rem;border-radius:2rem;overflow:hidden;color:var(--text-color, white);text-align:center;line-height:1.7}.title,.subtitle{z-index:3;position:relative}.title{font-size:1.3rem;font-weight:700}.subtitle{font-size:1rem;font-weight:400}";class DashboardBanner extends BaseComponent{static tag="qrcg-dashboard-banner";static styleSheets=[...super.styleSheets,style$2d];firstUpdated(){super.firstUpdated(),this.style.setProperty("--text-color",Config.get("dashboard.top_banner_text_color")??"white"),this.style.setProperty("--banner-height",Config.get("dashboard.top_banner_height")??"10rem")}shouldRender(){return this.getType()!=="no_banner"}isEnabled(){return this.getType()!=="no_banner"}getType(){return Config.get("dashboard.top_banner_option")??"no_banner"}raw(w){return u$3`${s$3(w)}`}getSubtitle(){return this.raw(Config.get("dashboard.top_banner_subtitle"))}getTitle(){return this.raw(Config.get("dashboard.top_banner_title"))??""}renderSubtitle(){if(!isEmpty(this.getSubtitle()))return u$3` <div class="subtitle">${this.getSubtitle()}</div> `}renderTitle(){if(!isEmpty(this.getTitle()))return u$3` <div class="title">${this.getTitle()}</div> `}renderBackgroundImage(){if(this.getType()!=="image")return;const w=Config.get("dashboard.top_banner_image_url");return u$3`
            <div class="background-image" style="background-image: url(${w})">
                ${this.renderTitle()}
                <!--  -->
                ${this.renderSubtitle()}
            </div>
        `}renderBackgroundVideo(){if(this.getType()!=="video")return;const w=Config.get("dashboard.top_banner_video_url");return u$3`
            <div class="background-video-container">
                <video muted autoplay loop inline>
                    <source src=${w} type="video/mp4" />
                </video>

                ${this.renderTitle()}
                <!--  -->
                ${this.renderSubtitle()}
            </div>
        `}render(){if(this.isEnabled())return u$3`
            <div class="container">
                <!--  -->
                ${this.renderBackgroundImage()}

                <!--  -->

                ${this.renderBackgroundVideo()}
            </div>
        `}}DashboardBanner.register();const style$2c=":host{--desktop-max-width: 70%}.body{text-align:center;border-bottom:0;max-height:80vh}.toolbar{border-bottom:0}.close{position:absolute;border-radius:1rem;width:2.5rem;height:2.5rem;top:-1.25rem;inset-inline-end:1rem;color:#fff;background-color:var(--primary-0);padding:.5rem}video{border-radius:1rem;width:100%}.image{overflow:hidden;width:100%}.image img{border-radius:1rem}.raw-content{font-size:1.2rem}";class WelcomeModal extends QrcgModal{static tag="qrcg-dashboard-welcome-modal";static styleSheets=[...super.styleSheets,style$2c];static configObject={};static get showTimesKey(){return"__dashboard_welcome_modal_show_times__"+window.location.pathname}static set showTimes(w){localStorage[this.showTimesKey]=JSON.stringify(w)}static get showTimes(){const w=+localStorage[this.showTimesKey];return isNaN(w)?0:w}static getConfig(w){return isEmpty(this.configObject)?Config.get(w):(w=w.replace(/dashboard./,""),this.configObject[w])}static didShowTimesExceeded(){const w=this.getConfig("dashboard.welcome_modal_show_times");return w&&!isNaN(w)?this.showTimes>w:(this.showTimes++,!1)}static openIfNeeded(){this.getConfig("dashboard.welcome_popup_enabled")==="enabled"&&(!isClient()&&window.location.pathname.match(/dashboard/i)||this.didShowInCurrentSession||this.didShowTimesExceeded()||(this.didShowInCurrentSession=!0,this.open()))}getConfig(w){return WelcomeModal.getConfig(w)}renderImage(){const w=this.getConfig("dashboard.welcome_modal_image_url");if(w)return u$3`
            <div class="image">
                <img src="${w}" alt="Welcome Image" class="welcome-image" />
            </div>
        `}renderVideo(){const w=this.getConfig("dashboard.welcome_modal_video_url");if(w)return u$3`
            <video controls autoplay muted loop>
                <source src="${w}" />
            </video>
        `}renderBody(){const w=this.getConfig("dashboard.welcome_modal_text");return u$3`
            <div class="raw-content">${s$3(w)}</div>
            <!--  -->
            <div>${this.renderVideo()}</div>
            <div>${this.renderImage()}</div>
            <!--  -->
        `}renderActions(){}getCloseIcon(){return mdiCloseThick}}WelcomeModal.register();window.WelcomeModal=WelcomeModal;class QRCGDashboardLayout extends observeState(BaseComponent){static SESSION_STORAGE_SIDEBAR_CLOSED_KEY="qrcg-dashboard-layout:sidebar-closed";#e=new DirectionAwareController(this);static instances=[];static styleSheets=[...super.styleSheets,style$2e];constructor(){super(),this.onCloseRequested=this.onCloseRequested.bind(this),this.onToggleRequested=this.onToggleRequested.bind(this),this.onOpenRequested=this.onOpenRequested.bind(this)}static get properties(){return{}}connectedCallback(){super.connectedCallback(),document.addEventListener("qrcg-dashboard-sidebar:request-toggle",this.onToggleRequested),document.addEventListener("qrcg-dashboard-sidebar:request-close",this.onCloseRequested),document.addEventListener("qrcg-dashboard-sidebar:request-open",this.onOpenRequested),this.attachGlobalStyles(),this.constructor.instances.push(this),this.loadSidebarClosedValue(),window.addEventListener("qrcg-router:location-changed",this.onLocationChanged),WelcomeModal.openIfNeeded()}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("qrcg-dashboard-sidebar:request-toggle",this.onToggleRequested),document.removeEventListener("qrcg-dashboard-sidebar:request-close",this.onCloseRequested),document.removeEventListener("qrcg-dashboard-sidebar:request-open",this.onOpenRequested),this.detachGlobalStyles(),this.constructor.instances=this.constructor.instances.filter(w=>w!==this),window.removeEventListener("qrcg-router:location-changed",this.onLocationChanged)}attachGlobalStyles(){const w=document.createElement("style"),q=Config.get("theme.default_scrollbar")==="enabled";w.innerHTML=styled`
            html {

                ${q?"":"scrollbar-width: none;"}
            }

            ${q?"":styled`
            body::-webkit-scrollbar {
                display: none;
            }

            `}

            body {
                background-color: whitesmoke;
            }
        `,this.globalStyle=w,document.head.appendChild(w)}detachGlobalStyles(){this.globalStyle.remove()}static get sidebarIsClosed(){return state$2.sidebarClosed}onCloseRequested(){this.setSidebarClosed(!0)}onToggleRequested(){this.setSidebarClosed(!state$2.sidebarClosed)}onOpenRequested(){this.setSidebarClosed(!1)}setSidebarClosed(w){state$2.sidebarClosed=w,this.storeSidebarClosedValue()}storeSidebarClosedValue(){sessionStorage[QRCGDashboardLayout.SESSION_STORAGE_SIDEBAR_CLOSED_KEY]=JSON.stringify(state$2.sidebarClosed)}loadSidebarClosedValue(){let w=!1;try{w=JSON.parse(sessionStorage[QRCGDashboardLayout.SESSION_STORAGE_SIDEBAR_CLOSED_KEY])}catch{}state$2.sidebarClosed=w}static get sidebarClosed(){return isEmpty(this.instances)?!0:state$2.sidebarClosed}render(){return x`
            <qrcg-buy-toolbar></qrcg-buy-toolbar>
            <qrcg-dashboard-header></qrcg-dashboard-header>
            <div class="sidebar-and-content">
                <qrcg-dashboard-sidebar
                    .closed=${state$2.sidebarClosed}
                ></qrcg-dashboard-sidebar>
                <qrcg-dashboard-sidebar-toggle></qrcg-dashboard-sidebar-toggle>
                <div class="page-content">
                    <qrcg-dashboard-notice></qrcg-dashboard-notice>
                    <qrcg-custom-code-renderer
                        position="Dashboard: before content"
                    ></qrcg-custom-code-renderer>
                    <slot name="page-start"></slot>
                    <qrcg-box>
                        <div class="content-header" part="content-header">
                            <h1><slot name="title"></slot></h1>
                            <div class="header-actions">
                                <slot name="header-actions"></slot>
                            </div>
                        </div>
                        <div class="content">
                            <slot name="content"></slot>

                            <qrcg-account-credit-cart-widget></qrcg-account-credit-cart-widget>
                        </div>
                    </qrcg-box>
                </div>
            </div>
        `}}window.defineCustomElement("qrcg-dashboard-layout",QRCGDashboardLayout);class QRCGTitleController{host;static instances=[];constructor(w){this.host=w,w.addController(this),this.onTitleChange=this.onTitleChange.bind(this)}static async boot(){for(;!document.head;)await new Promise(w=>setTimeout(w,50));runningSSR()||(document.head.querySelector("title").innerHTML=Config.get("app.name"))}hostConnected(){document.addEventListener("qrcg-title:change",this.onTitleChange),this.constructor.instances.push(this)}hostDisconnected(){document.removeEventListener("qrcg-title:change",this.onTitleChange),this.constructor.instances=this.constructor.instances.filter(w=>w!==this),this.host=null}onTitleChange(){this.host.updateComplete.then(()=>{this.host?.requestUpdate()})}get pageTitle(){return document.querySelector("title").innerHTML.replace(` | ${Config.get("app.name")}`,"")}set pageTitle(w){isEmpty(w)||(document.querySelector("title").innerHTML=`${w} | ${Config.get("app.name")}`,document.dispatchEvent(new CustomEvent("qrcg-title:change")),this.constructor.updateAllInstances())}static updateAllInstances(){this.instances.forEach(w=>{w.host&&w.host.updateComplete.then(()=>{w.host?.requestUpdate()})})}}QRCGTitleController.boot();let firstStepSlug=(ConfigHelper.isLocal(),"type");class StepsManager{#e=[{name:t$3("Type"),value:"type"},{name:t$3("Data"),value:"data"},{name:t$3("Design"),value:"design"},{name:t$3("Download"),value:"download"}];getSteps(){return this.shouldRenderTypeSelectionStep()?this.#e:this.#e.filter(w=>w.value!=="type")}isStepAvailable(w){return!isEmpty(this.getSteps().filter(q=>q.value==w))}getStepsSlugs(){return this.getSteps().map(w=>w.value)}getSlugByIndex(w){return this.getStepsSlugs()[w]}getFirstStepSlug(){return this.isStepAvailable(firstStepSlug)?firstStepSlug:this.getSlugByIndex(0)}shouldRenderTypeSelectionStep(){return this.isQRCodeNew()}isQRCodeNew(){return window.location.pathname.match(/new/)}}const black$1="#000000",white$1="#ffffff",primaryColor$1="#1c57cb",stepsManager=new StepsManager,defaultState={id:null,name:"",data:{url:""},type:"url",currentStep:stepsManager.getFirstStepSlug(),design:{fillType:"solid",module:"square",gradientType:"RADIAL",eyeExternalColor:black$1,eyeInternalColor:black$1,eyeColor:black$1,foregroundColor:black$1,frame:"none",logoScale:.2,logoPositionX:.5,logoPositionY:.5,logoRotate:0,logoBackground:!0,logoBackgroundFill:"#fff",logoUrl:"",logoType:"preset",logoBackgroundScale:1.3,logoBackgroundShape:"circle",backgroundEnabled:!0,backgroundColor:white$1,finder:"default",finderDot:"default",advancedShape:"none",advancedShapeDropShadow:!0,advancedShapeFrameColor:black$1,fontFamily:"Raleway",text:t$3("SCAN ME"),textColor:white$1,textBackgroundColor:primaryColor$1,textSize:1,ai_strength:1.8,ai_steps:18},remoteRecord:null,loading:!1};class QRCodeModuleState extends LitState{static get stateVars(){return defaultState}}const state$1=new QRCodeModuleState;class QRCGRouteParamsController{host;isConnected=!1;constructor(w){this.host=w,w.addController(this),this.onChange=this.onChange.bind(this)}hostConnected(){window.addEventListener("qrcg-route:route-paramas-change",this.onChange)}hostDisconnected(){window.removeEventListener("qrcg-route:route-paramas-change",this.onChange)}getParentRoutes(){let w=this.host.parentNode,q=[];for(;w;)w.nodeType==Node.DOCUMENT_FRAGMENT_NODE&&(w=w.getRootNode().host),isFunction(w.matches)&&w.matches("qrcg-route, qrcg-protected-route")&&q.push(w),w=w.parentNode;return q}getRouteParams(){return this.getParentRoutes().reduce((q,D)=>(Object.keys(D.routeParams).forEach(function(Q){const O=D.routeParams[Q];isEmpty(O)||(q[Q]=O)}),q),{})}onChange(){isFunction(this.host.onRouteParamChange)&&this.host.onRouteParamChange(this.getRouteParams())}get(w){return this.getRouteParams()[w]}}const PlanEnforcement={loading:!1,dataPromise:null,localUserPromise:null,localUserResolver:()=>{},data:{},async loadData(){if(this.loading)return;this.loading=!0,this.dataPromise=Promise.all([getDynamicQRCodeCount(),getTotalScans()]);const F=await this.dataPromise,w=F[0],q=F[1];this.data={totalQrCodeCount:+w,qrcodeScansCount:+q},this.loading=!1},beforeEach(F){return this.loadData(),this.initLocalUserPromise(),["localUserReady","routeAfterRender"].indexOf(F)!=-1?!0:!isEmpty(this.data)&&this.planLimitReached()},initLocalUserPromise(){this.localUserPromise||(this.localUserPromise=new Promise(F=>{this.localUserResolver=F}))},localUserReady(){this.localUserResolver()},async routeAfterRender(){await this.dataPromise,await this.localUserPromise,this.planLimitReached()&&this.showPlanLimitReachedNotice()},locationWillChange(F){},routeWillRender(F){},planLimitReached(){return Config.get("app.wplus_integration_enabled")?!1:this.dynamicQRCodeLimitsReached()||this.scanLimitReached()},scanLimitReached(){if(isSuperAdmin())return!1;const{qrcodeScansCount:F}=this.data,q=+currentPlan()?.number_of_scans;return q==-1?!1:F>=q},dynamicQRCodeLimitsReached(){if(isSuperAdmin())return!1;const{totalQrCodeCount:F}=this.data,q=currentPlan()?.number_of_dynamic_qrcodes;return q==-1?!1:F>=q},showPlanLimitReachedModal(){const F=this.makeMessage();showSubscriptionModal({title:t$3("Plan limits reached"),message:F,affirmativeText:t$3("Upgrade")})},makeMessage(){const{totalQrCodeCount:F,qrcodeScansCount:w}=this.data,q=currentPlan();let D=[];F>=q?.number_of_dynamic_qrcodes&&D.push(t$3("maximum number of dynamic QR Codes")),w>=q?.number_of_scans&&D.push(t$3("maximum number of scans"));const Q=D.join(t$3(" and "));return`${t$3`You have reached`} ${Q}, ${t$3`upgrade now to enjoy uninterrupted services.`}`},showPlanLimitReachedNotice:async function(){const F=this.makeMessage();await new Promise(w=>setTimeout(w,50)),showSubsciptionNotice({message:F})}},style$2b=".container{display:flex;background-color:#fff9f8;align-items:center;justify-content:space-between;margin-bottom:1rem;padding-inline-start:1rem;flex-wrap:wrap;border:1px solid tomato;padding:.75rem 1rem;border-radius:.5rem;line-height:1.7}";class DemoLicenseExplainer extends BaseComponent{static tag="qrcg-demo-license-explainer";static styleSheets=[...super.styleSheets,style$2b];droplet=new Droplet;shouldShow(){return ConfigHelper.isDemo()?!0:!(!isSuperAdmin()||this.droplet.isLarge())}render(){if(this.shouldShow())return x`
            <div class="container">
                <div>
                    Many features are exclusive to the
                    <strong>Extended License</strong>.
                </div>

                <a href="${BrandUrl.pricingUrl()}" target="_blank">
                    See Differences
                </a>
            </div>
        `}}DemoLicenseExplainer.register();const style$2a=":host{display:block;box-sizing:border-box;padding-right:.3rem;--background-color: var(--gray-0);--border-color: var(--primary-0);--name-color: black}*{box-sizing:border-box}.types{display:grid;grid-gap:1rem}@media(min-width:800px){.types{grid-template-columns:1fr 1fr}}:host([horizontal]) .types{grid-template-columns:1fr}.type{border-left:4px solid var(--border-color);padding:1rem;border-radius:.5rem;cursor:pointer;background-color:var(--background-color);user-select:none;-webkit-user-select:none;touch-action:manipulation;transition:.2s cubic-bezier(.455,.03,.515,.955);position:relative;display:flex;justify-content:space-between}.type[loading],.type[disabled]{opacity:.5;pointer-events:none}.type:focus{outline:.13rem solid var(--primary-0)}.type:hover,.type.selected:not([loading]){box-shadow:2px 2px 2px #0003}.name{color:var(--name-color);margin-bottom:.5rem}.type.selected:not([loading]) .name{color:#000;font-weight:700}.type.selected:not([loading]) qrcg-icon{color:#000}.cat{font-size:.8rem;color:var(--primary-0)}h2{color:var(--gray-2);font-weight:300}.disabled-type-message{color:var(--danger);font-size:.8rem;position:absolute;bottom:1rem;right:1rem}.price{font-size:1.2rem;color:var(--gray-2);font-weight:700}.details-container{display:flex}.details-container qrcg-icon{color:var(--gray-2);width:2rem;height:2rem;margin-right:1rem}.searchbox{padding:1rem;background-color:var(--gray-0);display:flex;flex-wrap:wrap}.searchbox qrcg-input{flex:1;margin-right:1rem;margin-top:.15rem}.searchbox qrcg-balloon-selector::part(option){--option-background-color: var(--gray-1)}.searchbox-container{margin-bottom:1rem}.number-of-types{color:var(--gray-2);font-size:.8rem;margin-left:1rem;margin-top:.5rem}.empty-message{padding:.5rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;color:var(--gray-2);line-height:1.5}.empty-message qrcg-icon{width:3rem;height:3rem}.empty-message .support-portal{text-align:center}.empty-message .support-portal a{display:block;margin-top:1rem}";class QRCGQRCodeTypeSelector extends observeState(BaseComponent){static get tag(){return"qrcg-qrcode-type-selector"}static EVENT_TYPE_SELECTED="qrcode-type-selected";routeParams=new QRCGRouteParamsController(this);billing=new BillingMode;qrcodeTypeManager=new QRCodeTypeManager$1;accountCredit=new AccountCreditManager;static styleSheets=[...super.styleSheets,style$2a];static get properties(){return{types:{type:Array},value:{type:String}}}constructor(){super(),this.types=getAvailableQrCodeTypes(),this.filterTypes()}connectedCallback(){super.connectedCallback(),window.scrollTo({top:0,behavior:"auto"}),this.bindQueryParamIfNeeded()}bindQueryParamIfNeeded(){const w=queryParam("type");this.qrcodeTypeManager.find(w)&&(this.isTypeDisabled(w)||this.setSelectedType(w))}_typeClick(w){const q=w.currentTarget.getAttribute("type").toLowerCase();this.setSelectedType(q)}setSelectedType(w){this.value=w,this.dispatchEvent(new CustomEvent(QRCGQRCodeTypeSelector.EVENT_TYPE_SELECTED,{bubbles:!0,composed:!0,detail:{type:w}}))}onSelectedCategoryChanged(w){w.stopImmediatePropagation(),w.preventDefault(),this.selectedCategory=w.detail.value,this.queueFilter()}onKeywordChanged(w){w.stopImmediatePropagation(),w.preventDefault(),this.keyword=w.detail.value,this.queueFilter()}queueFilter(){clearTimeout(this.__filterTypesTimeout),this.__filterTypesTimeout=setTimeout(()=>this.filterTypes(),500)}planConfigurationAllowsShowing(w){return currentPlan()?.unavailable_types_behaviour!=="hidden"?!0:currentPlanHasQrCodeType(w.id)}filterTypes(){this.filteredTypes=this.types.filter(w=>this.typeMatchesKeyword(w)&&this.typeMatchesSelectedCategory(w)&&this.planConfigurationAllowsShowing(w)),this.requestUpdate()}typeMatchesKeyword(w){try{const q=escapeRegExp(this.keyword);return JSON.stringify(w).match(new RegExp(q,"i"))}catch{return!0}}typeMatchesSelectedCategory(w){return isEmpty(this.selectedCategory)&&(this.selectedCategory="all"),this.selectedCategory==="all"?!0:w.cat===this.selectedCategory}typeKeyPress(w){w.key==="Enter"&&this._typeClick(w)}isLoading(){return isEmpty(state$1.remoteRecord)&&this.routeParams.get("id")!=null&&!isNaN(this.routeParams.get("id"))}getPrice(w){return price(this.accountCredit.getQRCodeTypePrice(w))}renderAccountCreditPrice(w){if(!this.billing.isSubscription())return x` <div class="price">${this.getPrice(w.id)}</div> `}getRouteId(){const w=window.location.pathname.split("/").splice(-1)[0];return isNaN(w)?null:w}isCreatingNewQRCode(){return isEmpty(this.getRouteId())}isTypeDisabled(w){return this.billing.isAccountCredit()?state$1.id?w!=state$1.type:!1:currentPlanHasQrCodeType(w)?this.qrcodeTypeManager.isDynamic(w)&&PlanEnforcement.dynamicQRCodeLimitsReached()&&this.isCreatingNewQRCode():!0}generatePlaceholder(){if(isEmpty(this.types))return t$3`Search ...`;const w=this.types[random(0,this.types.length-1)];return`${t$3("Try")} ${t$3(w.name)}`}renderIcon(w){const q=w.svgIcon,D=w.icon;return q?x` <qrcg-icon .icon=${q}></qrcg-icon> `:x` <qrcg-icon .mdiIcon=${D}></qrcg-icon> `}renderUpgradeMessageIfNeeded(w){if(!currentPlanHasQrCodeType(w.id))return x`
            <div class="disabled-type-message">
                ${t$3`Upgrade to use this type.`}
            </div>
        `}renderType(w){return x`
            <div
                tabindex="0"
                class="${e$1({type:!0,selected:w.id===this.value})}"
                @click=${this._typeClick}
                @keypress=${this.typeKeyPress}
                type=${w.id}
                ?loading=${this.isLoading()}
                ?disabled=${this.isTypeDisabled(w.id)}
            >
                <div class="details-container">
                    <div class="icon">${this.renderIcon(w)}</div>
                    <div class="details">
                        <div class="name">${t$3(w.name)}</div>
                        <div class="cat">${t$3(w.cat)}</div>
                    </div>
                </div>

                ${this.renderAccountCreditPrice(w)}
                ${this.renderUpgradeMessageIfNeeded(w)}
            </div>
        `}renderNumberOfTypes(){return this.filteredTypes.length==this.types.length?`${t$3("Showing")} ${this.types.length} ${t$3("types")}.`:t$3`${t$3("Showing")} ${this.filteredTypes.length} ${t$3("out of")} ${this.types.length} ${t$3("types")}.`}isSearchboxDisabled(){return Config.get("qrcode.searchbox_in_qrcode_selection_page")==="disabled"}renderSearchBox(){if(!this.isSearchboxDisabled())return x`
            <div class="searchbox-container">
                <div class="searchbox">
                    <qrcg-input
                        name="keyword"
                        placeholder="${this.generatePlaceholder()}"
                        @on-input=${this.onKeywordChanged}
                        autofocus
                    >
                        ${t$3`Search`}
                    </qrcg-input>

                    <qrcg-balloon-selector
                        @on-input=${this.onSelectedCategoryChanged}
                        .options=${[{name:t$3`All`,value:"all"},{name:t$3`Static`,value:"static"},{name:t$3`Dynamic`,value:"dynamic"}]}
                    >
                        ${t$3`Type`}
                    </qrcg-balloon-selector>
                </div>

                <div class="number-of-types">${this.renderNumberOfTypes()}</div>
            </div>
        `}renderSupportPortalLinkForSystemAdmin(){if(ConfigHelper.shouldShowSupportPortalLink(!1))return x`
            <div class="support-portal">
                <div class="text">
                    ${t$3`You can open a support ticket to get your new idea added to the script`}
                </div>

                <a href=${ConfigHelper.getSupportPortalLink()} target="_blank">
                    ${t$3`Open a support ticket`}
                </a>
            </div>
        `}renderEmptyMessage(){if(isEmpty(this.filteredTypes))return x`
            <div class="empty-message">
                <qrcg-icon mdi-icon=${mdiAlertCircleOutline}></qrcg-icon>

                <div class="message-text">
                    ${t$3`There is no types matching your keyword.`}
                </div>
                ${this.renderSupportPortalLinkForSystemAdmin()}
            </div>
        `}render(){return x`
            ${DemoLicenseExplainer.renderSelf()}
            <!--  -->

            ${this.renderSearchBox()}

            <div class="types">
                ${this.filteredTypes.map(w=>this.renderType(w))}
            </div>

            ${this.renderEmptyMessage()}
        `}}QRCGQRCodeTypeSelector.register();const style$29=":host{display:block;user-select:none;-webkit-user-select:none;box-sizing:border-box;--inactive-bg: var(--gray-0);--active-bg: var(--primary-0);--passed-color: black}*{box-sizing:border-box}.steps{display:flex;flex-wrap:wrap;gap:.5rem}.step{display:flex;align-items:center;gap:.5rem;cursor:pointer}.step[disabled]{pointer-events:none}.step .number{padding:.25rem .5rem;background-color:var(--gray-0);border-radius:.4rem;border:2px solid var(--gray-0);text-align:center;display:flex;align-items:center}.step .text{margin-inline-end:1rem}.step.current .number{border-color:var(--gray-2)}.step.current .text{font-weight:700}.step.not-current{color:var(--gray-2)}.step.passed .number{background-color:var(--active-step-background-color, var(--success-0));color:var(--active-step-text-color, white);border-color:var(--active-step-background-color, var(--success-0))}";class QRCGQRCodeFormSteps extends observeState(i$1){#e=new DirectionAwareController(this);static get properties(){return{steps:{type:Array},currentStep:{}}}constructor(){super(),this.steps=[]}connectedCallback(){super.connectedCallback(),this.injectStyles()}injectStyles(){const w=document.createElement("style");w.innerHTML=style$29,this.shadowRoot.appendChild(w)}_onStepClick(w){const q=w.currentTarget.getAttribute("step");this.dispatchEvent(new CustomEvent("request-step-change",{detail:{step:q}}))}_isStepPassed(w){typeof w=="string"&&(w=this.steps.find(D=>D.value===w));const q=this.steps.find(D=>D.value===this.currentStep);return this.steps.indexOf(w)<this.steps.indexOf(q)}getCurrentStepIndex(){const w=this.steps.find(q=>q.value===this.currentStep);return this.steps.indexOf(w)}isStepDisabled(w){return state$1.remoteRecord?.id?!1:!this._isStepPassed(w)}get currentStepName(){try{return this.steps.find(w=>w.value===this.currentStep).name}catch{return console.log("Cannot get current step of slug "+this.currentStep,this.steps),null}}render(){return x`
            <div class="steps">
                ${this.steps.map((w,q)=>x`
                        <div
                            class="step ${e$1({"not-current":w.value!==this.currentStep,current:w.value===this.currentStep,passed:this.getCurrentStepIndex()>q})}"
                            step=${w.value}
                            @click=${this._onStepClick}
                            ?disabled=${this.isStepDisabled(w)}
                        >
                            <span class="number">${q+1}</span>
                            <span class="text"> ${w.name} </span>
                        </div>
                    `)}
            </div>
        `}}window.defineCustomElement("qrcg-qrcode-form-steps",QRCGQRCodeFormSteps);class QRCodePreviewUrlBuilder{host;constructor(w){this.host=w}data(){return this.host.getQrCodeData()}type(){return this.host.getQrCodeType()}design(){return typeof this.host.getQrCodeDesign=="function"?this.host.getQrCodeDesign():{}}get remoteRecord(){try{return this.host.getQrCodeRemoteRecord()}catch{return null}}getId(){return this.remoteRecord?.id}canBuildURL(){return!isEmpty(this.data())}backendTextRendering(){return this.host?.design?.advancedShape==="pincode-protected"?!0:Config.get("preview.canvasTextRender")==="disabled"}buildURL(w={}){if(!this.canBuildURL())throw new Error("Cannot build URL now");const q={data:this.data(),type:this.type(),design:this.design(),renderText:this.backendTextRendering(),...w};this.getId()&&(q.id=this.getId()),this.stringifySubObjects(q);const D=new URLSearchParams(q).toString();return`${Config.get("app.url")}/api/qrcodes/preview?${D}&timestamp=${new Date().getTime()}`}stringifySubObjects(w){for(const q in w)typeof w[q]=="object"&&(w[q]=JSON.stringify(w[q]))}}const style$28=":host{display:flex;flex-direction:column;position:relative}.control-container{display:flex;align-items:center;flex-wrap:wrap;width:fit-content}.color-box,.input-box{width:2.7rem;height:2rem;cursor:pointer;margin:.25rem;position:relative;border-radius:.25rem;outline:0;border:2px solid transparent}.color-box{-webkit-tap-highlight-color:transparent;user-select:none;-webkit-user-select:none;touch-action:manipulation}.input-box{margin:0;overflow:hidden}input{appearance:none;-webkit-appearance:none;background-color:transparent;border:0;margin:0;padding:0;border-radius:0;width:2.7rem;height:2rem;cursor:pointer}input::-webkit-color-swatch-wrapper{padding:0!important}input::-webkit-color-swatch{border:0;padding:0}.input-wrapper{display:flex;padding:.15rem;border-radius:.25rem;background:radial-gradient(circle at 50% 0,#f00c,#f000 70.71%),radial-gradient(circle at 6.7% 75%,#00fc,#00f0 70.71%),radial-gradient(circle at 93.3% 75%,#0f0c,#0f00 70.71%) beige;box-sizing:border-box}.color-box:nth-child(2){display:none}@media(min-width:800px){.color-box:nth-child(2){display:block}}.color-box:first-of-type{margin-left:0}.color-box:focus,.color-box.selected{border-color:#000}label{user-select:none;-webkit-user-select:none;font-weight:700;font-size:.8rem}label.empty{display:none}.refresh-icon{cursor:pointer;margin-left:.25rem;touch-action:manipulation;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;user-select:none}:host(.dir-rtl) .refresh-icon{margin-left:0;margin-right:.25rem}@media(hover){.refresh-icon:hover{animation:rotate 1s linear both infinite}}.error{color:var(--danger);position:absolute;font-size:.8rem;font-weight:700;bottom:.5rem;transform:translateY(100%);animation:fade-in ease 1s both;display:flex;justify-content:space-between;left:0;right:0}.error-expand{display:block;font-weight:400;color:var(--primary-0);margin-left:1rem;text-decoration:underline;cursor:pointer}:host(.dir-rtl) .hex-input{direction:ltr}.hex{border:.1rem var(--gray-1) solid;display:flex;align-items:center;justify-content:center;font-size:.65rem;font-weight:700;cursor:pointer;color:var(--gray-2)}.hex-input-container{position:relative;box-sizing:border-box}.hex-input-container .close{font-weight:700;background-color:var(--gray-1);padding:.5rem;border-radius:.5rem;font-size:.8rem;cursor:pointer}qrcg-copy-icon{margin-right:1rem}.hex-input-actions{display:flex;position:absolute;top:.1rem;right:.1rem;padding-right:.1rem;bottom:.5rem;align-items:center}.hex-input::part(label){display:none}@keyframes fade-in{0%{opacity:0}to{opacity:1}}@supports (-webkit-touch-callout: none){input{height:40px}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}";class QRCGColorPicker extends BaseComponent{static tag="qrcg-color-picker";static styleSheets=[...super.styleSheets,style$28];#e=new DirectionAwareController(this);#t;#r;static get properties(){return{_showingHexInput:{type:Boolean},colors:{type:Array},value:{},name:{},labelIsEmpty:{state:!0},maxPalleteShade:{type:Number,attribute:"max-pallete-shade"},errors:{type:Array}}}static randomColorsCount=4;static paletteIndex=0;static get presetColors(){return this.generateColorPalette()}static get palettes(){return Config.get("app.color-picker-palettes")??[]}static paletteColors(w){const q=D=>D??this.randomColor();return[q(w?.color_1),q(w?.color_2),q(w?.color_3),q(w?.color_4)]}static shouldGenerateRandomColors(){return this.palettes.length<3}static randomColor(w=255){return this.rgbToHex(random(0,w),random(0,w),random(0,w))}static generateRandomColorPalette(){return Array.from({length:this.randomColorsCount}).map(()=>this.randomColor())}static generateColorPalette(){if(this.shouldGenerateRandomColors())return this.generateRandomColorPalette();const w=this.palettes[this.paletteIndex++%this.palettes.length];return this.paletteColors(w)}static componentToHex(w){var q=w.toString(16);return q.length==1?"0"+q:q}static rgbToHex(w,q,D){return"#"+this.componentToHex(w)+this.componentToHex(q)+this.componentToHex(D)}get showingHexInput(){return this._showingHexInput}set showingHexInput(w){w&&this.beforeShowingHexInput(),this._showingHexInput=w,w&&this.updateComplete.then(()=>{this.afterShowingHexInput()})}constructor(){super(),this.maxPalleteShade=255,this.colors=this.constructor.generateColorPalette(this.maxPalleteShade),this._debouncedSetValue=debounce(this._debouncedSetValue,300),this.errors=[],this.showingHexInput=!1}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.addEventListener("keypress",this._onKeypress),this.addEventListener("slotchange",this._checkIfLabelIsEmpty)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),this.removeEventListener("keypress",this._onKeypress),this.removeEventListener("slotchange",this._checkIfLabelIsEmpty)}beforeShowingHexInput(){this.#r=this.shadowRoot.querySelector(".control-container").getBoundingClientRect(),this.#t=this.getBoundingClientRect().height}afterShowingHexInput(){const w=this.shadowRoot.querySelector(".hex-input-container"),q=this.shadowRoot.querySelector(".hex-input");w.style.width=this.#r.width+"px",w.style.height=this.#t+"px";const D=Math.max(0,this.#t-q.getBoundingClientRect().height);w.style.paddingTop=`${D}px`,q.focus();const Q=q.shadowRoot.querySelector("input");Q.setAttribute("spellcheck","false"),Q.setSelectionRange(1,Q.value?.length)}onClick=w=>{w.composedPath()[0].matches(".color-box")&&this._onBoxClick(w)};_onKeypress=w=>{w.composedPath()[0].matches(".color-box")&&w.key==="Enter"&&this._onBoxClick(w)};refreshColors(){this.colors=this.constructor.generateColorPalette(this.maxPalleteShade)}firstUpdated(){this._checkIfLabelIsEmpty(),this.syncInputValue()}_checkIfLabelIsEmpty=()=>{const q=this.renderRoot.querySelector("slot").assignedNodes().reduce((D,Q)=>D+Q.text,"");this.labelIsEmpty=q.trim().length===0};_onBoxClick(w){const q=w.composedPath()[0];if(q.matches(".hex"))return this.onHexClick();const D=q.getAttribute("color");isEmpty(D)||this._setValue(D)}onHexClick(){this.showingHexInput=!0}onHexInput(w){w.stopPropagation(),w.preventDefault(),this._setValue(w.detail.value)}_setValue(w){this.value=w,this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{value:this.value,name:this.name}}))}_onCustomColorChange=w=>{this._debouncedSetValue(w.target.value)};_debouncedSetValue=w=>{this._setValue(w)};_input(){return this.renderRoot.querySelector("input")}willUpdate(w){w.has("maxPalleteShade")&&this.refreshColors()}updated(){this.syncInputValue()}syncInputValue(){let w=this.value;isEmpty(w)&&(w="#211f1f"),this._input()&&(this._input().value=w)}renderErrors(){return isEmpty(this.errors)?void 0:this.errors.length>1||this.errors[0].length>40?x`
                <label class="error">
                    <span>${this.errors[0].substring(0,40)} ...</span>
                    <span
                        class="error-expand"
                        @click=${this.onErrorExpandClick}
                    >
                        ${t$3`view details`}
                    </span>
                </label>
            `:x` <label class="error"> ${this.errors[0]}</label> `}async onErrorExpandClick(){try{await confirm({title:t$3`Error details`,message:x`<ul style="padding: 0 0 0 1rem;">
                    ${this.errors.map(w=>x`<li>${w}</li>`)}
                </ul>`,negativeText:null,affirmativeText:t$3`OK`})}catch{}}onHexCloseClick(w){w.stopImmediatePropagation(),this.showingHexInput=!1}renderHexInputMode(){return x`
            <div class="hex-input-container">
                <qrcg-input
                    class="hex-input"
                    name=${this.name}
                    value=${this.value}
                    placeholder="#000"
                    @on-input=${this.onHexInput}
                ></qrcg-input>

                <div class="hex-input-actions">
                    <qrcg-copy-icon>${this.value}</qrcg-copy-icon>
                    <div class="close" @click=${this.onHexCloseClick}>
                        ${t$3`Close`}
                    </div>
                </div>
            </div>
        `}render(){return this.showingHexInput?this.renderHexInputMode():x`
            <label class=${e$1({empty:this.labelIsEmpty})} part="label"
                ><slot></slot
            ></label>

            <div class="control-container">
                ${this.colors.map(w=>{const q=`background-color: ${w};`;return x`
                        <div
                            tabindex="0"
                            class="color-box ${e$1({selected:w===this.value})}"
                            style="${q}"
                            color=${w}
                            part="color-box"
                        ></div>
                    `})}

                <div tabindex="0" class="color-box hex" part="color-box">
                    HEX
                </div>

                <div class="input-wrapper">
                    <div class="input-box" part="color-box">
                        <input
                            type="color"
                            @change=${this._onCustomColorChange}
                        />
                    </div>
                </div>
                <qrcg-icon
                    mdi-icon=${mdiRefresh}
                    class="refresh-icon"
                    @click=${this.refreshColors}
                    width="40px"
                    height="25px"
                ></qrcg-icon>
            </div>
            ${this.renderErrors()}
        `}}QRCGColorPicker.register();class QRCGSelect extends i$1{static get styles(){return i$3`
            :host {
                display: inline-block;
                position: relative;
                user-select: none;
                -webkit-user-select: none;
            }

            :host([disabled]) {
                pointer-events: none;
            }

            :host([disabled]) .control {
                opacity: 0.5;
            }

            .title {
                display: block;
                font-size: 0.8rem;
                margin-bottom: 0.5rem;
                font-weight: bold;
                letter-spacing: 1px;
                user-select: none;
                -webkit-user-select: none;
            }

            select {
                -webkit-appearance: none;
                appearance: none;
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: 1;
                opacity: 0;
                width: 100%;
                cursor: pointer;
            }

            .content {
                display: none;
            }

            .control {
                padding: 0.5rem 1rem;
                border: 1px solid black;
                display: flex;
                align-items: center;
                border: 2px solid var(--gray-1);
                border-radius: 0.5rem;
                -webkit-tap-highlight-color: transparent;
                margin-bottom: 0.5rem;
                transition: ease 0.5s;
            }

            label {
                flex: 1;
            }

            .focused {
                border-color: var(--gray-2);
                outline: 0;
            }

            qrcg-icon {
                margin-left: 0.5rem;
                color: var(--gray-2);
            }

            .focused qrcg-icon {
                color: black;
            }

            .error {
                color: var(--danger);
                position: absolute;
                font-size: 0.8rem;
                font-weight: bold;
                bottom: 0.5rem;
                transform: translateY(100%);
                animation: fade-in ease 1s both;
            }

            @keyframes fade-in {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }
        `}static get properties(){return{name:{type:String},value:{type:String},label:{type:String},focused:{type:Boolean},placeholder:{type:String},errors:{type:Array},liveUpdate:{type:Boolean,attribute:"live-update"},disabled:{type:Boolean,reflect:!0}}}constructor(){super(),this.placeholder=t$3`-- please select --`}connectedCallback(){super.connectedCallback(),this.addEventListener("slotchange",this._updateOptions)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("slotchange",this._updateOptions)}firstUpdated(){this._updateOptions(),this._updateValue(),this.select.addEventListener("input",w=>this._onSelectInput(w)),this.select.addEventListener("focus",()=>this.focused=!0),this.select.addEventListener("blur",()=>this.focused=!1)}async updated(w){w.has("value")&&(this._updateOptions(),this._updateValue()),this.liveUpdate&&this._updateOptions()}_onSelectInput(){this._updateValue(),this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:this.value}}))}async _updateValue(){this.value=this.select.value,this.label=this.select.options[this.select.selectedIndex].text,console.log(this.value)}_updateOptions(){this.select&&(this.select.innerHTML="",this._addPlaceHolderOptionIfNeeded(),this.slotOptions.forEach(w=>{const q=w.cloneNode(!0);q.value===this.value&&(q.selected=!0),this.select.appendChild(q)}))}_addPlaceHolderOptionIfNeeded(){this.slotOptions.reduce((q,D)=>q&&!isEmpty(D.value),!0)&&!isEmpty(this.placeholder)&&(this.select.innerHTML=`<option value="">${this.placeholder}</option>`)}get select(){return this.renderRoot.querySelector("select")}get slotOptions(){return this.renderRoot.querySelector("slot#options-slot").assignedElements().filter(D=>D.matches("option"))}renderValue(){return isEmpty(this.value)?this.placeholder:this.label}renderErrors(){return isEmpty(this.errors)?x``:x`<label class="error">${this.errors[0]}</label>`}render(){return x`
            <label for="select-${this.name}" class="title">
                <slot name="label"></slot>
            </label>

            <div class="control ${e$1({focused:this.focused})}">
                <label>${this.renderValue()}</label>
                <qrcg-icon mdi-icon=${mdiChevronDown}></qrcg-icon>
            </div>

            <select id="select-${this.name}" value=${this.value}></select>

            <div class="content">
                <slot id="options-slot"></slot>
            </div>

            ${this.renderErrors()}
        `}}window.defineCustomElement("qrcg-select",QRCGSelect);class e extends i{constructor(w){if(super(w),this.it=E,w.type!==t$2.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(w){if(w===E||w==null)return this._t=void 0,this.it=w;if(w===T)return w;if(typeof w!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(w===this.it)return this._t;this.it=w;const q=[w];return q.raw=q,this._t={_$litType$:this.constructor.resultType,strings:q,values:[]}}}e.directiveName="unsafeHTML",e.resultType=1;const o$2=e$2(e);let t$1=class extends e{};t$1.directiveName="unsafeSVG",t$1.resultType=2;const o$1=e$2(t$1),style$27=":host{--option-background-color: var(--gray-0);display:flex;flex-direction:column;position:relative;user-select:none;touch-action:manipulation;-webkit-user-select:none}:host([disabled]){pointer-events:none;opacity:.8}:host([disabled]) label{color:var(--gray-2)}.options{display:flex;flex-wrap:wrap;min-width:200px;align-items:center}label ::slotted(*){margin-right:1rem}label{font-weight:700;font-size:.8rem;display:block}[name=instructions]::slotted(*){margin-top:.5rem}button{font-size:.8rem;position:relative;display:flex;align-items:center;justify-content:center;appearance:none;-webkit-appearance:none;padding:.7rem 1rem;background-color:var(--option-background-color);margin:.5rem .5rem 0 0;outline:0;cursor:pointer;color:var(--gray-2);user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;touch-action:manipulation;border-radius:.5rem;border:solid 2px transparent}button:hover,button:focus{border:solid 2px var(--gray-2)}:host(.dir-rtl) button{letter-spacing:0;font-family:var(--qrcg-rtl-font-family)}.badge{position:absolute;top:-.5rem;right:-.5rem;padding:.1rem .2rem;text-transform:uppercase;font-size:.7em;animation:badge-animation 1s ease infinite alternate}@keyframes badge-animation{0%{opacity:0}to{opacity:1}}.badge.danger{background-color:var(--danger);color:#fff}.selected{color:#fff;background-color:var(--primary-0)}.selected:focus,.selected:hover{border:2px solid black}.error{color:var(--danger);position:absolute;font-size:.8rem;font-weight:700;animation:fade-in ease 1s both;bottom:-1rem}.image{width:1rem}@keyframes fade-in{0%{opacity:0}to{opacity:1}}svg{display:block;width:1rem;height:.8rem}svg path{fill:currentColor}.actions{display:flex;flex-direction:column}@media(min-width:500px){.actions{align-items:center;flex-direction:row}}.selection-action{display:flex;margin:.75rem 0 .5rem}.actions label{color:var(--gray-2);margin-right:1rem;font-weight:400;text-decoration:underline;cursor:pointer}.actions label[disabled]{pointer-events:none;color:var(--gray-1);cursor:initial}.search-box{margin-left:auto;width:100%}@media(min-width:500px){.search-box{width:initial}}[name=instructions]::slotted(*){padding:.5rem;background-color:var(--gray-0);font-size:.8rem;line-height:1.7}";class FormInputController{static get MODE_BASE64(){return"base64"}static get MODE_PLAIN(){return"plain"}constructor(w,q){this.host=w,this.mode=q,w.addController(this)}static get VALUE_CONVERTER(){return{fromAttribute:w=>JSON.parse(Base64Encoder.decode(w)),toAttribute:w=>Base64Encoder.encode(JSON.stringify(w))}}shouldRun(){return this.host.hasAttribute("native-form-input")}hostConnected(){this.shouldRun()&&(this.host.addEventListener("on-input",this.onInput),this.pullInitialValue())}hostDisconnected(){this.host.removeEventListener("on-input",this.onInput),this.hiddenInput.remove()}onInput=w=>{let{name:q,value:D}=w.detail;q==this.host.name&&(D=this.serializeValue(D),this.hiddenInput.value=D)};pullInitialValue(){const w=this.getHostValue();this.hiddenInput.value=this.serializeValue(w)}serializeValue(w){return isFunction(this.host.serializeValue)?this.host.serializeValue(w):this.mode==FormInputController.MODE_BASE64?Base64Encoder.encode(JSON.stringify(w)):w}getHostValue(){return isFunction(this.host.getValue)?this.host.getValue():this.host.value}get hiddenInput(){if(!this.____input){const w=document.createElement("input");w.setAttribute("type","hidden"),this.host.parentElement?.appendChild(w),this.____input=w}return this.____input.name=this.host.name,this.____input}}const BALLOON_SELECTOR_ICONS=[{name:t$3`Website`,value:"web"},{name:t$3`Timer`,value:"timer"},{name:t$3`Star`,value:"star"},{name:t$3`Map Marker`,value:"map-marker"},{name:t$3`Email`,value:"email"},{name:t$3`Calendar`,value:"calendar"},{name:t$3`User`,value:"account"},{name:t$3`Share`,value:"share"},{name:t$3`Phone`,value:"phone"},{name:t$3`Custom`,value:"custom"}],BALLOON_SELECTOR_ENABLED_DISABLED=[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}],BALLOON_SELECTOR_YES_NO=[{name:t$3`Yes`,value:"yes"},{name:t$3`No`,value:"no"}];class BalloonSelector extends BaseComponent{#e=new DirectionAwareController(this);formInput=new FormInputController(this,FormInputController.MODE_PLAIN);static OPTIONS_ENABLED_DISABLED=BALLOON_SELECTOR_ENABLED_DISABLED;static OPTIONS_YES_NO=BALLOON_SELECTOR_YES_NO;static styleSheets=[...super.styleSheets,style$27];static get properties(){return{options:{type:Array},value:{type:String},name:{},multiple:{type:Boolean},valueType:{},errors:{type:Array},isBoolean:{type:Boolean,attribute:"is-boolean"},keyword:{}}}constructor(){super(),this.options=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput)}onInput(w){w.detail.name==="search"&&(w.preventDefault(),w.stopImmediatePropagation(),this.keyword=w.detail.value)}stringToBoolean(w){if(w==="true")return!0;if(w==="false"||!w)return!1;throw new Error("Value must be either `true` or `false` or empty")}_optionClick(w){let D=w.currentTarget.getAttribute("value");isFunction(this.valueType)?D=this.valueType(D):this.isBoolean&&(D=this.stringToBoolean(D)),this.multiple?((isEmpty(this.value)||isNotArray(this.value))&&(this.value=[]),this.value.find(O=>O==D)?this.value=this.value.filter(O=>O!=D):this.value=[...this.value,D]):this.value=D,this._fireOnInput()}_fireOnInput(){this.dispatchEvent(new CustomEvent("on-input",{composed:!0,bubbles:!0,detail:{name:this.name,value:this.value}}))}_isSelected(w){return isEmpty(this.value)?!1:this.multiple?(isNotArray(this.value)&&(this.value=[]),!!this.value.find(q=>q==w)):this.value==w}get filteredOptions(){if(isEmpty(this.keyword))return this.options;try{return this.options.filter(w=>w.name.match(new RegExp(this.keyword,"i")))}catch{return this.options}}renderOptionContent(w){return x`
            ${w.name?w.name:""}
            ${w.image?x` <img src=${w.image} class="image" /> `:""}
            ${w.svg?o$1(`${w.svg}`):""}
            ${w.badge?x`
                      <div class="badge ${w.badge.type}">
                          ${w.badge.text}
                      </div>
                  `:""}
        `}getOptionStyle(w){return""}_renderOptions(){return x`${this.filteredOptions.map(w=>x`
                <button
                    class="${e$1({selected:this._isSelected(w.value),option:!0})}"
                    part="option"
                    value=${w.value}
                    @click=${this._optionClick}
                    style=${this.getOptionStyle(w)}
                >
                    ${this.renderOptionContent(w)}
                </button>
            `)}`}_renderErrors(){return x`${isEmpty(this.errors)?x``:x`<label class="error">${this.errors[0]}</label>`}`}_selectAll(){this.value=this.options.map(w=>w.value),this._fireOnInput()}_selectNone(){this.value=[],this._fireOnInput()}_renderSearchbox(){return this.options.length<10?null:x`
            <div class="search-box">
                <qrcg-input
                    name="search"
                    placeholder=${`${t$3("Search in")} ${this.options.length} ${t$3("options")}`}
                ></qrcg-input>
            </div>
        `}_renderSelectionActions(){if(this.multiple)return x`
            <div class="selection-action">
                <label
                    @click=${this._selectAll}
                    ?disabled=${this.value?.length==this.options.length}
                    >${t$3`Select all`}</label
                >
                <label
                    @click=${this._selectNone}
                    ?disabled=${isEmpty(this.value)}
                    >${t$3`Select none`}</label
                >
            </div>
        `}_renderActions(){return x`
            <div class="actions">
                ${this._renderSelectionActions()}
                <!--  -->
                ${this._renderSearchbox()}
            </div>
        `}render(){return x`
            <label>
                <slot></slot>
            </label>

            ${this._renderActions()}

            <slot name="instructions"></slot>

            <div class="options">${this._renderOptions()}</div>

            <!-- New line -->

            ${this._renderErrors()}
        `}}window.defineCustomElement("qrcg-balloon-selector",BalloonSelector);const{I:t}=Z,r=()=>document.createComment(""),s=(F,w,q)=>{const D=F._$AA.parentNode,Q=w===void 0?F._$AB:w._$AA;if(q===void 0){const O=D.insertBefore(r(),Q),U=D.insertBefore(r(),Q);q=new t(O,U,F,F.options)}else{const O=q._$AB.nextSibling,U=q._$AM,G=U!==F;if(G){let W;q._$AQ?.(F),q._$AM=F,q._$AP!==void 0&&(W=F._$AU)!==U._$AU&&q._$AP(W)}if(O!==Q||G){let W=q._$AA;for(;W!==O;){const K=W.nextSibling;D.insertBefore(W,Q),W=K}}}return q},v=(F,w,q=F)=>(F._$AI(w,q),F),u$1={},m=(F,w=u$1)=>F._$AH=w,p=F=>F._$AH,M=F=>{F._$AR(),F._$AA.remove()};const u=(F,w,q)=>{const D=new Map;for(let Q=w;Q<=q;Q++)D.set(F[Q],Q);return D},c=e$2(class extends i{constructor(F){if(super(F),F.type!==t$2.CHILD)throw Error("repeat() can only be used in text expressions")}dt(F,w,q){let D;q===void 0?q=w:w!==void 0&&(D=w);const Q=[],O=[];let U=0;for(const G of F)Q[U]=D?D(G,U):U,O[U]=q(G,U),U++;return{values:O,keys:Q}}render(F,w,q){return this.dt(F,w,q).values}update(F,[w,q,D]){const Q=p(F),{values:O,keys:U}=this.dt(w,q,D);if(!Array.isArray(Q))return this.ut=U,O;const G=this.ut??=[],W=[];let K,ee,Y=0,J=Q.length-1,X=0,re=O.length-1;for(;Y<=J&&X<=re;)if(Q[Y]===null)Y++;else if(Q[J]===null)J--;else if(G[Y]===U[X])W[X]=v(Q[Y],O[X]),Y++,X++;else if(G[J]===U[re])W[re]=v(Q[J],O[re]),J--,re--;else if(G[Y]===U[re])W[re]=v(Q[Y],O[re]),s(F,W[re+1],Q[Y]),Y++,re--;else if(G[J]===U[X])W[X]=v(Q[J],O[X]),s(F,Q[Y],Q[J]),J--,X++;else if(K===void 0&&(K=u(U,X,re),ee=u(G,Y,J)),K.has(G[Y]))if(K.has(G[J])){const te=ee.get(U[X]),oe=te!==void 0?Q[te]:null;if(oe===null){const ne=s(F,Q[Y]);v(ne,O[X]),W[X]=ne}else W[X]=v(oe,O[X]),s(F,Q[Y],oe),Q[te]=null;X++}else M(Q[J]),J--;else M(Q[Y]),Y++;for(;X<=re;){const te=s(F,W[re+1]);v(te,O[X]),W[X++]=te}for(;Y<=J;){const te=Q[Y++];te!==null&&M(te)}return this.ut=U,m(F,W),T}}),style$26=":host{--loader-color: var(--gray-2)}.loader{width:50px;aspect-ratio:1;border-radius:50%;background:radial-gradient(farthest-side,var(--loader-color) 94%,rgba(0,0,0,0)) top/8px 8px no-repeat,conic-gradient(rgba(0,0,0,0) 30%,var(--loader-color));-webkit-mask:radial-gradient(farthest-side,rgba(0,0,0,0) calc(100% - 8px),#000 0);animation:l13 1s infinite linear}@keyframes l13{to{transform:rotate(1turn)}}";class QRCGLoader extends BaseComponent{static tag="qrcg-loader";static styleSheets=[...super.styleSheets,style$26];static get properties(){return{hidden:{type:Boolean,reflect:!0}}}render(){return x` <div class="loader"></div> `}}QRCGLoader.register();class QrcgFileInputRow extends i$1{#e=new DirectionAwareController(this);static styles=[i$3`
            :host {
                display: block;
                user-select: none;
                -webkit-user-select: none;
                touch-action: manipulation;
                position: relative;
                margin-bottom: 1rem;
            }

            :host(.deleting) {
                overflow: hidden;
                animation: fade-out ease-out 0.5s both;
            }

            qrcg-box::part(container) {
                overflow: visible;
            }

            .container {
                display: flex;
                position: relative;
                align-items: center;
                padding: 1rem 2rem;
                box-shadow: var(--qrcg-input-box-shadow);
                border-radius: 0.5rem;
            }

            qrcg-icon {
                width: 1.5rem;
                height: 1.5rem;
            }

            .file-type {
                margin-right: 1rem;
                color: var(--gray-2);
            }

            :host(.dir-rtl) .file-type {
                margin-right: 0;
                margin-left: 1rem;
            }

            .actions {
                margin-left: auto;
                display: flex;
                align-items: center;
                position: relative;
            }

            .delete {
                width: 1rem;
                cursor: pointer;
            }

            :host([readonly]) .delete {
                pointer-events: none;
                opacity: 0.2;
            }

            qrcg-loader {
                position: absolute;
                transform: translateY(-50%) translateX(-50%) scale(0.3);
                left: -1.5rem;
                top: 50%;
                background-color: white;
            }

            @media (min-width: 800px) {
                qrcg-loader {
                    transform: translateY(-50%) translateX(-50%) scale(0.4);
                }
            }

            .name {
                display: flex;
                overflow: hidden;
                position: relative;
                flex: 1;
                white-space: nowrap;
                text-overflow: ellipsis;
            }

            @media (max-width: 900px) {
                .name {
                    max-width: 10rem;
                }
            }

            .name .inner {
                display: inline-block;
                min-width: 7rem;
                font-size: 0.8rem;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
                color: black;
                flex: 1;
            }

            @media (min-width: 900px) {
                .name .inner {
                    min-width: 12rem;
                }
            }

            .badge {
                font-size: 0.5rem;
                text-transform: uppercase;
                background-color: var(--gray-1);
                padding: 3px 5px;
                border-radius: 5px;
                margin-left: 1rem;
                margin-right: 0.5rem;
                animation: fade-in 0.2s ease-in both;
            }

            .badge.success {
                background-color: var(--success-0);
                color: white;
            }

            .badge.danger {
                background-color: var(--danger);
                color: white;
            }

            .error-message {
                position: absolute;
                color: var(--danger);
                font-size: 0.6rem;
                left: 4.5rem;
                bottom: 0.4rem;
            }

            .clickable {
                cursor: pointer;
            }

            @keyframes fade-in {
                from {
                    opacity: 0;
                    transform: translateY(4px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes fade-out {
                from {
                    opacity: 1;
                    transform: translateY(0);
                    max-height: 5rem;
                    margin-top: 1rem;
                }

                to {
                    opacity: 0;
                    transform: translateY(4px);
                    max-height: 0;
                    margin-top: 0;
                }
            }
        `];constructor(){super()}static get properties(){return{model:{},readonly:{type:Boolean,reflect:!0}}}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this.model.disconnect()}updated(){this.model.isConnected||this.connectModel()}connectModel(){this.model.connect(this),this.model.bind(this.model.events.beforeDelete,this.onBeforeDeleteFile),this.model.bind(this.model.events.remoteFileDeleted,this.onRemoteFileDelete),this.model.bind(this.model.events.afterDelete,this.onAfterDeleteFile),this.model.subscribe(this.onFileModelChanged)}disconnectModel(){this.model.detach(this.model.events.beforeDelete,this.onBeforeDeleteFile),this.model.detach(this.model.events.afterDelete,this.onAfterDeleteFile),this.model.detach(this.model.events.remoteFileDeleted,this.onRemoteFileDelete),this.model.unsubscribe(this.onFileModelChanged),this.model.disconnect()}onFileModelChanged=w=>{this.requestUpdate()};renderType(){const w=this.mapFileIcon();return u$3`<qrcg-icon class="file-type" mdi-icon=${w}></qrcg-icon>`}mapFileIcon(){return[{pattern:/png|jpe?g|bmp|svg|psd/,icon:mdiImage},{pattern:/doc|pdf|rtf|txt/,icon:mdiFileDocument},{pattern:/numbers|xlsx/,icon:mdiFileExcel},{pattern:/sh|php|cpp|cs|js|css|sass|scss/,icon:mdiFileCode},{pattern:/.*/,icon:mdiFile}].find(q=>this.model.extension.match(q.pattern))?.icon}renderBadge(){if(!this.model.loading&&this.model.badge)return u$3`<div class="badge ${this.model.badge.type}">
            ${this.model.badge.label}
        </div>`}onBeforeDeleteFile(){}onAfterDeleteFile(){this.classList.remove("deleting"),this.disconnectModel()}onRemoteFileDelete(){this.classList.add("deleting")}onDelete(){this.dispatchEvent(new CustomEvent("request-delete",{detail:{model:this.model}}))}get animationPromise(){let w;const q=new Promise(D=>{w=D,this.addEventListener("animationend",w)});return q.then(()=>{this.removeEventListener("animationend",w)}),q}renderLink(){return this.model.directLink()?u$3`<a
                  href="${this.model.directLink()}"
                  target="_blank"
                  class="inner"
                  title="Preview"
                  ?download=${this.model.extension.match(/json/)}
                  >${this.model.getName()}</a
              >`:u$3`<span class="inner">${this.model.getName()}</span>`}renderErrorMessage(){const w=this.model.errors[0];if(!isEmpty(w))return w.length<45?u$3`
                <div class="error-message">${this.model.errors[0]}</div>
            `:u$3`
                <div
                    class="error-message clickable"
                    @click=${this.showErrorModal}
                >
                    ${t$3`Click here for error details.`}
                </div>
            `}showErrorModal(){let w=this.model.errors[0].replace(/\n/g,"<br>");w=u$3`${s$3(w)}`,confirm$1({message:w,title:t$3`Error details`,affirmativeText:t$3`OK`,negativeText:null})}render(){return u$3`
            <div class="container">
                ${this.renderType()}

                <div class="name">
                    ${this.renderLink()}

                    <!-- -->
                </div>
                ${this.renderErrorMessage()}

                <div class="actions">
                    ${this.model.loading?u$3`<qrcg-loader></qrcg-loader>`:""}
                    ${this.renderBadge()}
                    <qrcg-icon
                        class="delete"
                        mdi-icon=${mdiClose}
                        width="nan"
                        height="nan"
                        @click=${this.onDelete}
                        .disabled=${this.model.loading}
                        title="Delete"
                    ></qrcg-icon>
                </div>
            </div>
        `}}window.defineCustomElement("qrcg-file-input-row",QrcgFileInputRow);class FileModel{static cachedFiles={};static get SAVED_BADGE(){return{type:"success",label:"Saved"}}static get ERROR_BADGE(){return{type:"danger",label:"Error"}}static get eventKey(){return"qrcg-file-upload"}static get events(){return{beforeUpload:"before-upload",afterUpload:"after-upload",uploadError:"upload-error",uploadSuccess:"upload-success",beforeDelete:"before-delete",afterDelete:"after-delete",remoteFileDeleted:"remote-file-deleted"}}get events(){return this.constructor.events}constructor({file:w={},uploadEndpoint:q,remote:D,attachable_type:Q,name:O,_name:U}){this.file=w,this.loading=!0,this.errors=[],this.uploadEndpoint=q,this.remote=D,this.uploaded=!1,this.name=O,this.attachable_type=Q,this._name=U}get id(){return this.remote?.id}static async fetchFile(w,{fetchEndpoint:q}){if(!isEmpty(this.cachedFiles[w]))return this.cachedFiles[w];const{response:D}=await get(this.endpointRoute(q,w)),Q=await D.json();return this.cachedFiles[w]=Q,Q}static endpointRoute(w,q){return w?w=`${w}/${q}`:w=`files/${q}`,w.replace(/\/+/g,"/")}static async fromRemote(w,q){const D=await this.fetchFile(w,{fetchEndpoint:q?.fetchEndpoint}),Q=new FileModel({...q,remote:D});return Q.loading=!1,Q.badge=this.SAVED_BADGE,Q}onBeforeUpload=()=>{this.loading=!0};onUploadSuccess=w=>{this.badge=this.constructor.SAVED_BADGE,this.remote=w.detail.remote,this.uploaded=!0};onAfterUpload=()=>{this.loading=!1};onUploadError=()=>{this.badge=this.constructor.ERROR_BADGE};shouldUpload(){return!this.uploaded&&this.file instanceof File}async upload(){if(this.shouldUpload()){this.uploadEndpoint||(this.uploadEndpoint="qrcodes/data-file"),this.fire(this.events.beforeUpload);try{const w={file:this.file};this._name&&(w.name=this._name),this.name&&(w.name=this.name),this.attachable_type&&(w.attachable_type=this.attachable_type);const{response:q}=await upload(this.uploadEndpoint,w),D=await q.clone().json();this.fire(this.events.uploadSuccess,{remote:D,response:q})}catch(w){if(w instanceof ValidationError){let q=Object.keys(w.errors()).reduce((D,Q)=>(D.push(...w.errors()[Q]),D),[]);this.errors.push(...q)}this.fire(this.events.uploadError)}finally{this.fire(this.events.afterUpload)}}}fire(w,q=null){const D=this.eventName(w);if(!this.host){console.warn("FileModel host is not available");return}this.host.dispatchEvent(new CustomEvent(D,{detail:q}))}bind(w,q){if(!this.host){console.warn("FileModel host is not available, cannot set up listeners");return}this.host.addEventListener(this.eventName(w),q)}detach(w,q){if(!this.host){console.warn("FileModel host is not available, cannot set up listeners");return}this.host.removeEventListener(this.eventName(w),q)}subscribe(w){Object.keys(this.events).forEach(q=>{const D=this.events[q];this.bind(D,w)})}unsubscribe(w){Object.keys(this.events).forEach(q=>{const D=this.events[q];this.detach(D,w)})}eventName(w){return this.constructor.eventKey+":"+w}get isConnected(){return!!this.host}hash(){return this.id?hash(this.id+""):hash(this.file.name)}get extension(){return this.getName().split(".").pop()}static fileExtension(w){return w.split(".").pop()}onBeforeDelete=()=>{this.loading=!0};onAfterDelete=()=>{this.loading=!1};async delete(w=null){if(this.fire(this.events.beforeDelete),!this.id)return await this.host.deleteAnimationPromise,this.fire(this.events.afterDelete),!0;w||(w="files/");try{await destroy(FileModel.endpointRoute(w,this.id))}catch{}return this.fire(this.events.remoteFileDeleted),await this.host.animationPromise,this.fire(this.events.afterDelete),!1}getName(){return isEmpty(this.remote)?this.file.name:this.remote.name}directLink(w="download"){if(this.id)return Config.get("app.url")+"/api/files/"+this.remote.slug+`/resource?mode=${w}`}connect(w){this.host=w,this.bind(this.events.beforeUpload,this.onBeforeUpload),this.bind(this.events.afterUpload,this.onAfterUpload),this.bind(this.events.uploadError,this.onUploadError),this.bind(this.events.uploadSuccess,this.onUploadSuccess),this.bind(this.events.beforeDelete,this.onBeforeDelete),this.bind(this.events.afterDelete,this.onAfterDelete)}disconnect(){this.detach(this.events.beforeUpload,this.onBeforeUpload),this.detach(this.events.afterUpload,this.onAfterUpload),this.detach(this.events.uploadError,this.onUploadError),this.detach(this.events.uploadSuccess,this.onUploadSuccess),this.detach(this.events.beforeDelete,this.onBeforeDelete),this.detach(this.events.afterDelete,this.onAfterDelete),this.host=null}}class QrcgFileInputDropZone extends i$1{static styles=[i$3`
            :host {
                display: block;
                overflow: hidden;
                animation: in-animation 0.5s ease both;
                user-select: none;
                -webkit-user-select: none;
            }

            :host(:not([visible])) {
                animation: out-animation 0.5s ease both;
            }

            .dropzone {
                padding: 1rem;
                border-radius: 0.5rem;

                overflow: hidden;
                position: relative;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;

                background-color: white;
                border-radius: 1.5rem;
            }

            .border {
                position: absolute;
                left: -0.8rem;
                top: -0.8rem;
                right: -0.8rem;
                bottom: -0.8rem;
                border: 1rem dashed var(--gray-1);
                border-radius: 1rem;
                box-sizing: border-box;
                pointer-events: none;
                border-radius: 1.5rem;
            }

            :host([drag-over]) .border {
                border-color: black;
            }

            :host([drag-over]) .upload-icon {
                transform: translateY(2rem) scale(1.5);
            }

            :host([drag-over]) .dropzone {
                background-color: var(--primary-0);
            }

            qrcg-button {
                width: fit-content;
                margin-top: 1rem;
                transition: all 0.3s ease;
            }

            :host([drag-over]) qrcg-button {
                opacity: 0;
                transform: translateY(2rem);
            }

            label {
                color: var(--gray-2);
                transition: all 0.3s ease;
            }

            :host([drag-over]) label {
                color: white;
                transform: translateY(2rem);
            }

            .upload-icon {
                color: var(--gray-1);
                width: 3rem;
                height: 3rem;
                margin-bottom: 1rem;
                transition: all 0.3s ease;
            }

            :host([drag-over]) .upload-icon {
                color: white;
            }

            .or {
                margin-top: 1rem;
                position: relative;
                color: var(--gray-1);
                transition: all ease 0.2s;
            }

            :host([drag-over]) .or {
                color: white;
                opacity: 0;
                transform: translateY(2rem);
            }

            .or::before,
            .or::after {
                content: '';
                position: absolute;
                background-color: currentColor;
                display: block;
                height: 2px;
                width: 4rem;
                top: calc(50% - 1px);
            }

            .or::before {
                right: 1.5rem;
            }

            .or::after {
                left: 1.5rem;
            }

            input[type='file'] {
                opacity: 0;
                position: absolute;
                overflow: hidden;
                width: 0;
                height: 0;
            }

            qrcg-file-row {
                margin-top: 1rem;
            }

            @keyframes out-animation {
                from {
                    max-height: 20rem;
                    opacity: 1;
                    transform: translateY(0);
                }

                to {
                    max-height: 0;
                    opacity: 0;
                    transform: translateY(-2rem);
                }
            }

            @keyframes in-animation {
                from {
                    max-height: 0;
                    opacity: 0;
                    transform: translateY(-2rem);
                }

                to {
                    max-height: 20rem;
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        `];constructor(){super(),this.ondrop=this.dropHandler.bind(this),this.ondragleave=this.dragLeaveHandler.bind(this),this.ondragover=this.dragOverHandler.bind(this),this.ondragend=this.dragEndHandler.bind(this),this.dragOver=!1,this.visible=!0}firstUpdated(){this.fileInput.addEventListener("change",this.uploadHandler.bind(this))}static get properties(){return{dragOver:{type:Boolean,reflect:!0,attribute:"drag-over"},multiple:{type:Boolean},visible:{type:Boolean,reflect:!0},accept:{type:String},disabled:{type:Boolean}}}dropHandler(w){this.uploadHandler(w)}buildFileRows(w){this.fileRows=Array.from(w).map(q=>({file:q,loading:!0}))}async uploadHandler(w){w.stopPropagation(),w.preventDefault(),this.dragOver=!1;let q,D;if(w.target.tagName.toLowerCase()==="input"?q=w.target.files:q=w.dataTransfer.files,D=q,q=this.acceptFiles(q),q.length!==D.length){this.dispatchEvent(new CustomEvent("on-accept-validation-fails"));return}this.dispatchEvent(new CustomEvent("will-change",{cancelable:!0,detail:{files:q}}))&&this.dispatchEvent(new CustomEvent("on-change",{detail:{files:q}}))}get fileInput(){return this.renderRoot.querySelector('input[type="file"]')}acceptFiles(w){return Array.from(w).filter(q=>{if(isEmpty(this.accept))return!0;const D=this.accept.split(",").map(O=>O.replace(".","")),Q=FileModel.fileExtension(q.name);return D.indexOf(Q)>=0})}dragOverHandler(w){w.stopPropagation(),w.preventDefault(),this.dragOver||(this.dragOver=!0)}dragEndHandler(w){w.stopPropagation(),w.preventDefault(),this.dragOver=!1}dragLeaveHandler(){this.dragOver=!1}openFileSelectionDialog(){this.fileInput.click()}renderFiles(){if(!isEmpty(this.fileRows))return this.fileRows.map(w=>x`<qrcg-file-row
                    .file=${w.file}
                    .loading=${w.loading}
                    .badge=${w.badge}
                ></qrcg-file-row>`)}render(){return x`
            <div class="dropzone">
                <input
                    type="file"
                    .multiple=${this.multiple}
                    accept=${this.accept}
                    tabindex="-1"
                />

                <qrcg-icon
                    class="upload-icon"
                    mdi-icon=${mdiUpload}
                    width="nan"
                    height="nan"
                ></qrcg-icon>

                <div class="border"></div>

                <label>${t$3`Drop your files here`}</label>

                <div class="or">${t$3`or`}</div>

                <qrcg-button
                    ?disabled=${this.disabled}
                    @click=${this.openFileSelectionDialog}
                    >${t$3`Browse`}</qrcg-button
                >
            </div>
        `}}window.defineCustomElement("qrcg-file-input-dropzone",QrcgFileInputDropZone);class QrcgToast extends i$1{static styles=[i$3`
            :host {
                display: block;
                position: fixed;
                width: max-content;
                bottom: 2rem;
                left: 50%;
                transform: translateX(-50%);
                animation: fadeIn 0.3s ease-in both;
                line-height: 1.5;
                z-index: 100001;
                user-select: none;
            }

            :host([hidden]) {
                display: block !important;
                animation: fadeOut 0.3s ease-out both;
            }

            .container {
                background-color: black;
                color: white;
                box-shadow: rgb(0 0 0 / 15%) 0px 0px 3px 0px,
                    rgb(0 0 0 / 5%) 5px 5px 10px 0px;

                padding: 1rem 2rem;
                border-radius: 0.5rem;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }

            @keyframes fadeOut {
                from {
                    opacity: 1;
                }

                to {
                    opacity: 0;
                }
            }
        `];constructor(){super(),this.removeSelf=this.removeSelf.bind(this),this.onAnimationEnd=this.onAnimationEnd.bind(this)}static get properties(){return{time:{type:Number},hidden:{type:Boolean,reflect:!0}}}connectedCallback(){super.connectedCallback(),setTimeout(this.removeSelf,this.time),this.addEventListener("animationend",this.onAnimationEnd)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("animationend",this.onAnimationEnd)}removeSelf(){this.hidden=!0}onAnimationEnd=()=>{this.hidden&&(this.remove(),isFunction(this.onAfterRemove)&&this.onAfterRemove())};render(){return x`
            <div class="container">
                <slot></slot>
            </div>
        `}}function showToast(F,w=5e3){return new Promise(q=>{const D=new QrcgToast;D.onAfterRemove=q,D.innerHTML=F,D.time=w,document.body.appendChild(D)})}window.showToast=showToast;window.defineCustomElement("qrcg-toast",QrcgToast);class QrcgFileInput extends i$1{inputController=new FormInputController(this,FormInputController.MODE_PLAIN);static styles=[i$3`
            :host {
                display: block;
                max-width: 30rem;
                position: relative;
            }

            :host([disabled]) {
                pointer-events: none;
            }

            :host([disabled]) qrcg-file-input-dropzone {
                opacity: 0.8 !important;
            }

            :host([hidden]) {
                display: none;
            }

            .title {
                font-size: 0.8rem;
                margin-bottom: 0.5rem;
                font-weight: bold;
                letter-spacing: 1px;
                user-select: none;
                -webkit-user-select: none;
                display: block;
            }

            .disabled-instructions {
                background-color: var(--warning-0);
                color: black;
                font-size: 0.8rem;
                margin-top: 0.5rem;
                padding: 0.5rem;
                animation: slide-in 0.3s 0.5s ease-in both;
            }

            .instructions::slotted(*) {
                font-size: 0.8rem;
                padding: 0.5rem;
                background-color: var(--gray-0);
                margin-bottom: 0.5rem;
            }

            .error {
                color: var(--danger);
                position: absolute;
                font-size: 0.8rem;
                font-weight: bold;
                bottom: 0rem;
                transform: translateY(100%);
                animation: fade-in ease 1s both;
                display: flex;
                justify-content: space-between;
                left: 0;
                right: 0;
            }

            .error-expand {
                display: block;
                font-weight: normal;
                color: var(--primary-0);
                margin-left: 1rem;
                text-decoration: underline;
                cursor: pointer;
            }

            .file-size {
                font-size: 0.8rem;
                margin-top: 0.25rem;
                color: var(--gray-2);
                display: flex;
                gap: 0.5rem;
            }

            @keyframes fade-in {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }

            @keyframes slide-in {
                from {
                    transform: translateY(-0.5rem);
                    opacity: 0;
                    max-height: 0;
                    margin-top: 0;
                    padding: 0;
                }

                to {
                    transform: translateY(0);
                    opacity: 1;
                    max-height: 2rem;
                    margin-top: 0.5rem;
                    padding: 0.5rem;
                }
            }
        `];static get properties(){return{value:{},name:{},_name:{},multiple:{type:Boolean},type:{},files:{},uploadEndpoint:{attribute:"upload-endpoint"},fetchEndpoint:{attribute:"fetch-endpoint"},deleteEndpoint:{attribute:"delete-endpoint"},accept:{},disabled:{type:Boolean,reflect:!0},disabledInstructions:{attribute:"disabled-instructions"},readonly:{type:Boolean},errors:{type:Array},attachable_type:{},hidden:{type:Boolean,reflect:!0}}}constructor(){super(),this.files=[],this.multiple=!1}firstUpdated(){super.firstUpdated(),this.files=[]}async uploadFile(w){return this.value=null,this.files=[],this.onFilesChange({detail:{files:[w]}})}async onFilesChange(w){const q=Array.from(w.detail.files);this.files=this.files.concat(q.map(D=>this.makeFile({file:D}))),await new Promise(D=>setTimeout(D,500));for(const D of this.files)await D.upload();this.fireOnInput()}makeFileParams(w={}){return{...w,uploadEndpoint:this.uploadEndpoint,_name:this._name,name:this.name,fetchEndpoint:this.fetchEndpoint,attachable_type:this.attachable_type}}makeFile(w={}){return new FileModel(this.makeFileParams(w))}updated(w){w.has("value")&&this.makeFilesFromValue()}async fireOnInput(){await new Promise(D=>setTimeout(D,1e3));const w=this.files.map(D=>D.id),q=w.length===0?null:w.length>1?w:w[0];this.value=q,this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{value:q,name:this.name,uploadEndpoint:this.uploadEndpoint,_name:this._name}}))}async makeFilesFromValue(){const w=this.value instanceof Array?this.value:[this.value];if(!isEmpty(w)){if(this.name==="logo"&&console.log({value:w}),!this.multiple){this.files=[await FileModel.fromRemote(w[0],this.makeFileParams())];return}for(const q of w)this.files.find(D=>D.id==q)||(this.files=[...this.files,await FileModel.fromRemote(q,this.makeFileParams())])}}async onRequestDelete(w){try{await confirm$1({message:t$3("Are you sure you want to delete file?")}),await w.detail.model.delete(this.deleteEndpoint),this.files=this.files.filter(q=>q.hash()!==w.detail.model.hash()),this.fireOnInput()}catch{}}dropZoneWillChange(w){if(this.multiple)return;if(w.detail.files.length>1)return w.preventDefault(),showToast(t$3("Cannot upload more than one file"));if(this.files.length)return w.preventDefault(),showToast(t$3("Please delete old file before uploading a new one"))}shouldShowDropzone(){return this.multiple?!0:this.files.length===0}onAcceptValidationFails(){showToast("File type is not supported")}renderErrors(){return isEmpty(this.errors)?void 0:this.errors.length>1||this.errors[0].length>30?x`
                <label class="error">
                    <span>${this.errors[0].substring(0,30)} ...</span>
                    <span class="error-expand"> ${t$3`view details`} </span>
                </label>
            `:x` <label class="error"> ${this.errors[0]}</label> `}renderAllowedFileSize(){if(!this.shouldShowDropzone())return;const w=Config.get("plan.allowed_file_size");return x`
            <div class="file-size">
                <span>${t$3`Allowed file size`}</span>
                <span>${w}</span>
            </div>
        `}render(){return x`
            <label class="title"><slot></slot></label>

            <slot name="instructions" class="instructions"></slot>

            <qrcg-file-input-dropzone
                .visible=${this.shouldShowDropzone()}
                multiple=${this.multiple}
                @on-change=${this.onFilesChange}
                @will-change=${this.dropZoneWillChange}
                accept=${this.accept}
                @on-accept-validation-fails=${this.onAcceptValidationFails}
                ?disabled=${this.disabled}
            ></qrcg-file-input-dropzone>

            ${this.renderAllowedFileSize()}
            ${c(this.files,w=>w.hash(),w=>x`
                    <qrcg-file-input-row
                        .model=${w}
                        @request-delete=${this.onRequestDelete}
                        ?readonly=${this.readonly}
                    ></qrcg-file-input-row>
                `)}
            ${this.disabled&&this.disabledInstructions?x`
                      <div class="disabled-instructions">
                          ${this.disabledInstructions}
                      </div>
                  `:""}
            ${this.renderErrors()}
        `}}window.defineCustomElement("qrcg-file-input",QrcgFileInput);const style$25=":host{display:flex;position:relative;flex-direction:column}.input-wrapper{display:flex;gap:.5rem}.title{font-size:.8rem;font-weight:700;letter-spacing:1px;user-select:none;-webkit-user-select:none;margin-bottom:.5rem}:host(:not([has-label])) .title{display:none}input{display:block;flex:1}.value{display:flex}.number{width:2rem;display:flex;align-items:center;justify-content:center;border-radius:.25rem;background-color:var(--gray-0)}[type=range]{-webkit-appearance:none;margin:.75rem 0;width:100%}[type=range]:focus{outline:0}[type=range]:focus::-webkit-slider-runnable-track{background:linear-gradient(to bottom,#dedede,#dedede 49.9%,#d1d1d1 50% 100%)}[type=range]:focus::-ms-fill-lower{background:linear-gradient(to bottom,#dedede,#dedede 49.9%,#d1d1d1 50% 100%)}[type=range]:focus::-ms-fill-upper{background:linear-gradient(to bottom,#dedede,#dedede 49.9%,#d1d1d1 50% 100%)}[type=range]::-webkit-slider-runnable-track{cursor:pointer;height:.4rem;-webkit-transition:all .2s ease;transition:all .2s ease;width:100%;background:linear-gradient(to bottom,#dedede,#dedede 49.9%,#d1d1d1 50% 100%);border:.1rem solid #dedede;border-radius:25px}[type=range]::-webkit-slider-thumb{background:var(--primary-0);border-radius:.2rem;cursor:pointer;height:1.5rem;width:1.5rem;-webkit-appearance:none;margin-top:-.65rem}[type=range]::-moz-range-track{cursor:pointer;height:.4rem;-moz-transition:all .2s ease;transition:all .2s ease;width:100%;background:linear-gradient(to bottom,#dedede,#dedede 49.9%,#d1d1d1 50% 100%);border:.1rem solid #dedede;border-radius:25px}[type=range]::-moz-range-thumb{background:var(--primary-0);border-radius:.2rem;cursor:pointer;height:1.5rem;width:1.5rem}[type=range]::-ms-track{cursor:pointer;height:.4rem;-ms-transition:all .2s ease;transition:all .2s ease;width:100%;background:transparent;border-color:transparent;border-width:.75rem 0;color:transparent}[type=range]::-ms-fill-lower{background:linear-gradient(to bottom,#dedede,#dedede 49.9%,#d1d1d1 50% 100%);border:.1rem solid #dedede;border-radius:50px}[type=range]::-ms-fill-upper{background:linear-gradient(to bottom,#dedede,#dedede 49.9%,#d1d1d1 50% 100%);border:.1rem solid #dedede;border-radius:50px}[type=range]::-ms-thumb{background:var(--primary-0);border-radius:.2rem;cursor:pointer;height:1.5rem;width:1.5rem;margin-top:0}";class QrcgRangeInput extends BaseComponent{static styleSheets=[...super.styleSheets,style$25];static get properties(){return{...super.properties,name:{},value:{},min:{},max:{},step:{},showValue:{attribute:"show-value",type:Boolean}}}constructor(){super(),this.onInput=debounce(this.onInput,500)}connectedCallback(){super.connectedCallback(),this.addEventListener("input",this.onInput),this.observeSubtreeModifications()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("input",this.onInput),this.disconnectSubtreeModificationObserver()}observeSubtreeModifications(){this.subtreeModificationObserver=new MutationObserver(this.onSubtreeChanged),this.subtreeModificationObserver.observe(this,{characterData:!0,subtree:!0,childList:!0})}disconnectSubtreeModificationObserver(){this.subtreeModificationObserver.disconnect(),this.subtreeModificationObserver=null}async firstUpdated(){this.onSubtreeChanged()}onSubtreeChanged=()=>{this.textContent.trim().length>0?this.setAttribute("has-label",""):this.removeAttribute("has-label")};updated(w){w.has("value")&&(this.syncValue(),this.resetToLastValidValueIfNeeded())}syncValue(){this.rangeInput.value=this.getValue()}resetToLastValidValueIfNeeded(){typeof this.value>"u"&&typeof this.__lastValue<"u"&&(this.value=this.__lastValue),this.value&&(this.__lastValue=this.value)}get rangeInput(){return this.shadowRoot.querySelector("input")}onInput=()=>{const w=this.rangeInput.value;this.dispatchEvent(new CustomEvent("on-input",{composed:!0,bubbles:!0,detail:{name:this.name,value:w}}))};getValue(){return isEmpty(this.value)?"0":`${this.value}`}renderLabel(){return x`
            <label class="title" for="input-${this.name}" part="label">
                <slot></slot>
            </label>
        `}renderValue(){if(this.showValue)return x`
            <div class="value">
                <div class="number">${this.value}</div>
            </div>
        `}render(){return x`
            ${this.renderLabel()}

            <div class="input-wrapper">
                <input
                    id="input-${this.name}"
                    type="range"
                    min=${this.min}
                    max=${this.max}
                    step=${this.step}
                />

                ${this.renderValue()}
            </div>
        `}}window.defineCustomElement("qrcg-range-input",QrcgRangeInput);class QrcgLogoPicker extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            * {
                box-sizing: border-box;
                touch-action: manipulation;
            }

            .outer {
                overflow: hidden;
                padding: 0.5rem 0;
                font-size: 0;
                line-height: 0;
            }

            .container {
                display: flex;
                flex-wrap: wrap;
                margin: 0 -0.5rem 0 0;
                font-size: 0;
                line-height: 0;
            }

            .img-btn {
                -webkit-appearance: none;
                appearance: none;
                background-color: var(--gray-0);
                outline: 0;
                border: 0;
                padding: 1rem;
                margin: 0.15rem 0.5rem 0.5rem 0.15rem;

                cursor: pointer;

                user-select: none;
                -webkit-user-select: none;

                touch-action: manipulation;
            }

            .img-btn:focus,
            .img-btn.active {
                outline: solid 0.15rem var(--primary-0);
            }

            .img-btn.active {
                background-color: var(--gray-1);
            }

            .logo,
            .btn-text {
                display: block;
                width: 2rem;
                height: 2rem;
                font-size: 0.7rem;
                display: flex;
                align-items: center;
                color: black;
            }

            .logo.none {
                display: none;
            }
        `];get files(){return["","address-book.png","badoo.png","dribbble.png","dropbox.png","facebook.png","google-calendar.png","google-forms.png","google-maps.png","google-meet.png","google-sheets.png","google-slides.png","instagram.png","linkedin.png","paypal.png","pinterest.png","snapchat.png","soundcloud.png","spotify.png","swarm.png","telegram.png","twitter.png","viber.png","vimeo.png","vine.png","whatsapp.png","youtube.png","zoom-meeting.png","buymeacoffee.png","patreon.png"]}static get properties(){return{name:{},value:{},noneText:{attribute:"none-text"}}}constructor(){super(),this.noneText="None"}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick(w){const q=parentMatches(w.composedPath()[0],".img-btn");q&&this.onImgButtonClick(q)}onImgButtonClick(w){const q=w.querySelector(".logo"),D=q.src.replace(/\/$/,"")===location.origin?"":q.src;this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:D}}))}getFileName(w){if(isEmpty(w))return"";const q=document.createElement("a");q.href=w;const D=q.pathname;return D.substring(D.lastIndexOf("/")).replace("/","")}renderLogos(){return this.files.map(w=>{const q=w?titleCase(w.replace(".png","")):this.noneText;let D=`logo ${w?"":"none"}`.trim();const Q=url("assets/images/png-logos/"),O=w?Q+w:"",U=`img-btn ${w===this.getFileName(this.value)?"active":""}`.trim();return x`
                <button class="${U}" title=${q}>
                    ${w?"":x`<span class="btn-text">${this.noneText}</span>`}
                    <img class=${D} src=${O} />
                </button>
            `})}render(){return x`
            <div class="outer">
                <div class="container">${this.renderLogos()}</div>
            </div>
        `}}window.defineCustomElement("qrcg-logo-picker",QrcgLogoPicker);class QrcgImage extends i$1{static styles=[i$3`
            :host {
                display: flex;
                align-items: center;
                justify-content: center;
                position: relative;
            }

            img {
                max-width: 100%;
                max-height: 100%;
            }

            qrcg-loader {
                transform: translate(-50%, -50%) scale(0.4);
                position: absolute;
                top: 50%;
                left: 50%;
            }

            @media (min-width: 3000px) {
                qrcg-loader {
                    transform: translate(-50%, -50%) scale(1.5);
                }
            }
        `];constructor(){super(),this.loading=!0}static get properties(){return{src:{},loading:{type:Boolean}}}updated(w){w.has("src")&&this.loadImage()}loadImage(){const w=document.createElement("img");w.onload=()=>{this.loading=!1,w.onload=null,w.remove()},w.src=this.src}render(){return x`
            ${this.loading?x`<qrcg-loader></qrcg-loader>`:x`<img src=${this.src} />`}
        `}}window.defineCustomElement("qrcg-image",QrcgImage);const style$24=':host{display:flex;position:relative;flex-wrap:wrap;min-width:200px;align-items:center;--selected-border-color: var(--primary-0);--border-color: var(--gray-0)}*{box-sizing:border-box}label ::slotted(*){margin-right:1rem}label{font-weight:700;font-size:.8rem}button{position:relative;display:flex;align-items:center;justify-content:center;appearance:none;-webkit-appearance:none;background-color:#fff;margin:1rem .5rem 0 0;outline:0;border:0;cursor:pointer;color:#000;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;touch-action:manipulation;border:.2rem solid var(--border-color);border-radius:.5rem;transition:border-color .2s ease}button.disabled{opacity:.4}button:not(.disabled):hover,button:not(.disabled):focus{border-color:#000}button.selected{color:var(--selected-border-color);border-color:var(--selected-border-color)}button.selected:focus,button.selected:hover{color:#000;border-color:#000}button.selected:after{display:block;position:absolute;content:" ";background-color:currentColor;bottom:0;left:50%;width:.5rem;height:1rem;transform:translate(-50%,60%);border-radius:.2rem;animation:fade-in .2s ease-in}.error{color:var(--danger);position:absolute;font-size:.8rem;font-weight:700;animation:fade-in ease 1s both;bottom:-1rem}qrcg-image{width:4rem;height:4rem;padding:1rem .5rem;position:relative;pointer-events:none}:host([narrow-padding]) qrcg-image{padding:.25rem}@keyframes fade-in{0%{opacity:0}to{opacity:1}}';class QRCGImgSelector extends BaseComponent{static tag="qrcg-img-selector";static styleSheets=[...super.styleSheets,style$24];static get properties(){return{options:{type:Array},value:{type:String},name:{},base:{},errors:{type:Array},narrowPadding:{type:Boolean,attribute:"narrow-padding"}}}constructor(){super(),this.options=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick(w){const q=parentMatches(w.composedPath()[0],"button");q&&this._optionClick(q)}_optionClick(w){if(w.matches(".disabled"))return this.onDisabledOptionClick(w);const q=w.getAttribute("value");this.value=q,this.dispatchEvent(new CustomEvent("on-input",{composed:!0,bubbles:!0,detail:{name:this.name,value:this.value}}))}onDisabledOptionClick(w){this.dispatchEvent(new CustomEvent("qrcg-img-selector:disabled-option-click",{composed:!0,bubbles:!0,detail:{name:this.name,value:this.value,currentDisabledValue:w.getAttribute("value")}}))}getOptionSource(w){const q=`${this.base}/${w.src}`;return PluginManager.applyFilters(FILTER_IMG_SELECTOR_SOURCE,q,w)}renderDisabledSlot(w){if(w.disabled)return x` <slot name="after-disabled-image-${w.value}"></slot> `}renderOption(w){return x`
            <button
                class="${e$1({selected:this.value===w.value,disabled:w.disabled})}"
                value=${w.value}
                title=${w.title?w.title:""}
            >
                <div class="image">
                    <qrcg-image
                        part="image"
                        src="${this.getOptionSource(w)}"
                    ></qrcg-image>

                    ${this.renderDisabledSlot(w)}
                </div>
            </button>
        `}_renderOptions(){return x`${this.options.map(w=>this.renderOption(w))}`}_renderErrors(){if(!isEmpty(this.errors))return x`<label class="error">${this.errors[0]}</label>`}render(){return x`
            <label>
                <slot></slot>
            </label>

            ${this._renderOptions()}

            <!-- New line -->

            ${this._renderErrors()}
        `}}QRCGImgSelector.register();class QrcgFontPicker extends i$1{static styles=[i$3`
            :host {
                display: block;
                user-select: none;
                -webkit-user-select: none;
                touch-action: manipulation;
            }

            .help-container {
                background-color: var(--gray-0);
                padding: 1rem;
                font-size: 0.8rem;
                margin-top: 1rem;
                line-height: 1.6;
            }

            a {
                color: var(--primary-0);
            }

            qrcg-balloon-selector {
                margin-top: 1rem;
            }
        `];static get properties(){return{value:{},name:{},fonts:{type:Array},variantInputName:{attribute:"variant-input-name"},variant:{}}}constructor(){super(),this.variantInputName="fontVariant"}connectedCallback(){super.connectedCallback(),this.fetchFonts()}disconnectedCallback(){super.disconnectedCallback()}async fetchFonts(){const{response:w}=await get("fonts");this.fonts=await w.clone().json()}get selectedFont(){return this.fonts?.find(w=>w.family==this.value)}updated(w){w.has("value")&&this.updateVariantIfNotSupportedByFont()}updateVariantIfNotSupportedByFont(){if(!this.selectedFont?.variants)return;this.selectedFont?.variants?.find(q=>q===this.variant)||(this.variant=this.selectedFont.variants[0],this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.variantInputName,value:this.variant}})))}renderVariants(){if(!this.fonts)return null;const w=this.selectedFont?.variants?.map(q=>({name:q,value:q}));if(w)return x`
                <qrcg-balloon-selector
                    name="${this.variantInputName}"
                    .options=${w}
                    value=${this.variant}
                >
                    ${t$3`Font variant`}
                </qrcg-balloon-selector>
            `}renderHelp(){return x`
            <div class="help-container">
                ${t$3`All Google fonts are supported, you may use the search and preview feature by Google, it can be found `}

                <a href="https://fonts.google.com" target="_blank">
                    ${t$3`here.`}
                </a>
            </div>

            <div class="help-container warning">
                ${t$3`If text is empty, then you will have to choose a font that supports
            your language.`}

                <a href="https://fonts.google.com" target="_blank">
                    ${t$3`Use Google fonts search`}
                </a>

                ${t$3`and make sure to select your language from the language dropdown.`}
            </div>
        `}render(){return this.fonts?x`
            <qrcg-select name=${this.name} value=${this.value}>
                ${this.fonts.map(w=>x`
                        <option value=${w.family}>${w.family}</option>
                    `)}
                <slot slot="label"></slot>
            </qrcg-select>

            ${this.renderVariants()} ${this.renderHelp()}
        `:null}}window.defineCustomElement("qrcg-font-picker",QrcgFontPicker);const appearanceNone=i$3`
    -webkit-appearance: none;
    appearance: none;
`,trackStyle=i$3`
    width: 100%;
    height: 100%;
    background-color: transparent;
    pointer-events: none;
`,thumbStyle=i$3`
    width: 0.8rem;
    height: 130%;

    border-radius: 1rem;
    background: black;

    pointer-events: auto;
    cursor: pointer;
    margin-top: -0.65rem;

    border: 0.1rem white solid;
    box-sizing: border-box;
    pointer-events: auto;
`,activeThumb=i$3`
    background: white;
    border: 0.1rem black solid;
`;class QrcgGradientInputHandle extends i$1{static styles=[i$3`
            :host {
                display: block;
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0;
                right: 0;
                z-index: 1;
                pointer-events: none;
            }

            :host([active]) {
                z-index: 2;
            }

            :host([mouseDown]) [type='range']::-webkit-slider-thumb {
                cursor: move;
            }

            [type='range'] {
                ${appearanceNone}
                width: 100%;
                height: 100%;
                background-color: transparent;
                pointer-events: none;
            }

            [type='range']::-webkit-slider-runnable-track,
            [type='range']::-webkit-slider-thumb {
                ${appearanceNone}
            }

            [type='range']::-webkit-slider-thumb {
                ${thumbStyle}
            }

            [type='range']::-webkit-slider-runnable-track {
                ${trackStyle};
            }

            [type='range']::-moz-range-thumb,
            [type='range']::-moz-range-track {
                ${appearanceNone}
            }
            [type='range']::-moz-range-thumb {
                ${thumbStyle};
            }
            [type='range']::-moz-range-track {
                ${trackStyle}
            }

            [type='range']::-ms-track,
            [type='range']::-ms-thumb {
                ${appearanceNone}
            }
            [type='range']::-ms-track {
                ${trackStyle}
            }
            [type='range']::-ms-thumb {
                ${thumbStyle}
            }

            [type='range']:focus::-webkit-slider-thumb {
                ${activeThumb}
            }

            [type='range']:focus::-moz-range-thumb {
                ${activeThumb};
            }
        `];static get properties(){return{color:{},mouseDown:{type:Boolean}}}connectedCallback(){super.connectedCallback(),this.addEventListener("touchstart",this.onMouseDown),this.addEventListener("touchmove",this.onMouseMove),this.addEventListener("touchend",this.onMouseUp),this.addEventListener("mousedown",this.onMouseDown),this.addEventListener("mouseup",this.onMouseUp),this.addEventListener("mousemove",this.onMouseMove),this.addEventListener("input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("touchstart",this.onMouseDown),this.removeEventListener("touchmove",this.onMouseMove),this.removeEventListener("touchend",this.onMouseUp),this.removeEventListener("mousedown",this.onMouseDown),this.removeEventListener("mouseup",this.onMouseUp),this.removeEventListener("mousemove",this.onMouseMove),this.removeEventListener("input",this.onInput)}onInput(w){w.stopImmediatePropagation(),this.dispatchEvent(new CustomEvent("qrcg-gradient-input-handle:on-input",{composed:!0,bubbles:!0,detail:{color:{...this.color,stop:this.input.value}}}))}get value(){return this.color.stop}onMouseDown(){this.mouseDown=!0,this.dispatchEvent(new CustomEvent("qrcg-gradient-input:request-color-focus",{detail:{color:this.color},bubbles:!0,composed:!0}))}onMouseUp(){this.mouseDown=!1}onMouseMove(w){if(!this.mouseDown)return;const q=this.getBoundingClientRect(),D=q.top+(q.bottom-q.top)/2,Q=q.left+q.width*this.input.value/100,O=w.clientX||w.touches[0].clientX,U=w.clientY||w.touches[0].clientY,G=remToPx(4);(Math.abs(O-Q)>G||Math.abs(U-D)>G)&&this.dispatchEvent(new CustomEvent("qrcg-gradient-input:request-remove-color",{bubbles:!0,composed:!0,detail:{color:this.color}}))}updated(w){w.has("color")&&(this.input.value=this.color.stop)}get input(){return this.shadowRoot.querySelector("input")}render(){return x`
            <input name="stop" type="range" min="0" max="100" step="1" />
        `}}window.defineCustomElement("qrcg-gradient-input-handle",QrcgGradientInputHandle);class QrcgGradientInputStops extends i$1{static styles=[i$3`
            :host {
                display: block;
                box-sizing: border-box;
                padding-bottom: 2rem;
                position: relative;
                user-select: none;
                -webkit-user-select: none;
                touch-action: manipulation;
            }

            :host([can-add-color]) {
                cursor: pointer;
            }

            .preview-container {
                position: relative;
                display: flex;
            }

            .preview-image {
                height: 3rem;
                width: 100%;
                pointer-events: none;
            }

            .add-icon {
                position: absolute;
                bottom: 0;
                z-index: 2;
                color: white;
                background-color: black;
                border-radius: 50%;
                padding: 0.25rem;
                transition: opacity 0.5s ease;
                opacity: 0;
                transform: translateX(-50%);
                width: 1rem;
                height: 1rem;
            }
            :host([can-add-color]) .add-icon {
                opacity: 1;
            }

            @media (hover: none) and (pointer: coarse) {
                .add-icon {
                    display: none;
                }
            }
        `];static get properties(){return{colors:{type:Array},canAddColor:{type:Boolean,reflect:!0,attribute:"can-add-color"}}}constructor(){super(),this.colors=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.addEventListener("mousedown",this.onMouseDown),this.addEventListener("mouseup",this.onMouseUp),this.addEventListener("mousemove",this.onMouseMove),this.addEventListener("mouseleave",this.onMouseLeave),this.addEventListener("qrcg-gradient-input-handle:on-input",this.onHandleInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),this.removeEventListener("mousedown",this.onMouseDown),this.removeEventListener("mouseup",this.onMouseUp),this.removeEventListener("mousemove",this.onMouseMove),this.removeEventListener("mouseleave",this.onMouseLeave),this.removeEventListener("qrcg-gradient-input-handle:on-input",this.onHandleInput)}onHandleInput(w){const q=w.detail.color;this.fireShouldUpdateColors(this.colors.map(D=>D.id===q.id?{...D,stop:q.stop}:D))}onClick(w){this.canAddColor&&this.addColorAtPosition(w.clientX)}onMouseUp(){}onMouseDown(){}onMouseMove(w){this.syncAddIconPosition(w)}onMouseLeave(){this.canAddColor=!1}addColorAtPosition(w){const q=this.positionToPercent(w);if(q<0||q>100)return;const D=this.handles.reduce((K,ee)=>+K.value<+ee.value?ee:K,this.handles[0]),Q=this.handles.reduce((K,ee)=>+K.value>+ee.value?ee:K,this.handles[0]);let O=D,U=Q;for(const K of this.handles){const ee=+K.value;ee>q&&ee-q<O.value-q&&(O=K),ee<q&&q-ee<q-U.value&&(U=K)}const G=rgbToHex({r:155,g:155,b:155}),W=[...this.colors];W.push({color:G,stop:q,opacity:1}),this.fireShouldUpdateColors(W)}syncAddIconPosition(w){const q=w.clientX,D=this.getBoundingClientRect().left;this.addIcon.style.left=`${q-D}px`;const Q=this.positionToPercent(q);this.handles.find(U=>Math.abs(U.value-Q)<5)?this.canAddColor=!1:this.canAddColor=!0}positionToPercent(w,q=!1){const D=this.getBoundingClientRect().left,Q=this.getBoundingClientRect().width,O=Math.round(100*(w-D)/Q);return q&&console.log({x:w,elemLeft:D,elemWidth:Q,percent:O}),O}get handles(){return Array.from(this.shadowRoot.querySelectorAll("qrcg-gradient-input-handle"))}get addIcon(){return this.shadowRoot.querySelector(".add-icon")}fireShouldUpdateColors(w){this.dispatchEvent(new CustomEvent("should-update-colors",{detail:{colors:w}}))}static sortColors(w){const q=[...w];return q.sort((D,Q)=>D.stop-Q.stop),q}get sortedColors(){return this.constructor.sortColors(this.colors)}generateSvgGradient(){return`
            <linearGradient id="gradient">
                ${this.sortedColors.map(w=>`<stop
                            stop-color="${w.color}"
                            offset="${w.stop}%"
                            stop-opacity="${w.opacity}"
                        ></stop>`)}
            </linearGradient>
        `}onRequestRemove(w){const q=w.target.color;this.fireShouldUpdateColors(this.colors.map(D=>JSON.stringify(D)!=JSON.stringify(q)))}render(){const w=`<svg viewBox="0 0 500 200" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
                <defs>${this.generateSvgGradient()}</defs>
                <rect
                    style="fill:url(#gradient);"
                    x="0"
                    y="0"
                    width="500"
                    height="200"
                />
            </svg>
        `;return x`
            <div class="preview-container">
                ${c(this.colors,q=>q.id,q=>x`<qrcg-gradient-input-handle
                        .color=${q}
                        @request-remove=${this.onRequestRemove}
                    ></qrcg-gradient-input-handle>`)}

                <img
                    class="preview-image"
                    src=${"data:image/svg+xml;base64,"+btoa(w)}
                />
            </div>
            <qrcg-icon mdi-icon=${mdiPlusThick} class="add-icon"></qrcg-icon>
        `}}window.defineCustomElement("qrcg-gradient-input-stops",QrcgGradientInputStops);class QrcgGradientInput extends i$1{static styles=[i$3`
            :host {
                display: block;
                position: relative;
                border: 0.5rem var(--gray-0) solid;
                padding: 1rem;
            }

            :host(:not([expanded])) > *:not(.header-row) {
                display: none;
            }

            .header-row {
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-bottom: 1rem;
            }

            :host(:not([expanded])) .header-row {
                margin-bottom: 0;
            }

            .control-label {
                font-weight: bold;
                font-size: 1rem;
                display: block;
            }

            .expand-button::part(button) {
                min-width: initial;
            }

            .opacity {
                margin-left: 1rem;
            }

            .row {
                display: flex;
                flex-direction: column;

                padding: 0.25rem;
                border-bottom: 0.5rem var(--gray-0) solid;
                margin-top: 0.5rem;
            }

            @media (min-width: 1200px) {
                .row {
                    flex-direction: row;
                    align-items: center;
                    border-bottom: 0;
                    margin-top: 0;
                }
            }

            .stop,
            .opacity {
                width: 5rem;
            }

            .row.focused {
                background-color: var(--gray-1);
            }

            .inner-row {
                display: flex;
                justify-content: space-between;
                margin-top: 1rem;
                align-items: center;
            }

            @media (min-width: 900px) {
                .inner-row {
                    margin-top: 0;
                }
            }

            qrcg-color-picker {
                margin-right: auto;
            }

            qrcg-button.remove::part(content) {
                font-size: 0;
            }

            qrcg-button.remove {
                margin-left: 1rem;
            }

            qrcg-button.remove qrcg-icon {
                width: 1.5rem;
                height: 1.5rem;
                color: var(--gray-2);
            }

            qrcg-button.remove::part(button) {
                min-width: 0;
                padding: 0.5rem;
            }

            qrcg-button.add {
                margin-top: 1rem;
            }

            svg {
                width: 100%;

                height: 2rem;
            }

            .bottom-controls {
                display: flex;
                justify-content: space-between;
                align-items: flex-end;
            }

            .type {
                margin-top: 0.5rem;
            }

            .angle::part(input) {
                margin-bottom: 0;
            }
        `];static get properties(){return{name:{},value:{},focusedColorId:{},colors:{type:Array},type:{},angle:{},expanded:{type:Boolean,reflect:!0}}}constructor(){super(),this.colors=[{color:"#000000",stop:0,opacity:1},{color:"#808080",stop:33,opacity:1},{color:"#000000",stop:70,opacity:1},{color:"#808080",stop:100,opacity:1}],this.type="LINEAR",this.angle=45,this.expanded=!0}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput),this.addEventListener("click",this.onClick),this.addEventListener("qrcg-gradient-input:request-remove-color",this.onRequestRemove),this.addEventListener("qrcg-gradient-input:request-color-focus",this.onColorFocusRequested)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput),this.removeEventListener("click",this.onClick),this.stops.removeEventListener("should-update-colors",this.onUpdateColorsRequested),this.removeEventListener("qrcg-gradient-input:request-remove-color",this.onRequestRemove),this.removeEventListener("qrcg-gradient-input:request-color-focus",this.onColorFocusRequested)}get stops(){return this.shadowRoot.querySelector("qrcg-gradient-input-stops")}firstUpdated(){this.stops.addEventListener("should-update-colors",this.onUpdateColorsRequested)}focusColor(w){this.focusedColorId=w.id}onColorFocusRequested(w){const q=w.detail.color;this.focusColor(q)}onUpdateColorsRequested=w=>{const q=w.detail.colors;this.fireOnInput({colors:q})};onClick=w=>{const q=w.composedPath()[0],D=parentMatches(q,"qrcg-button.remove");if(D)return this.blockEvent(w),this.handleRemove(D);if(parentMatches(q,"qrcg-button.add"))return this.blockEvent(w),this.addColor()};newColor(){return{color:"#000000",stop:100,opacity:1}}addColor(){this.colors=[...this.colors,this.newColor()]}onRequestRemove(w){const q=w.detail.color;this.removeColor(q)}removeColor(w){if(this.colors.length<=2)return;const q=this.colors.filter(D=>D.id!==w.id);this.fireOnInput({colors:q})}handleRemove(w){this.removeColor(w.color)}onInput=w=>{const q=w.composedPath()[0];if(q!=this)switch(this.blockEvent(w),q.name){case"type":this.handleTypeInput(w);break;case"angle":this.handleAngleInput(w);break;default:this.handleColorRowInput(w);break}};blockEvent(w){w.preventDefault(),w.stopImmediatePropagation()}willUpdate(w){if(w.has("value")&&this.value)try{const q=JSON.parse(this.value);this.colors=q.colors,this.type=q.type,this.angle=q.angle}catch{}}updated(w){if(w.has("colors")){let q=!1;for(const D of this.colors)D.id||(D.id=generateUniqueID(10),q=!0);q&&this.requestUpdate()}}handleColorRowInput(w){const q=this.colors.map(D=>{const Q=w.composedPath()[0];return D.id===Q.color.id?{...D,[Q.name]:w.detail.value}:D});this.fireOnInput({colors:q})}handleTypeInput(w){const q=w.composedPath()[0].value;this.fireOnInput({type:q})}handleAngleInput(w){const q=w.composedPath()[0].value;this.fireOnInput({angle:q})}fireOnInput({colors:w,type:q,angle:D}){const Q=w??this.colors,O=q??this.type,U=D??this.angle;this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{value:JSON.stringify({colors:Q,type:O,angle:U}),name:this.name}}))}onExpandToggle(){this.expanded=!this.expanded}renderRow=w=>{const q=e$1({row:!0,focused:this.focusedColorId===w.id});return x`
            <div class="${q}">
                <qrcg-color-picker
                    value=${w.color}
                    .color=${w}
                    name="color"
                ></qrcg-color-picker>

                <div class="inner-row">
                    <qrcg-input
                        name="stop"
                        class="stop"
                        placeholder="Stop"
                        type="number"
                        min="0"
                        max="100"
                        step="1"
                        value=${w.stop}
                        .color=${w}
                    >
                        <slot name="stop-text"> ${t$3`Stop`} </slot>
                    </qrcg-input>

                    <qrcg-input
                        name="opacity"
                        class="opacity"
                        placeholder="Opacity"
                        type="number"
                        min="0"
                        max="1"
                        step="0.1"
                        value=${w.opacity}
                        .color=${w}
                    >
                        <slot name="opacity-text">${t$3`Opacity`}</slot>
                    </qrcg-input>

                    <qrcg-button
                        class="remove"
                        .color=${w}
                        transparent
                        ?disabled=${this.colors.length<=2}
                    >
                        <slot name="remove">
                            <qrcg-icon mdi-icon=${mdiClose}></qrcg-icon>
                        </slot>
                    </qrcg-button>
                </div>
            </div>
        `};renderColors(){const w=QrcgGradientInputStops.sortColors(this.colors);return c(w,q=>q.id,this.renderRow)}render(){return x`
            <div class="header-row">
                <label class="control-label">
                    <slot name="label"></slot>
                </label>
                <qrcg-button
                    transparent
                    class="expand-button"
                    @click=${this.onExpandToggle}
                >
                    <qrcg-icon mdi-icon=${mdiUnfoldMoreHorizontal}></qrcg-icon>
                </qrcg-button>
            </div>

            <qrcg-gradient-input-stops
                .colors=${this.colors}
            ></qrcg-gradient-input-stops>

            ${this.renderColors()}

            <div class="bottom-controls">
                <qrcg-balloon-selector
                    name="type"
                    class="type"
                    value=${this.type}
                    .options=${[{name:t$3("Radial"),value:"RADIAL"},{name:t$3("Linear"),value:"LINEAR"}]}
                >
                    <slot name="gradient-type-text">${t$3`Gradient Type`}</slot>
                </qrcg-balloon-selector>

                ${this.type==="LINEAR"?x`<qrcg-input
                          name="angle"
                          class="angle"
                          type="number"
                          min="0"
                          max="360"
                          step="1"
                          placeholder="0 degrees"
                          .value=${this.angle}
                      >
                          <slot name="gradient-angle-text">
                              ${t$3`Angle (degrees)`}
                          </slot>
                      </qrcg-input>`:null}
            </div>
        `}}window.defineCustomElement("qrcg-gradient-input",QrcgGradientInput);class QrcgStickerTextInputModal extends QrcgModal{static get styles(){return[super.styles,i$3`
                .control-label {
                    font-size: 0.8rem;
                    margin-bottom: 0.5rem;
                    font-weight: bold;
                    letter-spacing: 1px;
                    user-select: none;
                    -webkit-user-select: none;
                    display: block;
                    margin-top: 1rem;
                }

                .body {
                    max-height: 60vh;
                    overflow-y: scroll;
                    overflow-x: hidden;
                }

                qrcg-color-picker {
                    margin-top: 1rem;
                }

                @media (min-width: 800px) {
                    qrcg-range-input {
                        max-width: 50%;
                    }
                }

                @media (min-width: 500px) {
                    .container {
                        max-width: 450px;
                    }
                }

                @media (min-width: 1300px) {
                    .container {
                        max-width: 850px;
                    }
                }
            `]}static get properties(){return{title:{},message:{},affirmativeText:{},negativeText:{},data:{},showTextBackgroundColorInput:{type:Boolean}}}static async open({data:w,showTextBackgroundColorInput:q=!0}){const D=new QrcgStickerTextInputModal;return D.title=t$3("Customize Your Text"),D.affirmativeText=t$3("OK"),D.negativeText=t$3("Cancel"),D.data=w,D.showTextBackgroundColorInput=q,document.body.appendChild(D),await new Promise(Q=>setTimeout(Q,250)),D.open()}constructor(){super(),this.data={}}connectedCallback(){super.connectedCallback(),document.addEventListener("on-input",this.onDocumentInput)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("on-input",this.onDocumentInput)}updated(w){w.has("data")&&this.syncDataToInputs()}syncDataToInputs(){this.$("qrcg-font-picker").value=this.data.fontFamily,this.$("qrcg-font-picker").variant=this.data.fontVariant,["textColor","textBackgroundColor","textSize"].forEach(q=>{const D=this.$(`[name=${q}]`);D&&(D.value=this.data[q])})}$(w){return this.shadowRoot.querySelector(w)}onDocumentInput=w=>{const{name:q,value:D}=w.detail;this.data[q]=D;const Q=this.shadowRoot.querySelector(`[name=${q}]`);Q&&(Q.value=D)};onAffirmativeClick(){this.resolve(this.data),this.close()}renderTitle(){return this.title}renderBody(){return x`
            <div class="container">
                <qrcg-font-picker name="fontFamily">
                    ${t$3`Select font`}
                </qrcg-font-picker>

                <qrcg-color-picker name="textColor">
                    ${t$3`Text color`}
                </qrcg-color-picker>

                ${this.showTextBackgroundColorInput?x`
                          <qrcg-color-picker name="textBackgroundColor">
                              ${t$3`Text background color`}
                          </qrcg-color-picker>
                      `:null}

                <label class="control-label"> ${t$3`Text size`} </label>

                <qrcg-range-input
                    name="textSize"
                    value="1"
                    min="0"
                    max="2"
                    step="0.01"
                ></qrcg-range-input>
            </div>
        `}renderActions(){return x`
            <qrcg-button transparent modal-negative slot="actions">
                ${this.negativeText}
            </qrcg-button>

            <qrcg-button modal-affirmative slot="actions">
                ${this.affirmativeText}
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-sticker-text-input-modal",QrcgStickerTextInputModal);class QrcgStickerTextInput extends i$1{_dir=new DirectionAwareController(this);static styles=[i$3`
            :host {
                display: flex;
            }
            qrcg-input {
                margin-right: 1rem;
            }

            :host(.dir-rtl) qrcg-input {
                margin-right: 0;
                margin-left: 1rem;
            }

            qrcg-input::part(label) {
                display: none;
            }

            qrcg-input::part(input) {
                margin-bottom: 0;
            }

            qrcg-button::part(button) {
                padding: 0 0.5rem;
                min-width: initial;
            }

            qrcg-button::part(content) {
                display: flex;
            }

            qrcg-icon {
                width: 1.3rem;
                height: 1.3rem;
            }
        `];static get properties(){return{name:{},designData:{},showTextBackgroundColorInput:{type:Boolean,attribute:"show-text-background-color-input",reflect:!0},defaultTextValue:{},isTextDisabled:{type:Boolean}}}constructor(){super(),this.defaultTextValue=null,this.isTextDisabled=!1}connectedCallback(){super.connectedCallback()}updated(w){if(w.has("designData")){const q=`${this.name}text`,D=this.shadowRoot.querySelector(`[name=${q}]`);if(!D)return;const Q=this.designData[q];Q&&!isEmpty(this.defaultTextValue)?D.value=this.defaultTextValue:D.value=Q}}async openModal(){try{const w=await QrcgStickerTextInputModal.open({data:this.removeInputNameFromDataKeys(this.designData),showTextBackgroundColorInput:!!this.showTextBackgroundColorInput}),q=this.addInputNameToDataKeys(w);this.fireEvents(q)}catch{}}removeInputNameFromDataKeys(w){return Object.keys(w).reduce((q,D)=>(D.match(this.name)&&(q[D.replace(this.name,"")]=w[D]),q),{})}addInputNameToDataKeys(w){return Object.keys(w).reduce((q,D)=>(q[this.name+D]=w[D],q),{})}async fireEvents(w){this.dispatchEvent(new CustomEvent("on-batch-input",{bubbles:!0,composed:!0,detail:{name:this.tagName.toLowerCase(),value:w}}))}render(){return x`
            <qrcg-input
                name="${this.name}text"
                placeholder=${t$3`SCAN ME`}
                debounce
                ?disabled=${this.isTextDisabled}
                .value=${this.defaultTextValue}
            ></qrcg-input>
            <qrcg-button @click=${this.openModal}>
                <qrcg-icon mdi-icon=${mdiCog}></qrcg-icon>
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-sticker-text-input",QrcgStickerTextInput);class CanvasTextRenderer{fontSize=60;canvasHeight=80;cavasWidth=1e3;async render({text:w,color:q,fontFamily:D,fontVariant:Q="900"}){const O=await this.loadGoogleFont(D,Q),U=this.getFontStyle(Q,O),G=this.print(w,q,D,U);return this.trim(G).toDataURL()}getFontStyle(w,q){if(w==="regular")return"";let D=w.match(/\d+/);const Q=isEmpty(D)?"400":D[0];let O=w.replace(Q,"");return isEmpty(O)&&(O=q[0].fontStyle),!!q.find(G=>G.fontStyle==O&&G.weight==Q)?w.replace(/(\d+)/,G=>G+" "):""}print(w,q,D,Q){const O=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});return O.canvas.width=this.cavasWidth,O.canvas.height=this.canvasHeight,O.clearRect(0,0,O.canvas.width,O.canvas.height),O.font=`${Q} ${this.fontSize}px ${D}`,O.fillStyle=q,O.fillText(w,0,this.fontSize),O.canvas}async loadGoogleFont(w,q){const D=`https://fonts.googleapis.com/css?family=${w.replace(/ /g,"+")}:${q}`,Q=await(await fetch(D)).text();let O=this.parseStyleSheet(w,Q),U=O.map(G=>this.loadFontFace(G));return await Promise.all(U),O}loadFontFace(w){const q=new FontFace(w.fontFamily,`url(${w.src})`,{unicodeRange:w.unicodeRange,style:w.fontStyle,weight:w.weight});return document.fonts.add(q),q.load()}parseStyleSheet(w,q){let D=q.match(/@font-face {(\n|.)*?}/g);return D=D.map(Q=>({fontFamily:w,unicodeRange:Q.match(/unicode-range: (.*);/)[1],src:Q.match(/src: url\((.*?)\)/)[1],fontStyle:Q.match(/font-style: (.*);/)[1],weight:Q.match(/font-weight: (.*);/)[1]})),D}trim(w){w.getContext("2d",{});var q=w.getContext("2d",{willReadFrequently:!0}),D=document.createElement("canvas").getContext("2d",{willReadFrequently:!0}),Q=q.getImageData(0,0,w.width,w.height),O=Q.data.length,U,G={top:null,left:null,right:null,bottom:null},W,K;for(U=0;U<O;U+=4)Q.data[U+3]!==0&&(W=U/4%w.width,K=~~(U/4/w.width),G.top===null&&(G.top=K),(G.left===null||W<G.left)&&(G.left=W),(G.right===null||G.right<W)&&(G.right=W),(G.bottom===null||G.bottom<K)&&(G.bottom=K));var ee=G.bottom-G.top,Y=G.right-G.left,J=q.getImageData(G.left,G.top,Y,ee);return D.canvas.width=Y,D.canvas.height=ee,D.putImageData(J,0,0),D.canvas}}class BaseSvgProcessor{host;constructor(w){this.host=w,document.addEventListener("qrcg-qrcode-image:svg-after-render",this.onSvgAfterRender),w.addController(this)}hostDisconnected(){this.destroy()}destroy(){document.removeEventListener("qrcg-qrcode-image:svg-after-render",this.onSvgAfterRender)}onSvgAfterRender=w=>{this.shouldProcess()&&this.process(w.detail.svgContainer)};shouldProcess(){return!0}process(w){}}class Base64TextRenderer extends BaseSvgProcessor{async renderTextField(w,q){const D=q.querySelector(`#${w}_text_placeholder`);if(!D)return;const Q=G=>this.host.design[w+G],U=await new CanvasTextRenderer().render({text:Q("text"),color:Q("textColor"),fontFamily:Q("fontFamily"),fontVariant:Q("fontVariant")});D.setAttribute("xlink:href",U)}getTextFields(){return Object.keys(this.host.design).filter(q=>q.match(/.*text$/)).map(q=>q.replace(/text$/,""))}shouldProcess(){if(!this.host?.design)return!1;const w=this.host?.design?.advancedShape;return["pincode-protected","qrcode-details","qrcode-with-logo-and-slug"].indexOf(w)>=0?!1:Config.get("preview.canvasTextRender")!="disabled"}process(w){this.getTextFields().forEach(q=>{this.renderTextField(q,w)})}}class QrcgColorCustomizationDisabledMessage extends i$1{static styles=[i$3`
            :host {
                display: flex;
                user-select: none;
                flex-direction: column;
            }

            .container {
                display: flex;
                align-items: center;
                background-color: var(--gray-0);
                padding: 1rem;
                margin-bottom: 1rem;
            }

            .message {
                margin-right: 1rem;
            }

            .link {
                color: var(--primary-0);
                font-weight: bold;
                cursor: pointer;
            }
        `];get designer(){return parentMatches(this,"qrcg-qrcode-designer")}connectedCallback(){super.connectedCallback(),this.connectHostDesigner()}disconnectedCallback(){super.disconnectedCallback(),this.disconnectHostDesigner()}connectHostDesigner(){this.injectHostStyles()}disconnectHostDesigner(){}injectHostStyles(){if(!this.colorCustomizationIsDisabled())return;const w=styled`
            qrcg-color-picker,
            [name="backgroundEnabled"],
            [name="fillType"] {
                pointer-events: none;
                opacity: 0.3;
            }
        `,q=document.createElement("style");q.innerHTML=w,this.designer.shadowRoot.appendChild(q)}colorCustomizationIsDisabled(){return!featureAllowed("qrcode.color_customization")}shouldUpgradePlan(){return loggedIn()&&!onTrial()}upgradeLink(){return this.shouldUpgradePlan()?ConfigHelper.pricingPlansUrl()+"?action=change-plan":ConfigHelper.pricingPlansUrl()}upgradeText(){return this.shouldUpgradePlan()?t$3`Upgrade Now`:t$3`Subscribe Now`}messageText(){return loggedIn()?t$3`Color Customization is disabled in your plan.`:t$3`You need to subsribe to enable color customization.`}render(){if(this.colorCustomizationIsDisabled())return x`
            <div class="container">
                <div class="message">${this.messageText()}</div>

                <a class="link" href=${this.upgradeLink()}>
                    ${this.upgradeText()}
                </a>
            </div>
        `}}window.defineCustomElement("qrcg-color-customization-disabled-message",QrcgColorCustomizationDisabledMessage);class FillTypeFields{host;constructor(w){this.host=w,w.addController(this)}hostDisconnected(){this.host=null}renderSolidTypeInputs(){const w=x`
            <label>${t$3`Fill color`}</label>
            <qrcg-color-picker name="foregroundColor"></qrcg-color-picker>
        `,q=x`
            <label>${t$3`Eye external color`}</label>
            <qrcg-color-picker name="eyeExternalColor"></qrcg-color-picker>

            <label>${t$3`Eye internal color`}</label>

            <qrcg-color-picker name="eyeInternalColor"></qrcg-color-picker>
        `;return x`${w} ${q}`}renderGradientTypeInputs(){return x`
            <label>${t$3`Select gradient type`}</label>
            <qrcg-gradient-input name="gradientFill">
                <span slot="label"> ${t$3`Fill Gradient`} </span>
            </qrcg-gradient-input>
        `}renderForegroundImageTypeInputs(){return x`
            <label> ${t$3`Fill image`} </label>

            ${this.host.remoteRecord?x`
                      <qrcg-file-input
                          value=${this.host.remoteRecord?.foreground_image?.id}
                          upload-endpoint="qrcodes/${this.host.remoteRecord?.id}/background-image"
                          accept=".png,.jpg,.jpeg"
                          _name="foreground_image"
                      ></qrcg-file-input>
                  `:x`
                      <slot name="file-input-instructions-foreground-image">
                      </slot>
                  `}
        `}renderCurrentFillTypeInputs(){if(!this.host.design)return;const w=`render${studlyCase(this.host.design.fillType)}TypeInputs`;return isFunction(this[w])?this[w]():null}render(){if(!this.host.isAiDesign())return x`
            <label>${t$3`Select fill type`}</label>
            <qrcg-balloon-selector
                name="fillType"
                value="solid"
                .options=${[{name:t$3("Solid color"),value:"solid"},{name:t$3("Gradient"),value:"gradient"},{name:t$3("Image"),value:"foreground_image"}]}
            ></qrcg-balloon-selector>

            ${this.renderCurrentFillTypeInputs()}
        `}}class BackgroundFields{host;constructor(w){this.host=w,w.addController(this)}hostDisconnected(){this.host=null}renderBackgroundColorField(){if(this.host.design.backgroundEnabled)return x`
            <label>${t$3`Background color`}</label>

            <qrcg-color-picker name="backgroundColor"></qrcg-color-picker>
        `}render(){if(!this.host.isAiDesign())return x`
            <label>${t$3`Background`}</label>

            <qrcg-checkbox name="backgroundEnabled">
                ${t$3`Enabled`}
            </qrcg-checkbox>

            ${this.renderBackgroundColorField()}
        `}}class ModuleFields{constructor(w){this.host=w,w.addController(this)}hostDisconnected(){this.host=null}renderCustomEyeShapes(){return x`
            <label>${t$3`Select finder`}</label>

            <qrcg-img-selector
                name="finder"
                value="default"
                .options=${"default,eye-shaped,octagon,rounded-corners,whirlpool,water-drop,circle,zigzag,circle-dots".split(",").map(w=>({value:w,src:`${w}.png`}))}
                base="${url("assets/images/finders")}"
            ></qrcg-img-selector>

            <label>${t$3`Select finder dot`}</label>

            <qrcg-img-selector
                name="finderDot"
                value="default"
                .options=${"default,eye-shaped,octagon,rounded-corners,whirlpool,water-drop,circle,zigzag".split(",").map(w=>({value:w,src:`${w}.png`}))}
                base="${url("assets/images/finders/dots")}"
            ></qrcg-img-selector>
        `}render(){if(!this.host.isAiDesign())return x`
            <label>${t$3`Select module`}</label>

            <qrcg-img-selector
                name="module"
                value="square"
                .options=${"square,dots,triangle,rhombus,star-5,star-7,roundness,vertical-lines,horizontal-lines,diamond,fish,tree,twoTrianglesWithCircle,fourTriangles,triangle-end".split(",").map(w=>({value:w,src:`${w}.png`}))}
                base="${url("assets/images/modules")}"
            ></qrcg-img-selector>

            ${this.renderCustomEyeShapes()}
        `}}const shapeNames=["None","Circle","Cloud","Shopping Cart","Gift","Cup","T-Shirt","Home","Book","Message","Bag","Truck","Trophy","Umbrella","Van","Watch","Water","Bulb","Sun","Car","Pet","GYM","Salon","Food","Ice Cream","Search","Burger","Apple","Barn","Sun Rise","Star","Realtor","Legal","Juice","Water Glass","Electrician","Plumber","Builder","Home Mover","Cooking","Gardening","Furniture","Mobile","Restaurant","Travel","Dentist","Golf","Pizza","Locksmith","Bakery","Painter","Pest","Teddy","Boot","Shield","Shawarma","Ticket","Piggy Bank","Realtor Sign","Brain"];function getShapeNames(){return PluginManager.applyFilters(FILTER_OUTLINED_SHAPES,shapeNames)}function getShapes(){return getShapeNames().map(F=>({name:F,value:kebabCase(F)}))}class OutlinedShapesFields{constructor(w){this.host=w,w.addController(this)}hostDisconnected(){this.host=null}renderCurrentShapeInputs(){if(this.host.design.shape&&this.host.design.shape!=="none")return x`
            <label>${t$3`Frame color`}</label>

            <qrcg-color-picker name="frameColor"></qrcg-color-picker>
        `}shapeIsEnabled(w){return this.host.constructor.shapeValidator?this.host.constructor.shapeValidator(w):featureAllowed(`shape.${w.value}`)}render(){if(!this.host.isAiDesign())return x`
            <label>${t$3`Select shape`}</label>

            <qrcg-img-selector
                name="shape"
                value="none"
                .options=${getShapes().map(w=>({title:t$3(w.name),value:w.value,src:`shape-${w.value}.jpg`,disabled:!this.shapeIsEnabled(w)}))}
                base="${url("assets/images/shapes")}"
            >
            </qrcg-img-selector>

            ${this.renderCurrentShapeInputs()}
        `}}class LogoFields{constructor(w){this.host=w,w.addController(this)}render(){return featureAllowed("qrcode.logo")?x`
            <label>${t$3`Logo type`}</label>

            <qrcg-radiogroup name="logoType">
                <qrcg-radio value="preset">${t$3`Preset`}</qrcg-radio>
                <qrcg-radio value="custom">${t$3`Your logo`}</qrcg-radio>
            </qrcg-radiogroup>

            ${this.host.design.logoType==="preset"?x`
                      <label>${t$3`Select logo`}</label>

                      <qrcg-logo-picker
                          name="logoUrl"
                          none-text=${t$3`NONE`}
                      ></qrcg-logo-picker>
                  `:x`
                      <label>${t$3`Logo`}</label>

                      ${this.host.remoteRecord?x`
                                <qrcg-file-input
                                    value=${this.host.remoteRecord?.logo?.id}
                                    upload-endpoint="qrcodes/${this.host.remoteRecord?.id}/logo"
                                    accept=".png,.jpg,.jpeg"
                                    _name="logo"
                                ></qrcg-file-input>
                            `:x` <slot
                                name="file-input-instructions-logo"
                            ></slot>`}
                  `}
            ${this.host.remoteRecord?.logo||this.host.design.logoUrl?x`
                      <label>${t$3`Logo background`}</label>

                      <qrcg-checkbox name="logoBackground">
                          ${this.host.design.logoBackground?t$3("Enabled"):t$3("Disabled")}
                      </qrcg-checkbox>

                      <label>${t$3`Background shape`}</label>

                      <qrcg-radiogroup name="logoBackgroundShape">
                          <qrcg-radio value="circle">${t$3`Circle`}</qrcg-radio>
                          <qrcg-radio value="square">${t$3`Square`}</qrcg-radio>
                      </qrcg-radiogroup>

                      ${this.host.design.logoBackground?x`
                                <label>${t$3`Background color`}</label>
                                <qrcg-color-picker
                                    name="logoBackgroundFill"
                                    value=${this.host.design.logoBackgroundFill}
                                ></qrcg-color-picker>

                                <label>${t$3`Background size`}</label>
                                <qrcg-range-input
                                    name="logoBackgroundScale"
                                    value=${this.host.design.logoBackgroundScale}
                                    min="0.3"
                                    max="2"
                                    step="0.01"
                                ></qrcg-range-input>
                            `:""}

                      <label>${t$3`Logo size`}</label>

                      <qrcg-range-input
                          value=${this.host.design.logoScale}
                          name="logoScale"
                          min=${0}
                          max=${1}
                          step=${.01}
                      ></qrcg-range-input>

                      <label>${t$3`Horizontal position`}</label>

                      <qrcg-range-input
                          .value=${this.host.design.logoPositionX}
                          name="logoPositionX"
                          min=${0}
                          max=${1}
                          step=${.01}
                      ></qrcg-range-input>

                      <label>${t$3`Vertical position`}</label>

                      <qrcg-range-input
                          .value=${this.host.design.logoPositionY}
                          name="logoPositionY"
                          min=${0}
                          max=${1}
                          step=${.01}
                      ></qrcg-range-input>

                      <label>${t$3`Rotation`}</label>

                      <qrcg-range-input
                          .value=${this.host.design.logoRotate}
                          name="logoRotate"
                          min=${0}
                          max=${360}
                          step=${1}
                      ></qrcg-range-input>
                  `:""}
        `:x`
                <label>${t$3`Logo`}</label>
                <div class="logo-upgrade-message">
                    ${t$3`Want to add your logo? Upgrade your plan to do that.`}
                </div>
            `}}const advancedShapes=["none","rect-frame-text-top","rect-frame-text-bottom","simple-text-bottom","simple-text-top","four-corners-text-top","four-corners-text-bottom","coupon","review-collector","healthcare","pincode-protected","qrcode-details","qrcode-with-logo-and-slug"].map(F=>({name:titleCase(F),value:F}));class QRCodeRedirect{static cache=new Map;qrcodeId=null;useCache=!0;static withQRCodeId(w){const q=new this;return q.qrcodeId=w,q}static getCachedSlug(w){return this.cache.get(w)?.slug}withoutCache(){return this.useCache=!1,this}doFetch(){return new Promise(w=>{get(`qrcodes/${this.qrcodeId}/redirect`).then(({json:q})=>{QRCodeRedirect.cache.set(this.qrcodeId,q),this.fetchPromise=null,w(q)})})}fetch(){return this.fetchPromise?this.fetchPromise:(this.fetchPromise=this.doFetch(),this.fetchPromise)}get(){return QRCodeRedirect.cache.get(this.qrcodeId)&&this.useCache?Promise.resolve(QRCodeRedirect.cache.get(this.qrcodeId)):this.fetch()}}class AdvancedShapeFields{constructor(w){this.host=w,w.addController(this)}hostConnected(){this.host.addEventListener("advancedShapeChanged",this.onAdvancedShapeChanged)}hostDisconnected(){this.host.removeEventListener("advancedShapeChanged",this.onAdvancedShapeChanged),this.host=null}onAdvancedShapeChanged=w=>{const{detail:{originalEvent:q}}=w,D=q.detail.value;D==="healthcare"||D==="qrcode-details"?this.setDefaultTextColorToBlack():this.setDefaultTextColorToStateDefault()};setDefaultTextColorToBlack(){setTimeout(()=>{this.host.updateDesignObject({...this.host.design,textBackgroundColor:"#fff",textColor:"#000"})},50)}setDefaultTextColorToStateDefault(){setTimeout(()=>{this.host.updateDesignObject({...this.host.design,textBackgroundColor:defaultState.design.textBackgroundColor,textColor:defaultState.design.textColor})},50)}advancedShapeIsEnabled(w){return this.host.constructor.advancedShapeValidator?this.host.constructor.advancedShapeValidator(w):featureAllowed(`advancedShape.${w.value}`)}renderQrcodeDetailsAdvancedShapeFields(){return x`
            <label>${t$3`Slug Text`}</label>
            <qrcg-sticker-text-input
                name=""
                .designData=${this.host.design}
                ?isTextDisabled=${!0}
                .defaultTextValue=${QRCodeRedirect.getCachedSlug(this.host.remoteRecord?.id)}
            ></qrcg-sticker-text-input>
        `}renderQrcodeWithLogoAndSlugAdvancedShapeFields(){return x`
            <label>${t$3`Slug Text`}</label>
            <qrcg-sticker-text-input
                name=""
                .designData=${this.host.design}
                ?isTextDisabled=${!0}
                .defaultTextValue=${QRCodeRedirect.getCachedSlug(this.host.remoteRecord?.id)}
            ></qrcg-sticker-text-input>

            <label>${t$3`Sticker Logo`}</label>
            <qrcg-file-input
                name="sticker_logo"
                upload-endpoint="qrcodes/${this.host.remoteRecord?.id}/upload-design-file"
                accept=".png,.jpg,.jpeg"
            ></qrcg-file-input>
        `}renderAdvancedShapeFields(){const w=`render${studlyCase(this.host.design.advancedShape)}AdvancedShapeFields`;if(isFunction(this[w]))return console.log(`${w} is found`),this[w]();console.log(`${w} is not found`)}renderHealthcareAdvancedShapeFields(){return x`
            <label>${t$3`Frame Color`}</label>
            <qrcg-color-picker name="healthcareFrameColor"></qrcg-color-picker>

            <label>${t$3`Heart Color`}</label>
            <qrcg-color-picker name="healthcareHeartColor"></qrcg-color-picker>
        `}renderReviewCollectorAdvancedShapeFields(){return x`
            <label> ${t$3`Circle Color`} </label>
            <qrcg-color-picker name="reviewCollectorCircleColor">
            </qrcg-color-picker>

            <label>${t$3`Stars Color`}</label>
            <qrcg-color-picker
                name="reviewCollectorStarsColor"
            ></qrcg-color-picker>

            <label> ${t$3`Select Logo`}</label>

            <qrcg-img-selector
                name="reviewCollectorLogoSrc"
                value="airbnb"
                .options=${"airbnb,ebay,linkedin,tripadvisor,yelp,aliexpress,facebook,pinterest,trustpilot,yemeksepeti,amazon,foursquare,twitch,youtube,appstore,google-maps,snapchat,twitter,zoom,bitcoin,google,telegram,wechat,booking,googleplay,tiktok,whatsapp,discord,instagram,trendyol,yellowpages".split(",").map(w=>({value:w,src:`${w}.png`}))}
                base="${url("assets/images/review-collector-logos")}"
            ></qrcg-img-selector>

            <label> ${t$3`Or Upload Your Own`} </label>

            <qrcg-file-input
                upload-endpoint="qrcodes/${this.host.remoteRecord?.id}/upload-design-file"
                accept=".png,.jpg,.jpeg"
                name="reviewCollectorLogo"
            ></qrcg-file-input>
        `}renderRectFrameTextBottomAdvancedShapeFields(){return this.renderRectFrameTextTopAdvancedShapeFields()}renderRectFrameTextTopAdvancedShapeFields(){return x`
            <label>${t$3`Drop shadow`}</label>

            <qrcg-checkbox name="advancedShapeDropShadow">
                ${this.host.design.advancedShapeDropShadow?t$3`Enabled`:t$3`Disabled`}
            </qrcg-checkbox>
        `}renderCouponAdvancedShapeFields(){return x`
            <label>${t$3`Left color`}</label>

            <qrcg-color-picker name="couponLeftColor"></qrcg-color-picker>

            <label>${t$3`Right color`}</label>

            <qrcg-color-picker name="couponRightColor"></qrcg-color-picker>
        `}renderFourCornersTextBottomAdvancedShapeFields(){return this.renderFourCornersTextTopAdvancedShapeFields()}renderFourCornersTextTopAdvancedShapeFields(){return x`
            <label>${t$3`Frame color`}</label>

            <qrcg-color-picker
                name="advancedShapeFrameColor"
            ></qrcg-color-picker>
        `}renderTextInputsForField(w=""){const q=isEmpty(w)?t$3`Text`:t$3(titleCase(w));return x`
            <label>${q}</label>
            <qrcg-sticker-text-input
                name=${w}
                .designData=${this.host.design}
                ?show-text-background-color-input=${this.host.design.advancedShape!="coupon"}
            ></qrcg-sticker-text-input>
        `}renderTextInputs(){if(!["review-collector","pincode-protected","qrcode-details","qrcode-with-logo-and-slug"].find(q=>q==this.host.design.advancedShape))return this.host.design.advancedShape==="coupon"?x`
                ${this.renderTextInputsForField("coupon_text_line_1")}
                ${this.renderTextInputsForField("coupon_text_line_2")}
                ${this.renderTextInputsForField("coupon_text_line_3")}
            `:this.renderTextInputsForField("")}renderFields(){const w=this.host.design.advancedShape;if(!(!w||w=="none"))return x`
            <!-- -->
            ${this.renderAdvancedShapeFields()}
            <!-- -->
            ${this.renderTextInputs()}
        `}render(){return x`
            <label>${t$3`Sticker`}</label>
            <qrcg-img-selector
                name="advancedShape"
                .options=${advancedShapes.map(w=>({value:w.value,src:`${w.value}.png`,title:w.name,disabled:!this.advancedShapeIsEnabled(w)}))}
                narrow-padding
                base="${url("assets/images/advanced-shapes")}"
            ></qrcg-img-selector>

            ${this.renderFields()}
        `}}class QuickQRArtModel{static get ALL_WORKFLOWS(){const w=q=>q.replace(/(\d)(\w\w+)/,(D,Q,O)=>`${Q} ${ucfirst(O)}`);return["1.1","2","3a","3b","4","4s","4real","4niji","4dream","5","5s"].map(q=>({name:t$3`Version ${w(q)}`,value:q}))}getConfigWorkflows(){const w=Config.get("quickqr_art.available_workflows");return isArray$1(w)?w:[]}getAvailableWorkflows(){return isEmpty(this.getConfigWorkflows())?QuickQRArtModel.ALL_WORKFLOWS:QuickQRArtModel.ALL_WORKFLOWS.filter(w=>this.getConfigWorkflows().find(q=>w.value==q))}}class AiFields{quickqrart=new QuickQRArtModel;constructor(w){this.host=w,w.addController(this),this.updateTimeout=null,this.prediction={status:""},this.oldPrediction=null,this.requestPending=!1}hostUpdated(){}isPredictionLoading(){return this.requestPending||this.prediction.status==="queued"}requestUpdate(){this.host.requestUpdate()}onFetchSuccess(){clearInterval(this.pollPredictionUpdatesInterval),this.host.updatePreview(),showToast(t$3`AI image generated successfully`)}async fetchPrediction(){this.requestPending=!0,this.requestUpdate();try{const{response:w}=await get("ai/fetch/"+this.host.remoteRecord.id),q=await w.json();this.prediction=q,this.requestUpdate(),this.prediction.status==="executed"&&this.onFetchSuccess()}catch(w){console.error(w)}this.requestPending=!1,this.requestUpdate()}collectFields(){let w=this.host.shadowRoot.querySelectorAll('[name*="ai_"]');return w=Array.from(w),w.reduce((q,D)=>(q[D.getAttribute("name")]=D.value,q),{})}pollPredictionUpdates(){clearInterval(this.pollPredictionUpdatesInterval),this.pollPredictionUpdatesInterval=setInterval(()=>{this.fetchPrediction()},5e3)}onGenerateClick=async()=>{const w=this.collectFields();this.requestPending=!0,this.requestUpdate();try{const{response:q}=await post("ai/generate/"+this.host.remoteRecord.id,w),D=await q.json();this.prediction=D,this.host.requestUpdate(),showToast(t$3`Generating AI Image, please wait`),this.pollPredictionUpdates()}catch(q){console.error(q)}this.requestPending=!1,this.requestUpdate()};render(){if(this.host.isAiDesign())return x`
            <label></label>

            <qrcg-icon
                @click=${this.onCloseClick}
                mdi-icon=${mdiCloseCircle}
                style="margin-left: auto; width: 2rem; height: 2rem; color: var(--primary-0); cursor: pointer"
            ></qrcg-icon>

            <label>${t$3`Prompt`}</label>

            <qrcg-textarea
                name="ai_prompt"
                placeholder=${t$3`Write your imagination`}
                value=${this.host.design.ai_prompt}
            >
            </qrcg-textarea>

            <label> ${t$3`QR Strength`} </label>

            <qrcg-range-input
                name="ai_strength"
                min="0.1"
                max="3"
                step="0.1"
                value=${this.host.design.ai_strength}
                show-value
            >
            </qrcg-range-input>

            <label> ${t$3`Steps`} </label>

            <qrcg-range-input
                name="ai_steps"
                min="10"
                max="20"
                step="1"
                value=${this.host.design.ai_steps}
                show-value
            >
            </qrcg-range-input>

            <label> ${t$3`AI Model`} </label>

            <qrcg-balloon-selector
                name="ai_model"
                .options=${this.quickqrart.getAvailableWorkflows()}
            >
            </qrcg-balloon-selector>

            <label></label>

            <qrcg-button
                @click=${this.onGenerateClick}
                ?loading=${this.isPredictionLoading()}
                ?disabled=${this.isPredictionLoading()}
            >
                ${t$3`Generate Now`}
            </qrcg-button>
        `}renderWidgetOpener(){if(!this.host.droplet.isSmall()&&window.QRCG_AI_IS_ENABLED)return x`
            <qrcg-button
                transparent
                class="ai-button"
                @click=${this.onAIButtonClick}
            >
                <qrcg-icon mdi-icon=${mdiFlash}></qrcg-icon>
                ${t$3`Create With AI`}
            </qrcg-button>
        `}onAIButtonClick=()=>{this.host.updateDesignObject({...this.host.design,is_ai:!0})};onCloseClick=()=>{this.host.updateDesignObject({...this.host.design,is_ai:!1})}}const style$23=":host{display:inline-flex;padding:.5rem;background-color:#fff;cursor:pointer;border-radius:.25rem;border:1px solid transparent}:host qrcg-icon{width:1.5rem;height:1.5rem}:host(:hover){border-color:#000}";class BoundQrcodeDesigner extends observeState(i$1){static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-qrcode-designer
                .remoteRecord=${state$1.remoteRecord}
                .design=${state$1.design}
                .type=${state$1.type}
                .data=${state$1.data}
                enable-large-preview
                show-designer-toggler
            ></qrcg-qrcode-designer>
        `}}window.defineCustomElement("qrcg-bound-qrcode-designer",BoundQrcodeDesigner);class BaseTypeDesigner extends BaseComponent{static styleSheets=[...super.styleSheets];static EVENT_SET_ACTIVE_DESIGNER="type-designer::set-active-designer";static DESIGNER_QRCODE_DESIGNER="qrcode-designer";static DESIGNER_WEBPAGE_DESIGNER="webpage";static get properties(){return{...super.properties}}get designer(){return BaseTypeDesigner.designer}set designer(w){BaseTypeDesigner.designer=w,this.requestUpdate()}constructor(){super(),this.designer=BaseTypeDesigner.DESIGNER_WEBPAGE_DESIGNER}connectedCallback(){super.connectedCallback(),document.addEventListener(BaseTypeDesigner.EVENT_SET_ACTIVE_DESIGNER,this.onSetActiveDesigner)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener(BaseTypeDesigner.EVENT_SET_ACTIVE_DESIGNER,this.onSetActiveDesigner)}onSetActiveDesigner=w=>{this.designer=w.detail.designer};webPageDesignerElementName(){}renderWebPageDesignerElement(){if(this.designer!=BaseTypeDesigner.DESIGNER_WEBPAGE_DESIGNER)return;const w=this.webPageDesignerElementName();return u$3`${s$3(`<${w}></${w}>`)}`}renderQRCodeDesigner(){if(this.designer==BaseTypeDesigner.DESIGNER_QRCODE_DESIGNER)return u$3` <qrcg-bound-qrcode-designer></qrcg-bound-qrcode-designer> `}render(){return u$3`
            ${this.renderWebPageDesignerElement()}
            <!--  -->
            ${this.renderQRCodeDesigner()}
        `}}class DesignerToggler extends BaseComponent{static tag="qrcg-designer-toggler";static styleSheets=[...super.styleSheets,style$23];connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.syncTitle()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick(){BaseTypeDesigner.designer===BaseTypeDesigner.DESIGNER_QRCODE_DESIGNER?this.setDesignerType(BaseTypeDesigner.DESIGNER_WEBPAGE_DESIGNER):this.setDesignerType(BaseTypeDesigner.DESIGNER_QRCODE_DESIGNER)}setDesignerType(w){document.dispatchEvent(new CustomEvent(BaseTypeDesigner.EVENT_SET_ACTIVE_DESIGNER,{detail:{designer:w}}))}syncTitle(){BaseTypeDesigner.designer===BaseTypeDesigner.DESIGNER_QRCODE_DESIGNER?this.title=t$3`Design Web Page`:this.title=t$3`Design QR Code`}resolveIcon(){return BaseTypeDesigner.designer===BaseTypeDesigner.DESIGNER_QRCODE_DESIGNER?mdiWeb:mdiQrcode}render(){return x` <qrcg-icon mdi-icon=${this.resolveIcon()}></qrcg-icon> `}}DesignerToggler.register();const style$22=":host{display:block;position:relative}.row{display:flex;justify-content:flex-start;flex-direction:column}.logo-upgrade-message{color:var(--danger)}@media(min-width:70rem){.row{flex-direction:row}}qrcg-qrcode-image{width:15rem;margin:auto;border:solid .5rem var(--gray-0)}.preview-image{order:1;width:100%;margin:auto;height:fit-content;margin-bottom:1rem;padding-bottom:1rem}@media(min-width:70rem){.preview-image{margin:0;width:25%;order:3;max-width:unset;box-sizing:border-box}qrcg-qrcode-image{width:unset}}.input-grid{display:grid;align-items:center;box-sizing:border-box;padding:0 .5rem;grid-gap:1rem;order:2}qrcg-range-input{max-width:30rem}@media(min-width:70rem){.input-grid{grid-template-columns:12rem 1fr;width:75%;padding:0;padding-right:1rem}}label{font-weight:700;user-select:none;-webkit-user-select:none}.warning{background-color:var(--warning-0);font-size:.8rem;margin-top:1rem;padding:.5rem;line-height:1.4;color:#000}[name=shape]::part(image){padding:.25rem}[name=text]{max-width:20rem}:host(.color-customization-disabled) qrcg-color-picker,:host(.color-customization-disabled) [name=fillType],:host(.color-customization-disabled) [name=backgroundEnabled]{pointer-events:none;opacity:.5}.ai-button{margin-top:1rem}qrcg-designer-toggler{background-color:var(--gray-0);margin-inline-start:auto}.designer-toggler-container{margin-bottom:.5rem;display:flex;justify-content:space-between;align-items:center}qrcg-checkbox{width:max-content}";class SlugTextRenderer extends BaseSvgProcessor{async getSlug(){return(await QRCodeRedirect.withQRCodeId(this.host.getQrCodeRemoteRecord().id).get()).slug}async renderTextField(w,q){const D=q.querySelector("#_text_placeholder");if(!D)return;const Q=G=>this.host.design[G],U=await new CanvasTextRenderer().render({text:w,color:Q("textColor"),fontFamily:Q("fontFamily"),fontVariant:Q("fontVariant")});D.setAttribute("xlink:href",U)}getTextFields(){return Object.keys(this.host.design).filter(q=>q.match(/.*text$/)).map(q=>q.replace(/text$/,""))}shouldProcess(){if(!this.host?.design)return!1;const w=this.host?.design?.advancedShape;return["qrcode-details","qrcode-with-logo-and-slug"].filter(D=>D===w).length>0?Config.get("preview.canvasTextRender")!="disabled":!1}async process(w){const q=await this.getSlug();this.renderTextField(q,w)}}class QRCGQRCodeDesigner extends BaseComponent{urlBuilder=new QRCodePreviewUrlBuilder(this);canvasTextRenderer=new CanvasTextRenderer;base64TextRenderer=new Base64TextRenderer(this);slugTextRenderer=new SlugTextRenderer(this);_customStyleInjector=new CustomStyleInjector(this);fillTypeFields=new FillTypeFields(this);backgroundFields=new BackgroundFields(this);moduleFields=new ModuleFields(this);outlinedShapesFields=new OutlinedShapesFields(this);logoFields=new LogoFields(this);advancedShapes=new AdvancedShapeFields(this);aiFields=new AiFields(this);droplet=new Droplet;static styleSheets=[...super.styleSheets,style$22];static validateShapeWith(w){this.shapeValidator=w}static validateAdvancedShapeWith(w){this.advancedShapeValidator=w}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this._onInput),this.updatePreview(),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResize),window.scrollTo({top:0,behavior:"auto"}),document.addEventListener("qrcg-qrcode-link:change",this.onQrCodeLinkChange),this.addEventListener("on-batch-input",this._onBatchInput),QRCodeRedirect.withQRCodeId(this.remoteRecord?.id).get().then(()=>{this.requestUpdate()})}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this._onInput),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),document.removeEventListener("qrcg-qrcode-link:change",this.onQrCodeLinkChange),this.removeEventListener("on-batch-input",this._onBatchInput)}static get properties(){return{previewUrl:{type:String},data:{},type:{},design:{},remoteRecord:{},stickTopRem:{attribute:"stick-top-rem"},enableLargePreview:{type:Boolean,attribute:"enable-large-preview"},mode:{}}}constructor(){super(),this.stickTopRem=5}onQrCodeLinkChange=()=>{this.updatePreview()};getQrCodeData(){return this.data}getQrCodeType(){return this.type}getQrCodeColor(){return this.design.codeColor}getQrCodeDesign(){return this.design}getQrCodeRemoteRecord(){return this.remoteRecord}onResize=()=>{this.adjustPreviewImage()};adjustPreviewImage(){const w=this.shadowRoot.querySelector(".preview-image"),q=matchMedia("(min-width: 70rem)");this.previewImageRect||(this.previewImageRect=w.getBoundingClientRect());const D=remToPx(this.stickTopRem),Q=this.previewImageRect.top-D;window.scrollY>Q&&q.matches&&this.scrollingInsideDesigner()?(w.style.position="absolute",w.style.zIndex="100000",w.style.transition="top ease .1s",w.style.top=`${window.scrollY-this.previewImageRect.top+D}px`,ConfigHelper.isRtl()?w.style.left="0px":w.style.right="0px",w.style.backgroundColor="white",w.style.width=this.imageWidth+"px"):(w.style="",this.imageWidth=w.clientWidth),q.matches||this.adjustPreviewImageOnMobile()}adjustPreviewImageOnMobile(){const w=this.shadowRoot.querySelector(".preview-image");this.previewImageRect||(this.previewImageRect=w.getBoundingClientRect());const q=QRCGDashboardHeader.isRendered?remToPx(getComputedStyle(this).getPropertyValue("--dashboard-header-height").replace("rem","")):0,D=this.previewImageRect.top-remToPx(1)-q;window.scrollY>D&&this.scrollingInsideDesignerMobile()?(w.style.position="fixed",w.style.zIndex=1e5,w.style.paddingTop="1rem",w.style.top=`${q}px`,w.style.left="2rem",QRCGDashboardLayout.sidebarClosed||(w.style.left="17rem"),w.style.right="2rem",w.style.margin="",w.style.width="initial",w.style.backgroundColor="white",this.setImagePlaceholderVisible(!0)):this.setImagePlaceholderVisible(!1)}scrollbarWidth(){return getComputedStyle(document.body,":-webkit-scrollbar")?.display!=="none"?getScrollbarWidth():0}scrollingInsideDesignerMobile(){let q=this.shadowRoot.querySelector(".preview-image").getBoundingClientRect().height;return this.getBoundingClientRect().bottom>q*2}scrollingInsideDesigner(){let q=this.shadowRoot.querySelector(".preview-image").getBoundingClientRect().height;return this.getBoundingClientRect().bottom>q}setImagePlaceholderVisible(w){const q=this.shadowRoot.querySelector(".preview-image");if(!this.imagePlaceholder){const D=getComputedStyle(q);this.imagePlaceholder=document.createElement("div"),this.imagePlaceholder.style.height=D.height,this.imagePlaceholder.style.margin=D.margin,this.imagePlaceholder.style.padding=D.padding,q.parentNode.insertBefore(this.imagePlaceholder,q)}w?this.imagePlaceholder.style.display="block":this.imagePlaceholder.style.display="none"}onScroll=()=>{this.adjustPreviewImage()};updated(){this.renderRoot.querySelectorAll("[name]").forEach(w=>w.value=this.design[w.name])}_onBatchInput=w=>{const q={...this.design,...w.detail.value};this.updateDesignObject(q),setTimeout(()=>{this.updatePreview()},10)};_onInput=w=>{if(!isEmpty(w.detail.name)&&w.detail.name!=="qrcg-qrcode-designer"){const q={...this.design,[w.detail.name]:w.detail.value};this.updateDesignObject(q),w.detail.name==="advancedShape"&&this.dispatchEvent(new CustomEvent("advancedShapeChanged",{detail:{originalEvent:w}}))}setTimeout(()=>{this.updatePreview()},10)};updateDesignObject(w){this.canvasTextRenderer.render({text:w.text,fontFamily:w.fontFamily,fontVariant:w.fontVariant,color:w.textColor}),this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:"qrcg-qrcode-designer",value:w}}))}updatePreview(){const w=()=>{this.urlBuilder.canBuildURL()?this.previewUrl=this.urlBuilder.buildURL():this.previewUrl=null};this.previewIsRendered?(clearTimeout(this.previewUpdateHandle),this.previewUpdateHandle=setTimeout(w,800)):(this.previewIsRendered=!0,w())}isAiDesign(){return this.design.is_ai}renderSizeWarning(){const w=this.design.logoType==="preset"&&this.design.logoUrl||this.design.logoType==="custom"&&this.remoteRecord?.logo,q=this.design.logoScale>.3&&this.design.shape==="none"||this.design.logoScale>.5&&this.design.shape!=="none";return w&&q?x` <div class="warning">
                  ${t$3`QR Code may not be scannable due to large logo size, test it before you proceed.`}
              </div>`:""}renderShapeWraning(){const q="square,triangle-end,roundness".split(",").indexOf(this.design.module)==-1,D=this.design.finder!="default"||this.design.finderDot!="default";return q&&D?x` <div class="warning">
                  ${t$3`QR Code may not be scannable due to complex shapes, test it before you proceed.`}
              </div>`:""}getPreviewDblClickUrl(){const w=document.createElement("a");w.href=this.previewUrl;const q=new URLSearchParams(w.search);return q.delete("renderText"),`${w.href.split("?")[0]}?${q.toString()}`}renderTogglerIfNeeded(){if(this.hasAttribute("show-designer-toggler"))return x`
            <div class="designer-toggler-container">
                <div>${t$3`Preview`}</div>
                ${DesignerToggler.renderSelf()}
            </div>
        `}render(){return x`
            <div class="container">
                <qrcg-color-customization-disabled-message></qrcg-color-customization-disabled-message>

                <div class="row">
                    <div class="input-grid">
                        ${this.aiFields.render()}
                        ${this.fillTypeFields.render()}
                        ${this.backgroundFields.render()}
                        ${this.moduleFields.render()}
                        ${this.outlinedShapesFields.render()}
                        ${this.logoFields.render()}
                        ${this.advancedShapes.render()}
                    </div>

                    <div class="preview-image">
                        ${this.renderTogglerIfNeeded()}

                        <qrcg-qrcode-image
                            .url=${this.previewUrl}
                            ?preview-on-dbl-click=${this.enableLargePreview}
                            dbl-click-url=${this.getPreviewDblClickUrl()}
                            render-svg-tag
                        ></qrcg-qrcode-image>

                        ${this.renderSizeWarning()}

                        <!-- -->
                        ${this.renderShapeWraning()}

                        <!-- -->
                        ${this.aiFields.renderWidgetOpener()}

                        <slot name="below-preview-image"></slot>
                    </div>
                </div>
            </div>
        `}}window.defineCustomElement("qrcg-qrcode-designer",QRCGQRCodeDesigner);const style$21=":host{display:flex;flex-direction:column;position:relative}.title{font-size:.8rem;margin-bottom:.5rem;font-weight:700;letter-spacing:1px;user-select:none;-webkit-user-select:none}input{font-size:1rem;padding:.8rem;border:0;box-shadow:var(--qrcg-input-box-shadow, .5rem .5rem 1rem rgba(0, 0, 0, .05));border-radius:.5rem;-webkit-tap-highlight-color:transparent;margin-bottom:.5rem;background-color:#fff;transition:all .5s ease;font-family:var(--qrcg-font-family);color:var(--text-color, black)}input:focus{box-shadow:var(--qrcg-input-box-shadow-focus, .5rem .5rem 1rem rgba(0, 0, 0, .1))}:host(.dir-rtl) input{font-family:var(--qrcg-rtl-font-family)}input:focus{border-color:var(--gray-2);outline:0}input::placeholder{color:var(--placeholder-color, var(--gray-1));font-weight:var(--placeholder-font-weight, bold);font-style:var(--input-placeholder-font-style, italic)}.instructions{font-size:.8rem;padding:.5rem;background-color:var(--gray-0);margin-bottom:.5rem;line-height:1.7}:host(:not([has-instructions])) .instructions{display:none}qrcg-input-errors{bottom:.25rem}[disabled]{background-color:var(--gray-0);color:var(--gray-2)}";class BaseInput extends BaseComponent{#e=new DirectionAwareController(this);static styleSheets=[...super.styleSheets,style$21];static get properties(){return{type:{},value:{},placeholder:{},name:{},autofocus:{type:Boolean},errors:{type:Array},disabled:{type:Boolean,reflect:!0},hasInstructions:{type:Boolean,reflect:!0,attribute:"has-instructions"},debounce:{type:Boolean},debounceDelay:{attribute:"debounce-delay"},pattern:{},maxlength:{}}}constructor(){super(),this.errors=[],this.fireOnInput=this._fireOnInput,this.debounceDelay=1e3}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onBaseInputClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onBaseInputClick)}setValue(w){this.value=w;const q=this.shadowRoot.querySelector("input");q&&(q.value=w)}setHasLabel(w){w?this.setAttribute("has-label","true"):this.removeAttribute("has-label")}onBaseInputClick(){}firstUpdated(){this._autoFocus(),this.setHasInstructions()}updated(w){w.has("debounce")&&(this.debounce?this.fireOnInput=debounce(this._fireOnInput.bind(this),this.debounceDelay):this.fireOnInput=this._fireOnInput),w.has("value")&&this.syncValue()}syncValue(){}async setHasInstructions(){const w=this.renderRoot.querySelector("slot[name=instructions]");if(!w)return;Array.from(w.assignedNodes({flatten:!0})).reduce((Q,O)=>Q+O.textContent,"").length>0?this.hasInstructions=!0:this.hasInstructions=!1}_autoFocus(){this.autofocus&&this.shadowRoot.querySelector("input")?.focus()}_input(w){const q=w.target.value;this.value=q,this.fireOnInput()}_keypress(w){this.maxLengthReached()&&(w.preventDefault(),w.stopPropagation()),w.key==="Enter"&&(this.blur(),this.dispatchEvent(new CustomEvent("on-enter-press",{bubbles:!0,composed:!0})))}maxLengthReached(){const w=this.value;if(!this.maxlength)return!1;if(w&&w.length>=this.maxlength)return!0}_fireOnInput(){this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{value:this.value,name:this.name}}))}renderInput(){return x`
            <input
                id="input-${this.name}"
                type=${this.type}
                @input=${this._input}
                @keypress=${this._keypress}
                placeholder=${this.placeholder}
                .value=${this.value||""}
                part="input"
                .disabled=${this.disabled}
                pattern=${this.pattern}
            />
        `}renderLabel(){return this.innerHTML.trim().length==0?this.setHasLabel(!1):this.setHasLabel(!0),x`
            <label class="title" for="input-${this.name}" part="label">
                <slot></slot>
            </label>
        `}renderInstructions(){return x`
            <div class="instructions">
                <slot name="instructions"></slot>
            </div>
        `}render(){return x`
            ${this.renderLabel()}
            <!-- New line -->
            ${this.renderInstructions()}
            <!-- New line -->

            <div class="input-actions">
                <slot name="input-actions"></slot>
            </div>

            ${this.renderInput()}
            <!-- New line -->
            <qrcg-input-errors .errors=${this.errors}></qrcg-input-errors>
        `}}const style$20=":host([prefix]) input{padding-left:2.8rem}.prefix{position:absolute;background-color:var(--gray-1);color:var(--gray-2);left:0rem;border-top-left-radius:.5rem;border-bottom-left-radius:.5rem;top:.5rem;bottom:.5rem;display:flex;align-items:center;justify-content:center;font-size:.8rem;padding:0 .8rem}:host([focused]) .prefix{background-color:var(--gray-2);color:#fff}:host(:hover) .password-toggle{color:var(--dark)}.password-toggle{position:absolute;inset-inline-end:0;top:50%;color:var(--gray-2);padding:1rem;cursor:pointer;transform:translateY(-50%)}.password-toggle.show .hide{display:none}.password-toggle:not(.show) .show{display:none}:host([has-label]) .password-toggle{top:calc(50% + .5rem)}:host(.elegant){padding-top:1rem;margin-bottom:.5rem}:host(.elegant) label{position:absolute;margin-bottom:0;transition:all .5s ease;pointer-events:none}:host(.elegant) input{box-shadow:none;border-bottom:2px solid var(--gray-1);border-radius:0;padding:.6rem 0}:host(.elegant) input::placeholder{font-weight:lighter;font-size:0}:host(.elegant) input:focus{border-bottom-color:#000}:host(.elegant.has-value) label,:host(.elegant[focused]) label{transform:scale(1) translateY(-12px) translate(0)}:host(.elegant:not(.has-value):not([focused])) label{font-weight:lighter;transform:scale(1.3) translateY(8px) translate(10px)}";class QRCGInput extends BaseInput{formInputController=new FormInputController(this,FormInputController.MODE_PLAIN);customStyleInjector=new CustomStyleInjector(this);static tag="qrcg-input";static styleSheets=[...super.styleSheets,style$20];static get properties(){return{...super.properties,prefix:{reflect:!0},focused:{reflect:!0,type:Boolean},min:{},max:{},step:{}}}renderPrefix(){if(this.input&&this.prefix)return x`
                <span class="prefix" style=${`top: ${this.input?.offsetTop}px`}>
                    ${this.prefix}
                </span>
            `}firstUpdated(){super.firstUpdated(),this.bindFocus(),this.requestUpdate(),this.bindElegantInputClass()}bindElegantInputClass(){parentMatches(this,".elegant-input")&&this.classList.add("elegant")}updated(w){this.bindInputNodeAttributes(w),isNotEmpty(this.value)?this.classList.add("has-value"):this.classList.remove("has-value")}bindInputNodeAttributes(w){if(!this.input)return;["min","max","step"].forEach(D=>{w.has(D)&&this.input.setAttribute(D,this[D])})}bindFocus(){this.input.addEventListener("focus",this.onFocus),this.input.addEventListener("blur",this.onBlur)}detachFocus(){this.input?.removeEventListener("focus",this.onFocus),this.input?.removeEventListener("blur",this.onBlur)}onBlur=()=>{this.focused=!1};onFocus=()=>{this.focused=!0};onBaseInputClick(w){super.onBaseInputClick(w),mapEventDelegate(w,{".password-toggle":this.onPasswordToggleClick})}setInputType(w){this.$("input").type=w}onPasswordToggleClick=(w,q)=>{q.classList.toggle("show"),q.classList.contains("show")?this.setInputType("password"):this.setInputType("text")};get input(){return this.shadowRoot.querySelector("input")}async focus(){await this.updateComplete,this.input.focus()}disconnectedCallback(){super.disconnectedCallback(),this.detachFocus()}renderPasswordToggle(){if(this.type=="password")return x`
            <div class="password-toggle show">
                <qrcg-icon mdi-icon=${mdiEye} class="show"></qrcg-icon>
                <qrcg-icon mdi-icon=${mdiEyeOff} class="hide"></qrcg-icon>
            </div>
        `}render(){return[super.render(),this.renderPrefix(),this.renderPasswordToggle()]}}QRCGInput.register();class QRCGForm extends i$1{static get styles(){return i$3`
            :host {
                display: block;
                box-sizing: border-box;
            }
        `}constructor(){super()}connectedCallback(){super.connectedCallback(),this.addEventListener("keypress",this._onKeypress)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keypress",this._onKeypress)}_onKeypress=w=>{w.composedPath()[0].tagName!=="TEXTAREA"&&w.key==="Enter"&&this.submit()};submit(){this.renderRoot.querySelector("form").dispatchEvent(new Event("submit",{cancelable:!0}))}_onSubmit(w){w.preventDefault(),this.dispatchEvent(new CustomEvent("on-submit",{bubbles:!0,composed:!0}))}render(){return x`
            <form part="form" @submit=${this._onSubmit}>
                <slot></slot>
            </form>
        `}}window.defineCustomElement("qrcg-form",QRCGForm);class QRCodeModel{is_selected=!1;constructor(w){for(const q in w)if(Object.hasOwnProperty.call(w,q)){const D=w[q];Object.defineProperty(this,q,{value:D,enumerable:!0})}this.manager||(this.manager=new QRCodeTypeManager$1)}getFileUrl(){const w=new Date(this.updated_at).getTime();return`${this.svg_url}?v=${w}`}getEditLink(){return`/dashboard/qrcodes/edit/${this.id}`}getStatsLink(){return`/dashboard/qrcodes/stats/${this.id}`}getRedirectDestination(w=!0){const q=this.redirect?.route;return q?w?`${q}?preview=true`:q:null}getDate(w){return new Date(this[w]).toLocaleDateString()}createdAt(){return this.getDate("created_at")}updatedAt(){return this.getDate("updated_at")}isDynamic(){return this.manager.isDynamic(this.type)}getName(){return this.data?isEmpty(this.name)?t$3("no name"):this.name:t$3("no data")}getLink(){return""}}class QRCGFormController{host;bindInputs;constructor(w,q=!0){this.host=w,w.addController(this),this.bindInputs=q}async hostConnected(){await new Promise(w=>setTimeout(w,0)),this.host&&(this.host.addEventListener("on-input",this.onInput),this.host.renderRoot.querySelector("qrcg-button[type=submit]")?.addEventListener("click",this.onButtonClick),this.host.renderRoot.querySelector("qrcg-form")?.addEventListener("on-submit",this.onFormSubmit))}hostDisconnected(){this.host.removeEventListener("on-input",this.onInput),this.host.renderRoot.querySelector("qrcg-button[type=submit]")?.removeEventListener("click",this.onButtonClick),this.host.renderRoot.querySelector("qrcg-form")?.removeEventListener("on-submit",this.onFormSubmit),this.host=null}onInput=w=>{this.bindInputs&&this.host&&(this.host.data={...this.host.data,[w.detail.name]:w.detail.value})};onButtonClick=()=>{this.host.renderRoot.querySelector("qrcg-form").submit()};onFormSubmit=w=>{w.stopImmediatePropagation(),isFunction(this.host.submitForm)&&this.host.submitForm(),this.fireSubmit()};async hostUpdate(){if(await new Promise(q=>setTimeout(q,0)),!this.host)return;const w=this.host.renderRoot.querySelectorAll("[name]");isEmpty(this.host.data)||w.forEach(q=>{isFunction(q.shouldSyncValue)&&!q.shouldSyncValue()||(q.value=this.host.data[q.name])})}fireSubmit(){this.host&&this.host.dispatchEvent(new CustomEvent("on-submit",{bubbles:!0,composed:!0,detail:{data:this.host.data}}))}}class SvgPngConverter{#e;constructor(w,q){this.svgUrl=w,this.name=q}withSvgContent(w){return this.#e=w,this}async#t(){this.#e||(this.response=await fetch(this.svgUrl))}async#r(){return this.#e?this.#e:this.response.clone().text()}async renderSvgImage(){await this.#t();const w=URL.createObjectURL(await this.getResponseBlob());return new Promise(q=>{this.image=document.createElement("img"),this.image.setAttribute("crossOrigin","anonymous"),this.image.onload=()=>{q(),this.image.onload=null},this.image.style="position: fixed; top: -999999px; max-width: initial !important;",document.body.appendChild(this.image),this.image.src=w})}async getViewboxSize(){const D=(await this.#r()).substring(0,500).match(/viewBox="(.*?)"/)[1].split(" ").map(U=>+U),Q=D[2],O=D[3];return[Q,O]}async getResponseBlob(){const w="image/svg+xml";let q=await this.#r();const D=700;let Q=q.substring(0,D),O=Q.match(/<svg.*?>/)[0];const[U,G]=await this.getViewboxSize();return O.match("width")||(Q=Q.replace("<svg",`<svg width="${U}px" height="${G}px"`)),q=Q+q.substring(D),new Blob([q],{type:w})}getPngBlob(w=0,q=0){return new Promise(D=>{const Q=document.createElement("canvas");this.getViewboxSize().then(([O,U])=>{Q.width=w===0?O:w,Q.height=q===0?U:q*U/O;const G=Q.getContext("2d");G.globalAlpha=100,G.drawImage(this.image,0,0,Q.width,Q.height),Q.toBlob(W=>{URL.revokeObjectURL(this.image.src),this.image.remove(),D(W),Q.remove(),this.image=null})})})}downloadBlob(w){const q=document.createElement("a");q.download=this.name,q.href=URL.createObjectURL(w),document.body.appendChild(q),q.click(),setTimeout(()=>{URL.revokeObjectURL(q.href),q.remove()},50)}async downloadPng(w=0,q=0){await this.renderSvgImage();const D=await this.getPngBlob(w,q);this.downloadBlob(D)}}class QRCodeImageManager{#e;#t=[];constructor(){}withUrl(w){return this.#e=w,this}#r(){return this.#e}async#s(w){const q=URL.createObjectURL(w);return this.#t.push(q),await this.preloadImage(q),q}#i(){this.#t.forEach(w=>URL.revokeObjectURL(w))}async#n({decodeBase64:w}={}){const{response:q}=await get(this.#r()),D=await q.json();return w?window.atob(D.content):D.content}async getSvgBase64String(){return this.#n({decodeBase64:!1})}async getSvgString(){return this.#n({decodeBase64:!0})}async getSvgObjectUrl(){const w=await this.getSvgString();var q=new Blob([w],{type:"image/svg+xml;charset=utf-8"});return this.#s(q)}async getPngObjectUrl({width:w=300,height:q=300}){const D=await this.getSvgObjectUrl(),Q=new SvgPngConverter(D);await Q.renderSvgImage();const O=await Q.getPngBlob(w,q);return this.#s(O)}async preloadImage(w){return new Promise(q=>{const D=new Image;D.onload=(()=>{const Q=D;return()=>{setTimeout(()=>{Q.remove(),q()},50)}})(),D.src=w})}disconnect(){this.#i()}}class QrcgDownloadQrcodeModal extends QrcgModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{size:{}}}constructor(){super(),this.size=512}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput)}onInput(w){w.detail.name==="size"&&(this.size=w.detail.value)}resolvedData(){return this.size}renderSizeSelector(){return x`
            <qrcg-balloon-selector
                name="size"
                .value=${this.size}
                .options=${[{name:"512px",value:512},{name:"1024px",value:1024},{name:"2048px",value:2048},{name:"4k",value:4096}]}
            >
                ${t$3`Select Size`}
            </qrcg-balloon-selector>
        `}renderTitle(){return t$3`File Size`}renderBody(){return x` ${this.renderSizeSelector()} `}}window.defineCustomElement("qrcg-download-qrcode-modal",QrcgDownloadQrcodeModal);const style$1$=":host{display:block}.buttons{display:grid;grid-gap:1rem}qrcg-button{width:100%}qrcg-button::part(button){font-size:2rem}.button-content{display:flex;align-items:center;justify-content:center}.svg-note{color:var(--gray-2);font-size:.8rem;padding:.5rem;line-height:1.6}qrcg-icon{margin-right:1rem;width:3rem;height:3rem}h2{text-align:center;color:var(--gray-2);font-size:1.5rem;font-weight:300}qrcg-form{max-width:400px;margin:auto;text-align:center}.name-label{color:var(--gray-2);font-weight:700}@media(min-width:900px){qrcg-button::part(button){padding:2rem 0;font-size:3rem}.buttons{max-width:60%;margin:auto;grid-template-columns:repeat(2,1fr)}h2{font-size:3rem}}.add-screenshot{color:var(--primary-0);margin-top:1rem;cursor:pointer}.add-screenshot:hover{text-decoration:underline}";class QRCodeScreenshotModal extends QrcgModal{static tag="qrcg-qrcode-screenshot-modal";static get properties(){return{...super.properties,qrcode:{type:Object}}}constructor(){super(),this.qrcode=null}firstUpdated(){this.$("[name=qrcode_screenshot_id").value=this.qrcode.qrcode_screenshot_id}async affiramtivePromise(){try{await put("qrcodes/"+this.qrcode.id,{...this.qrcode,qrcode_screenshot_id:this.$("[name=qrcode_screenshot_id]").value}),showToast(t$3`Screenshot saved successfully`)}catch(w){console.error(w),showToast(t$3`Error saving screenshot`)}}renderTitle(){return t$3`Screenshot`}renderBody(){return x`
            <qrcg-file-input name="qrcode_screenshot_id">
                ${t$3`Screenshot`}
            </qrcg-file-input>
        `}}QRCodeScreenshotModal.register();class QRCGDownloadQRCode extends observeState(BaseComponent){formController=new QRCGFormController(this);static styleSheets=[...super.styleSheets,style$1$];static get properties(){return{data:{}}}static async downloadSVG(w){const{response:q}=await get(`qrcodes/${w.id}/compatible-svg`),{svg:D}=await q.json();var Q=D,O=new Blob([Q],{type:"image/svg+xml;charset=utf-8"}),U=URL.createObjectURL(O),G=document.createElement("a");G.href=U;const W=new QRCGDownloadQRCode().makeDownloadName("svg",w.name);G.download=W,document.body.appendChild(G),G.click(),document.body.removeChild(G)}constructor(){super(),this.data={},this.fireSave=this.fireSave.bind(this)}connectedCallback(){super.connectedCallback(),this.data={...state$1.remoteRecord},this.fireSave=debounce(this.fireSave,1e3)}fireSave(){state$1.name=this.data.name,this.dispatchEvent(new CustomEvent("qrcg-download-qrcode:name-change",{composed:!0,bubbles:!0}))}href(w,q){return q?new QRCodeModel(q).getFileUrl(w):""}makeDownloadName(w,q){return q.replace(/https?/s,"").replace(/:/g,"").replace(/\//g,"").replace(/\./g,"_")+"."+w}pngClick(){this.downloadPng(state$1.remoteRecord)}async downloadPng(w,q=null){const D=q??await QrcgDownloadQrcodeModal.open(),Q=new QRCodeModel(w),O=Q.getFileUrl(),U=new QRCodeImageManager().withUrl(O),G=await U.getSvgObjectUrl();new SvgPngConverter(G,this.makeDownloadName("png",Q.getName())).downloadPng(D,D),U.disconnect()}openScreenshotModal(){QRCodeScreenshotModal.open({qrcode:state$1.remoteRecord})}downloadSVG(){return QRCGDownloadQRCode.downloadSVG(state$1.remoteRecord)}render(){return x`
            <qrcg-form>
                <label class="name-label">${t$3`Give it a name`}</label>
                <qrcg-input
                    name="name"
                    placeholder=${t$3`QR Code name`}
                    @on-input=${this.fireSave}
                ></qrcg-input>

                <div class="add-screenshot" @click=${this.openScreenshotModal}>
                    ${t$3`Upload screenshot`}
                </div>
            </qrcg-form>

            <h2>${t$3`Your download is here`}</h2>

            <div class="buttons">
                <div class="button">
                    <qrcg-button @click=${this.downloadSVG} .loading=${!1}>
                        <div class="button-content">
                            <qrcg-icon mdi-icon=${mdiDownload}></qrcg-icon>
                            SVG
                        </div>
                    </qrcg-button>
                    <div class="svg-note">
                        ${t$3`Partial support, some features are not available.`}
                    </div>
                </div>
                <div class="button">
                    <qrcg-button @click=${this.pngClick} .loading=${!1}>
                        <div class="button-content">
                            <qrcg-icon mdi-icon=${mdiDownload}></qrcg-icon>
                            PNG
                        </div>
                    </qrcg-button>
                </div>
            </div>
        `}}window.defineCustomElement("qrcg-download-qrcode",QRCGDownloadQRCode);class QRCGApiConsumer{host;record;loadableElementsSelector;static instance({host:w,baseRoute:q,loadableElementsSelector:D,inputsSelector:Q,disableableInputsSelector:O,bindEvents:U}){return new QRCGApiConsumer(w,q,D,Q,O,U)}constructor(w,q,D="qrcg-button[type=submit]",Q="[name]",O="[name]",U=!1){this.host=w,w.addController(this),this.baseRoute=q,this.loadableElementsSelector=D,this.inputsSelector=Q,this.disableableInputsSelector=O,this.bindEvents=U}hostConnected(){this.host.addEventListener("api:before-request",this.beforeRequest),this.host.addEventListener("api:validation-error",this.onValidationError),this.host.addEventListener("api:after-request",this.afterRequest),this.host.addEventListener("api:success",this.onApiSuccess),this.host.addEventListener("api:error",this.onApiError)}hostDisconnected(){this.host.removeEventListener("api:before-request",this.beforeRequest),this.host.removeEventListener("api:validation-error",this.onValidationError),this.host.removeEventListener("api:after-request",this.afterRequest),this.host.removeEventListener("api:success",this.onApiSuccess),this.host.removeEventListener("api:error",this.onApiError),this.host=null}async call(w){if(!this.host||!this.host.dispatchEvent(new CustomEvent("api:before-request",{cancelable:!0})))return;let D,Q,O;try{const U=await w();Q=U.response,O=U.request,D=await Q.clone().json(),this.host?.dispatchEvent(new CustomEvent("api:success",{detail:{response:D,rawResponse:Q,request:O}}))}catch(U){throw U instanceof ValidationError&&this.host?.dispatchEvent(new CustomEvent("api:validation-error",{detail:{errors:U.errors(),error:U}})),U instanceof ApiError&&this.host?.dispatchEvent(new CustomEvent("api:error",{detail:{error:U}})),U}finally{this.host?.dispatchEvent(new CustomEvent("api:after-request"))}return D}async post(w,q){return this.call(()=>post(w,q))}async put(w,q){return this.call(()=>put(w,q))}async save(w){return this.resourceCall(()=>save(this.baseRoute,w))}async get(w=""){const q=isEmpty(w)?"":"/";return this.resourceCall(()=>get(this.baseRoute+q+w))}async getRoute(w){return this.resourceCall(()=>get(w))}async search(w={}){const q=new URLSearchParams(w).toString();return this.resourceCall(()=>get(`${this.baseRoute}?${q}`))}async destroy(w){return this.resourceCall(()=>destroy(`${this.baseRoute}/${w}`))}async resourceCall(w){return this.record=await this.call(w)}beforeRequest=()=>{this.resetInputErrors(),this.disableInputs(),this.setLoadableElementsLoading(!0),isFunction(this.host.onBeforeRequest)&&this.host.onBeforeRequest()};afterRequest=()=>{this.releaseInputs(),this.setLoadableElementsLoading(!1),isFunction(this.host.onAfterRequest)&&this.host.onAfterRequest()};onApiSuccess=w=>{this.bindEvents&&isFunction(this.host.onApiSuccess)&&this.host.onApiSuccess(w)};onApiError=w=>{this.bindEvents&&isFunction(this.host.onApiError)&&this.host.onApiError(w)};async setLoadableElementsLoading(w){setTimeout(()=>{this.host?.shadowRoot.querySelectorAll(this.loadableElementsSelector).forEach(q=>{q.loading=w,w?q.setAttribute("loading","loading"):q.removeAttribute("loading")})},0)}disableInputs(){this.disableableInputs.forEach(w=>w.disabled=!0)}releaseInputs(){this.disableableInputs.forEach(w=>w.disabled=!1)}resetInputErrors(){this.inputs.forEach(w=>w.errors=[])}get inputs(){return this.host.shadowRoot.querySelectorAll(this.inputsSelector)}get disableableInputs(){return this.host.shadowRoot.querySelectorAll(this.disableableInputsSelector)}onValidationError=w=>{const q=w.detail.errors;Object.keys(q).forEach(D=>{const Q=this.host.shadowRoot.querySelector(`[name="${D}"]`);Q&&(Q.errors=q[D])})}}function getDomainStatuses(){return"draft,in-progress,published,rejected".split(",")}function getDomainDisplayName(F){return`${F.protocol}://${F.host}`}class QrcgDomainSelect extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{domains:{type:Array},name:{},value:{},disabled:{type:Boolean}}}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput),this.fetchDomains()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput)}onInput=w=>{if(w.detail.name!=this.name)return;const q=w.detail.value;let D=this.domains.find(Q=>Q.id==q);D||(D=this.domains.find(Q=>Q.is_default)),this.dispatchEvent(new CustomEvent("qrcg-domain-select:domain-changed",{bubbles:!0,composed:!0,detail:{domain:D}}))};async fetchDomains(){const{response:w}=await get("domains/usable"),q=await w.json();this.domains=q}renderLoaderSelect(){return x`<qrcg-select
            class="loader-select"
            disabled
            placeholder=${t$3`Loading ...`}
        >
            <span slot="label">${t$3`Select domain`}</span>
        </qrcg-select>`}render(){return this.domains?x`
            <qrcg-select
                name=${this.name}
                value=${this.domains.length===1?this.domains[0].id:this.value}
                ?disabled=${this.disabled||this.domains.length==1}
            >
                ${this.domains.map(w=>x`
                        <option value=${w.id}>
                            ${getDomainDisplayName(w)}
                            ${w.is_default?t$3`(default)`:""}
                        </option>
                    `)}
                <span slot="label">${t$3`Select domain`}</span>
            </qrcg-select>
        `:this.renderLoaderSelect()}}window.defineCustomElement("qrcg-domain-select",QrcgDomainSelect);const style$1_=":host{display:inline-block;cursor:pointer;user-select:none;-webkit-user-select:none;touch-action:manipulation;color:var(--gray-2);position:relative;transition:all .3s ease;-webkit-tap-highlight-color:transparent;padding:0 .5rem .5rem}:host(:hover){color:#000}:host([success]){color:var(--success-0)}.copy{pointer-events:none;font-size:.5rem;font-weight:700;position:absolute;transition:all .3s ease;left:50%;transform:translate(-50%,-50%);bottom:-.3rem}.copy.success{opacity:0;bottom:.1rem}:host([success]) .copy.normal{opacity:0;bottom:-.4rem}:host([success]) .copy.success{display:block;opacity:1;bottom:-.3rem}";class QrcgCopyIcon extends BaseComponent{static styleSheets=[...super.styleSheets,style$1_];static tag="qrcg-copy-icon";static get properties(){return{success:{type:Boolean,reflect:!0}}}connectedCallback(){super.connectedCallback(),this.shouldRender()||(this.style.display="none"),this.addEventListener("click",this.onClick),this.title=t$3`Copy`}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}shouldRender(){return window.isSecureContext||ConfigHelper.isLocal()}onClick(){this.success=!0,setTimeout(()=>{this.success=!1},2e3);const w=this.textContent.trim();window.navigator.clipboard.writeText(w)}render(){return this.shouldRender()?x`
            <qrcg-icon part="icon" mdi-icon=${mdiFileDocument}></qrcg-icon>
            <span class="copy normal">${t$3`Copy`}</span>
            <span class="copy success">${t$3`Copied`}</span>
        `:null}}QrcgCopyIcon.register();class QrcgQrcodeLinkModal extends QrcgModal{form=new QRCGFormController(this,!1);static styles=[super.styles,i$3`
            .qrcode-link-form {
                display: flex;
                flex-direction: column;
                position: relative;
            }

            .result-link {
                margin: 0 auto;
                font-size: 1rem;
                font-weight: bold;
                color: var(--gray-2);
                white-space: nowrap;
                overflow-x: auto;
                max-width: 80%;
                user-select: all;
                -webkit-user-select: all;
                text-align: center;
            }

            .add-your-domain-link {
                color: var(--primary-0);
                display: block;
                margin-top: 1rem;
            }

            qrcg-input {
                margin-bottom: 1rem;
            }
        `];static get properties(){return{redirect:{},data:{},domain:{}}}static async open({redirect:w}){const q=new QrcgQrcodeLinkModal;return q.redirect=w,q.data=w,document.body.appendChild(q),await new Promise(D=>setTimeout(D,250)),q.open()}constructor(){super(),this.api=QRCGApiConsumer.instance({host:this,disableableInputsSelector:"[name], [modal-negative]"}),this.data={}}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput),this.addEventListener("qrcg-domain-select:domain-changed",this.onDomainChanged)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput),this.removeEventListener("qrcg-domain-select:domain-changed",this.onDomainChanged)}onDomainChanged(w){this.domain=w.detail.domain}renderTitle(){return t$3`Customize your link`}onInput(w){this.data={...this.data,[w.detail.name]:this.getValue(w.detail)}}getValue(w){return w.name==="slug"?this.formatSlug(w.value):w.value}formatSlug(w){return kebabCase(w,!1).replace(/[^a-zA-Z0-9\\-\\@\\.]/,"")}updated(w){w.has("data")&&Object.keys(this.data).forEach(q=>{if(!q)return;const D=this.$(`[name=${q}]`);D&&(D.value=this.data[q])})}$(w){return this.shadowRoot?.querySelector(w)}async onAffirmativeClick(){try{await this.submitForm(),this.resolve(),this.close()}catch{}}submitForm=async()=>{const w=await this.api.put(`qrcodes/${this.redirect.qrcode_id}/redirect`,this.data);this.dispatchEvent(new CustomEvent("qrcg-qrcode-link-modal:redirect-saved",{detail:{redirect:w},composed:!0,bubbles:!0}))};renderActions(){return x`
            <qrcg-button transparent modal-negative>${t$3`Cancel`}</qrcg-button>

            <qrcg-button modal-affirmative type="submit">
                ${t$3`Save`}
            </qrcg-button>
        `}renderDomain(w){if(!this.domain)return w;const q=w.split("/"),D=q[q.length-1];return`${getDomainDisplayName(this.domain)}/${D}`}renderUrl(){if(isEmpty(this.data.slug))return this.redirect.route;const w=this.redirect.route.split("/"),D=`${this.redirect.route.replace(w[w.length-1],"")}${this.data.slug}`;return this.renderDomain(D)}renderBody(){return x`
            <qrcg-form class="qrcode-link-form">
                <div class="result-link">${this.renderUrl()}</div>

                <qrcg-input
                    name="slug"
                    placeholder="${t$3`Leave empty to keep unchanged`}"
                >
                    ${t$3`Slug`}
                </qrcg-input>

                <qrcg-domain-select name="domain_id"></qrcg-domain-select>

                <a
                    href="${url("/dashboard/domains/add")}"
                    target="_blank"
                    class="add-your-domain-link"
                >
                    ${t$3`Add your own domain / subdomain`}
                </a>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-qrcode-link-modal",QrcgQrcodeLinkModal);const style$1Z="";class LinkSettingsModal extends QrcgModal{static tag="qrcg-link-settings-modal";static styleSheets=[...super.styleSheets,style$1Z];async affiramtivePromise(){const w=this.$("[name=allowed_scans]").value;await post("/qrcodes/"+this.qrcode.id+"/set-allowed-scans",{allowed_scans:w}),this.qrcode.allowed_scans=w,showToast(t$3`Saved successfully.`)}onAfterOpen(){this.qrcode.allowed_scans&&(this.$("[name=allowed_scans]").value=this.qrcode.allowed_scans)}renderTitle(){return t$3`Link Settings`}renderBody(){return x`
            <!--  -->
            <qrcg-input
                name="allowed_scans"
                type="number"
                min="1"
                step="1"
                placeholder=${t$3`Please enter number of allowed scans`}
            >
                <div slot="instructions">
                    ${t$3`QRCode will stop working if allowed scans limit is reached.`}
                </div>
                <!--  -->
                ${t$3`Allowed Scans`}
            </qrcg-input>
        `}}LinkSettingsModal.register();class QrcgQrcodeLink extends i$1{types=new QRCodeTypeManager$1;static styles=[i$3`
            :host {
                display: flex;
                padding: 0.1rem 0;
                align-items: center;
                gap: 0.5rem;
            }

            .main-link {
                color: var(--primary-0);
                font-size: 0.8rem;
            }

            .container {
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            label {
                display: block;
                color: var(--gray-2);
                font-size: 0.8rem;
            }

            qrcg-button::part(button) {
                padding: 0.25rem;
                min-width: initial;
                background-color: transparent;
                color: var(--gray-2);
            }

            qrcg-button:hover::part(button) {
                background-color: var(--gray-1);
                color: black;
            }

            @keyframes enter-animation {
                from {
                    opacity: 0;
                    max-height: 0;
                    transform: scale(0.95);
                }

                to {
                    opacity: 1;
                    max-height: 6rem;
                    transform: scale(1);
                }
            }
        `];static get properties(){return{qrcodeId:{attribute:"qrcode-id"},redirect:{},qrcode:{}}}connectedCallback(){super.connectedCallback(),document.addEventListener("qrcg-qrcode-link-modal:redirect-saved",this.onRedirectSaved)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("qrcg-qrcode-link-modal:redirect-saved",this.onRedirectSaved)}updated(w){w.has("qrcodeId")&&(this.fetchQRCodeRedirect(),this.fetchQRCode())}async fetchQRCode(){if(isEmpty(this.qrcodeId)){this.qrcode=null;return}const{response:w}=await get(`qrcodes/${this.qrcodeId}`);this.qrcode=await w.json()}async fetchQRCodeRedirect(){if(isEmpty(this.qrcodeId)){this.redirect=null;return}try{this.redirect=await QRCodeRedirect.withQRCodeId(this.qrcodeId).withoutCache().get()}catch{}}async openModal(){try{await confirm$1({title:t$3`Warning!`,message:t$3`Are you sure you want to change the short URL? All printed QR codes will not work in future!`}),await new Promise(w=>setTimeout(w,200)),await QrcgQrcodeLinkModal.open({redirect:this.redirect}),this.fireChangeEvent()}catch{}}fireChangeEvent(){this.dispatchEvent(new CustomEvent("qrcg-qrcode-link:change",{bubbles:!0,composed:!0}))}onRedirectSaved=w=>{this.redirect=w.detail.redirect};shouldRender(){return isEmpty(this.redirect)||isEmpty(this.qrcode)?!1:this.types.isDynamic(this.qrcode.type)}shouldShowSettingsIcon(){return isSuperAdmin()?!0:Config.get("customer.short_link_change")!=="disabled"}openLinkSettingsModal(){LinkSettingsModal.open({qrcode:this.qrcode})}renderLinkSettingsIcon(){return x`
            <qrcg-button no-shadow @click=${this.openLinkSettingsModal}>
                <qrcg-icon mdi-icon=${mdiCog}></qrcg-icon>
            </qrcg-button>
        `}renderEditIcon(){if(!(!this.shouldShowSettingsIcon()||!PluginManager.applyFilters(FILTER_QRCODE_LINK_SHOULD_RENDER_SETTINGS_ICON,!0)))return x`
            <qrcg-button no-shadow @click=${this.openModal}>
                <qrcg-icon mdi-icon=${mdiSquareEditOutline}></qrcg-icon>
            </qrcg-button>
        `}render(){if(!this.shouldRender())return;const w=this.redirect.route;return x`
            <label>${t$3`Short URL`}</label>
            <div class="container">
                <a class="main-link" target="_blank" href="${w}">
                    ${w}
                </a>
                <qrcg-copy-icon>${w}</qrcg-copy-icon>

                ${this.renderEditIcon()}
                <!--  -->
                ${this.renderLinkSettingsIcon()}
            </div>
        `}}window.defineCustomElement("qrcg-qrcode-link",QrcgQrcodeLink);class BaseQRCodeType{static qrcodeType(){return"*"}renderForm(){let w=this.constructor.qrcodeType();this.constructor.qrcodeType()=="*"&&(w=state$1.type);let q=`qrcg-${w}-form`;return q=`<${q} role="form"></${q}>`,u$3`${s$3(q)}`}renderQRCodeDesigner(){return u$3`
            <qrcg-qrcode-designer
                .remoteRecord=${state$1.remoteRecord}
                .design=${state$1.design}
                .type=${state$1.type}
                .data=${state$1.data}
                enable-large-preview
            ></qrcg-qrcode-designer>
        `}renderTypeDesigner(){throw new Error("You must define renderTypeDesigner in child types")}renderDesigner(){return this.constructor.qrcodeType()==="*"?this.renderQRCodeDesigner():this.renderTypeDesigner()}}class QRCGTypeFormController extends QRCGFormController{hostConnected(){super.hostConnected(),this.submitOnInputIfNeeded(),this.showSubmitButtonIfNeeded(),this.host.addEventListener("validation-errors",this.onValidationErrors)}hostDisconnected(){super.hostDisconnected(),this.host?.removeEventListener("validation-errors",this.onValidationErrors),this.host=null}onValidationErrors=w=>{const q=this.host.shadowRoot.querySelectorAll("[name]");for(const D of q){const Q=w.detail.errors[D.getAttribute("name")];isEmpty(Q)?D.errors=[]:D.errors=Q}};submitOnInputIfNeeded(){this.host.addEventListener("on-input",()=>{this.host.submitOnInput&&setTimeout(()=>{this.fireSubmit()},0)})}async hostUpdate(){super.hostUpdate(),this.showSubmitButtonIfNeeded()}async showSubmitButtonIfNeeded(){if(await new Promise(w=>setTimeout(()=>w(),0)),!!this.host&&this.host.showSubmitButton){const w=this.host.renderRoot.querySelector("qrcg-button[type=submit]");w&&(w.hidden=!1)}}}class BaseTypeForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: flex;
                flex-direction: column;
            }

            [name] {
                margin-bottom: 1rem;
            }

            qrcg-form-comment {
                margin-bottom: 1rem;
            }
        `}static get properties(){return{data:{},submitOnInput:{type:Boolean,attribute:"submit-on-input"}}}constructor(){super(),this.data={}}updated(w){w.has("data")&&this.syncDataInput()}syncDataInput(){const w=Object.keys(this.data);for(const q of w){const D=this.shadowRoot.querySelector(`[name=${q}]`);D&&D.value!=this.data[q]&&(D.value=this.data[q])}}}class QrcgBusinessHoursModal extends QrcgModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            .content-view {
                max-height: 50vh;
                overflow: auto;
            }

            .day-row {
                display: flex;
                align-items: center;
            }

            .day-row .name {
                flex: 1;
            }

            qrcg-checkbox.additional-hours::part(icon) {
                opacity: 0;
            }

            qrcg-input[name='from'] {
                margin-right: 1rem;
            }

            qrcg-input {
                width: 6rem;
            }

            .action::part(button) {
                min-width: unset;
                padding: 0.5rem;
            }

            .action {
                margin-left: 1rem;
            }
            .action qrcg-icon {
                color: var(--gray-2);
            }
        `];static get properties(){return{...super.properties,value:{},days:{type:Array}}}static get days(){return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]}static async open(w){const q=new QrcgBusinessHoursModal;return isEmpty(w)||(q.value=w,q.days=QrcgBusinessHoursModal.sortedDays(w)),document.body.appendChild(q),await new Promise(D=>setTimeout(D)),q.open()}static defaultDayData(){return{enabled:!0,from:"09:00 AM",to:"05:00 PM"}}static makeDefaultValue(){const w=this.defaultDayData();return this.days.reduce((q,D)=>(q[D]=w,q),{})}static baseDayName(w){return w.split("_")[0]}static sortedDays(w){const q=Object.keys(QrcgBusinessHoursModal.makeDefaultValue());return Object.keys(w).sort(function(D,Q){if(D===Q)return 0;const O=G=>G.split("_")[0],U=G=>G.split("_")[1];return O(D)===O(Q)?U(D)-U(Q):q.indexOf(O(D))-q.indexOf(O(Q))})}constructor(){super(),this.days=this.constructor.days,this.value=this.constructor.makeDefaultValue()}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.clickDelegate),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.clickDelegate),this.removeEventListener("on-input",this.onInput)}clickDelegate=w=>{const q=w.composedPath()[0];let D;(D=parentMatches(q,"qrcg-button.add-hours"))&&this.onAddHoursClick(D),(D=parentMatches(q,"qrcg-button.remove-hours"))&&this.onRemoveHoursClick(D)};additionalDayKeys(w){return this.days.filter(q=>q.match(new RegExp(w+"_\\d")))}lastAdditionalDayIndex(w){return this.additionalDayKeys(w).reduce((q,D)=>Math.max(q,D.split("_")[1]),0)}onAddHoursClick(w){const q=this.baseDayName(w.getAttribute("day-name")),D=[...this.days],Q=this.lastAdditionalDayIndex(q),O=Q>0?`${q}_${Q}`:q,U=D.indexOf(O)+1,G=`${q}_${+Q+1}`;D.splice(U,0,G),this.days=D,this.value[G]=this.constructor.defaultDayData(),this.requestUpdate()}onRemoveHoursClick(w){this.days=this.days.filter(q=>q!=w.getAttribute("day-name")),delete this.value[w.getAttribute("day-name")],this.requestUpdate()}isAdditionalHours(w){return w.match(/_/)}onInput=w=>{w.stopPropagation();const q=w.composedPath()[0],Q=parentMatches(q,".day-row").getAttribute("day-name"),{name:O,value:U}=w.detail;O==="enabled"&&this.isAdditionalHours(Q)||(this.value[Q]={...this.value[Q],[O]:U})};async updated(w){(w.has("value")||w.has("days"))&&(await this.updateComplete,this.syncInputs())}syncInputs(){this.days.forEach(w=>{const q=this.value[w]??{};Object.keys(q).forEach(Q=>{const O=`[day-name="${w}"] [name="${Q}"]`,U=this.shadowRoot.querySelector(O);U&&(U.value=q[Q])})})}async onAffirmativeClick(){this.resolve(this.value),this.close()}baseDayName(w){return this.constructor.baseDayName(w)}renderTitle(){return x`${t$3`Opening Hours`}`}renderDayAction(w){return this.isAdditionalHours(w)?x`
                <qrcg-button
                    transparent
                    class="action remove-hours"
                    day-name=${w}
                >
                    <qrcg-icon mdi-icon=${mdiMinusThick}></qrcg-icon>
                </qrcg-button>
            `:x`
            <qrcg-button transparent class="action add-hours" day-name=${w}>
                <qrcg-icon mdi-icon=${mdiPlusCircle}></qrcg-icon>
            </qrcg-button>
        `}renderRow(w){return x`
            <div class="day-row" day-name=${w}>
                <div class="name">
                    <qrcg-checkbox
                        name="enabled"
                        class=${this.isAdditionalHours(w)?"additional-hours":""}
                    >
                        ${t$3(this.baseDayName(w))}
                    </qrcg-checkbox>
                </div>

                <qrcg-input name="from" placeholder="${t$3`From`}"></qrcg-input>

                <qrcg-input name="to" placeholder="${t$3`To`}"></qrcg-input>

                ${this.renderDayAction(w)}
            </div>
        `}renderBody(){return x`
            <div class="content-view">
                ${this.days.map(w=>this.renderRow(w))}
            </div>
        `}}window.defineCustomElement("qrcg-business-hours-modal",QrcgBusinessHoursModal);class QrcgBusinessHoursInput extends i$1{inputController=new FormInputController(this,FormInputController.MODE_BASE64);static styles=[i$3`
            :host {
                display: block;
            }

            header {
                display: flex;
                margin-bottom: 0.5rem;
                align-items: center;
            }

            .open-modal qrcg-icon {
                height: 1rem;
                width: 1rem;
            }

            .open-modal::part(button) {
                padding: 0.5rem;
                min-width: 0;
            }

            .row {
                display: flex;
                margin-bottom: 0.5rem;
                padding: 0.5rem;
                background-color: var(--gray-0);
            }

            .row .day {
                flex: 1;
            }

            .row .from {
                margin-right: 1rem;
            }

            label {
                font-size: 0.8rem;
                font-weight: bold;
                letter-spacing: 1px;
                user-select: none;
                display: block;
                margin-right: 1rem;
            }
        `];static get properties(){return{name:{},value:{converter:FormInputController.VALUE_CONVERTER}}}constructor(){super(),this.value=QrcgBusinessHoursModal.makeDefaultValue()}getValue(){return isEmpty(this.value)?QrcgBusinessHoursModal.makeDefaultValue():this.value}fireOnInput(w){this.dispatchEvent(new CustomEvent("on-input",{composed:!0,bubbles:!0,detail:{name:this.name,value:w}}))}async openModal(){const w=await QrcgBusinessHoursModal.open(this.value);this.value=w,this.fireOnInput(w),this.requestUpdate()}sortedDays(w){return QrcgBusinessHoursModal.sortedDays(w)}renderDays(){const w=this.getValue();return this.sortedDays(w).map(q=>x`
                <div class="row">
                    <div class="day">
                        ${t$3(QrcgBusinessHoursModal.baseDayName(q))}
                    </div>
                    ${w[q].enabled?x`
                              <div class="from">${w[q].from}</div>
                              <div class="to">${w[q].to}</div>
                          `:x` <div>${t$3`Closed`}</div> `}
                </div>
            `)}render(){return x`
            <input name=${this.name} type="hidden" />

            <header>
                <label>
                    <slot></slot>
                </label>

                <qrcg-button
                    @click=${this.openModal}
                    transparent
                    class="open-modal"
                >
                    <qrcg-icon mdi-icon=${mdiCog}></qrcg-icon>
                </qrcg-button>
            </header>

            ${this.renderDays()}
        `}}window.defineCustomElement("qrcg-business-hours-input",QrcgBusinessHoursInput);class QRCGBusinessProfileForm extends BaseTypeForm{static styles=[super.styles,i$3`
            qrcg-balloon-selector:first-child {
                margin-top: 1rem;
            }

            qrcg-input:first-child {
                margin-top: 1rem;
            }

            qrcg-business-hours-input {
                margin-bottom: 1rem;
            }
        `];renderOpeningHoursInput(){if(this.data.openingHoursEnabled!=="disabled")return x`
            <qrcg-business-hours-input name="openingHours">
                ${t$3`Opening Hours`}
            </qrcg-business-hours-input>
        `}render(){return x`
            <qrcg-form-comment>
                ${t$3`Create a business profile page.`}
            </qrcg-form-comment>
            <qrcg-form>
                <qrcg-balloon-selector
                    name="businessType"
                    .options=${[{name:t$3`Bakery`,value:"bakery"},{name:t$3`Healthcare`,value:"healthcare"},{name:t$3`Restaurant`,value:"restaurant"},{name:t$3`Plumber`,value:"plumber"},{name:t$3`Barber`,value:"barber"},{name:t$3`Electrician`,value:"electrician"},{name:t$3`Builder`,value:"builder"},{name:t$3`Gardener / Landscaper`,value:"gardener"},{name:t$3`Cafe`,value:"cafe"},{name:t$3`Mechanic`,value:"mechanic"},{name:t$3`Garage`,value:"garage"},{name:t$3`Joiner / Carpenter`,value:"joiner"},{name:t$3`Car Valeter / Detailer`,value:"car-valeter"},{name:t$3`Painter / Decorator`,value:"painter"},{name:t$3`Plasterer`,value:"plaster"},{name:t$3`Cleaner`,value:"cleaner"},{name:t$3`Roofer`,value:"roofer"},{name:t$3`Accountant`,value:"accountant"},{name:t$3`Lawyer / Solicitors`,value:"solicitor"},{name:t$3`Other`,value:"other"}]}
                >
                    <div slot="instructions">
                        ${t$3`Allows us to pick some colors for you`}
                    </div>

                    ${t$3`Business Type`}
                </qrcg-balloon-selector>
                <qrcg-input
                    name="businessName"
                    placeholder=${t$3`Enter your business name`}
                >
                    ${t$3`Business Name`}
                </qrcg-input>

                <qrcg-textarea
                    name="businessDescription"
                    placeholder=${t$3`Add your business description here.`}
                >
                    ${t$3`Business Description`}
                </qrcg-textarea>

                <qrcg-input name="websiteUrl" placeholder="https://....">
                    ${t$3`Website URL`}
                </qrcg-input>

                <qrcg-input name="phone"> ${t$3`Phone`} </qrcg-input>

                <qrcg-input
                    name="email"
                    type="email"
                    placeholder="email@provider.com"
                >
                    ${t$3`Email`}
                </qrcg-input>

                <qrcg-input name="maps_url">
                    ${t$3`Maps URL`}
                    <div slot="instructions">
                        ${t$3`Could be Google maps URL, or any other maps URL.`}
                    </div>
                </qrcg-input>

                <qrcg-balloon-selector
                    name="openingHoursEnabled"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`Opening Hours. (Default Enabled)`}
                </qrcg-balloon-selector>

                ${this.renderOpeningHoursInput()}

                <qrcg-textarea
                    name="address"
                    placeholder=${t$3`Add your business address here`}
                >
                    ${t$3`Business Address`}
                </qrcg-textarea>

                <qrcg-textarea
                    name="socialProfiles"
                    placeholder="https://youtube.com/...&#10;https://twitter.com/...&#10;https://instagram.com/...."
                >
                    ${t$3`Social Profiles`}

                    <div slot="instructions">
                        ${t$3`Add each social media link in a new line`}
                    </div>
                </qrcg-textarea>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-business-profile-form",QRCGBusinessProfileForm);const style$1Y=":host{display:block;position:relative}qrcg-button.add-item{margin:auto;margin-top:2rem;width:fit-content}.item-image{width:3rem;height:3rem;margin-right:1rem;background-color:#fff}.item{display:flex;padding:.5rem 1rem;background-color:var(--gray-0);margin:1rem 0;align-items:center;user-select:none;-webkit-user-select:none;flex-wrap:wrap}.item .item-name{flex:1;font-weight:700}.actions{display:flex;align-items:center;margin-left:1rem}.actions qrcg-button:not(:last-child){margin-right:.5rem}.actions qrcg-button:not(:first-child){margin-left:.5rem}.actions qrcg-button::part(button){font-size:.8rem;padding:.5rem;min-width:0}.empty-message{margin:2rem 0 0;text-align:center;color:var(--gray-2)}.error{color:var(--danger);position:absolute;font-size:.8rem;font-weight:700;bottom:0rem;transform:translateY(100%);animation:fade-in ease 1s both;display:flex;justify-content:center;left:0;right:0;text-align:center}";class ImageListInput extends BaseComponent{static styleSheets=[...super.styleSheets,style$1Y];static get properties(){return{name:{},value:{type:Array},loading:{type:Boolean},qrcodeId:{attribute:"qrcode-id"},errors:{type:Array}}}constructor(){super(),this.value=[],this.errors=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick(w){const q=w.composedPath()[0],D=parentMatches(q,".action-button.edit");if(D)return this.onEditItemClick(D);const Q=parentMatches(q,".action-button.delete");if(Q)return this.onDeleteItemClick(Q)}async onEditItemClick(w){const q=w.item;try{const D=await this.openItemModal(q);this.fireEditItem(D)}catch{}}async onDeleteItemClick(w){const q=w.item;try{await confirm$1({message:x`${t$3`Are you sure you want to delete`}
                    <strong>${q.name}</strong>?`}),this.fireDelete(q)}catch{}}async openAddItemModal(){try{const w=await this.openItemModal();this.fireAddItem(w),console.log({item:w})}catch(w){console.error(w)}}openItemModal(w){}fireDelete(w){const q=this.getValue().filter(D=>D.id!=w.id);this.fireOnInput(q)}fireAddItem(w){const q=[...this.getValue(),w];this.fireOnInput(q)}fireEditItem(w){const q=this.getValue().map(D=>D.id===w.id?w:D);this.fireOnInput(q)}fireOnInput(w){console.log("firing on input from image list input",{name:this.name,value:w}),this.value=w,this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:w}}))}sortedItems(){return this.getValue().sort(function(w,q){return parseNumberValue(w.sort_order,100)-parseNumberValue(q.sort_order,100)})}getValue(){return isArray$1(this.value)?this.value:[]}getItemName(w){return w.name}getItemImageId(w){return w.image}emptyMessageText(){return t$3`There is no items. Click on Add Item button below.`}addItemText(){return t$3`Add Item`}renderItemImage(w){return x`
            <qrcg-file-image
                file-id=${this.getItemImageId(w)}
                class="item-image"
            ></qrcg-file-image>
        `}renderAfterItemName(w){return null}renderItems(){if(!isEmpty(this.getValue()))return this.sortedItems().map(w=>x`
                <div class="item">
                    ${this.renderItemImage(w)}

                    <div class="item-name">${this.getItemName(w)}</div>

                    ${this.renderAfterItemName(w)}

                    <div class="actions">
                        <qrcg-button
                            class="action-button edit"
                            transparent
                            .item=${w}
                            ?disabled=${this.loading}
                        >
                            ${t$3`Edit`}
                        </qrcg-button>
                        <qrcg-button
                            class="action-button delete"
                            transparent
                            .item=${w}
                            ?disabled=${this.loading}
                        >
                            ${t$3`Delete`}
                        </qrcg-button>
                    </div>
                </div>
            `)}renderEmptyItemsMessage(){if(isEmpty(this.getValue()))return x`
            <div class="empty-message">${this.emptyMessageText()}</div>
        `}renderErrors(){if(!isEmpty(this.errors))return x`
            <div class="errors">
                ${this.errors.map(w=>x`<div class="error">${w}</div>`)}
            </div>
        `}render(){return x`
            ${this.renderEmptyItemsMessage()}

            <!-- -->
            ${this.renderItems()}

            <qrcg-button
                class="add-item"
                transparent
                @click=${this.openAddItemModal}
                ?loading=${this.loading}
            >
                ${this.addItemText()}
            </qrcg-button>

            ${this.renderErrors()}
        `}}const style$1X=":host{display:block}[name]{margin-bottom:1rem}.body{line-height:unset}";class ImageListModal extends QrcgModal{static styleSheets=[...super.styleSheets,style$1X];static get properties(){return{...super.properties,data:{},qrcodeId:{}}}static open(w={}){const q=new this;return Object.keys(w).forEach(D=>{w[D]&&(q[D]=w[D])}),document.body.appendChild(q),q.open()}constructor(){super(),this.data={id:"item-"+new Date().getTime()}}connectedCallback(){super.connectedCallback(),document.addEventListener("keyup",this.watchEnter),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keyup",this.watchEnter),this.removeEventListener("on-input",this.onInput)}onInput=w=>{this.data={...this.data,[w.detail.name]:w.detail.value}};updated(w){w.has("data")&&this.syncInputs()}inputs(){return Array.from(this.shadowRoot.querySelectorAll("[name]"))}syncInputs(){for(const w of Object.keys(this.data)){const q=this.$input(w);q&&(q.value=this.data[w])}}$input(w){return this.shadowRoot.querySelector(`[name=${w}]`)}affiramtivePromise(){if(this.resetValidationErrors(),!this.validateInputs())throw new Error("Inputs has invalid values")}inputNames(){return Array.from(this.shadowRoot.querySelectorAll("[name]")).map(w=>w.getAttribute("name"))}validateInputs(){let w=!0;for(const q of this.inputNames()){const D=this.data[q],O=this.$input(q).hasAttribute("required");if(isEmpty(D)&&O){w=!1;const U=t$3(ucfirst(titleCase(q).toLowerCase()))+" "+t$3`is required`;this.$input(q).errors=[U]}}return w}resetValidationErrors(){this.inputs().forEach(w=>w.errors=[])}resolvedData(){return this.data}watchEnter=w=>{const q=w.composedPath()[0];if(w.key==="Enter"&&!q.matches("textarea"))return this.onAffirmativeClick()};renderTitle(){return t$3`Add Item`}getUploadEndpoint(){return isEmpty(this.qrcodeId)?this.getGeneralFileUploadEndpoint():`qrcodes/${this.qrcodeId}/webpage-design-file`}getGeneralFileUploadEndpoint(){return"files"}renderFileInput(w="image",q=t$3`Image`,D=this.fileInputInstructions(),Q=!0){const O=()=>{if(!isEmpty(D))return x` <div slot="instructions">${D}</div> `};return x`
            <qrcg-file-input
                ?required=${Q}
                name="${w}"
                upload-endpoint="${this.getUploadEndpoint()}"
                attachable_type="QRCode"
            >
                ${q}
                <!--  -->
                ${O()}
            </qrcg-file-input>
        `}fileInputInstructions(){return t$3`Recommended size`+" 500x500"}renderInputs(){return x`
            <qrcg-input name="url" placeholder=${t$3`https://...`}>
                ${t$3`URL (optional)`}
            </qrcg-input>
        `}renderImageFileInput(){return this.renderFileInput()}renderBody(){return x`
            <div class="content-view">
                ${this.renderImageFileInput()}

                <!-- -->

                ${this.renderInputs()}

                <qrcg-input name="sort_order" placeholder="10" type="number">
                    ${t$3`Sort Order`}
                </qrcg-input>
            </div>
        `}}class ReviewSitesModal extends ImageListModal{static tag="qrcg-review-sites-modal";renderTitle(){return t$3`Review Site`}fileInputInstructions(){return t$3`Upload review site logo below.`}getUploadEndpoint(){return this.withoutQRCode?"/files":super.getUploadEndpoint()}renderWidthInput(){if(!this.withoutQRCode)return x`
            <qrcg-input
                name="width"
                placeholder="50"
                type="number"
                step="1"
                min="20"
            >
                ${t$3`Width (Percent)`}
                <div slot="instructions">${t$3`Default 50%`}</div>
            </qrcg-input>
        `}renderInputs(){return x`
            <qrcg-input name="name" required placeholder=${t$3`Trust Pilot`}>
                ${t$3`Site name`}
            </qrcg-input>

            <qrcg-input name="url" required placeholder="https://....">
                ${t$3`URL`}
            </qrcg-input>

            ${this.renderWidthInput()}

            <qrcg-color-picker name="background_color">
                ${t$3`Background Color (Optional)`}
            </qrcg-color-picker>
        `}}defineCustomElement(ReviewSitesModal.tag,ReviewSitesModal);class ReviewSitesInput extends ImageListInput{static tag="qrcg-review-sites-input";static styles=[i$3`
            :host {
                display: block;
            }
        `,super.styles];static get properties(){return{...super.properties,withoutQRCode:{type:Boolean,attribute:"without-qrcode"}}}constructor(){super(),this.withoutQRCode=!1}getItemName(w){return w.name}openItemModal(w){return ReviewSitesModal.open({data:w,qrcodeId:this.qrcodeId,withoutQRCode:this.withoutQRCode})}}defineCustomElement(ReviewSitesInput.tag,ReviewSitesInput);const style$1W=":host{display:block;box-sizing:border-box}@media(min-width:900px){:host{min-width:400px}}.frame{background-color:var(--gray-0);padding:1rem;border-radius:.5rem;display:flex;flex-direction:column;gap:.5rem}.heading{display:flex;align-items:center;justify-content:space-between}iframe{box-shadow:none!important;border:0;max-width:100%}*{box-sizing:border-box}.loader-container{display:flex;align-items:center;justify-content:center}";class QrcgWebpagePreview extends BaseComponent{static EVENT_REQEUST_REFRESH="qrcg-webpage-preview:request-refresh";static styleSheets=[...super.styleSheets,style$1W];static get properties(){return{qrcodeId:{attribute:"qrcode-id"},redirect:{},largeScreen:{type:Boolean}}}connectedCallback(){super.connectedCallback(),this.media=matchMedia("(min-width: 900px)"),this.largeScreen=this.media.matches,this.media.addEventListener("change",this.onMediaChange),document.addEventListener(QrcgWebpagePreview.EVENT_REQEUST_REFRESH,this.onRefreshRequested)}disconnectedCallback(){super.disconnectedCallback(),this.media.removeEventListener("change",this.onMediaChange),this.media=null,document.removeEventListener(QrcgWebpagePreview.EVENT_REQEUST_REFRESH,this.onRefreshRequested)}onRefreshRequested=()=>{this.refresh()};updated(w){w.has("qrcodeId")&&this.qrcodeId&&this.fetchQRCodeRedirect()}onMediaChange=()=>{this.largeScreen=this.media.matches};async fetchQRCodeRedirect(){if(isEmpty(this.qrcodeId)){this.redirect=null;return}const{response:w}=await get(`qrcodes/${this.qrcodeId}/redirect`);this.redirect=await w.json()}previewUrl(){return url("/"+this.redirect.slug+"?preview=true")}refresh(){const w=this.shadowRoot.querySelector("iframe");w&&(w.src+="")}renderLoader(){return x`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderFrame(){return x`
            <div class="frame">
                <div class="heading">
                    <div class="text">${t$3`Preview`}</div>
                    ${DesignerToggler.renderSelf()}
                </div>
                <iframe
                    width="400"
                    height="650"
                    src="${this.previewUrl()}"
                ></iframe>
            </div>
        `}renderPreviewButton(){return x`
            <qrcg-button
                href=${this.previewUrl()}
                target="_blank"
                class="preview-button"
            >
                ${t$3`Preview`}
            </qrcg-button>
        `}render(){return this.qrcodeId?this.redirect?this.renderFrame():this.renderLoader():null}}window.defineCustomElement("qrcg-webpage-preview",QrcgWebpagePreview);const style$1V=":host([fetch-loading]) *{pointer-events:none;opacity:.5}.add{color:var(--primary-0);display:flex;align-items:center;padding:1rem;text-align:center;justify-content:center;font-weight:700;cursor:pointer;margin-top:1rem}.add:hover{text-decoration:underline}.add qrcg-icon{margin-right:.5rem}[name]{margin-bottom:1rem}h2{color:var(--gray-2)}slot[name=instructions]::slotted(*){background-color:var(--gray-0);color:var(--gray-2);padding:1rem;margin-bottom:1rem}.delete qrcg-icon{z-index:100;position:absolute;top:50%;right:0;transform:translateY(-50%);padding:1rem;width:4rem;height:4rem;color:var(--danger-1);cursor:pointer}.toolbar{margin-bottom:1rem;display:flex;align-items:center;justify-content:space-between}.toolbar .summary{font-size:.8rem;color:var(--gray-2)}.toolbar .actions{display:flex;align-items:center}.toolbar qrcg-button{--button-color: var(--primary-0);--button-background-color: transparent;--button-background-color-hover: var(--gray-0);--button-outline-focus: var(--gray-1)}.toolbar qrcg-button qrcg-icon{color:var(--gray-2);margin-inline-end:.5rem;pointer-events:none}.toolbar qrcg-button::part(button){box-shadow:none;min-width:initial}",style$1U=":host{padding:1rem;background-color:var(--gray-0);position:relative}.control-container{display:flex;flex-wrap:wrap}@media(max-width:500px){[name]{margin-bottom:1rem}}qrcg-input{flex:1;margin-right:1rem}qrcg-balloon-selector{--option-background-color: white}";class FormFieldModel{static TYPE_TEXTAREA="textarea";static TYPE_TEXT="text";id="";name="";mandatory="";type="";value=null;constructor(){this.id=generateUniqueID(),this.type=FormFieldModel.TYPE_TEXT}static getTypeOptions(){return Object.keys(this).filter(w=>w.match(/TYPE/)).map(w=>this[w]).map(w=>({name:t$3(titleCase(w)),value:w}))}static fromObject(w,q=null){return q||(q=new this),mix(q,w)}isMandatory(){return this.mandatory==="yes"}}class FormField extends BaseComponent{static tag="qrcg-form-builder-field";static styleSheets=[...super.styleSheets,style$1U];static get properties(){return{...super.properties,name:{},value:{},model:{}}}constructor(){super(),this.model=new FormFieldModel}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput)}async onInput(w){w.composedPath()[0]!==this&&(w.stopImmediatePropagation(),clearTimeout(this.__inputTimeout),this.__inputTimeout=setTimeout(()=>{this.model[w.detail.name]=w.detail.value,this.dispatchOnInput()},500))}dispatchOnInput(){this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:this.model}}))}updated(w){w.has("value")&&JSON.stringify(this.value)!=JSON.stringify(this.model)&&this.onValueChanged(),w.has("model")&&this.syncInputs()}onValueChanged(){this.model=FormFieldModel.fromObject(this.value,this.model),this.syncInputs()}syncInputs(){this.$$("[name]").forEach(w=>w.value=this.model[w.name])}render(){return x`
            <slot></slot>

            <div class="control-container">
                <qrcg-input name="name" placeholder=${t$3`Field Name`}>
                    ${t$3`Field Name`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="type"
                    .options=${FormFieldModel.getTypeOptions()}
                >
                    ${t$3`Type`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="mandatory"
                    .options=${[{name:t$3`Yes`,value:"yes"},{name:t$3`No`,value:"no"}]}
                >
                    ${t$3`Required?`}
                </qrcg-balloon-selector>
            </div>
        `}}FormField.register();function round(F){return F+.5|0}const lim=(F,w,q)=>Math.max(Math.min(F,q),w);function p2b(F){return lim(round(F*2.55),0,255)}function n2b(F){return lim(round(F*255),0,255)}function b2n(F){return lim(round(F/2.55)/100,0,1)}function n2p(F){return lim(round(F*100),0,100)}const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex=[..."0123456789ABCDEF"],h1=F=>hex[F&15],h2=F=>hex[(F&240)>>4]+hex[F&15],eq=F=>(F&240)>>4===(F&15),isShort=F=>eq(F.r)&&eq(F.g)&&eq(F.b)&&eq(F.a);function hexParse(F){var w=F.length,q;return F[0]==="#"&&(w===4||w===5?q={r:255&map$1[F[1]]*17,g:255&map$1[F[2]]*17,b:255&map$1[F[3]]*17,a:w===5?map$1[F[4]]*17:255}:(w===7||w===9)&&(q={r:map$1[F[1]]<<4|map$1[F[2]],g:map$1[F[3]]<<4|map$1[F[4]],b:map$1[F[5]]<<4|map$1[F[6]],a:w===9?map$1[F[7]]<<4|map$1[F[8]]:255})),q}const alpha=(F,w)=>F<255?w(F):"";function hexString(F){var w=isShort(F)?h1:h2;return F?"#"+w(F.r)+w(F.g)+w(F.b)+alpha(F.a,w):void 0}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(F,w,q){const D=w*Math.min(q,1-q),Q=(O,U=(O+F/30)%12)=>q-D*Math.max(Math.min(U-3,9-U,1),-1);return[Q(0),Q(8),Q(4)]}function hsv2rgbn(F,w,q){const D=(Q,O=(Q+F/60)%6)=>q-q*w*Math.max(Math.min(O,4-O,1),0);return[D(5),D(3),D(1)]}function hwb2rgbn(F,w,q){const D=hsl2rgbn(F,1,.5);let Q;for(w+q>1&&(Q=1/(w+q),w*=Q,q*=Q),Q=0;Q<3;Q++)D[Q]*=1-w-q,D[Q]+=w;return D}function hueValue(F,w,q,D,Q){return F===Q?(w-q)/D+(w<q?6:0):w===Q?(q-F)/D+2:(F-w)/D+4}function rgb2hsl(F){const q=F.r/255,D=F.g/255,Q=F.b/255,O=Math.max(q,D,Q),U=Math.min(q,D,Q),G=(O+U)/2;let W,K,ee;return O!==U&&(ee=O-U,K=G>.5?ee/(2-O-U):ee/(O+U),W=hueValue(q,D,Q,ee,O),W=W*60+.5),[W|0,K||0,G]}function calln(F,w,q,D){return(Array.isArray(w)?F(w[0],w[1],w[2]):F(w,q,D)).map(n2b)}function hsl2rgb(F,w,q){return calln(hsl2rgbn,F,w,q)}function hwb2rgb(F,w,q){return calln(hwb2rgbn,F,w,q)}function hsv2rgb(F,w,q){return calln(hsv2rgbn,F,w,q)}function hue(F){return(F%360+360)%360}function hueParse(F){const w=HUE_RE.exec(F);let q=255,D;if(!w)return;w[5]!==D&&(q=w[6]?p2b(+w[5]):n2b(+w[5]));const Q=hue(+w[2]),O=+w[3]/100,U=+w[4]/100;return w[1]==="hwb"?D=hwb2rgb(Q,O,U):w[1]==="hsv"?D=hsv2rgb(Q,O,U):D=hsl2rgb(Q,O,U),{r:D[0],g:D[1],b:D[2],a:q}}function rotate(F,w){var q=rgb2hsl(F);q[0]=hue(q[0]+w),q=hsl2rgb(q),F.r=q[0],F.g=q[1],F.b=q[2]}function hslString(F){if(!F)return;const w=rgb2hsl(F),q=w[0],D=n2p(w[1]),Q=n2p(w[2]);return F.a<255?`hsla(${q}, ${D}%, ${Q}%, ${b2n(F.a)})`:`hsl(${q}, ${D}%, ${Q}%)`}const map={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){const F={},w=Object.keys(names$1),q=Object.keys(map);let D,Q,O,U,G;for(D=0;D<w.length;D++){for(U=G=w[D],Q=0;Q<q.length;Q++)O=q[Q],G=G.replace(O,map[O]);O=parseInt(names$1[U],16),F[G]=[O>>16&255,O>>8&255,O&255]}return F}let names;function nameParse(F){names||(names=unpack(),names.transparent=[0,0,0,0]);const w=names[F.toLowerCase()];return w&&{r:w[0],g:w[1],b:w[2],a:w.length===4?w[3]:255}}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(F){const w=RGB_RE.exec(F);let q=255,D,Q,O;if(w){if(w[7]!==D){const U=+w[7];q=w[8]?p2b(U):lim(U*255,0,255)}return D=+w[1],Q=+w[3],O=+w[5],D=255&(w[2]?p2b(D):lim(D,0,255)),Q=255&(w[4]?p2b(Q):lim(Q,0,255)),O=255&(w[6]?p2b(O):lim(O,0,255)),{r:D,g:Q,b:O,a:q}}}function rgbString(F){return F&&(F.a<255?`rgba(${F.r}, ${F.g}, ${F.b}, ${b2n(F.a)})`:`rgb(${F.r}, ${F.g}, ${F.b})`)}const to=F=>F<=.0031308?F*12.92:Math.pow(F,1/2.4)*1.055-.055,from=F=>F<=.04045?F/12.92:Math.pow((F+.055)/1.055,2.4);function interpolate(F,w,q){const D=from(b2n(F.r)),Q=from(b2n(F.g)),O=from(b2n(F.b));return{r:n2b(to(D+q*(from(b2n(w.r))-D))),g:n2b(to(Q+q*(from(b2n(w.g))-Q))),b:n2b(to(O+q*(from(b2n(w.b))-O))),a:F.a+q*(w.a-F.a)}}function modHSL(F,w,q){if(F){let D=rgb2hsl(F);D[w]=Math.max(0,Math.min(D[w]+D[w]*q,w===0?360:1)),D=hsl2rgb(D),F.r=D[0],F.g=D[1],F.b=D[2]}}function clone(F,w){return F&&Object.assign(w||{},F)}function fromObject(F){var w={r:0,g:0,b:0,a:255};return Array.isArray(F)?F.length>=3&&(w={r:F[0],g:F[1],b:F[2],a:255},F.length>3&&(w.a=n2b(F[3]))):(w=clone(F,{r:0,g:0,b:0,a:1}),w.a=n2b(w.a)),w}function functionParse(F){return F.charAt(0)==="r"?rgbParse(F):hueParse(F)}class Color{constructor(w){if(w instanceof Color)return w;const q=typeof w;let D;q==="object"?D=fromObject(w):q==="string"&&(D=hexParse(w)||nameParse(w)||functionParse(w)),this._rgb=D,this._valid=!!D}get valid(){return this._valid}get rgb(){var w=clone(this._rgb);return w&&(w.a=b2n(w.a)),w}set rgb(w){this._rgb=fromObject(w)}rgbString(){return this._valid?rgbString(this._rgb):void 0}hexString(){return this._valid?hexString(this._rgb):void 0}hslString(){return this._valid?hslString(this._rgb):void 0}mix(w,q){if(w){const D=this.rgb,Q=w.rgb;let O;const U=q===O?.5:q,G=2*U-1,W=D.a-Q.a,K=((G*W===-1?G:(G+W)/(1+G*W))+1)/2;O=1-K,D.r=255&K*D.r+O*Q.r+.5,D.g=255&K*D.g+O*Q.g+.5,D.b=255&K*D.b+O*Q.b+.5,D.a=U*D.a+(1-U)*Q.a,this.rgb=D}return this}interpolate(w,q){return w&&(this._rgb=interpolate(this._rgb,w._rgb,q)),this}clone(){return new Color(this.rgb)}alpha(w){return this._rgb.a=n2b(w),this}clearer(w){const q=this._rgb;return q.a*=1-w,this}greyscale(){const w=this._rgb,q=round(w.r*.3+w.g*.59+w.b*.11);return w.r=w.g=w.b=q,this}opaquer(w){const q=this._rgb;return q.a*=1+w,this}negate(){const w=this._rgb;return w.r=255-w.r,w.g=255-w.g,w.b=255-w.b,this}lighten(w){return modHSL(this._rgb,2,w),this}darken(w){return modHSL(this._rgb,2,-w),this}saturate(w){return modHSL(this._rgb,1,w),this}desaturate(w){return modHSL(this._rgb,1,-w),this}rotate(w){return rotate(this._rgb,w),this}}function index_esm(F){return new Color(F)}function isArray(F){if(Array.isArray&&Array.isArray(F))return!0;const w=Object.prototype.toString.call(F);return w.slice(0,7)==="[object"&&w.slice(-6)==="Array]"}function _isDomSupported(){return typeof window<"u"&&typeof document<"u"}(function(){let F=!1;try{const w={get passive(){return F=!0,!1}};_isDomSupported()&&(window.addEventListener("test",null,w),window.removeEventListener("test",null,w))}catch{}return F})();class FormBuilderModel{id=0;name="";fields=[];settings={};type=null;related_model;related_model_id;constructor(){this.fields=this.createEmptyFormFields()}static fromString(w){try{const q=JSON.parse(w);return this.fromObject(q)}catch(q){return isEmpty(w)||console.log(q),null}}static fromObject(w,q=null){return q||(q=new this),mix(q,w),q.fields=q.getFields().map(D=>FormFieldModel.fromObject(D)),isEmpty(q.fields)&&(q.fields=q.createEmptyFormFields()),q}getFields(){return isArray(this.fields)?this.fields:this.createEmptyFormFields()}addNewField(){this.fields=[...this.getFields(),this.emptyFormField()]}deleteField(w){this.fields=this.fields.filter(q=>q.id!=w.id),this.fields.length||(this.fields=this.createEmptyFormFields())}createEmptyFormFields(){return[this.emptyFormField()]}emptyFormField(){return new FormFieldModel}toString(){return JSON.stringify(this.model)}}const style$1T="[name]{margin-bottom:1rem}";class CusotmFormSettingsFieldModel{name;placeholder;instructions;label;type="text";constructor(w,q,D,Q,O="text"){this.name=w,this.label=q,this.placeholder=D,this.instructions=Q,this.type=O}}class FormSettings extends QrcgModal{static tag="qrcg-custom-form-settings";static styleSheets=[...super.styleSheets,style$1T];static get properties(){return{...super.properties,fields:{type:Array}}}constructor(){super(),this.fields=[],this.formModel=null}firstUpdated(){super.firstUpdated(),this.syncDefaultValues()}syncDefaultValues(){if(typeof this.formModel.settings!="object"||!this.formModel.settings)return;const w=Object.keys(this.formModel.settings);for(const q of w){const D=this.$(`[name="${q}"]`);if(!D)return;D.value=this.formModel.settings[q]}}async affiramtivePromise(){try{const{json:w}=await post("custom-forms/"+this.formModel.id+"/save-settings",{settings:this.collectData()});this.resolvedData=()=>w,showToast(t$3`Settings saved successfully.`)}catch(w){throw console.error(w),showToast(t$3`Error while saving settings.`),w}}collectData(){return this.$$("[name]").reduce((w,q)=>(w[q.name]=q.value,w),{})}renderFieldInstructions(w){if(!isEmpty(w))return x` <slot name="instructions"> ${w} </slot> `}renderFileField(w){return x`
            <!--  -->
            <qrcg-file-input name=${w.name}>
                ${w.label}
            </qrcg-file-input>
        `}renderField(w){return w.type==="file"?this.renderFileField(w):x`
            <qrcg-input
                name=${w.name}
                placeholder=${w.placeholder}
                type=${w.type}
            >
                ${w.label}
                ${this.renderFieldInstructions(w.instructions)}
            </qrcg-input>
        `}renderTitle(){return t$3`Form Settings`}renderFields(){return this.fields.map(w=>this.renderField(w))}renderBody(){return this.renderFields()}}FormSettings.register();class FormBuilder extends BaseComponent{static tag="qrcg-form-builder";static styleSheets=[...super.styleSheets,style$1V];model=new FormBuilderModel;static RENDER_MODE_FORM_SECTION="form-section";static RENDER_MODE_PLAIN="plain";static get properties(){return{...super.properties,name:{},value:{},fetchLoading:{type:Boolean,reflect:!0,attribute:"fetch-loading"},renderMode:{type:String,attribute:"render-mode"},showFormNameInput:{type:Boolean,attribute:"show-form-name-input"},settings:{type:Array},type:{type:String},relatedModel:{attribute:"related-model"},relatedModelId:{attribute:"related-model-id"}}}static findSelf(w){return super.findSelf(w)}constructor(){super(),this.renderMode=FormBuilder.RENDER_MODE_FORM_SECTION,this.showFormNameInput=!1,this.settings=[],this.type=null,this.relatedModel=null,this.relatedModelId=null}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput),this.removeEventListener("click",this.onClick)}onClick(w){const q=w.composedPath()[0],D=parentMatches(q,".delete");if(D){const O=parentMatches(D,'[name="form_field"]').model;this.onDeleteFormField(O)}}async onDeleteFormField(w){try{await confirm$1({message:t$3`Are you sure you want to delete`+` ${w.name}?`}),this.model.deleteField(w),this.requestUpdate(),this.save()}catch(q){console.error(q)}}updated(w){w.has("value")&&this.fetchIfNeeded()}fetchIfNeeded(){isEmpty(this.value)||this.value!=this.model.id&&(this.model.id=this.value,this.fetch())}async fetch(){this.fetchLoading=!0;try{const{json:w}=await get(this.getEndpoint());this.model=FormBuilderModel.fromObject(w,this.model),this.syncInputs(),this.requestUpdate()}catch(w){console.error(w)}this.fetchLoading=!1}syncInputs(){this.$$("[name]:not(qrcg-form-builder-field)").forEach(w=>{const q=this.model[w.name];isNotEmpty(q)&&(w.value=q)})}onInput(w){w.composedPath()[0]!==this&&(this.save(),w.preventDefault(),w.stopImmediatePropagation())}getEndpoint(){let q="custom-forms/"+(this.model.id!=0?this.model.id:"");return q=q.replace(/\/$/,""),q}extractSectionTitle(){return Array.from(this.$(".section-title slot").assignedNodes({flatten:!0})).reduce((D,Q)=>D+Q.textContent.trim(),"").trim()}extractTitle(){return this.renderMode==FormBuilder.RENDER_MODE_FORM_SECTION?this.extractSectionTitle():this.innerText.trim()}getFormName(){let w=null;return this.showFormNameInput&&(w=this.$('[name="name"]').value),isNotEmpty(w)?w:this.extractTitle()}async doSave(){const w=this.value?put:post;this.model.name=this.getFormName(),this.model.type=this.type,this.model.related_model=this.relatedModel??"",this.model.related_model_id=this.relatedModelId??"";const{json:q}=await w(this.getEndpoint(),this.model);this.model.id=q.id,this.setValue(q.id)}save(){clearTimeout(this.__saveTimeout),this.__saveTimeout=setTimeout(()=>{this.doSave()},500)}dispatchOnInput(){this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:this.value}}))}setValue(w){this.value=w,this.dispatchOnInput()}onAddFieldClick(){this.model.addNewField(),this.requestUpdate()}async showSettingsModal(){try{this.model=await FormSettings.open({fields:this.settings,formModel:this.model}),this.dispatchOnInput()}catch{}}renderFormFields(){return this.model.getFields().map(w=>x`
                <qrcg-form-builder-field name="form_field" .model=${w}>
                    <div class="delete">
                        <qrcg-icon mdi-icon=${mdiCloseThick}></qrcg-icon>
                    </div>
                </qrcg-form-builder-field>
            `)}renderFormNameInput(){if(this.showFormNameInput)return x`
            <qrcg-input name="name" placeholder=${t$3`Enter form name`}>
                ${t$3`Form Name`}
            </qrcg-input>
        `}renderToolbar(){if(!isEmpty(this.settings))return x`
            <div class="toolbar">
                <div class="summary">
                    ${t$3`Showing`} ${this.model.getFields().length}
                    ${t$3`field(s)`}
                </div>

                <div class="actions">
                    <slot name="actions"> </slot>
                    <qrcg-button
                        class="settings"
                        @click=${this.showSettingsModal}
                    >
                        <qrcg-icon mdi-icon=${mdiCog}></qrcg-icon>
                        ${t$3`Form Settings`}
                    </qrcg-button>
                </div>
            </div>
        `}renderContent(){return x`
            <slot name="instructions" class="instructions"></slot>

            ${this.renderToolbar()}

            <!--  -->
            ${this.renderFormNameInput()}

            <!--  -->
            ${this.renderFormFields()}

            <div class="add" @click=${this.onAddFieldClick}>
                <qrcg-icon mdi-icon=${mdiPlusBox}></qrcg-icon>
                ${t$3`Add Field`}
            </div>
        `}renderFormSectionMode(){return x`
            <qrcg-form-section>
                <h2 class="section-title">
                    <slot></slot>
                </h2>

                ${this.renderContent()}
            </qrcg-form-section>
        `}render(){return this.renderMode==FormBuilder.RENDER_MODE_FORM_SECTION?this.renderFormSectionMode():this.renderContent()}}FormBuilder.register();const style$1S="qrcg-custom-form-response-preview::part(action-change){display:none}qrcg-custom-form-response-preview{margin-bottom:1rem}.responses-toolbar{display:flex;margin:0 0 1rem}.responses-toolbar .action{color:var(--primary-0);font-weight:700;font-size:.8rem}",style$1R=":host{background-color:var(--gray-0);font-size:.8rem;padding:.5rem}.container{display:flex;flex-direction:column;gap:.5rem}.container .fields{flex:1;margin-right:.5rem}.container .actions{display:flex;gap:.5rem}.action{color:var(--primary-0);font-weight:700;cursor:pointer}.field{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.field::not(:last-child){margin-bottom:.5rem}.field-name{font-weight:700}.loading-container{padding:1rem;display:flex;align-items:center;justify-content:center;flex:1}.form-name{font-weight:700;margin-bottom:1rem}.empty-message{padding:1rem;color:var(--gray-2);font-size:1rem}";class FormResponsePreview extends BaseComponent{static tag="qrcg-custom-form-response-preview";static styleSheets=[...super.styleSheets,style$1R];static get properties(){return{response:{},responseId:{attribute:"response-id"},loading:{type:Boolean}}}static EVENT_CHANGE_REQUESTED=`${this.tag}:change-requested`;static EVENT_AFTER_DELETE=`${this.tag}::after-delete`;constructor(){super(),this.response=null}updated(w){w.has("responseId")&&this.fetchResponse()}async fetchResponse(){if(isEmpty(this.responseId))return;this.loading=!0;const{json:w}=await get("custom-forms/response/"+this.responseId);this.response=w,this.loading=!1}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick(w){mapEventDelegate(w,{".action.change":this.dispatchChangeRequestedEvent,".action.delete":this.onDeleteClick})}onDeleteClick=async()=>{await confirm$1({message:t$3`Are you sure you want to delete form response?`});try{await destroy("custom-forms/response/"+this.response.id),showToast(t$3`Resopnse delete successfully`),this.dispatchEvent(new CustomEvent(FormResponsePreview.EVENT_AFTER_DELETE,{composed:!0,bubbles:!0}))}catch(w){console.error(w),showToast(t$3`Error while deleting form response.`)}};getDate(){return new Date(this.response.created_at).toLocaleString()}dispatchChangeRequestedEvent=()=>{this.dispatchEvent(new CustomEvent(FormResponsePreview.EVENT_CHANGE_REQUESTED,{bubbles:!0,composed:!0,detail:{response:this.response}}))};renderField(w){return x`
            <div class="field">
                <div class="field-name">${w.name}</div>
                <div class="field-value">${w.value}</div>
            </div>
        `}renderLoader(){if(this.loading)return x`
                <div class="loading-container">
                    <qrcg-loader></qrcg-loader>
                </div>
            `}renderFormName(){const w=this.response?.custom_form?.name;if(!isEmpty(w))return x`
            <div class="form-name">
                <!--  -->
                ${w}
            </div>
        `}renderFields(){if(!(isEmpty(this.response)||this.loading))return x`
            <div class="container">
                <div class="fields">
                    ${this.response?.fields.map(w=>this.renderField(w))}
                </div>

                <div class="date" part="date">${this.getDate()}</div>

                <div class="actions" part="actions">
                    <div class="action change" part="action-change">
                        ${t$3`Change`}
                    </div>

                    <div class="action delete" part="action-delete">
                        ${t$3`Delete`}
                    </div>
                </div>
            </div>
        `}renderEmptyMessage(){if(isEmpty(this.response)&&!this.loading)return x`
            <div class="empty-message">${t$3`No result could be found.`}</div>
        `}render(){return x`
            ${this.renderLoader()}
            <!--  -->
            ${this.renderFormName()}
            <!--  -->
            ${this.renderFields()}
            <!--  -->
            ${this.renderEmptyMessage()}
        `}}FormResponsePreview.register();class CustomFormResponses extends QrcgModal{static tag="qrcg-custom-form-responses-modal";static styleSheets=[...super.styleSheets,style$1S];static get properties(){return{...super.properties,formId:{attribute:"form-id"},loading:{type:Boolean}}}constructor(){super(),this.formId=null,this.loading=!0,this.data=[]}connectedCallback(){super.connectedCallback(),this.fetchResponses(),this.addEventListener(FormResponsePreview.EVENT_AFTER_DELETE,this.onAfterResponseDelete)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(FormResponsePreview.EVENT_AFTER_DELETE,this.onAfterResponseDelete)}updated(w){super.updated(w),w.has("formId")&&this.fetchResponses()}generateExportRows(){return this.data.filter(w=>w.fields&&w.fields.length).map(w=>w.fields.reduce((q,D)=>(q.push(D.value),q),[]))}generateExportTitles(){return this.data[0].fields.map(w=>w.name)}prepareResponsesToExport(){return[this.generateExportTitles(),...this.generateExportRows()]}downloadCsv(){const w=arrayToCsv(this.prepareResponsesToExport());downloadBlob(w,`responses-${this.getExportDate()}.csv`,"text/csv;charset=utf-8;")}getExportDate(){const w=new Date;return`${w.getDate()}-${w.getMonth()+1}-${w.getFullYear()}`}onAfterResponseDelete(){this.fetchResponses()}async fetchResponses(){if(!isEmpty(this.formId)){this.loading=!0;try{const{json:w}=await get(`custom-forms/${this.formId}/responses`);this.data=w}catch(w){console.error(w)}this.loading=!1}}renderToolbar(){if(!(this.loading||isEmpty(this.data)))return x`
            <div class="responses-toolbar">
                <div class="action export-csv" @click=${this.downloadCsv}>
                    ${t$3`Export to CSV`}
                </div>
            </div>
        `}renderBodyLoader(){if(this.loading)return super.renderBodyLoader()}renderResponse(w){return x`
            <qrcg-custom-form-response-preview
                .response=${w}
                .loading=${!1}
            ></qrcg-custom-form-response-preview>
        `}renderFormResponses(){if(!(this.loading||isEmpty(this.data)))return this.data.map(w=>this.renderResponse(w))}renderEmptyMessgae(){if(!(isNotEmpty(this.data)||this.loading))return x`
            <div class="empty-message">${t$3`No responses could be found`}</div>
        `}renderTitle(){return t$3`Responses`}renderBody(){return[this.renderBodyLoader(),this.renderToolbar(),this.renderFormResponses(),this.renderEmptyMessgae()]}}CustomFormResponses.register();class FormBuilderWebPageDesignerConnector{#e="automatic-form-popup-enabled";#t=null;constructor(w){this.#t=w}#r(){return this.#t.qrcodeId}#s(){return this.#t.data.design[this.#e]==="enabled"}#i(){if(this.#s())return this.#c()}#n(){return this.#t.data.design.automatic_form_popup}showResponses=()=>{CustomFormResponses.open({formId:this.#n()})};#a(){return[new CusotmFormSettingsFieldModel("recepient_email",t$3`Recepient Email`,t$3`Enter email address`,t$3`Comma separated email addresses to receive form responses.`),new CusotmFormSettingsFieldModel("delay",t$3`Form Delay (Seconds)`,t$3`Enter delay`,t$3`Show automatic form after seconds.`,"number"),new CusotmFormSettingsFieldModel("button_text",t$3`Button Text`,t$3`Enter button text`),new CusotmFormSettingsFieldModel("header_image",t$3`Header Image`,t$3`Upload header image`,"","file")]}#c(){return x`
            <qrcg-form-builder
                name="automatic_form_popup"
                render-mode=${FormBuilder.RENDER_MODE_PLAIN}
                show-form-name-input
                type="qrcode.automatic_form_popup"
                .settings=${this.#a()}
                related-model="QRCode"
                related-model-id=${this.#r()}
            >
                ${t$3`Information Form`}

                <qrcg-button
                    slot="actions"
                    class="automatic-form-responses"
                    @click=${this.showResponses}
                >
                    <qrcg-icon mdi-icon=${mdiMenu}></qrcg-icon>
                    ${t$3`Responses`}
                </qrcg-button>
            </qrcg-form-builder>
        `}#o(w=null){return x`
            <qrcg-balloon-selector
                name="${this.#e}"
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
            >
                ${w}
            </qrcg-balloon-selector>
        `}renderInputs(){return x`
            ${this.#o(t$3`Automatic Form Popup`)}
            <!--  -->
            ${this.#i()}
        `}renderSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Automatic Form Popup`}</h2>

                ${this.#o()}

                <!--  -->

                ${this.#i()}

                <!--  -->
            </qrcg-form-section>
        `}}const style$1Q=":host{display:block;position:relative;box-sizing:border-box}@media(min-width:900px){:host{display:grid;grid-template-columns:calc(100% - 400px - 2rem) calc(400px + 1rem);grid-gap:1rem}}section,qrcg-form-section{border:solid .5rem var(--gray-0);padding:1rem;display:grid;grid-gap:1rem;margin-bottom:1rem}@media(max-width:900px){section,qrcg-form-section{padding:.5rem}}section:last-child,qrcg-form-section:last-child{margin-bottom:0}h2{color:var(--gray-2);margin:0 0 1rem}qrcg-webpage-preview{position:relative;z-index:10;transition:margin-top ease .2s;align-self:flex-start;box-sizing:border-box}@media(max-width:900px){qrcg-webpage-preview{margin-top:2rem}}.action-link{display:block;text-align:center;cursor:pointer}.automatic-form-responses{--button-color: var(--primary-0);--button-background-color: transparent;--button-background-color-hover: var(--gray-0);--button-outline-focus: var(--gray-1)}.automatic-form-responses qrcg-icon{color:var(--gray-2);margin-inline-end:.5rem;pointer-events:none}.automatic-form-responses::part(button){box-shadow:none;min-width:initial}qrcg-input,qrcg-range-input{max-width:50%}.feature-not-available-warning{background-color:#ff000014;border:1px solid red;color:#000;border-radius:.5rem;padding:.7rem 1rem}";class StackComponentModal extends ImageListModal{static tag="qrcg-stack-component-modal";getCurrentTab(){return this.data.tab}isCurrentTabNot(w){return this.getCurrentTab()!==w}renderSettingsTab(){return x`
            <div>
                <qrcg-input name="title" placeholder=${t$3`Enter title`}>
                    ${t$3`Title`}
                </qrcg-input>

                <qrcg-color-picker name="background_color">
                    ${t$3`Background Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="text_color">
                    ${t$3`Text Color`}
                </qrcg-color-picker>
            </div>
        `}renderBody(){return x`
            <!-- -->

            ${this.renderSettingsTab()}

            <qrcg-input name="sort_order" placeholder="10" type="number">
                ${t$3`Sort Order`}
            </qrcg-input>
        `}}StackComponentModal.register();class StackComponentInput extends ImageListInput{static tag="qrcg-stack-component-input";openItemModal(w){return StackComponentModal.open({data:w,qrcodeId:this.qrcodeId})}getItemName(w){return w.title}renderItemImage(){}}StackComponentInput.register();class WelcomeModalConfigs{data={};renderFields(){if(this.data.welcome_popup_enabled=="enabled")return x`
            ${this.renderFileInput({label:t$3`Video`,name:"welcome_modal_video",accept:".mp4,.mov"})}
            <!--  -->
            ${this.renderFileInput({label:t$3`Image`,name:"welcome_modal_image",accept:".jpg,.jpeg,.png"})}

            <qrcg-textarea
                name="welcome_modal_text"
                placeholder=${t$3`Text Content`}
            >
                ${t$3`Text Content (HTML accepted)`}
            </qrcg-textarea>

            <qrcg-input name="welcome_modal_show_times" type="number">
                ${t$3`Show Times`}
                <div slot="instructions">
                    ${t$3`Specify how many times the pop up should show`}
                </div>
            </qrcg-input>
        `}renderFileInput({label:w,name:q,instructions:D,accept:Q}){const O=q.split(".");return Q||(Q=`.${O[O.length-1]}`),x`
            <qrcg-file-input name="${q}" accept=${Q}>
                ${t$3(w)}
                ${D?x` <div slot="instructions">${t$3(D)}</div>`:null}
            </qrcg-file-input>
        `}render(w){return this.data=w,x`
            <qrcg-balloon-selector
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                name="welcome_popup_enabled"
            >
                ${t$3`Welcome Modal`}
            </qrcg-balloon-selector>

            ${this.renderFields()}
        `}}class FaviconInputs{qrcodeId=null;static withQRCodeId(w){const q=new this;return q.qrcodeId=w,q}render(){return[this.renderFileInput({label:t$3`Favicon PNG 96x96`,name:"favicon-96x96.png"}),this.renderFileInput({label:t$3`Web App Manifest 512x512`,name:"web-app-manifest-512x512.png"}),this.renderFileInput({label:t$3`Web App Manifest 192x192`,name:"web-app-manifest-192x192.png"}),this.renderFileInput({label:t$3`Favicon SVG`,name:"favicon.svg"}),this.renderFileInput({label:t$3`Apple Touch Icon 180x180`,name:"apple-touch-icon.png"}),this.renderFileInput({label:t$3`Favicon .ico`,name:"favicon.ico"}),this.renderFileInput({label:t$3`Open Graph Image`,name:"open_graph_image",instructions:"Smaller than 300 KB",accept:".png,.jpg,.jpeg"})]}renderFileInput(w,q,D,Q=""){if(typeof w=="object"){const U=w;w=U.name,q=U.label,D=U.instructions,Q=U.accept}const O=()=>{if(D)return x`<div slot="instructions">${D}</div>`};return x`
            <qrcg-file-input
                name="${w}"
                upload-endpoint="qrcodes/${this.qrcodeId}/webpage-design-file"
                accept="${Q}"
            >
                ${q}
                <!--  -->
                ${O()}
            </qrcg-file-input>
        `}}class WebpageDesigner extends BaseComponent{static EVENT_SAVE_COMPLETED="web-page-designer::save-completed";static styleSheets=[...super.styleSheets,style$1Q];routeParams=new QRCGRouteParamsController(this);formBuilder=new FormBuilderWebPageDesignerConnector(this);welcomeModal=new WelcomeModalConfigs;static data={design:{}};static EMPTY_DATA={design:{}};get data(){return WebpageDesigner.data}set data(w){WebpageDesigner.data=w,this.requestUpdate()}static get properties(){return{qrcodeId:{attribute:"qrcode-id"},qrcode:{},loading:{type:Boolean},translations:{}}}static get requestUiPositionalVariablesResetEventName(){return"webpage-designer:request-ui-positional-variables-reset"}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput),window.addEventListener("scroll",this.onScroll),document.addEventListener("qrcg-qrcode-form:save-completed",this.onQRCodeSaveCompleted),document.addEventListener(this.constructor.requestUiPositionalVariablesResetEventName,this.onUiPositionalVariablesResetRequested),this.qrcodeId=this.routeParams.getRouteParams().id,this.data=WebpageDesigner.EMPTY_DATA,this.fetchData(),this.fetchTranslations()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput),window.removeEventListener("scroll",this.onScroll),document.removeEventListener("qrcg-qrcode-form:save-completed",this.onQRCodeSaveCompleted),document.removeEventListener(this.constructor.requestUiPositionalVariablesResetEventName,this.onUiPositionalVariablesResetRequested)}onQRCodeSaveCompleted=()=>{this.refreshPreview()};onUiPositionalVariablesResetRequested=()=>{this.resetPosionalVariables()};onRouteParamChange(w){w.id&&w.id!=this.qrcodeId&&(this.qrcodeId=w.id,this.fetchData())}firstUpdated(){setTimeout(()=>{this.setInitialHeight()},1500)}setInitialHeight(){this.initialHeight=this.getBoundingClientRect().height}onScroll=()=>{matchMedia("(min-width: 900px)").matches&&this.movePreviewWithScroll()};resetPosionalVariables(){this.setInitialHeight(),this.lastWindowY=0}movePreviewWithScroll(){this.syncPreviewClone(),this.changePreviewPositionToFixed(),this.createPreviewStickingEffect()}createPreviewStickingEffect(){const w=this.shadowRoot.querySelector("qrcg-webpage-preview");if(!w)return;const q=this.getBoundingClientRect(),Q=this.getCalcCssValueInPx("calc(var(--dashboard-header-height) + 1rem)");Q>q.top?w.style.top=`${Q}px`:w.style.top=`${q.top}px`}getCalcCssValueInPx(w){const q=document.createElement("div");q.style.position="fixed",q.style.height=w,this.shadowRoot.appendChild(q);const D=getComputedStyle(q).getPropertyValue("height");return q.remove(),D.replace(/px/,"")}changePreviewPositionToFixed(){const w=this.shadowRoot.querySelector("qrcg-webpage-preview");if(!w||getComputedStyle(w).position=="fixed")return;const D=w.getBoundingClientRect();w.style.position="fixed",w.style.width=`${D.width}px`,w.style.height=`${D.height}px`,w.style.top=`${D.top}px`,w.style.left=`${D.left}px`}syncPreviewClone(){const w=this.shadowRoot.querySelector("qrcg-webpage-preview");if(!w)return;const q="preview-clone";let D=this.shadowRoot.querySelector(`#${q}`);D||(D=document.createElement("div")),D.id=q;const{width:Q}=w.getBoundingClientRect();D.style.width=`${Q}px`,D.style.gridRow="2",this.shadowRoot.insertBefore(D,w)}async fetchTranslations(){const{response:w}=await get("translations?is_active=true&paginate=false"),q=await w.json();this.translations=q.map(D=>D.is_default?{...D,name:"English"}:D),await this.updateComplete,setTimeout(()=>{this.syncInputs()},100)}async fetchData(){if(!isEmpty(this.qrcodeId)){this.loading=!0;try{await this.fetchQRCode();const{response:w}=await get(`qrcodes/${this.qrcodeId}/webpage-design`);if(isEmpty(await w.clone().text()))return;const q=await w.json();this.data=q,this.syncInputs()}catch{}finally{this.loading=!1}}}async fetchQRCode(){const{response:w}=await get(`qrcodes/${this.qrcodeId}`);this.qrcode=await w.json()}syncInputs(){const w=Array.from(this.shadowRoot.querySelectorAll("[name]"));for(const q of w)switch(q.tagName){case"QRCG-TEXTAREA":case"QRCG-INPUT":this.syncTextInput(q);break;case"QRCG-GRADIENT-INPUT":this.syncGradientInput(q);break;case"QRCG-CODE-INPUT":this.syncCodeInput(q);break;default:q.value=this.data.design[q.getAttribute("name")];break}}syncTextInput(w){isEmpty(w.value)&&(w.value=this.data.design[w.getAttribute("name")])}syncCodeInput(w){return this.syncTextInput(w)}syncGradientInput(w){w.value=this.data.design[w.getAttribute("name")]}onInput=w=>{w.stopImmediatePropagation(),w.preventDefault(),this.consumeInput(w),setTimeout(()=>{this.requestUpdate()},800)};async consumeInput(w){const q=w.composedPath()[0];switch(isEmpty(this.data.design)&&(this.data.design={}),this.data.design[w.detail.name]=w.detail.value,q.tagName){case"QRCG-GRADIENT-INPUT":this.consumeGradientInput(q);break}await this.saveData(),this.syncInputs(),this.refreshPreview()}consumeGradientInput(w){w.value=this.data.design[w.getAttribute("name")]}refreshPreview(){this.shadowRoot.querySelector("qrcg-webpage-preview")?.refresh()}saveData(){return clearTimeout(this.saveTimeout),new Promise(w=>{this.saveTimeout=setTimeout(async()=>{if(!isEmpty(this.data)){this.loading=!0;try{const{response:q}=await post(`qrcodes/${this.qrcodeId}/webpage-design`,this.data);this.data=await q.json(),w(),this.fireSaveCompletedEvent()}catch{}this.loading=!1}},500)})}fireSaveCompletedEvent(){document.dispatchEvent(new CustomEvent(WebpageDesigner.EVENT_SAVE_COMPLETED))}renderSections(){return x`${this.renderColorsAndBackgroundSection()}`}renderColorBackgroundPosition(w){}renderQRCodeLanguageInput(){if(this.translations&&!(this.translations.length<1))return x`
            <qrcg-balloon-selector
                .options=${this.translations.map(w=>({name:w.name,value:w.id}))}
                name="qrcode_language"
            >
                ${t$3`QR Code Language`}
            </qrcg-balloon-selector>
        `}renderSplashScreenInputs(){return x`
            <qrcg-balloon-selector
                name="splash_screen_enabled"
                .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
            >
                ${t$3`Splash Screen. Default (Disabled)`}
            </qrcg-balloon-selector>

            ${this.renderSplashScreenFileInput()}
        `}renderSplashScreenFileInput(){if(this.data.design.splash_screen_enabled=="enabled")return x`
            <qrcg-input
                name="splash_screen_timeout"
                type="number"
                placeholder="3"
            >
                ${t$3`Splash Screen Timeout. Default (3)`}
                <div slot="instructions">
                    ${t$3`Specify the timeout of the splash screen in seconds.`}
                </div>
            </qrcg-input>

            ${this.renderFileInput("splash_screen_logo",t$3`Splash Screen Logo`,t$3`Logo will be animated for 2 seconds before showing the page content`)}
        `}renderAddToHomeScreenButtonInputs(){if(this.data.design.add_to_home_screen_button=="enabled")return x`
            <qrcg-form-comment label=${t$3`Important`}>
                ${t$3`The button will only be visible when all favicons are added and the website is served under https.`}
            </qrcg-form-comment>
            <qrcg-input
                name="add_to_home_screen_button_text"
                placeholder=${t$3`Add to home screen`}
            >
                ${t$3`Button Text`}
            </qrcg-input>

            <qrcg-color-picker
                name="add_to_home_screen_button_background_color"
            >
                ${t$3`Background Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="add_to_home_screen_button_text_color">
                ${t$3`Text Color`}
            </qrcg-color-picker>

            <qrcg-color-picker
                name="add_to_home_screen_button_hover_background_color"
            >
                ${t$3`Hover Background Color`}
            </qrcg-color-picker>
        `}renderAddToHomeScreenButtonFields(){return x`
            <qrcg-balloon-selector
                name="add_to_home_screen_button"
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
            >
                ${t$3`Add To Home Screen Button`}

                <div slot="instructions">
                    ${t$3`Only works on Android, because iPhone has its own add to home screen button.`}
                </div>
            </qrcg-balloon-selector>

            ${this.renderAddToHomeScreenButtonInputs()}
        `}renderFileInput(w,q,D,Q=""){if(typeof w=="object"){const U=w;w=U.name,q=U.label,D=U.instructions,Q=U.accept}const O=()=>{if(D)return x`<div slot="instructions">${D}</div>`};return x`
            <qrcg-file-input
                name="${w}"
                upload-endpoint="qrcodes/${this.qrcodeId}/webpage-design-file"
                accept="${Q}"
            >
                ${q} ${O()}
            </qrcg-file-input>
        `}renderBannerImageInput(){return this.renderFileInput("backgroundImage",t$3`Banner Image`,t$3`Recommended size`+" 700x400")}renderBannerVideoInput(){return this.renderFileInput("backgroundVideo",t$3`Banner Video`)}renderBackgroundImageInput(){return[this.renderBannerImageInput(),this.renderBannerVideoInput()]}renderColorsBackgroundSectionTitle(){return t$3`Colors and Background`}renderFaviconInput(){return x`
            <qrcg-balloon-selector
                name="favicon_enabled"
                .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
            >
                ${t$3`Favicon Enabled`}
            </qrcg-balloon-selector>

            ${this.renderFaviconIfNeeded()}
        `}renderSeoInput(){return x`
            <qrcg-balloon-selector
                name="meta_attributes_enabled"
                .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
            >
                ${t$3`Meta Attributes`}
            </qrcg-balloon-selector>

            ${this.renderAllSeoInputs()}
        `}renderAllSeoInputs(w=!1){const q=this.data?.design?.meta_attributes_enabled!="enabled";if(!(!w&&q))return x`
            <qrcg-textarea
                name="meta_description"
                placeholder=${t$3`Enter meta description here ...`}
            >
                ${t$3`Meta Description`}
            </qrcg-textarea>

            <qrcg-textarea
                name="meta_keywords"
                placeholder=${t$3`Enter meta keywords here ...`}
            >
                ${t$3`Meta Keywords`}
            </qrcg-textarea>
        `}renderFaviconIfNeeded(){if(this.data?.design?.favicon_enabled=="enabled")return this.renderAllFaviconInputs()}renderAllFaviconInputs(){return FaviconInputs.withQRCodeId(this.qrcodeId).render()}renderDesktopCustomizationInput(){return x`
            <qrcg-balloon-selector
                name="desktop_customizations"
                .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
            >
                ${t$3`Desktop Customization`}
            </qrcg-balloon-selector>

            ${this.renderDesktopCustomizationAllInputs()}
        `}renderDesktopCustomizationAllInputs(){if(this.data.design.desktop_customizations=="enabled")return x`
            ${this.renderFileInput("desktop_left_image",t$3`Left Image`,null,".jpg,.jpeg,.png,.svg,.gif")}
            ${this.renderFileInput("desktop_right_image",t$3`Right Image`,null,".jpg,.jpeg,.png,.svg,.gif")}

            <qrcg-color-picker name="desktop_left_color">
                ${t$3`Left Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="desktop_right_color">
                ${t$3`Right Color`}
            </qrcg-color-picker>
        `}renderStackInput(){return x`
            <qrcg-balloon-selector
                name="stack_enabled"
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
            >
                ${t$3`Stack Layout`}
            </qrcg-balloon-selector>

            ${this.renderStackComponentInput()}
        `}renderStackComponentInput(){if(this.data.design.stack_enabled==="enabled")return x`
            <qrcg-stack-component-input
                name="stack_data"
            ></qrcg-stack-component-input>
        `}renderIconsColorsInput(){return x`
            <qrcg-color-picker name="iconsColor">
                ${t$3`Icons Color`}
            </qrcg-color-picker>
        `}renderDefaultColorsInputs(){return x`
            <qrcg-color-picker name="backgroundColor">
                ${t$3`Background Color`}
            </qrcg-color-picker>

            ${this.renderIconsColorsInput()}

            <qrcg-color-picker name="textColor">
                ${t$3`Text Color`}
            </qrcg-color-picker>
        `}renderReviewSitesSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Review Sites`}</h2>

                <qrcg-review-sites-input
                    name="review_sites"
                    .qrcodeId=${this.qrcodeId}
                >
                </qrcg-review-sites-input>
            </qrcg-form-section>
        `}renderInformationPopupFields(){if(this.data.design.information_popup_enabled=="enabled")return x`
            <qrcg-input
                name="information_popup_link_text"
                placeholder="${t$3`More information`}"
            >
                ${t$3`Link Text`}
            </qrcg-input>

            <qrcg-input name="information_popup_title">
                ${t$3`Popup Title`}
            </qrcg-input>

            <qrcg-textarea
                name="information_popup_content"
                placeholder="${t$3`Add information here.`}"
            >
                <div slot="instructions">
                    ${t$3`Any additional information can be added here, html is accepted.`}
                </div>
                ${t$3`Popup Content`}
            </qrcg-textarea>
        `}renderInformationPopupInput(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Information Popup`}</h2>

                <qrcg-balloon-selector
                    name="information_popup_enabled"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                    <div slot="instructions">
                        ${t$3`Show popup with plain text that can include any information.`}
                    </div>
                    ${t$3`Enable Information Popup?`}
                </qrcg-balloon-selector>

                ${this.renderInformationPopupFields()}
            </qrcg-form-section>
        `}renderCustomCodeInput(){if(!(featureAllowed("designer.hide-custom-code-input")&&!isSuperAdmin()))return x`
            <qrcg-balloon-selector
                name="custom_code_enabled"
                .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
            >
                ${t$3`Custom Code. (Default disabled)`}
            </qrcg-balloon-selector>

            ${this.renderCustomCodeInputFields()}
        `}renderCustomCodeInputFields(){if(this.data.design.custom_code_enabled==="enabled")return x`
            <qrcg-code-input name="custom_code" language="html">
                <span slot="label">
                    ${t$3`Custom HTML Code (at the bottom of the page)`}
                </span>
            </qrcg-code-input>
        `}renderColorsAndBackgroundSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">
                    ${this.renderColorsBackgroundSectionTitle()}
                </h2>

                ${this.renderColorBackgroundPosition("start")}
                <!--  -->
                ${this.renderBackgroundImageInput()}

                <!-- -->
                ${this.renderFaviconInput()}

                <!--  -->
                ${this.renderSeoInput()}
                <!--  -->
                ${this.renderDefaultColorsInputs()}
                <!--  -->
                ${this.renderColorBackgroundPosition("last-elements")}
            </qrcg-form-section>
        `}renderShareButtonInputs(){if(this.data.design.share_button_enabled==="enabled")return x`
            <qrcg-input name="share_button_text" placeholder=${t$3`Enter text`}>
                ${t$3`Share Button Text`}
            </qrcg-input>

            <qrcg-color-picker name="share_button_text_color">
                ${t$3`Text Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="share_button_background_color">
                ${t$3`Background Color`}
            </qrcg-color-picker>
        `}renderShareOverlayInputs(){return x`
            <qrcg-balloon-selector
                name="share-overlay-enabled"
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
            >
                ${t$3`Share Overlay`}
            </qrcg-balloon-selector>
        `}renderShareButtonSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Share Button`}</h2>

                <qrcg-balloon-selector
                    name="share_button_enabled"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                </qrcg-balloon-selector>

                ${this.renderShareButtonInputs()}
            </qrcg-form-section>
        `}renderFeatureNotAvailableWarning(w){if(!featureAllowed(w))return x`
            <div class="feature-not-available-warning">
                ${t$3`This feature is not available in your plan.`}
            </div>
        `}renderAnimatePreviewField(){return x`
            <qrcg-balloon-selector
                name="animate_preview"
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
            >
                ${t$3`Preview Animation`}
                <div slot="instructions">
                    ${t$3`If enabled, the page will scroll from top to bottom automatically showing its content.`}
                </div>
            </qrcg-balloon-selector>

            <qrcg-balloon-selector
                name="animate_preview_one_cycle"
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
            >
                ${t$3`One Cycle Preview Animation`}
                <div slot="instructions">
                    ${t$3`If enabled, the page will scroll down and then up without infinite scrolling.`}
                </div>
            </qrcg-balloon-selector>
        `}render(){return x`
            <div class="sections">${this.renderSections()}</div>

            <qrcg-webpage-preview
                qrcode-id=${this.qrcodeId}
            ></qrcg-webpage-preview>
        `}}class QrcgBusinessProfilePortfolioModal extends ImageListModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];renderInputs(){return x`
            <qrcg-input name="caption" placeholder="${t$3`Project name`}">
                ${t$3`Caption (Optional)`}
            </qrcg-input>

            <qrcg-textarea
                name="description"
                placeholder="${t$3`Project description`}"
            >
                ${t$3`Description`}
            </qrcg-textarea>

            <qrcg-input name="url" placeholder=${t$3`https://...`}>
                ${t$3`URL (optional)`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-business-profile-portfolio-modal",QrcgBusinessProfilePortfolioModal);class QrcgBusinessProfilePortfolioInput extends ImageListInput{static get properties(){return{...super.properties}}getItemName(w){return w.caption}openItemModal(w){return QrcgBusinessProfilePortfolioModal.open({data:w,qrcodeId:this.qrcodeId})}}window.defineCustomElement("qrcg-business-profile-portfolio-input",QrcgBusinessProfilePortfolioInput);class BusinessProfileWebpageDesigner extends WebpageDesigner{updated(w){w.has("data")&&this.forceUpdate()}async forceUpdate(){this.requestUpdate(),await this.updateComplete,setTimeout(()=>{this.syncInputs()})}renderLogoSection(){return x`
            <section>
                <h2>${t$3`Business Logo`}</h2>

                <qrcg-file-input
                    name="logo"
                    upload-endpoint="qrcodes/${this.qrcodeId}/webpage-design-file"
                >
                    ${t$3`Logo`}
                </qrcg-file-input>

                ${this.renderQRCodeLanguageInput()}
            </section>
        `}renderPortfolioSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Portfolio`}</h2>

                <qrcg-input
                    name="portfolio_section_title"
                    placeholder=${t$3`Our Products`}
                >
                    ${t$3`Section Title`}
                </qrcg-input>
                <qrcg-business-profile-portfolio-input
                    name="portfolio"
                    qrcode-id=${this.qrcodeId}
                ></qrcg-business-profile-portfolio-input>
            </qrcg-form-section>
        `}renderAdvancedSection(){return x`
            <section>
                <h2 class="section-title">${t$3`Advanced`}</h2>

                ${this.renderCustomCodeInput()}
                <!--  -->
                ${this.renderDesktopCustomizationInput()}
            </section>
        `}renderLeadformSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Lead Form`}</h2>

                <qrcg-lead-form-input
                    name="lead_form_id"
                    related_model="QRCodeWebPageDesign"
                    related_model_id="${this.data.id}"
                ></qrcg-lead-form-input>
            </qrcg-form-section>
        `}renderSections(){return x`
            ${super.renderSections()}
            <!-- -->
            ${this.renderLogoSection()}
            <!-- -->
            ${this.renderLeadformSection()}
            <!-- -->
            ${this.renderPortfolioSection()}
            <!--  -->
            ${this.renderReviewSitesSection()}
            <!--  -->
            ${this.renderInformationPopupInput()}

            <!-- -->
            ${this.renderAdvancedSection()}
        `}}window.defineCustomElement("qrcg-business-profile-webpage-designer",BusinessProfileWebpageDesigner);class BusinessProfileDesigner extends BaseTypeDesigner{webPageDesignerElementName(){return"qrcg-business-profile-webpage-designer"}}window.defineCustomElement("qrcg-business-profile-designer",BusinessProfileDesigner);class BusinessProfileType extends BaseQRCodeType{static qrcodeType(){return"business-profile"}renderTypeDesigner(){return x`
            <qrcg-business-profile-designer></qrcg-business-profile-designer>
        `}}const style$1P=":host{display:block;border:.5rem solid var(--gray-0);padding:1rem;margin-bottom:1rem;position:relative;max-height:calc(var(--actual-height, 99999999rem) + 5rem);overflow:hidden;min-height:5rem}@media(max-width:900px){:host{padding:.5rem}}:host(.animating){transition:max-height ease .5s}*::slotted(.section-title){margin-top:0;color:var(--gray-2);font-size:1.2rem}*::slotted(.instructions){font-size:.8rem;padding:.5rem;background-color:var(--gray-0);margin-bottom:.5rem;line-height:1.7}:host(:not([expanded])){max-height:calc(var(--title-height) + 3rem);overflow:hidden}qrcg-icon{position:absolute;inset-inline-end:1rem;inset-block-start:1rem;height:2rem;width:2rem;padding:.5rem;z-index:10;color:var(--dark);background-color:var(--gray-0);cursor:pointer}";class QrcgFormSection extends BaseComponent{static tag="qrcg-form-section";static styleSheets=[...super.styleSheets,style$1P];static EVENT_REQUEST_SET_EXPANDED="qrcg-form-section::request-set-expanded";static EVENT_REQUEST_HEIGHT_RECALCULATE="qrcg-form-section::request-height-recalculate";static get properties(){return{...super.properties,expanded:{type:Boolean,reflect:!0},nonExpandable:{type:Boolean,reflect:!0,attribute:"non-expandable"}}}static recalculateHeights(){document.dispatchEvent(new CustomEvent(this.EVENT_REQUEST_HEIGHT_RECALCULATE))}constructor(){super(),this.expanded=!0,this.isExpandReady=!1,this.nonExpandable=!1,this.minimized=!1}connectedCallback(){super.connectedCallback(),document.addEventListener(QrcgFormSection.EVENT_REQUEST_SET_EXPANDED,this.onSetExpandedRequested),document.addEventListener(QrcgFormSection.EVENT_REQUEST_HEIGHT_RECALCULATE,this.onHeightRecalculateRequested),this.addEventListener("on-input",this.onChildInput)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener(QrcgFormSection.EVENT_REQUEST_SET_EXPANDED,this.onSetExpandedRequested),document.removeEventListener(QrcgFormSection.EVENT_REQUEST_HEIGHT_RECALCULATE,this.onHeightRecalculateRequested),this.removeEventListener("on-input",this.onChildInput)}firstUpdated(){setTimeout(()=>{this.calculateCssVariables()},100),setTimeout(()=>{this.calculateCssVariables()},500),setTimeout(()=>{this.calculateCssVariables(),this.isExpandReady=!0,setInterval(()=>{this.calculateCssVariables()},1e3)},2e3)}onHeightRecalculateRequested=()=>{this.recalculateHeight()};async setExpanded(w){this.isExpandReady&&(this.classList.add("animating"),this.expanded=w,await this.waitForTransition(this),this.classList.remove("animating"))}onSetExpandedRequested=w=>{this.setExpanded(w.detail.expanded)};onChildInput=async()=>{this.recalculateHeight()};recalculateHeight=async()=>{await sleep(0),this.resetCssVariables(),await sleep(0),this.calculateCssVariables()};resetCssVariables(){this.style=""}calculateCssVariables(){if(this.nonExpandable||!this.expanded)return;this.style="";const w=this.querySelector(".section-title"),{height:q}=w.getBoundingClientRect();this.style.setProperty("--title-height",`${q}px`);const{height:D}=this.getBoundingClientRect();this.style.setProperty("--actual-height",`${D}px`)}onExpandToggleClick(){this.setExpanded(!this.expanded)}renderExpandIcon(){if(!this.nonExpandable)return x`
            <qrcg-icon
                mdi-icon=${mdiUnfoldMoreHorizontal}
                @click=${this.onExpandToggleClick}
            ></qrcg-icon>
        `}render(){return[this.renderExpandIcon(),x` <slot></slot> `]}}QrcgFormSection.register();const style$1O=":host{display:block}qrcg-loader{position:absolute;right:-1rem;bottom:-.65rem;transform:scale(.3)}.missing-api-key-warning{margin:1rem 0;padding:1rem;background-color:#ff020012;color:red;border-radius:.5rem;border:1px solid red}";class QrcgGooglePlaceInput extends BaseComponent{static tag="qrcg-google-place-input";static styleSheets=[...super.styleSheets,style$1O];inputController=new FormInputController(this,FormInputController.MODE_BASE64);static get properties(){return{errors:{type:Array},name:{},value:{},loadingMapsLibrary:{type:Boolean},apiKeyError:{type:Boolean}}}get onMapsLoadedGlobalCallbackName(){return"qrcgGooglePlaceInputOnMapsLoaded"}constructor(){super(),this.errors=[],this.loadingMapsLibrary=!0}connectedCallback(){super.connectedCallback(),window[this.onMapsLoadedGlobalCallbackName]=this.onMapsScriptLoaded,this.googlePlacesApiIsLoaded()||this.loadMapsLibrary()}disconnectedCallback(){super.disconnectedCallback(),this.autocomplete&&this.autocomplete.unbindAll()}firstUpdated(){setTimeout(()=>{this.initMapsLibrary()})}updated(w){w.has("value")&&setTimeout(()=>{this.bindLocalInputValueIfNeeded()},100)}bindLocalInputValueIfNeeded(){isEmpty(this.value)||this.inputElement&&isEmpty(this.inputElement?.value)&&(this.inputElement.value=this.value.place_name)}googlePlacesApiIsLoaded(){return!!get$1(window,"google.maps.places")}async getGoogleApiKey(){try{const{response:w}=await post("qrcode-types/google-review",{method:"getGoogleMapsApiKey"}),{api_key:q}=await w.json();if(isEmpty(q))throw new Error(t$3`Google Api Key not provided`);return q}catch{return this.errors.push([t$3`Google API Key not provided`]),this.apiKeyError=!0,null}}initMapsLibrary(){this.requestUpdate(),this.googlePlacesApiIsLoaded()&&this.inputElement&&(this.autocomplete||(this.autocomplete=new window.google.maps.places.Autocomplete(this.inputElement),this.autocomplete.addListener("place_changed",this.onPlaceChanged),this.loadingMapsLibrary=!1))}onMapsScriptLoaded=()=>{setTimeout(()=>{this.initMapsLibrary()},10)};get inputElement(){return this.shadowRoot.querySelector("qrcg-input").shadowRoot.querySelector("input")}onPlaceChanged=()=>{try{const{place_id:w}=this.autocomplete.getPlace(),q=this.inputElement.value;this.setValue({place_id:w,place_name:q})}catch(w){console.error(w)}};setValue(w){this.value=w,this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:this.value}}))}serializeValue(w){return!w||typeof w!="object"?null:w?.place_id}async loadMapsLibrary(){let w=null;try{w=await this.getGoogleApiKey()}catch{return}const q=document.createElement("script");q.async=!0,q.src=`https://maps.googleapis.com/maps/api/js?key=${w}&libraries=places&callback=${this.onMapsLoadedGlobalCallbackName}&loading=async`,document.body.appendChild(q)}preventDefaultOnInput(w){w.preventDefault(),w.stopImmediatePropagation(),this.inputElement.dispatchEvent(new Event("click"))}renderLoader(){if(!this.googlePlacesApiIsLoaded())return x` <qrcg-loader></qrcg-loader> `}renderMissingApiKeyWarning(){if(this.apiKeyError&&isSuperAdmin())return x`
            <div class="missing-api-key-warning">
                ${t$3`No API Key is provided.`} ${t$3`Go to the`}
                <a
                    href="/dashboard/system/settings?tab-id=advanced"
                    target="_blank"
                >
                    ${t$3`settings`}
                </a>
                ${t$3`page and then add your API key under Integrations > Google API Key.`}
            </div>
        `}render(){const w=this.loadingMapsLibrary?t$3`Loading ...`:t$3`Start typing ...`;return x`
            <qrcg-input
                placeholder="${w}"
                @on-input=${this.preventDefaultOnInput}
                .errors=${this.errors}
                ?disabled=${this.loadingMapsLibrary||this.apiKeyError}
            >
                ${t$3`Select Your Business`}
                <div slot="input-actions">${this.renderLoader()}</div>
            </qrcg-input>

            ${this.renderMissingApiKeyWarning()}
        `}}QrcgGooglePlaceInput.register();class QrcgGoogleReviewForm extends BaseTypeForm{static styles=[super.styles,i$3`
            qrcg-form-section {
                margin-top: 1rem;
            }

            qrcg-google-place-input {
            }
        `];connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}render(){return x`
            <qrcg-form-comment>
                ${t$3`Collect Google Reviews`}
            </qrcg-form-comment>
            <qrcg-form>
                <qrcg-form-section>
                    <h2 class="section-title">
                        ${t$3`Select Business & URL Type`}
                    </h2>

                    <qrcg-google-place-input
                        name="place"
                    ></qrcg-google-place-input>

                    <qrcg-balloon-selector
                        name="url_type"
                        .options=${[{name:t$3`Google My Business Page`,value:"my-business"},{name:t$3`Review List`,value:"review-list"},{name:t$3`Review Request`,value:"review-request"}]}
                    >
                        ${t$3`Type`}
                    </qrcg-balloon-selector>
                </qrcg-form-section>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-google-review-form",QrcgGoogleReviewForm);class GoogleReviewDesigner extends BaseTypeDesigner{render(){return x` <qrcg-bound-qrcode-designer></qrcg-bound-qrcode-designer> `}}window.defineCustomElement("qrcg-google-review-designer",GoogleReviewDesigner);class GoogleReviewType extends BaseQRCodeType{static qrcodeType(){return"google-review"}renderTypeDesigner(){return x`
            <qrcg-google-review-designer></qrcg-google-review-designer>
        `}}class QRCGRestarutantMenuForm extends BaseTypeForm{static styles=[super.styles,i$3`
            qrcg-form-section {
                margin-top: 1rem;
            }
        `];constructor(){super(),this.data.contactFields=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.watchCustomFieldDelete)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.watchCustomFieldDelete)}renderOpeningHoursInput(){if(this.data.opening_hours_enabled=="enabled")return x`
            <qrcg-business-hours-input name="opening_hours">
                ${t$3`Opening Hours Settings`}
            </qrcg-business-hours-input>
        `}render(){return x`
            <qrcg-form-comment>
                ${t$3`Create your digital menu easily, no design skills are required.`}
            </qrcg-form-comment>
            <qrcg-form>
                <qrcg-form-section>
                    <h2 class="section-title">${t$3`Restaurant Details`}</h2>
                    <qrcg-input
                        name="restaurant_name"
                        placeholder=${t$3`Enter name`}
                    >
                        ${t$3`Restaurant Name`}
                    </qrcg-input>

                    <qrcg-input name="phone"> ${t$3`Phone`} </qrcg-input>

                    <qrcg-input name="email" type="email">
                        ${t$3`Email`}
                    </qrcg-input>

                    <qrcg-input name="review_url" placeholder="https://....">
                        ${t$3`Review URL`}
                    </qrcg-input>

                    <qrcg-input name="website" placeholder="https://....">
                        ${t$3`Website`}
                    </qrcg-input>

                    <qrcg-input name="address" placeholder=${t$3`Enter address`}>
                        ${t$3`Address`}
                    </qrcg-input>

                    <qrcg-input name="maps_url" placeholder=${t$3`Enter address`}>
                        ${t$3`Maps URL`}
                        <div slot="instructions">
                            ${t$3`Could be Google maps URL, or any other maps URL.`}
                        </div>
                    </qrcg-input>

                    <qrcg-balloon-selector
                        name="opening_hours_enabled"
                        .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                    >
                        ${t$3`Opening Hours`}
                    </qrcg-balloon-selector>

                    ${this.renderOpeningHoursInput()}

                    <qrcg-textarea
                        name="socialProfiles"
                        placeholder="https://youtube.com/...&#10;https://twitter.com/...&#10;https://instagram.com/...."
                    >
                        ${t$3`Social Profiles`}

                        <div slot="instructions">
                            ${t$3`Add each social media link in a new line`}
                        </div>
                    </qrcg-textarea>
                </qrcg-form-section>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-restaurant-menu-form",QRCGRestarutantMenuForm);class QrcgRestaurantMenuCategoryModal extends QrcgModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            [name] {
                margin-bottom: 1rem;
            }

            .content-view {
                max-height: 50vh;
                overflow: auto;
            }
        `];static get properties(){return{data:{}}}static open({data:w,categories:q}={}){const D=new QrcgRestaurantMenuCategoryModal;return w&&(D.data=w),q&&(D.categories=q),document.body.appendChild(D),D.open()}constructor(){super(),this.data={id:"category-"+new Date().getTime()}}connectedCallback(){super.connectedCallback(),document.addEventListener("keyup",this.watchEnter),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keyup",this.watchEnter),this.removeEventListener("on-input",this.onInput)}onInput=w=>{this.data={...this.data,[w.detail.name]:w.detail.value}};parentCategoryOptions(){return this.categories instanceof Array?this.categories.filter(w=>w.id!=this.data.id&&!w.parent_id):[]}updated(w){w.has("data")&&this.syncInputs()}inputs(){return Array.from(this.shadowRoot.querySelectorAll("[name]"))}syncInputs(){for(const w of Object.keys(this.data)){const q=this.$input(w);q&&(q.value=this.data[w])}}$input(w){return this.shadowRoot.querySelector(`[name=${w}]`)}affiramtivePromise(){if(this.resetValidationErrors(),!this.validateInputs())throw new Error("Inputs has invalid values")}inputNames(){return Array.from(this.shadowRoot.querySelectorAll("[name]")).map(w=>w.getAttribute("name"))}validateInputs(){let w=!0;for(const q of this.inputNames()){const D=this.data[q],O=this.$input(q).hasAttribute("required");if(isEmpty(D)&&O){w=!1;const U=t$3(ucfirst(titleCase(q).toLowerCase()))+" "+t$3`is required`;this.$input(q).errors=[U]}}return w}resetValidationErrors(){this.inputs().forEach(w=>w.errors=[])}resolvedData(){return this.data}watchEnter=w=>{if(w.key==="Enter")return this.onAffirmativeClick()};renderTitle(){return this.categorySlug?t$3`Edit Category`:t$3`Add Category`}renderBody(){return x`
            <div class="content-view">
                <qrcg-input name="name" placeholder=${t$3`Breakfast`} required>
                    ${t$3`Category Name`}
                </qrcg-input>

                <qrcg-input
                    name="servingHours"
                    placeholder=${t$3`Serving Hours (Optional)`}
                >
                    ${t$3`Serving Hours`}
                </qrcg-input>

                <qrcg-color-picker name="backgroundColor" required>
                    ${t$3`Background Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="textColor" required>
                    ${t$3`Text Color`}
                </qrcg-color-picker>

                <qrcg-select name="parent_id">
                    ${this.parentCategoryOptions().map(w=>x` <option value=${w.id}>${w.name}</option> `)}
                    <span slot="label"> ${t$3`Parent Category (Optional)`} </span>
                </qrcg-select>

                <qrcg-balloon-selector
                    name="available"
                    .options=${[{name:t$3`Yes`,value:"yes"},{name:t$3`No`,value:"no"}]}
                >
                    ${t$3`Available. Default (Yes).`}
                </qrcg-balloon-selector>

                <qrcg-input name="sort_order" placeholder="10" type="number">
                    ${t$3`Sort Order`}
                </qrcg-input>
            </div>
        `}}window.defineCustomElement("qrcg-restarurant-menu-category-modal",QrcgRestaurantMenuCategoryModal);class QrcgMenuCategoryInput extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            qrcg-button.add-category {
                margin: auto;
                margin-top: 2rem;
                width: fit-content;
            }

            .color-box span {
                display: block;
                width: 1rem;
                height: 1rem;
                border: 1px solid var(--gray-2);
                border-radius: 0.25rem;
                margin-right: 0.5rem;
            }

            .color-box.background-color {
                margin-right: 1rem;
            }

            .color-box {
                display: flex;
                align-items: center;
            }

            .category {
                display: flex;
                padding: 1rem;
                background-color: var(--gray-0);
                margin: 1rem 0;
                align-items: center;
                user-select: none;
                -webkit-user-select: none;
                flex-wrap: wrap;
            }

            .category .category-name {
                flex: 1;
                font-weight: bold;
            }

            .actions {
                display: flex;
                align-items: center;
                margin-left: 1rem;
            }

            @media (max-width: 900px) {
                .category .category-name {
                    flex: 100%;
                    margin-bottom: 2rem;
                }
            }

            @media (max-width: 515px) {
                .actions {
                    margin-top: 1rem;
                }
            }

            .actions qrcg-button:not(:last-child) {
                margin-right: 0.5rem;
            }

            .actions qrcg-button:not(:first-child) {
                margin-left: 0.5rem;
            }

            .actions qrcg-button::part(button) {
                font-size: 0.8rem;
                padding: 0.5rem;
                min-width: 0;
            }

            .empty-message {
                margin: 2rem 0 0 0;
                text-align: center;
                color: var(--gray-2);
            }
        `];static get properties(){return{name:{},value:{type:Array},loading:{type:Boolean}}}constructor(){super(),this.value=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}updated(w){w.has("value")&&this.updateComplete.then(()=>{this.requestPositionalVariablesReset()})}requestPositionalVariablesReset(){document.dispatchEvent(new CustomEvent(WebpageDesigner.requestUiPositionalVariablesResetEventName))}onClick(w){const q=w.composedPath()[0],D=parentMatches(q,".action-button.edit");if(D)return this.onEditMenuCategoryClick(D);const Q=parentMatches(q,".action-button.delete");if(Q)return this.onDeleteMenuCategoryClick(Q)}async onEditMenuCategoryClick(w){const q=w.category;try{const D=await this.openMenuCategoryModal(q);this.fireEditCategory(D)}catch{}}openMenuCategoryModal(w){return QrcgRestaurantMenuCategoryModal.open({data:w,categories:this.value})}async onDeleteMenuCategoryClick(w){const q=w.category;try{await confirm$1({message:x`${t$3`Are you sure you want to delete`}
                    <strong>${q.name}</strong>?`}),this.fireDelete(q)}catch{}}async openModal(){try{const w=await this.openMenuCategoryModal();this.fireAddCategory(w)}catch{}}fireDelete(w){const q=this.value.filter(D=>D.id!=w.id);this.fireOnInput(q)}fireAddCategory(w){const q=[...this.value??[],w];this.fireOnInput(q)}fireEditCategory(w){const q=this.value.map(D=>D.id===w.id?w:D);this.fireOnInput(q)}fireOnInput(w){this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:w}}))}sortedCategories(){return this.value.sort(function(w,q){return parseNumberValue(w.sort_order,100)-parseNumberValue(q.sort_order,100)})}renderCategories(){if(!isEmpty(this.value))return this.sortedCategories().map(w=>x` <div class="category">
                <div class="category-name">${w.name}</div>

                <div class="color-box background-color">
                    <span
                        style="background-color: ${w.backgroundColor}"
                    ></span>
                    ${t$3`Background Color`}
                </div>

                <div class="color-box text-color">
                    <span
                        style="background-color: ${w.textColor}"
                    ></span>

                    ${t$3`Text Color`}
                </div>

                <div class="actions">
                    <qrcg-button
                        class="action-button edit"
                        transparent
                        .category=${w}
                        ?disabled=${this.loading}
                    >
                        ${t$3`Edit`}
                    </qrcg-button>
                    <qrcg-button
                        class="action-button delete"
                        transparent
                        .category=${w}
                        ?disabled=${this.loading}
                    >
                        ${t$3`Delete`}
                    </qrcg-button>
                </div>
            </div>`)}renderEmptyCategoriesMessage(){if(isEmpty(this.value))return x`
            <div class="empty-message">
                ${t$3`There are no menu categories. Click on Add Category button below.`}
            </div>
        `}render(){return x`
            ${this.renderEmptyCategoriesMessage()} ${this.renderCategories()}

            <qrcg-button
                class="add-category"
                transparent
                @click=${this.openModal}
                ?loading=${this.loading}
            >
                ${t$3`Add Category`}
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-restaurant-menu-category-input",QrcgMenuCategoryInput);const style$1N="[name]{margin-bottom:1rem}";class QrcgRestaurantMenuItemModal extends QrcgModal{static tag="qrcg-restarurant-menu-item-modal";static styleSheets=[...super.styleSheets,style$1N];static get properties(){return{data:{},categories:{type:Array},qrcodeId:{},allergens:{type:Array}}}static open({data:w,categories:q,qrcodeId:D,allergens:Q}={}){const O=new QrcgRestaurantMenuItemModal;return w&&(O.data=w),O.categories=q,O.qrcodeId=D,O.allergens=Q,document.body.appendChild(O),O.open()}constructor(){super(),this.data={id:"item-"+new Date().getTime()},this.categories=[]}connectedCallback(){super.connectedCallback(),document.addEventListener("keyup",this.watchEnter),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keyup",this.watchEnter),this.removeEventListener("on-input",this.onInput)}onInput=w=>{this.data={...this.data,[w.detail.name]:w.detail.value}};updated(w){w.has("data")&&this.syncInputs()}inputs(){return Array.from(this.shadowRoot.querySelectorAll("[name]"))}syncInputs(){for(const w of Object.keys(this.data)){const q=this.$input(w);q&&(q.value=this.data[w])}}$input(w){return this.shadowRoot.querySelector(`[name=${w}]`)}affiramtivePromise(){if(this.resetValidationErrors(),!this.validateInputs())throw new Error("Inputs has invalid values")}inputNames(){return Array.from(this.shadowRoot.querySelectorAll("[name]")).map(w=>w.getAttribute("name"))}validateInputs(){let w=!0;for(const q of this.inputNames()){const D=this.data[q],O=this.$input(q).hasAttribute("required");if(isEmpty(D)&&O){w=!1;const U=t$3(ucfirst(titleCase(q).toLowerCase()))+" "+t$3`is required`;this.$input(q).errors=[U]}}return w}resetValidationErrors(){this.inputs().forEach(w=>w.errors=[])}resolvedData(){return this.data}watchEnter=w=>{if(!parentMatches(w.target,"textarea")&&w.key==="Enter")return this.onAffirmativeClick()};getCategories(){if(!(this.categories instanceof Array))return[];const w=q=>this.categories.find(D=>D.id===q.parent_id);return this.categories.map(q=>{let D=q.name;return q.parent_id&&(D=`${w(q).name} > ${D}`),{...q,name:D}})}getAllergens(){return this.allergens instanceof Array?this.allergens:[]}renderTitle(){return this.categorySlug?t$3`Edit Item`:t$3`Add Item`}renderBody(){return x`
            <div class="content-view">
                <qrcg-file-input
                    name="image"
                    upload-endpoint="qrcodes/${this.qrcodeId}/webpage-design-file"
                >
                    ${t$3`Image`}
                    <div slot="instructions">${t$3`Best size 700x500`}</div>
                </qrcg-file-input>

                <qrcg-input name="name" placeholder=${t$3`Item name`} required>
                    ${t$3`Item name`}
                </qrcg-input>

                <qrcg-input name="price" placeholder=${t$3`Item price`}>
                    ${t$3`Price`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="category"
                    required
                    .options=${this.getCategories().map(w=>({name:w.name,value:w.id}))}
                >
                    ${t$3`Category`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="allergens"
                    multiple
                    .options=${this.getAllergens().map(w=>({name:w.name,value:w.id}))}
                >
                    ${t$3`Allergens`}
                </qrcg-balloon-selector>

                <qrcg-textarea
                    name="ingredients"
                    placeholder=${t$3`Add item ingredients here.`}
                >
                    ${t$3`Ingredients / Details`}
                </qrcg-textarea>

                <qrcg-balloon-selector
                    name="layout"
                    .options=${[{name:t$3`Vertical (large)`,value:"vertical"},{name:t$3`Horizontal`,value:"horizontal"}]}
                >
                    ${t$3`Layout`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="available"
                    .options=${[{name:t$3`Yes`,value:"yes"},{name:t$3`No`,value:"no"}]}
                >
                    ${t$3`Available.  Default (Yes).`}
                </qrcg-balloon-selector>

                <qrcg-input name="sort_order" placeholder="10" type="number">
                    ${t$3`Sort Order`}
                </qrcg-input>
            </div>
        `}}QrcgRestaurantMenuItemModal.register();class QrcgFileImage extends i$1{static PLACEHOLDER='<svg viewBox="0 0 490.00201 489.99771" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g id="g828" transform="translate(-105,-35.002094)"><path id="path826" d="m 465.85,333.09 c -3.1445,-3.1562 -7.3711,-4.9961 -11.82,-5.1484 -4.4531,-0.14844 -8.793,1.4062 -12.141,4.3438 l -45.184,39.691 40.512,34.738 c 3.7266,2.9531 6.0898,7.2969 6.5469,12.031 0.4571,4.7341 -1.0352,9.4492 -4.1289,13.062 -3.0937,3.6128 -7.5234,5.8086 -12.27,6.0859 -4.75,0.27734 -9.4023,-1.3906 -12.898,-4.6172 l -138.74,-119 c -3.3516,-2.8672 -7.6602,-4.3633 -12.066,-4.1914 -4.4058,0.1719 -8.582,2 -11.699,5.1211 l -146.96,147.04 v 10.254 c 0,13.926 5.5312,27.277 15.375,37.125 9.8477,9.8438 23.199,15.375 37.125,15.375 h 385 c 13.926,0 27.277,-5.5312 37.125,-15.375 9.8438,-9.8477 15.375,-23.199 15.375,-37.125 v -11.023 z M 227.2,290.5 c 9.3789,-9.3086 21.91,-14.754 35.113,-15.262 13.203,-0.51172 26.113,3.957 36.18,12.516 l 71.363,61.164 49,-42.98 0.004,-0.004 c 10.031,-8.7656 23.016,-13.402 36.332,-12.969 13.316,0.42969 25.973,5.8984 35.418,15.297 L 595,412.122 V 87.502094 c 0,-13.926 -5.5312,-27.277 -15.375,-37.125 -9.8477,-9.8438 -23.199,-15.375 -37.125,-15.375 h -385 c -13.926,0 -27.277,5.5312 -37.125,15.375 -9.8438,9.8477 -15.375,23.199 -15.375,37.125 V 412.75209 Z M 385,105 c 18.566,0 36.371,7.375 49.496,20.504 C 447.625,138.629 455,156.434 455,175 c 0,18.566 -7.375,36.371 -20.504,49.496 C 421.371,237.625 403.566,245 385,245 366.434,245 348.629,237.625 335.504,224.496 322.375,211.371 315,193.566 315,175 c 0,-18.566 7.375,-36.371 20.504,-49.496 C 348.629,112.375 366.434,105 385,105 Z"/></g></svg>';static styles=[i$3`
            :host {
                display: flex;
                align-items: center;
                justify-content: center;
                position: relative;
                color: var(--gray-1);
            }

            :host([loading]) {
                background-color: var(--gray-1);
                border-radius: 0.25rem;
            }

            img {
                max-width: 100%;
                max-height: 100%;
            }

            svg path {
                fill: currentColor;
            }

            qrcg-loader {
                transform: translate(-50%, -50%) scale(0.4);
                position: absolute;
                top: 50%;
                left: 50%;
                color: var(--dark);
            }

            @media (min-width: 3000px) {
                qrcg-loader {
                    transform: translate(-50%, -50%) scale(1.5);
                }
            }
        `];static get properties(){return{fileId:{attribute:"file-id"},fileSrc:{},fetchEndpoint:{attribute:"fetch-endpoint"},loading:{type:Boolean,reflect:!0}}}constructor(){super(),this.loading=!0,this.fetchEndpoint="files"}firstUpdated(){this.fileId||(this.loading=!1)}updated(w){w.has("fileId")&&this.fetchFile()}async fetchFile(){if(this.fileId){this.loading=!0;try{const q=(await FileModel.fromRemote(this.fileId,{fetchEndpoint:this.fetchEndpoint})).directLink("inline");await this.loadImage(q),this.fileSrc=q}catch{}this.loading=!1}}loadImage(w){const q=document.createElement("img");return new Promise(D=>{q.onload=()=>{q.onload=null,q.remove(),D()},q.src=w})}render(){return this.loading?u$3`
                <div part="loader">
                    <qrcg-loader></qrcg-loader>
                </div>
            `:!this.fileSrc&&!this.loading?u$3`${s$3(this.constructor.PLACEHOLDER)}`:u$3`<img src="${this.fileSrc??""}" part="img" />`}}window.defineCustomElement("qrcg-file-image",QrcgFileImage);const style$1M=":host{display:block}qrcg-button.add-item{margin:auto;margin-top:2rem;width:fit-content}.item-image{width:3rem;height:3rem;margin-right:1rem;background-color:#fff}.item-price{margin-right:1rem}.color-box span{display:block;width:1rem;height:1rem;border:1px solid var(--gray-2);border-radius:.25rem;margin-right:.5rem}.color-box.background-color{margin-right:1rem}.color-box{display:flex;align-items:center}.item{display:flex;padding:.5rem 1rem;background-color:var(--gray-0);margin:1rem 0;align-items:center;user-select:none;-webkit-user-select:none;flex-wrap:wrap}.item .item-name{flex:1;font-weight:700}@media(max-width:900px){.item .item-name{flex:none}}.actions{display:flex;align-items:center;margin-left:1rem}.actions qrcg-button:not(:last-child){margin-right:.5rem}.actions qrcg-button:not(:first-child){margin-left:.5rem}.actions qrcg-button::part(button){font-size:.8rem;padding:.5rem;min-width:0}.empty-message{margin:2rem 0 0;text-align:center;color:var(--gray-2)}.search{display:flex;justify-content:space-between}.search.gt-three{flex-direction:column;justify-content:unset}[name=search_name]{margin-right:2rem}@media(max-width:900px){.search{flex-direction:column;justify-content:unset}}.stats{height:1rem;margin:.5rem 0;font-size:.8rem;color:var(--gray-2)}qrcg-switch{margin-inline-end:1rem}",style$1L=":host{position:relative;border-radius:2rem;width:3rem;height:1.3rem;border:1px solid var(--gray-2);cursor:pointer;background-color:#fff;-webkit-tap-highlight-color:transparent}:host([disabled]){opacity:.3;pointer-events:none}.circle{width:1.5rem;height:1.5rem;border-radius:50%;border:1px solid var(--gray-2);position:absolute;inset-inline-start:.1rem;background-color:var(--gray-1);top:50%;transform:translateY(-50%);transition:all .3s ease}:host([checked]) .circle{background-color:var(--success-0);border-color:var(--success-0);inset-inline-start:calc(100% - 1.6rem)}";class Switch extends BaseInput{static tag="qrcg-switch";static styleSheets=[...super.styleSheets,style$1L];static get properties(){return{...super.properties,checkedValue:{attribute:"checked-value"},uncheckedValue:{attribute:"unchecked-value"}}}constructor(){super(),this.checkedValue=null,this.uncheckedValue=null}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}isChecked(){return this.hasAttribute("checked")}getCheckedValue(){return this.checkedValue?this.checkedValue:!0}getUncheckedValue(){return this.uncheckedValue?this.uncheckedValue:!1}syncValue(){this.value==this.getCheckedValue()?this.setAttribute("checked",""):this.removeAttribute("checked")}setChecked(w){w?this.setAttribute("checked",""):this.removeAttribute("checked"),w?this.setValue(this.getCheckedValue()):this.setValue(this.getUncheckedValue()),this._fireOnInput()}toggleChecked(){this.setChecked(!this.isChecked())}onClick(){this.toggleChecked()}render(){return x` <div class="circle"></div> `}}Switch.register();const style$1K="",style$1J=":host{position:fixed;inset:0;width:100vw;height:var(--available-height, 100vh);--border-radius: 1rem;z-index:1000;animation:reveal-host .3s ease both}@keyframes reveal-host{0%{background-color:transparent}to{background-color:var(--overlay-background-color, rgba(0, 0, 0, .372))}}.container{position:fixed;top:var(--top);left:var(--left, unset);right:var(--right, unset);width:var(--width);background-color:#fff;box-shadow:.5rem .5rem 2rem #0000001a;border-radius:var(--border-radius);animation:container-reveal .5s ease both}@keyframes container-reveal{0%{opacity:0;transform:translateY(1rem)}to{opacity:1;transform:translateY(0)}}.content{border-radius:var(--border-radius);overflow:hidden}.item{padding:.65rem;cursor:pointer}.item:not(:last-child){border-bottom:3px solid var(--gray-0)}.item:hover{background-color:var(--gray-0)}";class QrcgDropdown extends BaseComponent{static tag="qrcg-dropdown";static styleSheets=[...super.styleSheets,style$1J];static BIND_POINT_BOTTOM_LEFT="bind-point::bottom-left";static BIND_POINT_BOTTOM_RIGHT="bind-point::bottom-right";static BIND_POINT_RIGHT="bind-point::right";bindPoint=QrcgDropdown.BIND_POINT_BOTTOM_LEFT;target=null;dropDownContent=null;contentStyles=null;onClickHandler=null;constructor(){super()}static get properties(){return{...super.properties}}static withTarget(w){const q=new this;return q.target=w,q}withContent(w){return isFunction(w)&&(w=w()),this.dropDownContent=w,this}withContentStyles(w){return this.contentStyles=w,this}withBindPoint(w){return this.bindPoint=w,this}injectContentStyles(){this.contentStyles&&this.injectStyleString(this.contentStyles)}async open(){return document.body.appendChild(this),await this.updateComplete,B(this.dropDownContent,this.$(".content")),this.injectContentStyles(),this.syncTarget(),this}getWidth(){return remToPx(15)}syncBottomLeftBindPoint(){const w=this.target.getBoundingClientRect(),q=w.bottom+remToPx(1);this.setCssVar("--top",q+"px"),this.setCssVar("--left",w.left+"px"),this.setCssVar("--width",this.getWidth()+"px")}syncBottomRightBindPoint(){const w=this.target.getBoundingClientRect(),q=w.bottom+remToPx(1);this.setCssVar("--top",q+"px"),this.setCssVar("--right",`calc(100vw - ${w.right+"px"})`),this.setCssVar("--width",this.getWidth()+"px")}syncRightBindPoint(){const w=this.target.getBoundingClientRect(),q=w.top;let D=w.right+remToPx(1);D+this.getWidth()>window.innerWidth&&(D=w.left-remToPx(1)-this.getWidth()),this.setCssVar("--top",q+"px"),this.setCssVar("--left",D+"px"),this.setCssVar("--width",this.getWidth()+"px")}syncTarget(){switch(this.bindPoint){case QrcgDropdown.BIND_POINT_BOTTOM_LEFT:return this.syncBottomLeftBindPoint();case QrcgDropdown.BIND_POINT_RIGHT:return this.syncRightBindPoint();case QrcgDropdown.BIND_POINT_BOTTOM_RIGHT:return this.syncBottomRightBindPoint()}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),window.addEventListener("scroll",this.onWindowScroll)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),window.removeEventListener("scroll",this.onWindowScroll)}onWindowScroll=()=>{this.remove()};withOnClickHandler(w){return this.onClickHandler=w,this}onClick(w){this.remove(),isFunction(this.onClickHandler)&&this.onClickHandler(w,this)}setCssVar(w,q){const D=document.createElement("style");D.classList.add("css-var"),D.innerHTML=`:host { ${w}: ${q}; }`,this.shadowRoot.appendChild(D)}renderContent(){}render(){return x`
            <div class="container">
                <div class="content"></div>
            </div>
        `}}QrcgDropdown.register();const dropdownStyles="";class Trigger extends QRCGButton{static tag="qrcg-product-item-sort-trigger";static styleSheets=[...super.styleSheets,style$1K];static get EVENT_SORT_CHANGED(){return`${this.tag}::sort-changed`}static SORT_NAME_ASC="name,asc";static SORT_NAME_DESC="name,desc";static SORT_PRICE_ASC="price,asc";static SORT_PRICE_DESC="price,desc";static currentSort=this.SORT_NAME_ASC;constructor(){super(),this.dropdown=null}connectedCallback(){super.connectedCallback(),this.classList.add("elegant")}onSortItemClick=w=>{const D=w.composedPath()[0].getAttribute("sort");Trigger.currentSort=D,document.dispatchEvent(new CustomEvent(Trigger.EVENT_SORT_CHANGED,{detail:{sort:D}}))};async onClick(){this.dropdown=await QrcgDropdown.withTarget(this).withContent(()=>this.renderDropdownContent()).withBindPoint(QrcgDropdown.BIND_POINT_BOTTOM_RIGHT).withContentStyles(dropdownStyles).open()}renderDropdownContent(){return x`
            <div
                class="item"
                sort="${Trigger.SORT_NAME_ASC}"
                @click=${this.onSortItemClick}
            >
                ${t$3`Name (A-Z)`}
            </div>
            <div
                class="item"
                sort="${Trigger.SORT_NAME_DESC}"
                @click=${this.onSortItemClick}
            >
                ${t$3`Name (Z-A)`}
            </div>
            <div
                class="item"
                sort="${Trigger.SORT_PRICE_ASC}"
                @click=${this.onSortItemClick}
            >
                ${t$3`Price (ASC)`}
            </div>
            <div
                class="item"
                sort="${Trigger.SORT_PRICE_DESC}"
                @click=${this.onSortItemClick}
            >
                ${t$3`Price (DESC)`}
            </div>
        `}renderContent(){return x`
            <qrcg-icon mdi-icon=${mdiSort}></qrcg-icon>

            <span>${t$3`Sort`}</span>
        `}}Trigger.register();class ItemSorter{items=[{sort_order:null}];static withItems(w){isNotArray(w)&&(w=[]);const q=new this;return q.items=w,q}sort(){return this.items=this.items.sort(this.sortItems),this.syncSortOrder(),this.items}syncSortOrder(){this.items=this.items.map((w,q)=>(w.sort_order=q,w))}sortItems=(w,q)=>{switch(Trigger.currentSort){case Trigger.SORT_NAME_ASC:return w.name.localeCompare(q.name);case Trigger.SORT_NAME_DESC:return-1*w.name.localeCompare(q.name);case Trigger.SORT_PRICE_ASC:return w.price-q.price;case Trigger.SORT_PRICE_DESC:return q.price-w.price;default:return w.name.localeCompare(q.name)}}}class QrcgMenuItemInput extends BaseComponent{static tag="qrcg-restaurant-menu-item-input";static styleSheets=[...super.styleSheets,style$1M];static get properties(){return{name:{},value:{type:Array},loading:{type:Boolean},categories:{type:Array},qrcodeId:{},search:{},allergens:{type:Array}}}constructor(){super(),this.value=[],this.categories=[],this.search={},this.allergens=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.addEventListener("on-input",this.onInput),document.addEventListener(Trigger.EVENT_SORT_CHANGED,this.onSortChanged)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),this.removeEventListener("on-input",this.onInput),document.removeEventListener(Trigger.EVENT_SORT_CHANGED,this.onSortChanged)}onSortChanged=()=>{this.value=ItemSorter.withItems(this.value).sort(),this.fireOnInput(this.value)};updated(w){w.has("value")&&this.updateComplete.then(()=>{this.syncSwitches()})}onClick(w){const q=w.composedPath()[0],D=parentMatches(q,".action-button.edit");if(D)return this.onEditClick(D);const Q=parentMatches(q,".action-button.delete");if(Q)return this.onDeleteMenuCategoryClick(Q)}async onInput(w){if(w.detail.name!==this.name){if(w.preventDefault(),w.stopPropagation(),w.detail.name==="available")return this.onModeChanged(w);this.search[w.detail.name]=w.detail.value,this.requestUpdate(),await this.updateComplete,this.didSyncSwitches=!1,this.syncSwitches()}}onModeChanged(w){const q=w.detail.value,Q=w.composedPath()[0].closest(".item").model;Q.available!=q&&(Q.available=q,this.fireEditEvent(Q))}getSwitches(){return this.$$("qrcg-switch")}syncSwitches(){this.didSyncSwitches||(isNotEmpty(this.getSwitches())&&(this.didSyncSwitches=!0),this.getSwitches().forEach(w=>{const q=w.closest(".item").model;q.available==="yes"||isEmpty(q.available)?w.setChecked(!0):w.setChecked(!1)}))}async onEditClick(w){const q=w.item;try{const D=await this.openItemModal(q);this.fireEditEvent(D)}catch{}}async onDeleteMenuCategoryClick(w){const q=w.item;try{await confirm$1({message:x`${t$3`Are you sure you want to delete`}
                    <strong>${q.name}</strong>?`}),this.fireDelete(q)}catch{}}canAddNewItem(){if(!shouldEnforceSubscriptionRules())return!0;const w=currentPlan().number_of_restaurant_menu_items;return w==-1?!0:w>(this.value||[]).length}async openAddItemModal(){if(!this.canAddNewItem()){try{await confirm$1({title:t$3`Limit Reached`,message:t$3`You have reached your plan limits, you will have to upgrade to add more items.`,affirmativeText:t$3`Upgrade Now`}),window.location=ConfigHelper.pricingPlansUrl()}catch{}return}try{const w=await this.openItemModal();this.fireAddCategory(w),setTimeout(()=>{this.didSyncSwitches=!1,this.syncSwitches()},2e3)}catch{}}getCategories(){return this.categories?this.categories:[]}openItemModal(w){return QrcgRestaurantMenuItemModal.open({data:w,categories:this.getCategories(),qrcodeId:this.qrcodeId,allergens:this.allergens})}fireDelete(w){const q=this.value.filter(D=>D.id!=w.id);this.fireOnInput(q)}fireAddCategory(w){const q=[...this.value??[],w];this.fireOnInput(q)}fireEditEvent(w){const q=this.value.map(D=>D.id===w.id?w:D);this.fireOnInput(q)}fireOnInput(w){this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:w}}))}getCategoryById(w){return this.getCategories().find(q=>q.id==w)}sortedItems(){return this.value.sort(function(w,q){return parseNumberValue(w.sort_order,100)-parseNumberValue(q.sort_order,100)})}applySearch(w){if(!isEmpty(this.search.search_name))try{w=w.filter(q=>q.name.match(new RegExp(this.search.search_name,"i")))}catch{}return!isEmpty(this.search.search_category)&&this.search.search_category!="_all_"&&(w=w.filter(q=>q.category===this.search.search_category)),w}renderItems(){if(!isEmpty(this.value))return this.applySearch(this.sortedItems()).map(w=>x`
                <div class="item" .model=${w}>
                    <qrcg-file-image
                        file-id=${w.image}
                        class="item-image"
                    ></qrcg-file-image>

                    <qrcg-switch
                        name="available"
                        checked-value="yes"
                        unchecked-value="no"
                    ></qrcg-switch>

                    <div class="item-name">${w.name}</div>

                    <div class="item-price">${w.price}</div>

                    <div class="item-category">
                        ${this.getCategoryById(w.category)?.name}
                    </div>

                    <div class="actions">
                        <qrcg-button
                            class="action-button edit"
                            transparent
                            .item=${w}
                            ?disabled=${this.loading}
                        >
                            ${t$3`Edit`}
                        </qrcg-button>
                        <qrcg-button
                            class="action-button delete"
                            transparent
                            .item=${w}
                            ?disabled=${this.loading}
                        >
                            ${t$3`Delete`}
                        </qrcg-button>
                    </div>
                </div>
            `)}renderEmptyItemsMessage(){if(isEmpty(this.value))return x`
            <div class="empty-message">
                ${t$3`There are no menu items. Click on Add Item button below.`}
            </div>
        `}categoriesToSearchIn(){return[{name:t$3`All Categories`,value:"_all_"},...this.getCategories().map(w=>({name:w.name,value:w.id}))]}renderSearchActions(){if(!isEmpty(this.value))return x`
            <div
                class=${e$1({"gt-three":this.categoriesToSearchIn().length>3,search:!0})}
            >
                <qrcg-input
                    name="search_name"
                    placeholder=${t$3`Search name`}
                ></qrcg-input>

                <qrcg-balloon-selector
                    name="search_category"
                    .options=${this.categoriesToSearchIn()}
                ></qrcg-balloon-selector>
            </div>
        `}renderStats(){if(isEmpty(this.value))return;const w=this.applySearch(this.value).length,q=this.value.length;return w!=q?t$3`Showing ${w} out of ${q} items.`:t$3`Showing ${q} items.`}render(){return x`
            ${this.renderEmptyItemsMessage()}
            <!-- -->
            ${this.renderSearchActions()}

            <div class="stats">${this.renderStats()}</div>

            <!-- -->
            ${this.renderItems()}

            <qrcg-button
                class="add-item"
                transparent
                @click=${this.openAddItemModal}
                ?loading=${this.loading}
            >
                ${t$3`Add Item`}
            </qrcg-button>
        `}}QrcgMenuItemInput.register();class QrcgFoodAllergensModal extends QrcgModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            [name] {
                margin-bottom: 1rem;
            }

            .content-view {
                max-height: 50vh;
                overflow: auto;
            }

            .body {
                line-height: unset;
            }
        `];static get properties(){return{data:{},qrcodeId:{}}}static open({data:w,qrcodeId:q}={}){const D=new QrcgFoodAllergensModal;return w&&(D.data=w),q&&(D.qrcodeId=q),document.body.appendChild(D),D.open()}constructor(){super(),this.data={id:"food-allergens-"+new Date().getTime()}}connectedCallback(){super.connectedCallback(),document.addEventListener("keyup",this.watchEnter),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keyup",this.watchEnter),this.removeEventListener("on-input",this.onInput)}onInput=w=>{this.data={...this.data,[w.detail.name]:w.detail.value}};updated(w){w.has("data")&&this.syncInputs()}inputs(){return Array.from(this.shadowRoot.querySelectorAll("[name]"))}syncInputs(){for(const w of Object.keys(this.data)){const q=this.$input(w);q&&(q.value=this.data[w])}}$input(w){return this.shadowRoot.querySelector(`[name=${w}]`)}affiramtivePromise(){if(this.resetValidationErrors(),!this.validateInputs())throw new Error("Inputs has invalid values")}inputNames(){return Array.from(this.shadowRoot.querySelectorAll("[name]")).map(w=>w.getAttribute("name"))}validateInputs(){let w=!0;for(const q of this.inputNames()){const D=this.data[q],O=this.$input(q).hasAttribute("required");if(isEmpty(D)&&O){w=!1;const U=t$3(ucfirst(titleCase(q).toLowerCase()))+" "+t$3`is required`;this.$input(q).errors=[U]}}return w}resetValidationErrors(){this.inputs().forEach(w=>w.errors=[])}resolvedData(){return this.data}watchEnter=w=>{if(w.key==="Enter")return this.onAffirmativeClick()};renderTitle(){return t$3`Food Allergens`}renderBody(){return x`
            <div class="content-view">
                <qrcg-file-input
                    name="icon"
                    upload-endpoint="qrcodes/${this.qrcodeId}/webpage-design-file"
                >
                    ${t$3`Icon`}
                </qrcg-file-input>

                <qrcg-input name="name" placeholder=${t$3`Milk`} required>
                    ${t$3`Name`}
                </qrcg-input>

                <qrcg-input name="sort_order" placeholder="10" type="number">
                    ${t$3`Sort Order`}
                </qrcg-input>
            </div>
        `}}window.defineCustomElement("qrcg-food-allergens-modal",QrcgFoodAllergensModal);class QrcgFoodAllergensInput extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            qrcg-button.add-food-allergens {
                margin: auto;
                margin-top: 2rem;
                width: fit-content;
            }

            .color-box span {
                display: block;
                width: 1rem;
                height: 1rem;
                border: 1px solid var(--gray-2);
                border-radius: 0.25rem;
                margin-right: 0.5rem;
            }

            .color-box.background-color {
                margin-right: 1rem;
            }

            .color-box {
                display: flex;
                align-items: center;
            }

            .allergen {
                display: flex;
                padding: 1rem;
                background-color: var(--gray-0);
                margin: 1rem 0;
                align-items: center;
                user-select: none;
                -webkit-user-select: none;
            }

            .allergen .allergen-name {
                flex: 1;
                font-weight: bold;
            }

            .allergen-icon {
                width: 3rem;
                height: 3rem;
                margin-right: 1rem;

                background-color: white;
            }

            .actions {
                display: flex;
                align-items: center;
                margin-left: 1rem;
            }

            .actions qrcg-button:not(:last-child) {
                margin-right: 0.5rem;
            }

            .actions qrcg-button:not(:first-child) {
                margin-left: 0.5rem;
            }

            .actions qrcg-button::part(button) {
                font-size: 0.8rem;
                padding: 0.5rem;
                min-width: 0;
            }

            .empty-message {
                margin: 2rem 0 0 0;
                text-align: center;
                color: var(--gray-2);
            }
        `];static get properties(){return{name:{},value:{type:Object},loading:{type:Boolean},qrcodeId:{}}}constructor(){super(),this.value={items:[],displayIconText:"both"}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),this.removeEventListener("on-input",this.onInput)}onInput(w){w.detail.name!==this.name&&(w.stopImmediatePropagation(),w.preventDefault(),this.fireOnInput({...this.value,[w.detail.name]:w.detail.value}))}updated(w){w.has("value")&&(this.syncInputs(),this.updateComplete.then(()=>{this.requestPositionalVariablesReset()}))}syncInputs(){this.shadowRoot.querySelectorAll("[name]").forEach(w=>w.value=this.value[w.getAttribute("name")])}requestPositionalVariablesReset(){document.dispatchEvent(new CustomEvent(WebpageDesigner.requestUiPositionalVariablesResetEventName))}onClick(w){const q=w.composedPath()[0],D=parentMatches(q,".action-button.edit");if(D)return this.onEditFoodAllergenClick(D);const Q=parentMatches(q,".action-button.delete");if(Q)return this.onDeleteFoodAllergenClick(Q)}async onEditFoodAllergenClick(w){const q=w.allergen;try{const D=await this.openFoodAllergenModal(q);this.fireEditAllergen(D)}catch{}}openFoodAllergenModal(w){return QrcgFoodAllergensModal.open({data:w,qrcodeId:this.qrcodeId})}async onDeleteFoodAllergenClick(w){const q=w.allergen;try{await confirm$1({message:x`${t$3`Are you sure you want to delete`}
                    <strong>${q.name}</strong>?`}),this.fireDelete(q)}catch{}}async openModal(){try{const w=await this.openFoodAllergenModal();this.fireAddAllergen(w)}catch{}}fireDelete(w){const q=this.items.filter(D=>D.id!=w.id);this.fireOnInput({...this.value,items:q})}fireAddAllergen(w){const q=[...this.items,w];this.fireOnInput({...this.value,items:q})}fireEditAllergen(w){const q=this.items.map(D=>D.id===w.id?w:D);this.fireOnInput({...this.value,items:q})}fireOnInput(w){this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:w}}))}get items(){return get$1(this.value,"items")instanceof Array?this.value.items:[]}sortedAllergens(){return this.items.sort(function(w,q){return parseNumberValue(w.sort_order,100)-parseNumberValue(q.sort_order,100)})}renderAllergens(){if(!isEmpty(this.items))return this.sortedAllergens().map(w=>x`
                <div class="allergen">
                    <qrcg-file-image
                        file-id=${w.icon}
                        class="allergen-icon"
                    ></qrcg-file-image>

                    <div class="allergen-name">${w.name}</div>

                    <div class="actions">
                        <qrcg-button
                            class="action-button edit"
                            transparent
                            .allergen=${w}
                            ?disabled=${this.loading}
                        >
                            ${t$3`Edit`}
                        </qrcg-button>
                        <qrcg-button
                            class="action-button delete"
                            transparent
                            .allergen=${w}
                            ?disabled=${this.loading}
                        >
                            ${t$3`Delete`}
                        </qrcg-button>
                    </div>
                </div>
            `)}renderEmptyAllergensMessage(){if(isEmpty(this.value))return x`
            <div class="empty-message">
                ${t$3`There are no food allergens. Click on Add Food Allergen button below.`}
            </div>
        `}renderDisplayIconTextInput(){if(isArray$1(get$1(this.value,"items"))&&!isEmpty(this.value.items))return x`
            <qrcg-balloon-selector
                name="displayIconText"
                .options=${[{name:t$3`Both`,value:"both"},{name:t$3`Icon`,value:"icon"},{name:t$3`Text`,value:"text"}]}
            >
                ${t$3`Display Preference. Default (Both)`}
            </qrcg-balloon-selector>
        `}render(){return x`
            ${this.renderEmptyAllergensMessage()}
            ${this.renderDisplayIconTextInput()}
            <!-- -->
            ${this.renderAllergens()}

            <qrcg-button
                class="add-food-allergens"
                transparent
                @click=${this.openModal}
                ?loading=${this.loading}
            >
                ${t$3`Add Food Allergen`}
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-food-allergens-input",QrcgFoodAllergensInput);const style$1I="*{box-sizing:border-box}.show-menu-item-image{margin-bottom:1rem}header{display:flex;align-items:center;justify-content:space-between}",style$1H="[name]{margin-bottom:1rem}qrcg-input{max-width:50%}";class ImageCarouselItemModal extends ImageListModal{static tag="qrcg-image-carousel-item-modal";static styleSheets=[...super.styleSheets];fileInputInstructions(){return t$3`Recommended size`+" 500x286"}}ImageCarouselItemModal.register();class ImageCarouselItemInput extends ImageListInput{static tag="qrcg-image-carousel-item-input";static styleSheets=[...super.styleSheets];openItemModal(w){return ImageCarouselItemModal.open({data:w})}}ImageCarouselItemInput.register();class ImageCarouselInput extends BaseComponent{static tag="qrcg-image-carousel-input";static styleSheets=[...super.styleSheets,style$1H];static get properties(){return{...super.properties,name:{},value:{}}}constructor(){super(),this.value={}}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput)}updated(w){w.has("value")&&this.syncInputsIfNeeded()}syncInputsIfNeeded(){isEmpty(this.value)||this.__didSyncInputs||(this.syncInputs(),this.__didSyncInputs=!0)}syncInputs(){Object.keys(this.value).map(q=>{const D=this.$(`[name="${q}"]`);D&&(D.value=this.value[q])})}onInput(w){const{name:q,value:D}=w.detail;q!==this.name&&(w.preventDefault(),w.stopImmediatePropagation(),this.updateField(q,D),this.lazilyNotifyInput())}updateField(w,q){(!this.value||typeof this.value!="object")&&(this.value={}),this.value[w]=q}lazilyNotifyInput(){clearTimeout(this.__notifyTimeout),this.__notifyTimeout=setTimeout(()=>{this.notifyInput()},1500)}notifyInput(){this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:this.value}}))}getSlidesToShowOptions(){return[{name:"1 "+t$3`Slide`,value:1},{name:"2 "+t$3`Slides`,value:2},{name:"3 "+t$3`Slides`,value:3}]}renderModeInput(){return x`
            <qrcg-balloon-selector
                name="mode"
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
            >
                ${t$3`Mode`}
            </qrcg-balloon-selector>
        `}render(){return x`
            ${this.renderModeInput()}

            <qrcg-balloon-selector
                name="loop"
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
            >
                ${t$3`Loop`}
            </qrcg-balloon-selector>

            <qrcg-balloon-selector
                name="auto_play"
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
            >
                ${t$3`Auto Play`}
            </qrcg-balloon-selector>

            <qrcg-balloon-selector
                name="slides_to_show"
                .options=${this.getSlidesToShowOptions()}
            >
                ${t$3`Slides To Show`}
            </qrcg-balloon-selector>

            <qrcg-input
                name="autoplay_interval"
                type="number"
                min="1"
                placeholder=${t$3`Enter Interval`}
            >
                ${t$3`Auto Play Interval (Seconds)`}
            </qrcg-input>

            <qrcg-balloon-selector
                name="navigation"
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
            >
                ${t$3`Navigation`}
            </qrcg-balloon-selector>

            <qrcg-color-picker name="navigation_color">
                ${t$3`Navigation Color`}
            </qrcg-color-picker>

            <qrcg-image-carousel-item-input name="items">
            </qrcg-image-carousel-item-input>
        `}}ImageCarouselInput.register();const style$1G=".lead-form{padding:1rem;border:2px solid black}.loader-container{display:flex;align-items:center;justify-content:center;padding:1rem}.empty-message{display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:1rem;gap:1rem}.select-container{display:flex;flex-direction:column}.select-container.hidden{display:none}.select-container qrcg-button{margin-top:1.5rem}.select-container qrcg-button qrcg-icon{margin-inline-end:0}.select-inner-container{gap:.5rem;display:flex;align-items:center}.select-inner-container qrcg-searchable-select{flex:1;margin-top:1rem}.links{display:flex;gap:.25rem;font-size:.8rem}.links a{font-size:.8rem}.links .create-qrcode-link{color:var(--gray-2)}.upgrade-message{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem;color:var(--gray-2);text-align:center}";class QRCodeSelector extends BaseComponent{static tag="qrcg-qrcode-selector";static styleSheets=[...super.styleSheets,style$1G];static get properties(){return{qrcodes:{type:Array},loading:{type:Boolean},name:{},value:{},type:{}}}connectedCallback(){super.connectedCallback(),this.fetchData()}disconnectedCallback(){super.disconnectedCallback()}getType(){return isEmpty(this.type)?"url":this.type}async fetchData(){this.loading=!0;const{json:w}=await get("qrcodes",{type:this.getType(),no_pagination:!0});this.qrcodes=w,this.requestUpdate(),this.loading=!1}getQRCodeOptions(){return isEmpty(this.qrcodes)?[]:this.qrcodes.map(w=>({name:w.name,id:w.id,value:w.id}))}renderLoaderContainer(){if(this.loading)return x`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderCreateLink(w=t$3`Create QR Code`){return x` <a
            href="/dashboard/qrcodes/new?type=${this.getType()}"
            target="_blank"
            class="create-qrcode-link"
        >
            ${w}
        </a>`}renderEmptyMessage(){if(!this.loading&&!isNotEmpty(this.qrcodes))return x`
            <div class="empty-message">
                ${t$3`No qrcodes could be found.`} ${this.renderCreateLink()}

                <qrcg-button class="elegant" @click=${this.fetchData}>
                    <qrcg-icon mdi-icon=${mdiRefresh}></qrcg-icon>
                    ${t$3`Refresh`}
                </qrcg-button>
            </div>
        `}getSelectedQRCodeId(){return this.$("qrcg-searchable-select")?.value??this.value}renderQRCodeSelector(){return x`
            <div
                class="${e$1({hidden:isEmpty(this.qrcodes),"select-container":!0})}"
            >
                <div class="select-inner-container">
                    <qrcg-searchable-select
                        .items=${this.getQRCodeOptions()}
                        .value=${this.value}
                        name=${this.name}
                        position-mode="relative"
                    >
                        <div slot="label">${t$3`Select QR Code`}</div>
                    </qrcg-searchable-select>

                    <qrcg-button @click=${this.fetchData} class="elegant">
                        <qrcg-icon mdi-icon=${mdiRefresh}> </qrcg-icon>
                    </qrcg-button>
                </div>

                <div class="links">
                    <a
                        href="/dashboard/qrcodes/edit/${this.getSelectedQRCodeId()}"
                        target="_blank"
                    >
                        ${t$3`Edit QR Code`}
                    </a>

                    ${t$3`or`} ${this.renderCreateLink(t$3`create new`)}
                </div>
            </div>
        `}renderUpgradeMessage(){return x`
            <div class="upgrade-message">
                ${t$3`Lead form type is not available, upgrade now to start creating lead forms.`}
                <qrcg-button
                    href="${ConfigHelper.pricingPlansUrl()}"
                    target="_blank"
                >
                    ${t$3`Upgrade Now`}
                </qrcg-button>
            </div>
        `}renderName(){return x` <slot></slot> `}render(){return currentPlanHasQrCodeType("upi-dynamic")?[this.renderName(),this.renderLoaderContainer(),this.renderEmptyMessage(),this.renderQRCodeSelector()]:this.renderUpgradeMessage()}}QRCodeSelector.register();class RestaurantMenuWebpageDesigner extends WebpageDesigner{static tag="qrcg-restaurant-menu-webpage-designer";static styleSheets=[...super.styleSheets,style$1I];static get properties(){return{...super.properties}}renderBackgroundImageInput(){return x`
            ${this.renderFileInput("logo",t$3`Logo`)}
            ${this.renderFileInput("background_image",t$3`Background Image`)}
        `}renderCategories(){return x``}renderCategoriesSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Categories`}</h2>

                <qrcg-restaurant-menu-category-input
                    name="categories"
                    ?loading=${this.loading}
                ></qrcg-restaurant-menu-category-input>
            </qrcg-form-section>
        `}renderItemSectionHeader(){if(!isEmpty(get$1(this.data,"design.menuItems"))&&isArray$1(this.data?.design?.menuItems))return x`
            <header>
                <qrcg-balloon-selector
                    class="show-menu-item-image"
                    name="showMenuItemImage"
                    .options=${[{name:t$3`Always`,value:"always"},{name:t$3`Only if Uploaded`,value:"only-if-uploaded"},{name:t$3`Do not Show Images`,value:"do-not-show-images"}]}
                >
                    ${t$3`Show Images. Default (Always)`}
                </qrcg-balloon-selector>

                <qrcg-product-item-sort-trigger></qrcg-product-item-sort-trigger>
            </header>
        `}renderPriceOptions(){return x`
            <qrcg-balloon-selector
                .options=${BalloonSelector.OPTIONS_YES_NO}
                name="show_prices"
            >
                ${t$3`Show Prices`}
                <div slot="instructions">
                    ${t$3`If disabled, prices will be hidden for all items`}
                </div>
            </qrcg-balloon-selector>
        `}renderItemsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Menu Items`}</h2>

                ${this.renderItemSectionHeader()}
                <!--  -->
                ${this.renderPriceOptions()}

                <qrcg-balloon-selector
                    name="line_separator"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                    ${t$3`Line Separator`}
                </qrcg-balloon-selector>

                <qrcg-restaurant-menu-item-input
                    name="menuItems"
                    .categories=${this.data?.design?.categories}
                    .qrcodeId=${this.qrcodeId}
                    .allergens=${get$1(this.data,"design.foodAllergens.items")}
                    ?loading=${this.loading}
                ></qrcg-restaurant-menu-item-input>
            </qrcg-form-section>
        `}renderFoodAllergensSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Food Allergens`}</h2>

                <qrcg-food-allergens-input
                    name="foodAllergens"
                    ?loading=${this.loading}
                    .qrcodeId=${this.qrcodeId}
                ></qrcg-food-allergens-input>
            </qrcg-form-section>
        `}renderColorsBackgroundSectionTitle(){return t$3`Front Page`}renderBackButtonStyles(){return x`
            <qrcg-color-picker name="back_button_background_color">
                ${t$3`Back Button Background Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="back_button_text_color">
                ${t$3`Back Button Text Color`}
            </qrcg-color-picker>
        `}renderColorBackgroundPosition(w){if(w=="last-elements")return x`
            ${this.renderBackButtonStyles()}

            <qrcg-input name="menu_name" placeholder=${t$3`Today's Menu`}>
                ${t$3`Menu Name`}
            </qrcg-input>

            <qrcg-range-input name="menu_name_font_size" show-value>
                ${t$3`Menu Name Font Size`}
            </qrcg-range-input>
        `}renderFaviconInput(){return x`
            ${super.renderFaviconInput()}

            <qrcg-balloon-selector
                name="background-gradient-effect"
                .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
            >
                ${t$3`Gradient Effect. Default (Enabled)`}
            </qrcg-balloon-selector>

            <qrcg-balloon-selector
                name="categories_animation"
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
            >
                ${t$3`Categories Animation`}
            </qrcg-balloon-selector>

            ${this.renderQRCodeLanguageInput()}
        `}renderAdvancedSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Advanced`}</h2>

                ${this.renderCustomCodeInput()}
                <!--  -->
                ${this.renderDesktopCustomizationInput()}
                <!--  -->
                ${this.renderShareOverlayInputs()}
            </qrcg-form-section>
        `}renderImageCarouselSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Image Carousel`}</h2>

                <qrcg-image-carousel-input
                    name="image_carousel"
                ></qrcg-image-carousel-input>
            </qrcg-form-section>
        `}renderWhatsAppOrderSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`WhatsApp Order`}</h2>

                ${this.renderFeatureNotAvailableWarning("whatsapp-order")}

                <div class="instructions">
                    ${t$3`Allow customers to place orders and receive orders via WhatsApp.`}
                </div>

                <qrcg-balloon-selector
                    name="whatsapp_order_enabled"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                </qrcg-balloon-selector>

                <qrcg-input
                    name="whatsapp_order_mobile_number"
                    placeholder=${t$3`Enter your mobile number`}
                >
                    ${t$3`Mobile Number`}

                    <div slot="instructions">
                        ${t$3`Orders will be received on this number`}
                    </div>
                </qrcg-input>

                <qrcg-qrcode-selector
                    name="whatsapp_upi_payment_qrcode_id"
                    type="upi-dynamic"
                >
                    ${t$3`UPI QR Code`}
                </qrcg-qrcode-selector>

                <qrcg-textarea
                    name="whatsapp_order_terms_conditions"
                    placeholder=${t$3`Enter terms and conditions.`}
                >
                    ${t$3`Terms and Conditions`}
                </qrcg-textarea>
            </qrcg-form-section>
        `}renderSections(){return x`
            ${super.renderSections()}
            <!-- -->
            ${this.renderCategoriesSection()}
            <!-- -->
            ${this.renderItemsSection()}
            <!-- -->
            ${this.renderFoodAllergensSection()}
            <!--  -->
            ${this.renderImageCarouselSection()}
            <!--  -->
            ${this.renderWhatsAppOrderSection()}
            <!--  -->
            ${this.renderReviewSitesSection()}
            <!--  -->
            ${this.renderInformationPopupInput()}
            <!--  -->
            ${this.renderAdvancedSection()}
        `}}RestaurantMenuWebpageDesigner.register();class RestaurantMenuDesigner extends BaseTypeDesigner{webPageDesignerElementName(){return"qrcg-restaurant-menu-webpage-designer"}}window.defineCustomElement("qrcg-restaurant-menu-designer",RestaurantMenuDesigner);class RestaurantMenuType extends BaseQRCodeType{static qrcodeType(){return"restaurant-menu"}renderTypeDesigner(){return x`
            <qrcg-restaurant-menu-designer></qrcg-restaurant-menu-designer>
        `}}class QrcgCustomFieldModal extends QrcgModal{static styles=[super.styles,i$3``];static get properties(){return{...super.properties,data:{}}}static open(){const w=new QrcgCustomFieldModal;return document.body.appendChild(w),w.open()}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput)}onInput(w){w.preventDefault(),w.stopPropagation(),this.data={...this.data,[w.detail.name]:w.detail.value}}resolvedData(){return this.data}renderTitle(){return t$3`Add Contact Method`}renderBody(){return x`
            <qrcg-input name="name" placeholder="E.g. WhatsApp">
                ${t$3`Method Name`}
            </qrcg-input>

            <qrcg-input name="value" placeholder="${t$3`Destination`}">
                ${t$3`Method Value`}
            </qrcg-input>

            <qrcg-input name="link" placeholder="${t$3`https://....`}">
                ${t$3`Optional Link`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-custom-field-modal",QrcgCustomFieldModal);class QrcgCustomLinksModal extends QrcgModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            [name] {
                margin-bottom: 1rem;
            }

            .content-view {
                max-height: 50vh;
                overflow: auto;
            }
        `];static get properties(){return{data:{}}}static open({data:w}={}){const q=new QrcgCustomLinksModal;return w&&(q.data=w),document.body.appendChild(q),q.open()}constructor(){super(),this.data={id:"custom-"+new Date().getTime()}}connectedCallback(){super.connectedCallback(),document.addEventListener("keyup",this.watchEnter),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keyup",this.watchEnter),this.removeEventListener("on-input",this.onInput)}onInput=w=>{this.data={...this.data,[w.detail.name]:w.detail.value}};updated(w){w.has("data")&&this.syncInputs()}inputs(){return Array.from(this.shadowRoot.querySelectorAll("[name]"))}syncInputs(){for(const w of Object.keys(this.data)){const q=this.$input(w);q&&(q.value=this.data[w])}}$input(w){return this.shadowRoot.querySelector(`[name=${w}]`)}affiramtivePromise(){if(this.resetValidationErrors(),!this.validateInputs())throw new Error("Inputs has invalid values")}inputNames(){return Array.from(this.shadowRoot.querySelectorAll("[name]")).map(w=>w.getAttribute("name"))}validateInputs(){let w=!0;for(const q of this.inputNames()){const D=this.data[q],O=this.$input(q).hasAttribute("required");if(isEmpty(D)&&O){w=!1;const U=t$3(ucfirst(titleCase(q).toLowerCase()))+" "+t$3`is required`;this.$input(q).errors=[U]}}return w}resetValidationErrors(){this.inputs().forEach(w=>w.errors=[])}resolvedData(){return this.data}watchEnter=w=>{if(w.key==="Enter")return this.onAffirmativeClick()};renderTitle(){return t$3`Custom Link`}renderBody(){return x`
            <div class="content-view">
                <qrcg-input name="text" placeholder=${t$3`My Website`} required>
                    ${t$3`Text`}
                </qrcg-input>

                <qrcg-input name="url" placeholder=${t$3`https://....`} required>
                    ${t$3`URL`}
                </qrcg-input>

                <qrcg-color-picker name="color">
                    ${t$3`Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="text_color">
                    ${t$3`Text Color`}
                </qrcg-color-picker>

                <qrcg-balloon-selector
                    name="target"
                    .options=${[{name:t$3`Same Window`,value:"self"},{name:t$3`New Window`,value:"_blank"}]}
                >
                    ${t$3`Open Link in (Default: Same Window)`}
                </qrcg-balloon-selector>

                <qrcg-input name="sort_order" placeholder="10" type="number">
                    ${t$3`Sort Order`}
                </qrcg-input>
            </div>
        `}}window.defineCustomElement("qrcg-custom-link-modal",QrcgCustomLinksModal);class QrcgCustomLinksInput extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            qrcg-button.add-item {
                margin: auto;
                margin-top: 2rem;
                width: fit-content;
            }

            .color-box span {
                display: block;
                width: 1rem;
                height: 1rem;
                border: 1px solid var(--gray-2);
                border-radius: 0.25rem;
                margin-right: 0.5rem;
            }

            .color-box.background-color {
                margin-right: 1rem;
            }

            .color-box {
                display: flex;
                align-items: center;
            }

            .item {
                display: flex;
                padding: 1rem;
                background-color: var(--gray-0);
                margin: 1rem 0;
                align-items: center;
                user-select: none;
                -webkit-user-select: none;
                flex-wrap: wrap;
            }

            .item .item-name {
                flex: 1;
                font-weight: bold;
            }

            .actions {
                display: flex;
                align-items: center;
                margin-left: 1rem;
            }

            @media (max-width: 900px) {
                .item .item-name {
                    flex: 100%;
                    margin-bottom: 2rem;
                }
            }

            @media (max-width: 515px) {
                .actions {
                    margin-top: 1rem;
                }
            }

            .actions qrcg-button:not(:last-child) {
                margin-right: 0.5rem;
            }

            .actions qrcg-button:not(:first-child) {
                margin-left: 0.5rem;
            }

            .actions qrcg-button::part(button) {
                font-size: 0.8rem;
                padding: 0.5rem;
                min-width: 0;
            }

            .empty-message {
                margin: 2rem 0 0 0;
                text-align: center;
                color: var(--gray-2);
            }
        `];static get properties(){return{name:{},value:{type:Array},loading:{type:Boolean}}}constructor(){super(),this.value=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}get items(){return isEmpty(this.value)||!isArray$1(this.value)?[]:this.value}updated(w){w.has("value")&&this.updateComplete.then(()=>{this.requestPositionalVariablesReset()})}requestPositionalVariablesReset(){document.dispatchEvent(new CustomEvent(WebpageDesigner.requestUiPositionalVariablesResetEventName))}onClick(w){const q=w.composedPath()[0],D=parentMatches(q,".action-button.edit");if(D)return this.onEditMenuItemClick(D);const Q=parentMatches(q,".action-button.delete");if(Q)return this.onDeleteMenuItemClick(Q)}async onEditMenuItemClick(w){const q=w.item;try{const D=await this.openMenuItemModal(q);this.fireEditItem(D)}catch{}}openMenuItemModal(w){return QrcgCustomLinksModal.open({data:w})}async onDeleteMenuItemClick(w){const q=w.item;try{await confirm$1({message:x`${t$3`Are you sure you want to delete`}
                    <strong>${q.name}</strong>?`}),this.fireDelete(q)}catch{}}async openModal(){try{const w=await this.openMenuItemModal();this.fireAddItem(w)}catch{}}fireDelete(w){const q=this.items.filter(D=>D.id!=w.id);this.fireOnInput(q)}fireAddItem(w){const q=[...this.items,w];this.fireOnInput(q)}fireEditItem(w){const q=this.items.map(D=>D.id===w.id?w:D);this.fireOnInput(q)}fireOnInput(w){this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:w}}))}sortedItems(){return this.items.sort(function(w,q){return parseNumberValue(w.sort_order)-parseNumberValue(q.sort_order)})}renderCustomLinks(){if(!isEmpty(this.value))return this.sortedItems().map(w=>x`
                <div class="item">
                    <div class="item-name">${w.text}</div>

                    <div class="actions">
                        <qrcg-button
                            class="action-button edit"
                            transparent
                            .item=${w}
                            ?disabled=${this.loading}
                        >
                            ${t$3`Edit`}
                        </qrcg-button>
                        <qrcg-button
                            class="action-button delete"
                            transparent
                            .item=${w}
                            ?disabled=${this.loading}
                        >
                            ${t$3`Delete`}
                        </qrcg-button>
                    </div>
                </div>
            `)}renderEmptyCategoriesMessage(){if(isEmpty(this.value))return x`
            <div class="empty-message">
                ${t$3`There are no custom links. Click on Add Custom Link button below.`}
            </div>
        `}render(){return x`
            ${this.renderEmptyCategoriesMessage()}
            <!--- -->
            ${this.renderCustomLinks()}

            <qrcg-button
                class="add-item"
                transparent
                @click=${this.openModal}
                ?loading=${this.loading}
            >
                ${t$3`Add Custom Link`}
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-custom-links-input",QrcgCustomLinksInput);class QRCGVCardPlusForm extends BaseTypeForm{static styles=[super.styles,i$3`
            qrcg-form-section {
                margin-top: 1rem;
            }

            [name] {
                margin-bottom: 0;
            }

            [name='bio'] {
                margin-top: 1rem;
            }

            .row {
                display: grid;
                grid-gap: 1rem;
                grid-template-columns: 1fr 1fr;
            }

            @media (max-width: 900px) {
                .row {
                    grid-template-columns: 1fr;
                }
            }

            .add-contact-field {
                color: var(--primary-0);
                text-decoration: none;
                margin-bottom: 1rem;
            }

            .add-contact-field-container {
                display: flex;
                align-items: flex-end;
            }

            .custom-field-delete {
                position: absolute;
                right: 0.25rem;
                top: 1.6rem;
            }

            .custom-field-delete::part(button) {
                min-width: 0;
                padding: 0.5rem;
            }
        `];constructor(){super(),this.data.contactFields=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.watchCustomFieldDelete)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.watchCustomFieldDelete)}async addContactField(w){w.preventDefault(),w.stopPropagation();const q=await QrcgCustomFieldModal.open();this.contactFields.push(q),this.requestUpdate()}get contactFields(){return this.data.contactFields instanceof Array||(this.data.contactFields=[]),this.data.contactFields}renderCustomContactFields(){return this.contactFields.map(w=>x`
                <qrcg-input disabled class="custom-field" .value=${w.value}>
                    ${w.name}
                    <qrcg-button
                        slot="input-actions"
                        class="custom-field-delete"
                        transparent
                        .field=${w}
                    >
                        <qrcg-icon mdi-icon=${mdiDelete}></qrcg-icon>
                    </qrcg-button>
                </qrcg-input>
            `)}watchCustomFieldDelete=w=>{let q=w.composedPath()[0];if(q=parentMatches(q,".custom-field-delete"),!q)return;const D=q.field;this.data.contactFields=this.data.contactFields.filter(Q=>JSON.stringify(Q)!=JSON.stringify(D)),this.requestUpdate()};renderBasicDetailsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Basic Details`}</h2>

                <div class="row">
                    <qrcg-input
                        placeholder=${t$3`Enter your first name`}
                        name="firstName"
                    >
                        ${t$3`First name`}
                    </qrcg-input>

                    <qrcg-input
                        placeholder=${t$3`Enter your last name`}
                        name="lastName"
                    >
                        ${t$3`Last name`}
                    </qrcg-input>

                    <qrcg-vcard-list-input name="phones" label=${t$3`Phone`}>
                    </qrcg-vcard-list-input>

                    <qrcg-vcard-list-input name="emails" label=${t$3`Email`}>
                    </qrcg-vcard-list-input>

                    <qrcg-input
                        placeholder="${t$3`Sends direct WhatsApp message`}"
                        name="whatsapp_number"
                    >
                        ${t$3`WhatsApp Number`}
                        <div slot="instructions">
                            ${t$3`Will be used to receive direct whatsapp messages.`}
                        </div>
                    </qrcg-input>

                    <div class="add-contact-field-container">
                        <a
                            href="#"
                            @click=${this.addContactField}
                            class="add-contact-field"
                        >
                            ${t$3`Add more ways to contact you ...`}
                        </a>
                    </div>

                    ${this.renderCustomContactFields()}
                </div>
            </qrcg-form-section>
        `}renderJobDetailsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Job Details`}</h2>

                <div class="row">
                    <qrcg-input
                        placeholder="${t$3`Enter your company`}"
                        name="company"
                    >
                        ${t$3`Company`}
                    </qrcg-input>

                    <qrcg-input placeholder="${t$3`Enter your job`}" name="job">
                        ${t$3`Job Title`}
                    </qrcg-input>
                </div>

                <qrcg-textarea placeholder=${t$3`Enter your bio`} name="bio">
                    ${t$3`Short Bio`}
                </qrcg-textarea>

                <qrcg-vcard-list-input name="website_list" label=${t$3`Website`}>
                </qrcg-vcard-list-input>
            </qrcg-form-section>
        `}renderAddressSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Address`}</h2>

                <div class="row">
                    <qrcg-input
                        placeholder="${t$3`Enter your street`}"
                        name="street"
                    >
                        ${t$3`Street`}
                    </qrcg-input>

                    <qrcg-input placeholder="${t$3`Enter your zip`}" name="zip">
                        ${t$3`Zip`}
                    </qrcg-input>

                    <qrcg-input placeholder="${t$3`Enter your city`}" name="city">
                        ${t$3`City`}
                    </qrcg-input>

                    <qrcg-input
                        placeholder="${t$3`Enter your state`}"
                        name="state"
                    >
                        ${t$3`State`}
                    </qrcg-input>

                    <qrcg-input
                        placeholder="${t$3`Enter your country`}"
                        name="country"
                    >
                        ${t$3`Country`}
                    </qrcg-input>

                    <qrcg-input placeholder="${t$3`Maps URL`}" name="maps_url">
                        <div slot="instructions">
                            ${t$3`Could be Google maps URL, or any other maps URL.`}
                        </div>
                        ${t$3`Maps URL`}
                    </qrcg-input>
                </div>
                <qrcg-textarea
                    name="second_address"
                    placeholder="${t$3`Enter second address here. (Optional)`}"
                >
                    ${t$3`Second Address`}
                </qrcg-textarea>
            </qrcg-form-section>
        `}renderOpeningHoursInput(){if(this.data.openingHoursEnabled!=="disabled")return x`
            <qrcg-business-hours-input name="openingHours">
                ${t$3`Opening Hours`}
            </qrcg-business-hours-input>
        `}renderOpeningHoursSection(){return x`
            <qrcg-balloon-selector
                name="openingHoursEnabled"
                .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
            >
                ${t$3`Opening Hours. (Default Disabled)`}
            </qrcg-balloon-selector>

            ${this.renderOpeningHoursInput()}
        `}render(){return x`
            <qrcg-form-comment>
                ${t$3`Create your digital business card, allow your customers to save it.`}
            </qrcg-form-comment>
            <qrcg-form>
                ${this.renderBasicDetailsSection()}

                <!-- -->
                ${this.renderJobDetailsSection()}

                <!-- -->
                ${this.renderAddressSection()}

                <!-- -->
                ${this.renderOpeningHoursSection()}

                <qrcg-textarea
                    name="socialProfiles"
                    placeholder="https://youtube.com/...&#10;https://twitter.com/...&#10;https://instagram.com/...."
                >
                    ${t$3`Social Profiles`}

                    <div slot="instructions">
                        ${t$3`Add each social media link in a new line`}
                    </div>
                </qrcg-textarea>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-vcard-plus-form",QRCGVCardPlusForm);class QrcgFAQsModal extends QrcgModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            [name] {
                margin-bottom: 1rem;
            }

            .content-view {
                max-height: 50vh;
                overflow: auto;
            }
        `];static get properties(){return{data:{}}}static open({data:w}={}){const q=new QrcgFAQsModal;return w&&(q.data=w),document.body.appendChild(q),q.open()}constructor(){super(),this.data={id:"custom-"+new Date().getTime()}}connectedCallback(){super.connectedCallback(),document.addEventListener("keyup",this.watchEnter),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keyup",this.watchEnter),this.removeEventListener("on-input",this.onInput)}onInput=w=>{this.data={...this.data,[w.detail.name]:w.detail.value}};updated(w){w.has("data")&&this.syncInputs()}inputs(){return Array.from(this.shadowRoot.querySelectorAll("[name]"))}syncInputs(){for(const w of Object.keys(this.data)){const q=this.$input(w);q&&(q.value=this.data[w])}}$input(w){return this.shadowRoot.querySelector(`[name=${w}]`)}affiramtivePromise(){if(this.resetValidationErrors(),!this.validateInputs())throw new Error("Inputs has invalid values")}inputNames(){return Array.from(this.shadowRoot.querySelectorAll("[name]")).map(w=>w.getAttribute("name"))}validateInputs(){let w=!0;for(const q of this.inputNames()){const D=this.data[q],O=this.$input(q).hasAttribute("required");if(isEmpty(D)&&O){w=!1;const U=t$3(ucfirst(titleCase(q).toLowerCase()))+" "+t$3`is required`;this.$input(q).errors=[U]}}return w}resetValidationErrors(){this.inputs().forEach(w=>w.errors=[])}resolvedData(){return this.data}watchEnter=w=>{if(w.key==="Enter")return this.onAffirmativeClick()};renderTitle(){return t$3`Custom Link`}renderBody(){return x`
            <div class="content-view">
                <qrcg-input name="title" placeholder=${t$3`My Website`} required>
                    ${t$3`Title`}
                </qrcg-input>

                <qrcg-textarea name="description" placeholder=${t$3`Description`}>
                    ${t$3`Description`}
                </qrcg-textarea>

                <qrcg-input name="sort_order" placeholder="10" type="number">
                    ${t$3`Sort Order`}
                </qrcg-input>
            </div>
        `}}window.defineCustomElement("qrcg-faqs-modal",QrcgFAQsModal);class QrcgFAQsInput extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            qrcg-button.add-item {
                margin: auto;
                margin-top: 2rem;
                width: fit-content;
            }

            .color-box span {
                display: block;
                width: 1rem;
                height: 1rem;
                border: 1px solid var(--gray-2);
                border-radius: 0.25rem;
                margin-right: 0.5rem;
            }

            .color-box.background-color {
                margin-right: 1rem;
            }

            .color-box {
                display: flex;
                align-items: center;
            }

            .item {
                display: flex;
                padding: 1rem;
                background-color: var(--gray-0);
                margin: 1rem 0;
                align-items: center;
                user-select: none;
                -webkit-user-select: none;
                flex-wrap: wrap;
            }

            .item .item-name {
                flex: 1;
                font-weight: bold;
            }

            .actions {
                display: flex;
                align-items: center;
                margin-left: 1rem;
            }

            @media (max-width: 900px) {
                .item .item-name {
                    flex: 100%;
                    margin-bottom: 2rem;
                }
            }

            @media (max-width: 515px) {
                .actions {
                    margin-top: 1rem;
                }
            }

            .actions qrcg-button:not(:last-child) {
                margin-right: 0.5rem;
            }

            .actions qrcg-button:not(:first-child) {
                margin-left: 0.5rem;
            }

            .actions qrcg-button::part(button) {
                font-size: 0.8rem;
                padding: 0.5rem;
                min-width: 0;
            }

            .empty-message {
                margin: 2rem 0 0 0;
                text-align: center;
                color: var(--gray-2);
            }
        `];static get properties(){return{name:{},value:{type:Array},loading:{type:Boolean}}}constructor(){super(),this.value=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}get items(){return isEmpty(this.value)||!isArray$1(this.value)?[]:this.value}updated(w){w.has("value")&&this.updateComplete.then(()=>{this.requestPositionalVariablesReset()})}requestPositionalVariablesReset(){document.dispatchEvent(new CustomEvent(WebpageDesigner.requestUiPositionalVariablesResetEventName))}onClick(w){const q=w.composedPath()[0],D=parentMatches(q,".action-button.edit");if(D)return this.onEditMenuItemClick(D);const Q=parentMatches(q,".action-button.delete");if(Q)return this.onDeleteMenuItemClick(Q)}async onEditMenuItemClick(w){const q=w.item;try{const D=await this.openMenuItemModal(q);this.fireEditItem(D)}catch{}}openMenuItemModal(w){return QrcgFAQsModal.open({data:w})}async onDeleteMenuItemClick(w){const q=w.item;try{await confirm$1({message:x`${t$3`Are you sure you want to delete`}
                    <strong>${q.name}</strong>?`}),this.fireDelete(q)}catch{}}async openModal(){try{const w=await this.openMenuItemModal();this.fireAddItem(w)}catch{}}fireDelete(w){const q=this.items.filter(D=>D.id!=w.id);this.fireOnInput(q)}fireAddItem(w){const q=[...this.items,w];this.fireOnInput(q)}fireEditItem(w){const q=this.items.map(D=>D.id===w.id?w:D);this.fireOnInput(q)}fireOnInput(w){this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:w}}))}sortedItems(){return this.items.sort(function(w,q){return parseNumberValue(w.sort_order)-parseNumberValue(q.sort_order)})}renderItems(){if(!isEmpty(this.value))return this.sortedItems().map(w=>x`
                <div class="item">
                    <div class="item-name">${w.title}</div>

                    <div class="actions">
                        <qrcg-button
                            class="action-button edit"
                            transparent
                            .item=${w}
                            ?disabled=${this.loading}
                        >
                            ${t$3`Edit`}
                        </qrcg-button>
                        <qrcg-button
                            class="action-button delete"
                            transparent
                            .item=${w}
                            ?disabled=${this.loading}
                        >
                            ${t$3`Delete`}
                        </qrcg-button>
                    </div>
                </div>
            `)}renderEmptyCategoriesMessage(){if(isEmpty(this.value))return x`
            <div class="empty-message">
                ${t$3`There are no items. Click on Add Item button below.`}
            </div>
        `}render(){return x`
            ${this.renderEmptyCategoriesMessage()}
            <!--- -->
            ${this.renderItems()}

            <qrcg-button
                class="add-item"
                transparent
                @click=${this.openModal}
                ?loading=${this.loading}
            >
                ${t$3`Add Item`}
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-faqs-input",QrcgFAQsInput);class LeadFormResponses extends i$1{static get tag(){return"qrcg-lead-form-responses"}static get styles(){return[i$3`
                :host {
                    display: block;
                }

                .toolbar {
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    padding: 0;
                    margin-bottom: 1rem;
                }

                .stats {
                    text-align: center;
                    font-size: 0.8rem;
                    color: var(--gray-2);
                    margin-top: 1rem;
                }

                .responses {
                    max-height: 300px;
                    overflow: auto;
                }

                .response {
                    font-size: 0.8rem;
                    padding: 0.5rem;
                    position: relative;
                }

                .response .date {
                    padding: 0.5rem;
                    padding-bottom: 0;
                    font-weight: bold;
                    color: var(--gray-2);
                }

                .id {
                    position: absolute;
                    right: 1rem;
                    top: 1rem;
                    font-weight: bold;
                    background-color: var(--gray-2);
                    color: white;
                    padding: 0.25rem 0.5rem;
                    border-radius: 0.25rem;
                }

                .response:nth-child(odd) {
                    background-color: var(--gray-0);
                }

                .empty-message {
                    padding: 1rem;
                    line-height: 1.7;
                    color: var(--gray-2);
                    text-align: center;
                }

                .loading-container {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }

                .fields {
                    display: flex;
                    flex-direction: column;
                }

                .field {
                    padding: 0.5rem;
                    display: flex;
                }

                .question {
                    font-weight: bold;
                    margin-right: 0.5rem;
                }

                .action {
                    display: inline-block;
                    color: var(--gray-2);
                    text-decoration: none;
                    cursor: pointer;
                    user-select: none;
                    font-weight: bold;
                    font-size: 0.8rem;
                }

                .response .action {
                    padding: 0.5rem;
                }

                .toolbar .action {
                    color: var(--primary-0);
                    padding-left: 0.5rem;
                }
            `]}static get properties(){return{leadFormId:{attribute:"lead-form-id"},responses:{type:Array},loading:{type:Boolean},keyword:{}}}constructor(){super(),this.responses=[],this.loading=!0,this.keyword=""}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput),this.removeEventListener("click",this.onClick)}onClick(w){const q=w.composedPath()[0];parentMatches(q,".action.delete")&&(w.preventDefault(),this.deleteResponse(w))}async deleteResponse(w){let q=w.composedPath()[0];q=parentMatches(q,".action.delete");const D=q.response;try{await confirm$1({message:t$3`Are you sure you want to delete response?`}),await destroy("lead-form-responses/"+D.id),showToast(t$3`Response deleted successfully`),this.fetch()}catch{}}onInput(w){w.preventDefault(),w.stopImmediatePropagation();const{name:q,value:D}=w.detail;q==="keyword"&&(this.keyword=D)}updated(w){w.has("leadFormId")&&this.fetch()}filteredResponses(){return this.responses.filter(w=>{try{let q=w.fields.map(D=>D.value);return q=JSON.stringify(q),q.match(new RegExp(escapeRegExp(this.keyword),"i"))}catch{return!1}})}getResponses(){return isEmpty(this.keyword)?this.responses:this.filteredResponses()}async fetch(){const{response:w}=await get(`lead-forms/${this.leadFormId}/responses`),q=await w.json();this.responses=q,this.loading=!1}generateExportRows(){return this.responses.filter(w=>w.fields&&w.fields.length).map(w=>w.fields.reduce((q,D)=>(q.push(D.value),q),[]))}generateExportTitles(){return this.responses[0].fields.map(w=>w.question)}prepareResponsesToExport(){return[this.generateExportTitles(),...this.generateExportRows()]}downloadCsv(){const w=arrayToCsv(this.prepareResponsesToExport());downloadBlob(w,`responses-${this.getExportDate()}.csv`,"text/csv;charset=utf-8;")}getExportDate(){const w=new Date;return`${w.getDate()}-${w.getMonth()+1}-${w.getFullYear()}`}isEmpty(){return this.responses.length===0}renderToolbar(){return x`
            <div class="toolbar">
                <a class="action" @click=${this.downloadCsv}>
                    ${t$3`Export CSV`}
                </a>
                <qrcg-input name="keyword" placeholder=${t$3`Search ...`}>
                </qrcg-input>
            </div>
        `}renderStats(){return x`
            <div class="stats">
                ${t$3`Total `} ${this.responses.length}
                ${t$3`response${this.responses.length>1?"s":""}`}
            </div>
        `}renderEmptyMessage(){return x`
            <div class="empty-message">
                ${t$3`There are no responses for this form yet ...`}
            </div>
        `}renderLoader(){return x`
            <div class="loading-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderField(w){return x`
            <div class="field">
                <div class="question">${w.question}</div>
                <div class="value">${w.value}</div>
            </div>
        `}renderFields(w){return w.fields.map(q=>this.renderField(q))}renderDate(w){return new Date(w.created_at).toLocaleString()}renderResponse(w,q){return x`
            <div class="response">
                <!--  -->
                <div class="id">#${q+1}</div>

                <div class="date">${this.renderDate(w)}</div>

                <div class="fields">${this.renderFields(w)}</div>

                <div class="actions">
                    <a .response=${w} class="delete action">
                        ${t$3`Delete Response`}
                    </a>
                </div>
                <!--  -->
            </div>
        `}renderResponses(){return x`
            <div class="responses">
                ${this.getResponses().map((w,q)=>this.renderResponse(w,q))}
            </div>
        `}render(){return this.loading?this.renderLoader():this.isEmpty()?this.renderEmptyMessage():x`
            ${this.renderToolbar()}
            <!-- -->
            ${this.renderResponses()}
            <!-- -->
            ${this.renderStats()}
        `}}window.defineCustomElement(LeadFormResponses.tag,LeadFormResponses);const ACTION_CHECKOUT_ABOVE_PAYMENT_PROCESSORS_TAB="ACTION_CHECKOUT_ABOVE_PAYMENT_PROCESSORS_TAB",ACTION_MY_ACCOUNT_BELOW_SUBSCRIPTION_MANAGEMENT="ACTION_MY_ACCOUNT_BELOW_SUBSCRIPTION_MANAGEMENT",ACTION_LEADFORM_AFTER_STARS_QUESTION="ACTION_LEADFORM_AFTER_STARS_QUESTION",ACTION_QRCODE_ROW_ACTIONS="ACTION_QRCODE_ROW_ACTIONS",ACTION_QRCODE_LIST_PAGE_END="ACTION_QRCODE_LIST_PAGE_END",ACTION_LEADFORM_AFTER_PHONE_QUESTION="ACTION_LEADFORM_AFTER_PHONE_QUESTION",ACTION_LEADFORM_AFTER_EMAIL_QUESTION="ACTION_LEADFORM_AFTER_EMAIL_QUESTION",ACTION_LEADFORM_SETTINGS_END="ACTION_LEADFORM_SETTINGS_END";class QrcgLeadformConfigsInput extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            [name] {
                margin-bottom: 1rem;
            }
        `];static get properties(){return{name:{},value:{type:Object},enabled:{type:Boolean},leadFormId:{attribute:"lead-form-id"},shouldRenderEnabledInput:{type:Boolean,attribute:"should-render-enabled-input"},shouldRenderTriggerButtonInput:{type:Boolean,attribute:"should-render-trigger-button-input"}}}constructor(){super(),this.shouldRenderEnabledInput=!1}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput)}getValue(){return this.value??{}}updatedValue(w,q){return{...this.getValue(),[w]:q}}onInput(w){const{name:q,value:D}=w.detail;q!==this.name&&(w.stopPropagation(),w.preventDefault(),this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:this.updatedValue(q,D)}})))}updated(w){w.has("value")&&this.syncInputs()}syncInputs(){for(const w of Object.keys(this.getValue())){const q=this.shadowRoot.querySelector(`[name="${w}"]`);q&&(q.value=this.getValue()[w])}}isEnabled(){return this.enabled}getCurrentTab(){return this.getValue().tab??"settings"}renderEnabledInput(){if(this.shouldRenderEnabledInput)return x`
            <qrcg-balloon-selector
                name="enabled"
                .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
            >
                ${t$3`Enabled. Default (Disabled)`}
            </qrcg-balloon-selector>
        `}renderTabs(){return x`
            <qrcg-balloon-selector
                .options=${[{value:"settings",name:t$3`Settings`},{value:"colors",name:t$3`Colors`},{value:"images",name:t$3`Images`},{value:"responses",name:t$3`Responses`},{value:"webhooks",name:t$3`Webhooks`}]}
                name="tab"
            ></qrcg-balloon-selector>
        `}renderTab(w,q){if(this.getCurrentTab()==w)return q}renderTriggerButtonInput(){if(this.shouldRenderTriggerButtonInput)return x`
            <qrcg-input name="button_text" placeholder="${t$3`Contact Me`}">
                ${t$3`Trigger Button Text`}
            </qrcg-input>
        `}renderSettingsTab(){return this.renderTab("settings",x`
                ${this.renderTriggerButtonInput()}

                <qrcg-input name="submit_button_text" placeholder=${t$3`Submit`}>
                    ${t$3`Submit Button Text`}
                </qrcg-input>

                <qrcg-input name="ok_button_text" placeholder=${t$3`OK`}>
                    ${t$3`OK Button Text`}
                </qrcg-input>

                <qrcg-input
                    name="header_text"
                    placeholder=${t$3`Your company name`}
                >
                    ${t$3`Header Text`}
                </qrcg-input>

                <qrcg-input
                    name="recepient_email"
                    placeholder="${t$3`Enter recepient emails`}"
                >
                    <div slot="instructions"></div>
                    ${t$3`Comma seperated email addresses e.g. email1@provider.com, email2@provider.com`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="multiple_submission"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    <div slot="instructions">
                        ${t$3`Allow multiple submissions per browser`}
                    </div>

                    ${t$3`Multiple Submission. Default (Enabled)`}
                </qrcg-balloon-selector>

                ${this.renderSingleSubmissionMessageInput()}

                <qrcg-input name="after_submit_url" placeholder="https://...">
                    <div slot="instructions">
                        ${t$3`Redirect the user to the following URL after successful form submit. Leave empty to keep the user on the same page.`}
                    </div>
                    ${t$3`After Submit URL`}
                </qrcg-input>

                ${PluginManager.doActions(ACTION_LEADFORM_SETTINGS_END)}
            `)}renderSingleSubmissionMessageInput(){if(this.getValue().multiple_submission=="disabled")return x`
            <qrcg-input
                name="submission_blocked_message"
                placeholder="${t$3`This form has been already submitted.`}"
            >
                ${t$3`Submission Blocked Message`}
            </qrcg-input>
        `}renderImagesTab(){return this.renderTab("images",x`
                <qrcg-file-input
                    name="background_image"
                    upload-endpoint="qrcodes/data-file"
                >
                    ${t$3`Background Image`}
                </qrcg-file-input>

                <qrcg-file-input
                    name="logo_image"
                    upload-endpoint="qrcodes/data-file"
                >
                    ${t$3`Logo`}
                </qrcg-file-input>
            `)}renderTriggerButtonColors(){if(this.shouldRenderTriggerButtonInput)return x`
            <qrcg-color-picker name="trigger_background_color">
                ${t$3`Trigger Button Background Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="trigger_text_color">
                ${t$3`Trigger Button Text Color`}
            </qrcg-color-picker>
        `}renderColorsTab(){return this.renderTab("colors",x`
                <qrcg-color-picker name="background_color">
                    ${t$3`Background Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="text_color">
                    ${t$3`Text Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="placeholder_color">
                    ${t$3`Placeholder Color`}
                </qrcg-color-picker>

                ${this.renderTriggerButtonColors()}

                <qrcg-color-picker name="button_background_color">
                    ${t$3`Form Buttons Background Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="button_text_color">
                    ${t$3`Form Buttons Text Color`}
                </qrcg-color-picker>
            `)}renderResponsesTab(){return this.renderTab("responses",x`
                <qrcg-lead-form-responses
                    lead-form-id=${this.leadFormId}
                ></qrcg-lead-form-responses>
            `)}renderWebhooksTab(){return this.renderTab("webhooks",x`
                <qrcg-textarea name="webhooks" placeholder="https://...">
                    ${t$3`Webhooks`}
                    <div slot="instructions">
                        ${t$3`Multiple URLs can be added, each URL in a line. Maximum 5 webhooks are allowed.`}
                    </div>
                </qrcg-textarea>
            `)}renderConfigs(){if(this.isEnabled())return x`
            ${this.renderTabs()}
            <!-- -->
            ${this.renderSettingsTab()}
            <!-- -->
            ${this.renderColorsTab()}
            <!-- -->
            ${this.renderImagesTab()}
            <!-- -->
            ${this.renderResponsesTab()}
            <!--  -->
            ${this.renderWebhooksTab()}
        `}render(){return x`
            ${this.renderEnabledInput()}

            <!-- -->

            ${this.renderConfigs()}
        `}}window.defineCustomElement("qrcg-lead-form-configs-input",QrcgLeadformConfigsInput);class LeadFormBaseQuestion{static get type(){throw new Error("Must be implemented in child type")}render(){return x`
            <qrcg-input name="text" placeholder=${t$3`Add your question here`}>
                ${t$3`Question`}
            </qrcg-input>

            <!-- -->

            <qrcg-textarea
                name="description"
                placeholder=${t$3`Optional description`}
            >
                ${t$3`Description`}
            </qrcg-textarea>

            <qrcg-balloon-selector
                name="required"
                .options=${[{name:t$3`Required`,value:"required"},{name:t$3`Optional`,value:"optional"}]}
            >
                ${t$3`Required. Default (Optional)`}
            </qrcg-balloon-selector>
        `}}class LeadFormChoicesQuestion extends LeadFormBaseQuestion{static get type(){return"choices"}render(){return x`
            ${super.render()}
            <!-- -->

            <qrcg-textarea
                name="choices"
                placeholder=${t$3`Add choices here ...`}
            >
                <div slot="instructions">${t$3`Each choice in a line.`}</div>
                ${t$3`Choices`}
            </qrcg-textarea>

            <qrcg-balloon-selector
                name="is_multiple"
                .options=${[{name:t$3`Multiple Choices`,value:"multiple"},{name:t$3`Single Choice`,value:"single"}]}
            >
                ${t$3`Type. Default (Single).`}
            </qrcg-balloon-selector>
        `}}class LeadFormDateQuestion extends LeadFormBaseQuestion{static get type(){return"date"}render(){return x`
            ${super.render()}

            <qrcg-input
                name="placeholder_text"
                placeholder="${t$3`Type your answer here ...`}"
            >
                ${t$3`Placeholder Text`}
            </qrcg-input>
        `}}class LeadFormTextQuestion extends LeadFormBaseQuestion{static get type(){return"text"}renderAfterQuestion(){}render(){return x`
            ${super.render()}

            <qrcg-input
                name="placeholder_text"
                placeholder="${t$3`Type your answer here ...`}"
            >
                ${t$3`Placeholder Text`}
            </qrcg-input>

            ${this.renderAfterQuestion()}
        `}}class LeadFormEmailQuestion extends LeadFormTextQuestion{static get type(){return"email"}renderAfterQuestion(){return PluginManager.doActions(ACTION_LEADFORM_AFTER_EMAIL_QUESTION,this)}}class LeadFormPhoneQuestion extends LeadFormBaseQuestion{static get type(){return"phone"}renderAfterPhoneQuestion(){return PluginManager.doActions(ACTION_LEADFORM_AFTER_PHONE_QUESTION,this)}render(){return x`
            ${super.render()}

            <qrcg-input
                name="placeholder_text"
                placeholder="${t$3`Type your answer here ...`}"
            >
                ${t$3`Placeholder Text`}
            </qrcg-input>

            ${this.renderAfterPhoneQuestion()}
        `}}class LeadFormRatingQuestion extends LeadFormBaseQuestion{static get type(){return"rating"}render(){return x`
            ${super.render()}
            <!-- -->

            <qrcg-input
                name="rating_from"
                type="number"
                min="0"
                placeholder=${t$3`Default`+" 0"}
            >
                ${t$3`Start From`}
            </qrcg-input>

            <qrcg-input
                name="rating_to"
                type="number"
                min="0"
                placeholder=${t$3`Default`+" 5"}
            >
                ${t$3`To`}
            </qrcg-input>
        `}}class LeadFormStarsQuestion extends LeadFormBaseQuestion{static get type(){return"stars"}renderAfterQuestion(){return PluginManager.doActions(ACTION_LEADFORM_AFTER_STARS_QUESTION,this)}render(){return x`
            ${super.render()}
            <!-- -->

            <qrcg-input
                name="number_of_stars"
                type="number"
                min="1"
                placeholder=${t$3`Default 5`}
            >
                ${t$3`Number of Stars`}
            </qrcg-input>

            ${this.renderAfterQuestion()}
        `}}class LeadFormTextAreaQuestion extends LeadFormBaseQuestion{static get type(){return"textarea"}render(){return x`
            ${super.render()}

            <qrcg-input
                name="placeholder_text"
                placeholder="${t$3`Type your answer here ...`}"
            >
                ${t$3`Placeholder Text`}
            </qrcg-input>
        `}}class LeadFormQuestionManager{static#e=[];static registerType(w){this.#e.push(w)}find(w){return LeadFormQuestionManager.#e.find(q=>q.type===w)}}LeadFormQuestionManager.registerType(LeadFormTextQuestion);LeadFormQuestionManager.registerType(LeadFormTextAreaQuestion);LeadFormQuestionManager.registerType(LeadFormRatingQuestion);LeadFormQuestionManager.registerType(LeadFormStarsQuestion);LeadFormQuestionManager.registerType(LeadFormChoicesQuestion);LeadFormQuestionManager.registerType(LeadFormPhoneQuestion);LeadFormQuestionManager.registerType(LeadFormDateQuestion);LeadFormQuestionManager.registerType(LeadFormEmailQuestion);class QrcgLeadFormQuestionModal extends ImageListModal{static tag="qrcg-lead-form-question-modal";questions=new LeadFormQuestionManager;static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];static getOpenedInstance(){return document.querySelector(this.tag)}open(){return this.data.type||(this.data.type="text"),super.open()}renderFileInput(){return null}renderInputs(){return x`
            <qrcg-balloon-selector
                name="type"
                .options=${[{name:t$3`Text`,value:"text"},{name:t$3`Phone`,value:"phone"},{name:t$3`Email`,value:"email"},{name:t$3`Date`,value:"date"},{name:t$3`Text Area`,value:"textarea"},{name:t$3`Choices`,value:"choices"},{name:t$3`Rating`,value:"rating"},{name:t$3`Stars`,value:"stars"}]}
            >
                ${t$3`Type. Default: (Text).`}
            </qrcg-balloon-selector>

            ${this.renderQuestionFields()}
        `}renderQuestionFields(){const w=this.data.type,q=this.questions.find(w);return q?new q().render():void 0}}QrcgLeadFormQuestionModal.register();class QrcgLeadFormQuestionInput extends ImageListInput{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            .item-type {
                color: white;
                margin-right: auto;
                padding: 0.25rem;
                margin-left: 1rem;
                border-radius: 0.25rem;
                background-color: var(--gray-2);
                text-transform: uppercase;
                font-size: 0.7rem;
                font-weight: bold;
            }

            .item .item-name {
                flex: initial;
            }
        `];static get properties(){return{...super.properties}}emptyMessageText(){return t$3`There is no questions. Click on Add Question button below.`}addItemText(){return t$3`Add Question`}renderItemImage(){return null}getItemName(w){return w.text}renderAfterItemName(w){return x` <div class="item-type">${t$3(w.type)}</div> `}openItemModal(w){return QrcgLeadFormQuestionModal.open({data:w})}}window.defineCustomElement("qrcg-lead-form-question-input",QrcgLeadFormQuestionInput);class QrcgLeadformInput extends i$1{nativeFormInputController=new FormInputController(this);static get MODE_EXPANDED(){return"expanded"}static get MODE_MINIMIZED(){return"minimized"}static styles=[i$3`
            :host {
                display: block;
            }

            [disabled] {
                display: none;
            }
        `];static get properties(){return{name:{},value:{},related_model:{},related_model_id:{},model:{},mode:{},apiEndpoint:{attribute:"api-endpoint"},shouldRenderTriggerButtonInput:{type:Boolean}}}constructor(){super(),this.related_model="",this.related_model_id=null,this.model={},this.mode=QrcgLeadformInput.MODE_MINIMIZED,this.shouldRenderTriggerButtonInput=!0}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput),this.fireInitialInputEventIfNeeded()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput)}updated(w){w.has("value")&&this.fetch()}async fetch(){if(isEmpty(this.getFormID()))return;const{response:w}=await get(this.getEndpoint()),q=await w.json();this.model=q,this.syncInputs(q)}setInputValues(w){for(const q of Object.keys(w))this.setInputValue(q,w[q])}async syncInputs(w){this.setInputValues(w),await this.updateComplete,this.requestUpdate(w)}async onInput(w){clearTimeout(this._saveTimeout);const{name:q,value:D}=w.detail;q!==this.name&&(w.preventDefault(),w.stopPropagation(),this.setInputValue(q,D),this._saveTimeout=setTimeout(async()=>{this.saveData()},500))}setInputValue(w,q){this.model={...this.model,[w]:q}}getEndpoint(){const w=this.apiEndpoint??"/lead-forms";return this.getFormID()?`${w}/${this.getFormID()}`:w}async saveData(){const w=this.getEndpoint(),q=this.getFormID()?put:post,{response:D}=await q(w,this.getFormData()),Q=await D.json();this.value=Q.id,this.dispatchOnInput()}getFormData(){return{...this.model,related_model:this.related_model,related_model_id:this.related_model_id}}getFormID(){return isEmpty(this.value)?null:this.value}async fireInitialInputEventIfNeeded(){await new Promise(w=>setTimeout(w,1500)),this.related_model_id||this.dispatchOnInput(),await new Promise(w=>setTimeout(w,1e3)),this.value||this.saveData()}dispatchOnInput(){this.dispatchEvent(new CustomEvent("on-input",{composed:!0,bubbles:!0,detail:{name:this.name,value:this.value}}))}isEnabled(){return this.mode==QrcgLeadformInput.MODE_EXPANDED?!0:this.model.configs?.enabled==="enabled"}shouldRenderEnabledInput(){return!this.isExpanded()}isExpanded(){return this.mode==QrcgLeadformInput.MODE_EXPANDED}renderQuestionsInput(){if(this.isEnabled())return x`
            <qrcg-lead-form-question-input
                name="fields"
                .value=${this.model.fields}
            ></qrcg-lead-form-question-input>
        `}render(){return x`
            <qrcg-lead-form-configs-input
                name="configs"
                .value=${this.model.configs}
                ?enabled=${this.isEnabled()}
                lead-form-id=${this.getFormID()}
                ?should-render-enabled-input=${this.shouldRenderEnabledInput()}
                ?should-render-trigger-button-input=${this.shouldRenderTriggerButtonInput}
            >
            </qrcg-lead-form-configs-input>

            ${this.renderQuestionsInput()}
        `}}window.defineCustomElement("qrcg-lead-form-input",QrcgLeadformInput);class BlockModel{#e;#t;#r;#s;#i=[];static MODE_PREVIEW="preview";static MODE_EDIT="edit";static#n=[];static find(w){return this.#n.find(q=>q.getId()===w)}constructor({id:w,mode:q,slug:D,data:Q}){this.setId(w),this.setMode(q),this.setSlug(D),this.setData(Q),BlockModel.addModelOrUpdateExisting(this)}static addModelOrUpdateExisting(w){this.#n.find(D=>D.getId()===w.getId())?this.#n=this.#n.map(D=>D.getId()===w.getId()?w:D):this.#n.push(w)}setId(w){this.#e=w,this.updateSubscribedElements()}getId(){return this.#e}setMode(w){this.#t=w,this.updateSubscribedElements()}getMode(){return this.#t}setSlug(w){this.#r=w,this.updateSubscribedElements()}getSlug(){return this.#r}setData(w){isEmpty(w)&&(w={}),this.#s=w,this.updateSubscribedElements()}setSortOrder(w){this.updateData("sortOrder",w)}getData(){return this.#s}field(w,q=null){return this.getData()[w]??q}isEmpty(w){return isEmpty(this.field(w))}getSortOrder(){return parseNumberValue(this.getData()?.sortOrder)}updateData(w,q){this.setData({...this.getData(),[w]:q})}subscribe(w){this.#i.find(q=>q===w)||this.#i.push(w)}updateSubscribedElements(){this.#i.forEach(w=>{w.requestUpdate()}),this.notifyModelChange()}notifyModelChange(){this.#i.forEach(w=>{isFunction(w.onModelChange)&&w.onModelChange(this)})}disconnect(w){this.#i=this.#i.filter(q=>q!=w)}static instance(w,q){const D=new BlockModel({id:"block-"+uuid(),mode:"edit",slug:w,data:{}});return D.setSortOrder(q),D}toPlainObject(){return{id:this.getId(),slug:this.getSlug(),data:this.getData(),mode:this.getMode()}}toJson(){return JSON.stringify(this.toPlainObject())}static fromJson(w){try{return new BlockModel(JSON.parse(w))}catch{return null}}}class VCardPlusWebpageDesigner extends WebpageDesigner{static get styles(){return[super.styles,i$3`
                * {
                    box-sizing: border-box;
                }

                .image-block {
                    display: grid;
                    grid-template-columns: 2fr 3fr;
                    grid-gap: 1rem;
                    background-color: var(--gray-0);
                    padding: 1rem;
                    margin: 0 0 1rem 0;
                    align-items: flex-start;
                }

                .image-block img {
                    max-width: 100%;
                    grid-row: span 4;
                }

                .not-allowed-text {
                    color: var(--danger);
                    line-height: 1.7;
                    font-weight: bold;
                    margin: 0;
                }

                qrcg-biolinks-lead-form-block {
                    margin-top: 0;
                }

                qrcg-biolinks-lead-form-block::part(edit-header) {
                    display: none;
                }

                qrcg-biolinks-lead-form-block::part(close-icon) {
                    display: none;
                }

                qrcg-biolinks-lead-form-block::part(edit-box) {
                    border: 0;
                    padding: 0;
                }

                qrcg-biolinks-lead-form-block::part(edit-footer) {
                    display: none;
                }
            `]}constructor(){super(),this.imageFiles={},this.syncImageFiles=debounce(this.syncImageFiles.bind(this),300)}connectedCallback(){super.connectedCallback(),this.addEventListener("on-block-save",this.onBioLinksBlockSave)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-block-save",this.onBioLinksBlockSave)}updated(w){w.has("data")&&this.syncImageFiles()}async fetchData(){await super.fetchData();const w=this.data.design.lead_form;isNotEmpty(w)&&(this.leadFormModel=new BlockModel(w));const q=this.$("qrcg-biolinks-lead-form-block");q.setAttribute("model-id",this.leadFormModel.getId()),q.findModel(),q.syncInputs()}onBioLinksBlockSave(w){const D=w.composedPath()[0].getAttribute("name"),Q=w.detail.model.toPlainObject();this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:D,value:Q}}))}shouldShowPortfolioInput(){return!0}renderPortfolioInput(){return this.shouldShowPortfolioInput()?x`
                <qrcg-business-profile-portfolio-input
                    name="portfolio"
                    .qrcodeId=${this.qrcodeId}
                ></qrcg-business-profile-portfolio-input>
            `:x`
            <qrcg-file-input
                name="images"
                multiple
                upload-endpoint="qrcodes/${this.qrcodeId}/webpage-design-file"
            >
                ${t$3`Images`}
            </qrcg-file-input>
        `}renderPortfolioSection(){return x`
            <section>
                <h2 class="section-title">${t$3`Portfolio & Products`}</h2>
                <qrcg-input
                    name="portfolio_section_title"
                    placeholder=${t$3`Title`}
                >
                    ${t$3`Section Title`}
                </qrcg-input>

                <qrcg-color-picker name="portfolio_section_title_color">
                    ${t$3`Color`}
                </qrcg-color-picker>

                ${this.renderPortfolioInput()}
            </section>
        `}async syncImageFiles(){const w=async()=>{this.requestUpdate(),await this.updateComplete,this.syncInputs()};if(isEmpty(this.data.design.images)){this.imageFiles={},await w();return}const q=this.data.design.images instanceof Array?this.data.design.images:[this.data.design.images],D=async()=>{for(const O of q)isEmpty(this.imageFiles[O])&&(this.imageFiles[O]=await FileModel.fromRemote(O))},Q=()=>{for(const O of Object.keys(this.imageFiles))q.find(U=>U==O)||delete this.imageFiles[O]};await D(),Q(),await w()}onImageLoad(){this.resetPosionalVariables()}renderBusinessTypeInput(){return x`
            <qrcg-balloon-selector
                name="businessType"
                .options=${[{name:t$3`Bakery`,value:"bakery"},{name:t$3`Healthcare`,value:"healthcare"},{name:t$3`Restaurant`,value:"restaurant"},{name:t$3`Plumber`,value:"plumber"},{name:t$3`Barber`,value:"barber"},{name:t$3`Electrician`,value:"electrician"},{name:t$3`Builder`,value:"builder"},{name:t$3`Gardener / Landscaper`,value:"gardener"},{name:t$3`Cafe`,value:"cafe"},{name:t$3`Mechanic`,value:"mechanic"},{name:t$3`Garage`,value:"garage"},{name:t$3`Joiner / Carpenter`,value:"joiner"},{name:t$3`Car Valeter / Detailer`,value:"car-valeter"},{name:t$3`Painter / Decorator`,value:"painter"},{name:t$3`Plasterer`,value:"plaster"},{name:t$3`Cleaner`,value:"cleaner"},{name:t$3`Roofer`,value:"roofer"},{name:t$3`Accountant`,value:"accountant"},{name:t$3`Lawyer / Solicitors`,value:"solicitor"},{name:t$3`Other`,value:"other"}]}
            >
                <div slot="instructions">
                    ${t$3`Allows us to pick some colors for you`}
                </div>

                ${t$3`Business Type`}
            </qrcg-balloon-selector>
        `}renderColorBackgroundPosition(w){switch(w){case"last-elements":return this.renderAdditionalColors();case"start":return this.renderBusinessTypeInput()}}renderAddToContactsButtonTextColorInput(){let w=t$3`Add to Contact Button - Text Color`;return this.data.design.add_to_contacts_button_style!="classic"&&(w=t$3`Add to Contact Button - Icon Color`),x` <qrcg-color-picker name="addContactButtonTextColor">
            ${w}
        </qrcg-color-picker>`}renderAdditionalColors(){return x`
            <qrcg-color-picker name="secondBackgroundColor">
                ${t$3`Second Background Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="addContactButtonColor">
                ${t$3`Add to Contact Button Color`}
            </qrcg-color-picker>

            ${this.renderAddToContactsButtonTextColorInput()}
        `}renderImageCaption(w){const q=this.imageFiles[w],D=O=>`image_${w}_${O}`;let Q="";try{Q=q.directLink("inline")}catch{}if(!isEmpty(Q))return x`
            <div class="image-block">
                <img
                    src=${q.directLink("inline")}
                    @load=${this.onImageLoad}
                />
                <qrcg-input
                    name="${D("caption")}"
                    placeholder=${t$3`Project name`}
                >
                    ${t$3`Caption`}
                </qrcg-input>

                <qrcg-textarea
                    name="${D("description")}"
                    placeholder=${t$3`Project description (optional)`}
                >
                    ${t$3`Description`}
                </qrcg-textarea>

                <qrcg-input
                    name="${D("link")}"
                    placeholder=${t$3`Optional URL`}
                >
                    ${t$3`Link`}
                </qrcg-input>

                <qrcg-input name="${D("sort_order")}" placeholder=${0}>
                    ${t$3`Sort Order`}
                </qrcg-input>
            </div>
        `}renderImageCaptionSections(){if(!isEmpty(this.imageFiles))return x`
            <section>
                <h2 class="section-title">${t$3`Image Captions`}</h2>
                ${Object.keys(this.imageFiles).map(w=>this.renderImageCaption(w))}
            </section>
        `}renderAddToContactsButtonInputs(){if(this.data.design.add_to_contacts_button_style=="classic")return x`
            <qrcg-input
                name="add_to_contacts_button_text"
                placeholder="Add to Contacts"
            >
                <div slot="instructions">
                    ${t$3`Colors can be changed from Colors and Background section above.`}
                </div>
                ${t$3`Add to Contacts Button Text`}
            </qrcg-input>

            <qrcg-balloon-selector
                name="add_to_contacts_button_position"
                .options=${[{name:t$3`Top Section`,value:"top-section"},{name:t$3`Bottom Section`,value:"bottom-section"},{name:t$3`Both`,value:"both"}]}
            >
                ${t$3`Add to Contacts Button Position. Default (Top Section)`}
            </qrcg-balloon-selector>
        `}renderAdvancedSection(){return x`
            <section>
                <h2 class="section-title">${t$3`Advanced`}</h2>

                <qrcg-balloon-selector
                    name="add_to_contacts_button_style"
                    .options=${[{name:t$3`Floating`,value:"floating"},{name:t$3`Classic (with text)`,value:"classic"}]}
                >
                    ${t$3`Add to Contact Button Style`}
                </qrcg-balloon-selector>

                ${this.renderAddToContactsButtonInputs()}

                <qrcg-balloon-selector
                    name="social_icons_position"
                    .options=${[{name:t$3`Below contact icons`,value:"below_contact_icons"},{name:t$3`Between portfolio and contact cards`,value:"above_portfolio"}]}
                >
                    ${t$3`Social Icons Position`}
                </qrcg-balloon-selector>

                ${this.renderCustomCodeInput()}

                <!--  -->
                ${this.renderDesktopCustomizationInput()}

                <!--  -->

                ${this.renderShareOverlayInputs()}
            </section>
        `}renderCustomLinksSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Custom Links`}</h2>

                <qrcg-custom-links-input name="customLinks">
                </qrcg-custom-links-input>
            </qrcg-form-section>
        `}renderFAQsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`FAQs`}</h2>

                <qrcg-input
                    name="faqs_main_title"
                    placeholder="${t$3`Our Services`}"
                >
                    ${t$3`Main Title`}
                </qrcg-input>

                <qrcg-faqs-input name="faqs"></qrcg-faqs-input>
            </qrcg-form-section>
        `}renderLogoIfNeeded(){if(this.data.design.qrcode_preference=="logo")return x`
            ${this.renderFileInput("logo",t$3`Logo`)}

            <!-- -->

            <qrcg-balloon-selector
                name="logo_background"
                .options=${[{name:t$3`Round`,value:"round"},{name:t$3`Square`,value:"square"},{name:t$3`None`,value:"none"}]}
            >
                ${t$3`Logo Background. Default (Square)`}
            </qrcg-balloon-selector>
        `}renderPageSettingsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Page Settings`}</h2>

                <qrcg-balloon-selector
                    name="qrcode_preference"
                    .options=${[{name:t$3`Show QR Code`,value:"show"},{name:t$3`Show Logo`,value:"logo"},{name:t$3`None`,value:"none"}]}
                >
                    ${t$3`Show QR Code. Default (Show)`}
                </qrcg-balloon-selector>

                ${this.renderLogoIfNeeded()}

                <!--  -->

                ${this.renderSplashScreenInputs()}

                <qrcg-balloon-selector
                    name="contacts_settings"
                    .options=${[{name:t$3`Show Details`,value:"details"},{name:t$3`Show Icons`,value:"icons"},{name:t$3`Show Both`,value:"both"}]}
                >
                    ${t$3`Contacts Settings. Default (Both)`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="share_on_whatsapp"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`Share on WhatsApp. Default (Disabled)`}
                </qrcg-balloon-selector>

                ${this.renderQRCodeLanguageInput()}

                <qrcg-balloon-selector
                    name="background-gradient-effect"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`Gradient Effect. Default (Enabled)`}
                </qrcg-balloon-selector>

                ${this.renderAddToHomeScreenButtonFields()}
            </qrcg-form-section>
        `}renderLeadformSection(){return featureAllowed("vcard-plus.lead-form")?x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Lead Form`}</h2>

                <qrcg-biolinks-lead-form-block
                    name="lead_form"
                ></qrcg-biolinks-lead-form-block>
            </qrcg-form-section>
        `:x`
                <qrcg-form-section>
                    <h2 class="section-title">${t$3`Lead Form`}</h2>

                    <p class="not-allowed-text">
                        ${t$3`This feature is not allowed. Upgrade your plan to create lead forms in vCard+`}
                    </p>
                </qrcg-form-section>
            `}renderSections(){return x`
            ${super.renderSections()}
            <!-- -->
            ${this.renderLeadformSection()}
            <!-- -->
            ${this.renderPageSettingsSection()}
            <!-- -->
            ${this.renderPortfolioSection()}
            <!-- -->
            ${this.renderImageCaptionSections()}
            <!-- -->
            ${this.renderCustomLinksSection()}
            <!-- -->
            ${this.renderFAQsSection()}
            <!--  -->
            ${this.renderInformationPopupInput()}
            <!--  -->
            ${this.formBuilder.renderSection()}
            <!--  -->
            ${this.renderShareButtonSection()}
            <!-- -->
            ${this.renderAdvancedSection()}
        `}}window.defineCustomElement("qrcg-vcard-plus-webpage-designer",VCardPlusWebpageDesigner);class VCardPlusDesigner extends BaseTypeDesigner{webPageDesignerElementName(){return"qrcg-vcard-plus-webpage-designer"}}window.defineCustomElement("qrcg-vcard-plus-designer",VCardPlusDesigner);class VCardPlusType extends BaseQRCodeType{static qrcodeType(){return"vcard-plus"}renderTypeDesigner(){return x` <qrcg-vcard-plus-designer></qrcg-vcard-plus-designer> `}}class QRCGProductCatalogueForm extends BaseTypeForm{static styles=[super.styles,i$3`
            qrcg-form-section {
                margin-top: 1rem;
            }
        `];constructor(){super(),this.data.contactFields=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.watchCustomFieldDelete)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.watchCustomFieldDelete)}renderOpeningHoursInput(){if(this.data.opening_hours_enabled=="enabled")return x`
            <qrcg-business-hours-input name="opening_hours">
                ${t$3`Opening Hours Settings`}
            </qrcg-business-hours-input>
        `}render(){return x`
            <qrcg-form-comment>
                ${t$3`Create your product catalogue easily, no design skills are required.`}
            </qrcg-form-comment>
            <qrcg-form>
                <qrcg-form-section>
                    <h2 class="section-title">${t$3`Business Details`}</h2>
                    <qrcg-input
                        name="business_name"
                        placeholder=${t$3`Enter name`}
                    >
                        ${t$3`Business Name`}
                    </qrcg-input>

                    <qrcg-input name="phone"> ${t$3`Phone`} </qrcg-input>

                    <qrcg-input name="email" type="email">
                        ${t$3`Email`}
                    </qrcg-input>

                    <qrcg-input name="website" placeholder="https://....">
                        ${t$3`Website`}
                    </qrcg-input>

                    <qrcg-input name="address" placeholder=${t$3`Enter address`}>
                        ${t$3`Address`}
                    </qrcg-input>

                    <qrcg-input name="maps_url" placeholder=${t$3`Enter address`}>
                        ${t$3`Maps URL`}
                        <div slot="instructions">
                            ${t$3`Could be Google maps URL, or any other maps URL.`}
                        </div>
                    </qrcg-input>

                    <qrcg-balloon-selector
                        name="opening_hours_enabled"
                        .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                    >
                        ${t$3`Opening Hours`}
                    </qrcg-balloon-selector>

                    ${this.renderOpeningHoursInput()}

                    <qrcg-textarea
                        name="socialProfiles"
                        placeholder="https://youtube.com/...&#10;https://twitter.com/...&#10;https://instagram.com/...."
                    >
                        ${t$3`Social Profiles`}

                        <div slot="instructions">
                            ${t$3`Add each social media link in a new line`}
                        </div>
                    </qrcg-textarea>
                </qrcg-form-section>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-product-catalogue-form",QRCGProductCatalogueForm);class QrcgProductCatalogueCategoryModal extends QrcgModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            [name] {
                margin-bottom: 1rem;
            }

            .content-view {
                max-height: 50vh;
                overflow: auto;
            }
        `];static get properties(){return{data:{}}}static open({data:w,categories:q}={}){const D=new QrcgProductCatalogueCategoryModal;return w&&(D.data=w),q&&(D.categories=q),document.body.appendChild(D),D.open()}constructor(){super(),this.data={id:"category-"+new Date().getTime()}}connectedCallback(){super.connectedCallback(),document.addEventListener("keyup",this.watchEnter),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keyup",this.watchEnter),this.removeEventListener("on-input",this.onInput)}onInput=w=>{this.data={...this.data,[w.detail.name]:w.detail.value}};parentCategoryOptions(){return this.categories instanceof Array?this.categories.filter(w=>w.id!=this.data.id&&!w.parent_id):[]}updated(w){w.has("data")&&this.syncInputs()}inputs(){return Array.from(this.shadowRoot.querySelectorAll("[name]"))}syncInputs(){for(const w of Object.keys(this.data)){const q=this.$input(w);q&&(q.value=this.data[w])}}$input(w){return this.shadowRoot.querySelector(`[name=${w}]`)}affiramtivePromise(){if(this.resetValidationErrors(),!this.validateInputs())throw new Error("Inputs has invalid values")}inputNames(){return Array.from(this.shadowRoot.querySelectorAll("[name]")).map(w=>w.getAttribute("name"))}validateInputs(){let w=!0;for(const q of this.inputNames()){const D=this.data[q],O=this.$input(q).hasAttribute("required");if(isEmpty(D)&&O){w=!1;const U=t$3(ucfirst(titleCase(q).toLowerCase()))+" "+t$3`is required`;this.$input(q).errors=[U]}}return w}resetValidationErrors(){this.inputs().forEach(w=>w.errors=[])}resolvedData(){return this.data}watchEnter=w=>{if(w.key==="Enter")return this.onAffirmativeClick()};renderTitle(){return this.categorySlug?t$3`Edit Category`:t$3`Add Category`}renderBody(){return x`
            <div class="content-view">
                <qrcg-input name="name" placeholder=${t$3`Name`} required>
                    ${t$3`Category Name`}
                </qrcg-input>

                <qrcg-color-picker name="backgroundColor" required>
                    ${t$3`Background Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="textColor" required>
                    ${t$3`Text Color`}
                </qrcg-color-picker>

                <qrcg-select name="parent_id">
                    ${this.parentCategoryOptions().map(w=>x` <option value=${w.id}>${w.name}</option> `)}
                    <span slot="label"> ${t$3`Parent Category (Optional)`} </span>
                </qrcg-select>

                <qrcg-input name="sort_order" placeholder="10" type="number">
                    ${t$3`Sort Order`}
                </qrcg-input>
            </div>
        `}}window.defineCustomElement("qrcg-product-catalogue-category-modal",QrcgProductCatalogueCategoryModal);class QrcgProductCategoryInput extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            qrcg-button.add-category {
                margin: auto;
                margin-top: 2rem;
                width: fit-content;
            }

            .color-box span {
                display: block;
                width: 1rem;
                height: 1rem;
                border: 1px solid var(--gray-2);
                border-radius: 0.25rem;
                margin-right: 0.5rem;
            }

            .color-box.background-color {
                margin-right: 1rem;
            }

            .color-box {
                display: flex;
                align-items: center;
            }

            .category {
                display: flex;
                padding: 1rem;
                background-color: var(--gray-0);
                margin: 1rem 0;
                align-items: center;
                user-select: none;
                -webkit-user-select: none;
                flex-wrap: wrap;
            }

            .category .category-name {
                flex: 1;
                font-weight: bold;
            }

            .actions {
                display: flex;
                align-items: center;
                margin-left: 1rem;
            }

            @media (max-width: 900px) {
                .category .category-name {
                    flex: 100%;
                    margin-bottom: 2rem;
                }
            }

            @media (max-width: 515px) {
                .actions {
                    margin-top: 1rem;
                }
            }

            .actions qrcg-button:not(:last-child) {
                margin-right: 0.5rem;
            }

            .actions qrcg-button:not(:first-child) {
                margin-left: 0.5rem;
            }

            .actions qrcg-button::part(button) {
                font-size: 0.8rem;
                padding: 0.5rem;
                min-width: 0;
            }

            .empty-message {
                margin: 2rem 0 0 0;
                text-align: center;
                color: var(--gray-2);
            }
        `];static get properties(){return{name:{},value:{type:Array},loading:{type:Boolean}}}constructor(){super(),this.value=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}updated(w){w.has("value")&&this.updateComplete.then(()=>{this.requestPositionalVariablesReset()})}requestPositionalVariablesReset(){document.dispatchEvent(new CustomEvent(WebpageDesigner.requestUiPositionalVariablesResetEventName))}onClick(w){const q=w.composedPath()[0],D=parentMatches(q,".action-button.edit");if(D)return this.onEditProductCategoryClick(D);const Q=parentMatches(q,".action-button.delete");if(Q)return this.onDeleteProductCategoryClick(Q)}async onEditProductCategoryClick(w){const q=w.category;try{const D=await this.openProductCategoryModal(q);this.fireEditCategory(D)}catch{}}openProductCategoryModal(w){return QrcgProductCatalogueCategoryModal.open({data:w,categories:this.value})}async onDeleteProductCategoryClick(w){const q=w.category;try{await confirm$1({message:x`${t$3`Are you sure you want to delete`}
                    <strong>${q.name}</strong>?`}),this.fireDelete(q)}catch{}}async openModal(){try{const w=await this.openProductCategoryModal();this.fireAddCategory(w)}catch{}}fireDelete(w){const q=this.value.filter(D=>D.id!=w.id);this.fireOnInput(q)}fireAddCategory(w){const q=[...this.value??[],w];this.fireOnInput(q)}fireEditCategory(w){const q=this.value.map(D=>D.id===w.id?w:D);this.fireOnInput(q)}fireOnInput(w){this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:w}}))}sortedCategories(){return this.value.sort(function(w,q){return parseNumberValue(w.sort_order,100)-parseNumberValue(q.sort_order,100)})}renderCategories(){if(!isEmpty(this.value))return this.sortedCategories().map(w=>x` <div class="category">
                <div class="category-name">${w.name}</div>

                <div class="color-box background-color">
                    <span
                        style="background-color: ${w.backgroundColor}"
                    ></span>
                    ${t$3`Background Color`}
                </div>

                <div class="color-box text-color">
                    <span
                        style="background-color: ${w.textColor}"
                    ></span>

                    ${t$3`Text Color`}
                </div>

                <div class="actions">
                    <qrcg-button
                        class="action-button edit"
                        transparent
                        .category=${w}
                        ?disabled=${this.loading}
                    >
                        ${t$3`Edit`}
                    </qrcg-button>
                    <qrcg-button
                        class="action-button delete"
                        transparent
                        .category=${w}
                        ?disabled=${this.loading}
                    >
                        ${t$3`Delete`}
                    </qrcg-button>
                </div>
            </div>`)}renderEmptyCategoriesMessage(){if(isEmpty(this.value))return x`
            <div class="empty-message">
                ${t$3`There are no categories. Click on Add Category button below.`}
            </div>
        `}render(){return x`
            ${this.renderEmptyCategoriesMessage()} ${this.renderCategories()}

            <qrcg-button
                class="add-category"
                transparent
                @click=${this.openModal}
                ?loading=${this.loading}
            >
                ${t$3`Add Category`}
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-product-catalogue-category-input",QrcgProductCategoryInput);const style$1F=":host{display:block}[name]{margin-bottom:1rem}.body{line-height:unset}";class QrcgProductCatalogueItemModal extends QrcgModal{static tag="qrcg-product-catalogue-item-modal";static styleSheets=[...super.styleSheets,style$1F];static get properties(){return{data:{},categories:{type:Array},qrcodeId:{}}}static open({data:w,categories:q,qrcodeId:D}={}){const Q=new QrcgProductCatalogueItemModal;return w&&(Q.data=w),Q.categories=q,Q.qrcodeId=D,document.body.appendChild(Q),Q.open()}constructor(){super(),this.data={id:"item-"+new Date().getTime()},this.categories=[]}connectedCallback(){super.connectedCallback(),document.addEventListener("keyup",this.watchEnter),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keyup",this.watchEnter),this.removeEventListener("on-input",this.onInput)}onInput=w=>{this.data={...this.data,[w.detail.name]:w.detail.value}};updated(w){w.has("data")&&this.syncInputs()}inputs(){return Array.from(this.shadowRoot.querySelectorAll("[name]"))}syncInputs(){for(const w of Object.keys(this.data)){const q=this.$input(w);q&&(q.value=this.data[w])}}$input(w){return this.shadowRoot.querySelector(`[name=${w}]`)}affiramtivePromise(){if(this.resetValidationErrors(),!this.validateInputs())throw new Error("Inputs has invalid values")}inputNames(){return Array.from(this.shadowRoot.querySelectorAll("[name]")).map(w=>w.getAttribute("name"))}validateInputs(){let w=!0;for(const q of this.inputNames()){const D=this.data[q],O=this.$input(q).hasAttribute("required");if(isEmpty(D)&&O){w=!1;const U=t$3(ucfirst(titleCase(q).toLowerCase()))+" "+t$3`is required`;this.$input(q).errors=[U]}}return w}resetValidationErrors(){this.inputs().forEach(w=>w.errors=[])}resolvedData(){return this.data}watchEnter=w=>{if(!parentMatches(w.target,"textarea")&&w.key==="Enter")return this.onAffirmativeClick()};getCategories(){if(!(this.categories instanceof Array))return[];const w=q=>this.categories.find(D=>D.id===q.parent_id);return this.categories.map(q=>{let D=q.name;return q.parent_id&&(D=`${w(q).name} > ${D}`),{...q,name:D}})}renderTitle(){return t$3`Product Details`}renderBody(){return x`
            <div class="content-view">
                <qrcg-file-input
                    name="image"
                    upload-endpoint="qrcodes/${this.qrcodeId}/webpage-design-file"
                >
                    ${t$3`Image`}
                    <div slot="instructions">${t$3`Best size 700x500`}</div>
                </qrcg-file-input>

                <qrcg-input name="name" placeholder=${t$3`Product name`} required>
                    ${t$3`Product Name`}
                </qrcg-input>

                <qrcg-input name="price" placeholder=${t$3`Product price`}>
                    ${t$3`Price`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="category"
                    required
                    .options=${this.getCategories().map(w=>({name:w.name,value:w.id}))}
                >
                    ${t$3`Category`}
                </qrcg-balloon-selector>

                <qrcg-textarea
                    name="ingredients"
                    placeholder=${t$3`Add product description here.`}
                >
                    ${t$3`Description`}
                </qrcg-textarea>

                <qrcg-balloon-selector
                    name="layout"
                    .options=${[{name:t$3`Vertical (large)`,value:"vertical"},{name:t$3`Horizontal`,value:"horizontal"}]}
                >
                    ${t$3`Layout`}
                </qrcg-balloon-selector>

                <qrcg-input name="product_url" placeholder="https://...">
                    ${t$3`Product URL (Optional)`}
                </qrcg-input>

                <qrcg-input name="sort_order" placeholder="10" type="number">
                    ${t$3`Sort Order`}
                </qrcg-input>
            </div>
        `}}QrcgProductCatalogueItemModal.register();const style$1E=":host{display:block}qrcg-button.add-item{margin:auto;margin-top:2rem;width:fit-content}.item-image{width:3rem;height:3rem;margin-right:1rem;background-color:#fff}.item-price{margin-right:1rem}.color-box span{display:block;width:1rem;height:1rem;border:1px solid var(--gray-2);border-radius:.25rem;margin-right:.5rem}.color-box.background-color{margin-right:1rem}.color-box{display:flex;align-items:center}.item{display:flex;padding:.5rem 1rem;background-color:var(--gray-0);margin:1rem 0;align-items:center;user-select:none;-webkit-user-select:none;flex-wrap:wrap}.item .item-name{flex:1;font-weight:700}.actions{display:flex;align-items:center;margin-left:1rem}.actions qrcg-button:not(:last-child){margin-right:.5rem}.actions qrcg-button:not(:first-child){margin-left:.5rem}.actions qrcg-button::part(button){font-size:.8rem;padding:.5rem;min-width:0}.empty-message{margin:2rem 0 0;text-align:center;color:var(--gray-2)}.search{display:flex;justify-content:space-between}.search.gt-three{flex-direction:column;justify-content:unset}[name=search_name]{margin-right:2rem}@media(max-width:900px){.search{flex-direction:column;justify-content:unset}}.stats{height:1rem;margin:.5rem 0;font-size:.8rem;color:var(--gray-2)}qrcg-switch{margin-inline-end:1rem}";class QrcgProductItemInput extends BaseComponent{static tag="qrcg-product-catalogue-item-input";static styleSheets=[...super.styleSheets,style$1E];static get properties(){return{name:{},value:{type:Array},loading:{type:Boolean},categories:{type:Array},qrcodeId:{},search:{},allergens:{type:Array}}}constructor(){super(),this.value=[],this.categories=[],this.search={},this.allergens=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.addEventListener("on-input",this.onInput),document.addEventListener(Trigger.EVENT_SORT_CHANGED,this.onSortChanged)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),this.removeEventListener("on-input",this.onInput),document.removeEventListener(Trigger.EVENT_SORT_CHANGED,this.onSortChanged)}updated(w){w.has("value")&&this.updateComplete.then(()=>{this.syncSwitches()})}getSwitches(){return this.$$("qrcg-switch")}onSortChanged=()=>{this.value=ItemSorter.withItems(this.value).sort(),this.fireOnInput(this.value)};syncSwitches(){this.didSyncSwitches||(isNotEmpty(this.getSwitches())&&(this.didSyncSwitches=!0),this.getSwitches().forEach(w=>{const q=w.closest(".item").model;q.mode==="enabled"||isEmpty(q.mode)?w.setChecked(!0):w.setChecked(!1)}))}onClick(w){const q=w.composedPath()[0],D=parentMatches(q,".action-button.edit");if(D)return this.onEditClick(D);const Q=parentMatches(q,".action-button.delete");if(Q)return this.onDeleteClick(Q)}async onInput(w){if(w.detail.name!==this.name){if(w.preventDefault(),w.stopPropagation(),w.detail.name=="mode")return this.onModeChanged(w);this.search[w.detail.name]=w.detail.value,this.requestUpdate(),await this.updateComplete,this.didSyncSwitches=!1,this.syncSwitches()}}onModeChanged(w){const q=w.detail.value,Q=w.composedPath()[0].closest(".item").model;Q.mode!=q&&(Q.mode=q,this.fireEditEvent(Q))}async onEditClick(w){const q=w.item;try{const D=await this.openItemModal(q);this.fireEditEvent(D)}catch{}}async onDeleteClick(w){const q=w.item;try{await confirm$1({message:x`${t$3`Are you sure you want to delete`}
                    <strong>${q.name}</strong>?`}),this.fireDelete(q)}catch{}}canAddNewItem(){if(!shouldEnforceSubscriptionRules())return!0;const w=currentPlan().number_of_product_catalogue_items;return w==-1?!0:w>(this.value||[]).length}async openAddItemModal(){if(!this.canAddNewItem()){try{await confirm$1({title:t$3`Limit Reached`,message:t$3`You have reached your plan limits, you will have to upgrade to add more items.`,affirmativeText:t$3`Upgrade Now`}),window.location=ConfigHelper.pricingPlansUrl()}catch{}return}try{const w=await this.openItemModal();this.fireAddCategory(w),setTimeout(()=>{this.didSyncSwitches=!1,this.syncSwitches()},2e3)}catch{}}getCategories(){return this.categories?this.categories:[]}openItemModal(w){return QrcgProductCatalogueItemModal.open({data:w,categories:this.getCategories(),qrcodeId:this.qrcodeId,allergens:this.allergens})}fireDelete(w){const q=this.value.filter(D=>D.id!=w.id);this.fireOnInput(q)}fireAddCategory(w){const q=[...this.value??[],w];this.fireOnInput(q)}fireEditEvent(w){const q=this.value.map(D=>D.id===w.id?w:D);this.fireOnInput(q)}fireOnInput(w){this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:w}}))}getCategoryById(w){return this.getCategories().find(q=>q.id==w)}sortedItems(){return this.value.sort(function(w,q){return parseNumberValue(w.sort_order,100)-parseNumberValue(q.sort_order,100)})}applySearch(w){if(!isEmpty(this.search.search_name))try{w=w.filter(q=>q.name.match(new RegExp(this.search.search_name,"i")))}catch{}return!isEmpty(this.search.search_category)&&this.search.search_category!="_all_"&&(w=w.filter(q=>q.category===this.search.search_category)),w}renderItems(){if(!isEmpty(this.value))return this.applySearch(this.sortedItems()).map(w=>x`
                <div class="item" .model=${w}>
                    <qrcg-file-image
                        file-id=${w.image}
                        class="item-image"
                    ></qrcg-file-image>

                    <qrcg-switch
                        name="mode"
                        checked-value="enabled"
                        unchecked-value="disabled"
                    ></qrcg-switch>

                    <div class="item-name">${w.name}</div>

                    <div class="item-price">${w.price}</div>

                    <div class="item-category">
                        ${this.getCategoryById(w.category)?.name}
                    </div>

                    <div class="actions">
                        <qrcg-button
                            class="action-button edit"
                            transparent
                            .item=${w}
                            ?disabled=${this.loading}
                        >
                            ${t$3`Edit`}
                        </qrcg-button>
                        <qrcg-button
                            class="action-button delete"
                            transparent
                            .item=${w}
                            ?disabled=${this.loading}
                        >
                            ${t$3`Delete`}
                        </qrcg-button>
                    </div>
                </div>
            `)}renderEmptyItemsMessage(){if(isEmpty(this.value))return x`
            <div class="empty-message">
                ${t$3`There are no products. Click on Add Product button below.`}
            </div>
        `}categoriesToSearchIn(){return[{name:t$3`All Categories`,value:"_all_"},...this.getCategories().map(w=>({name:w.name,value:w.id}))]}renderSearchActions(){if(!isEmpty(this.value))return x`
            <div
                class=${e$1({"gt-three":this.categoriesToSearchIn().length>3,search:!0})}
            >
                <qrcg-input
                    name="search_name"
                    placeholder=${t$3`Search name`}
                ></qrcg-input>

                <qrcg-balloon-selector
                    name="search_category"
                    .options=${this.categoriesToSearchIn()}
                ></qrcg-balloon-selector>
            </div>
        `}renderStats(){if(isEmpty(this.value))return;const w=this.applySearch(this.value).length,q=this.value.length;return w!=q?t$3`Showing ${w} out of ${q} items.`:t$3`Showing ${q} items.`}render(){return x`
            ${this.renderEmptyItemsMessage()}
            <!-- -->
            ${this.renderSearchActions()}

            <div class="stats">${this.renderStats()}</div>

            <!-- -->
            ${this.renderItems()}

            <qrcg-button
                class="add-item"
                transparent
                @click=${this.openAddItemModal}
                ?loading=${this.loading}
            >
                ${t$3`Add Product`}
            </qrcg-button>
        `}}QrcgProductItemInput.register();const style$1D="*{box-sizing:border-box}.show-product-item-image,.button-section [name]{margin-bottom:1rem}.items-section header{display:flex;align-items:center;justify-content:space-between}";class ProductCatalogueWebpageDesigner extends WebpageDesigner{static tag="qrcg-product-catalogue-webpage-designer";static styleSheets=[...super.styleSheets,style$1D];static get properties(){return{...super.properties}}updated(w){w.has("data")&&this.forceUpdate()}async forceUpdate(){this.requestUpdate(),await this.updateComplete,setTimeout(()=>{this.syncInputs()})}getImageDisplayOptions(){return[{name:t$3`Always`,value:"always"},{name:t$3`Only if Uploaded`,value:"only-if-uploaded"},{name:t$3`Do not Show Images`,value:"do-not-show-images"}]}renderBackgroundImageInput(){return x`
            <!--  -->
            ${this.renderFileInput("logo",t$3`Logo`)}
        `}renderCategories(){return x``}renderCategoriesSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Categories`}</h2>

                <qrcg-product-catalogue-category-input
                    name="categories"
                    ?loading=${this.loading}
                ></qrcg-product-catalogue-category-input>
            </qrcg-form-section>
        `}renderItemsSectionActions(){if(!isEmpty(get$1(this.data,"design.menuItems"))&&isArray$1(this.data.design.menuItems))return x`
            <header>
                <qrcg-balloon-selector
                    class="show-product-item-image"
                    name="showProductItemImage"
                    .options=${this.getImageDisplayOptions()}
                >
                    ${t$3`Show Images. Default (Always)`}
                </qrcg-balloon-selector>

                <qrcg-product-item-sort-trigger></qrcg-product-item-sort-trigger>
            </header>
        `}renderItemsSection(){return x`
            <qrcg-form-section class="items-section">
                <h2 class="section-title">${t$3`Products`}</h2>

                ${this.renderItemsSectionActions()}

                <qrcg-balloon-selector
                    name="line_separator"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                    ${t$3`Line Separator`}
                </qrcg-balloon-selector>

                <qrcg-product-catalogue-item-input
                    name="menuItems"
                    .categories=${this.data.design.categories}
                    .qrcodeId=${this.qrcodeId}
                    .allergens=${get$1(this.data,"design.foodAllergens.items")}
                    ?loading=${this.loading}
                ></qrcg-product-catalogue-item-input>
            </qrcg-form-section>
        `}renderColorsBackgroundSectionTitle(){return t$3`Front Page`}renderBackButtonStyles(){return x`
            <qrcg-color-picker name="back_button_background_color">
                ${t$3`Back Button Background Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="back_button_text_color">
                ${t$3`Back Button Text Color`}
            </qrcg-color-picker>
        `}renderColorBackgroundPosition(w){if(w=="last-elements")return x`
            ${this.renderBackButtonStyles()}
            <!--  -->
            <qrcg-input name="catalogue_name" placeholder=${t$3`Our Catalogue`}>
                ${t$3`Catalogue Name`}
            </qrcg-input>

            <qrcg-range-input name="catalogue_name_font_size">
                ${t$3`Catalogue Name Font Size`}
            </qrcg-range-input>

            ${this.renderQRCodeLanguageInput()}
        `}renderProductLinkSection(){return x`
            <qrcg-form-section class="button-section">
                <h2 class="section-title">${t$3`Product Button`}</h2>
                <qrcg-balloon-selector
                    name="product_button_target"
                    .options=${[{name:t$3`Same Window`,value:"self"},{name:t$3`New Window`,value:"_blank"}]}
                >
                    ${t$3`Open Link in (Default: Same Window)`}
                </qrcg-balloon-selector>

                <qrcg-input
                    name="product_button_text"
                    placeholder=${t$3`Order Now`}
                >
                    ${t$3`Button Text`}
                </qrcg-input>

                <qrcg-color-picker name="product_button_color">
                    ${t$3`Button Color`}
                </qrcg-color-picker>
                <qrcg-color-picker name="product_button_text_color">
                    ${t$3`Text Color`}
                </qrcg-color-picker>
            </qrcg-form-section>
        `}renderAdvancedSection(){return x`
            <section>
                <h2 class="section-title">${t$3`Advanced`}</h2>

                ${this.renderCustomCodeInput()}
                <!--  -->
                ${this.renderDesktopCustomizationInput()}
                <!--  -->
                ${this.renderShareOverlayInputs()}
            </section>
        `}renderImageCarouselSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Image Carousel`}</h2>

                <qrcg-image-carousel-input
                    name="image_carousel"
                ></qrcg-image-carousel-input>
            </qrcg-form-section>
        `}renderWhatsAppOrderSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`WhatsApp Order`}</h2>

                ${this.renderFeatureNotAvailableWarning("whatsapp-order")}

                <div class="instructions">
                    ${t$3`Allow customers to place orders and receive orders via WhatsApp.`}
                </div>

                <qrcg-balloon-selector
                    name="whatsapp_order_enabled"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                </qrcg-balloon-selector>

                <qrcg-input
                    name="whatsapp_order_mobile_number"
                    placeholder=${t$3`Enter your mobile number`}
                >
                    ${t$3`Mobile Number`}

                    <div slot="instructions">
                        ${t$3`Orders will be received on this number`}
                    </div>
                </qrcg-input>

                <qrcg-qrcode-selector
                    name="whatsapp_upi_payment_qrcode_id"
                    type="upi-dynamic"
                >
                    ${t$3`UPI QR Code`}
                </qrcg-qrcode-selector>

                <qrcg-textarea
                    name="whatsapp_order_terms_conditions"
                    placeholder=${t$3`Enter terms and conditions.`}
                >
                    ${t$3`Terms and Conditions`}
                </qrcg-textarea>
            </qrcg-form-section>
        `}renderSections(){return x`
            ${super.renderSections()}
            <!-- -->
            ${this.renderCategoriesSection()}
            <!-- -->
            ${this.renderItemsSection()}
            <!-- -->
            ${this.renderProductLinkSection()}
            <!--  -->
            ${this.renderImageCarouselSection()}
            <!--  -->
            ${this.renderWhatsAppOrderSection()}
            <!--  -->
            ${this.renderReviewSitesSection()}
            <!-- -->
            ${this.renderAdvancedSection()}
        `}}ProductCatalogueWebpageDesigner.register();class ProductCatalogueDesigner extends BaseTypeDesigner{webPageDesignerElementName(){return"qrcg-product-catalogue-webpage-designer"}}window.defineCustomElement("qrcg-product-catalogue-designer",ProductCatalogueDesigner);class ProductCatalogueType extends BaseQRCodeType{static qrcodeType(){return"product-catalogue"}renderTypeDesigner(){return x`
            <qrcg-product-catalogue-designer></qrcg-product-catalogue-designer>
        `}}class QRCGBioLinksForm extends BaseTypeForm{static styles=[super.styles,i$3`
            qrcg-form-section {
                margin-top: 1rem;
            }

            qrcg-balloon-selector:first-child {
                margin-top: 1rem;
            }

            qrcg-input:first-child {
                margin-top: 1rem;
            }
        `];render(){return x`
            <qrcg-form-comment>
                ${t$3`Create your bio links with ease.`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-form-section>
                    <h2 class="section-title">${t$3`Basic Details`}</h2>

                    <qrcg-input name="name" placeholder=${t$3`Enter your name`}>
                        ${t$3`Name`}
                    </qrcg-input>

                    <qrcg-input
                        name="email"
                        placeholder="${t$3`Enter your email`}"
                        type="email"
                    >
                        ${t$3`Email`}
                    </qrcg-input>
                </qrcg-form-section>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-biolinks-form",QRCGBioLinksForm);const style$1C=":host{display:block;margin:1rem 0}.edit-header{display:flex;font-weight:700;color:var(--gray-2);margin-bottom:1rem;justify-content:space-between;align-items:center}.close-icon{width:1.4rem;height:1.4rem;cursor:pointer}.edit-box{padding:1rem;border:1px var(--gray-1) solid}[name]:not(:last-child){margin-bottom:1rem}.edit-footer{margin-top:1rem;display:flex;padding:.15rem}.cancel-button,.save-close-button{margin-right:1rem}.delete-button{margin-right:auto}@media(max-width:900px){.edit-footer{flex-direction:column}.edit-footer qrcg-button{margin-right:0;margin-bottom:1rem}}.preview-container{display:flex;padding:.5rem;align-items:center;border:1px solid var(--gray-1);flex-wrap:wrap}@media(max-width:900px){.preview-container{gap:1rem}}.preview-container qrcg-icon.drag{margin-inline-end:.5rem;width:1.5rem;height:1.5rem}.preview-container qrcg-switch{margin-inline-start:.5rem;margin-inline-end:1rem}.preview-container qrcg-button::part(button){font-weight:400;font-size:.74rem}:host(.dragover) .preview-container{background-color:#fcfcc5}.block-name{color:var(--dark);display:flex;align-items:center;background-color:var(--gray-0);padding:.25rem;font-size:.8rem;border-radius:.25rem;width:max-content}.block-name span{max-width:5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.block-name-container{width:7rem;margin-inline-end:.5rem}.block-icon{margin-right:.5rem;width:1rem;height:1rem}.preview-action::part(button){min-width:initial;padding:.5rem}.preview-action:first-of-type{margin-inline-start:auto}.stack-name{border:1px solid var(--gray-2);font-size:.8rem;border-radius:.25rem;color:#000;padding:.25rem;margin-inline-start:.5rem}qrcg-button[disabled]{opacity:.3}.data-preview>*{margin-inline-start:.5rem}";class SortManager{input;draggingBlock;targetBlock;static singleton(){return SortManager.__instance||(SortManager.__instance=new this),SortManager.__instance}static connectInput(w){return this.singleton().input=w,this.singleton()}static disconnectInput(){return this.singleton().input=null,this.singleton()}setDraggingBlock(w){return this.draggingBlock=w,this}onDrop(w){w.preventDefault(),this.targetBlock=w.target,this.updateSortOrder()}setSortOrder(w,q){w.setSortOrder(q),this.updateModel(w)}updateModel(w){const q=this.input.getValue();this.input.value=q.map(D=>D.id===w.getId()?w.toPlainObject():D)}updateSortOrder(){let w=this.targetBlock.model.getSortOrder();const q=this.draggingBlock.model.getSortOrder();w<q?w+=1:w-=1,this.setSortOrder(this.draggingBlock.model,this.targetBlock.model.getSortOrder()),this.setSortOrder(this.targetBlock.model,w),setTimeout(()=>{this.input.$$(".blocks > *").forEach((D,Q)=>{this.setSortOrder(D.model,Q)}),this.input.fireOnInput(this.input.value)},100)}}const style$1B="";class StackSelector extends BaseComponent{static tag="qrcg-stack-selector";static styleSheets=[...super.styleSheets,style$1B];static get properties(){return{...super.properties,name:{},value:{}}}getStackOptions(){let w=[{name:t$3`No Stack`,value:"*"}];return w=w.concat(WebpageDesigner.data.design.stack_data.map(q=>({name:q.title,value:q.id}))),w}updated(w){w.has("value")&&(this.$("[name=stack]").value=this.value)}render(){if(!isEmpty(WebpageDesigner.data.design.stack_data))return x`
            <qrcg-balloon-selector
                name="stack"
                .options=${this.getStackOptions()}
            >
                ${t$3`Stack`}
            </qrcg-balloon-selector>
        `}}StackSelector.register();class BaseBlock extends BaseComponent{static EVENT_CLOSE_ALL_REQUESTED="base-block:close-all-requested";static EVENT_DUPLCIATE_START="base-block:duplicate-start";static EVENT_DUPLCIATE_END="base-block:duplicate-end";static styleSheets=[...super.styleSheets,style$1C];sortManager=SortManager.singleton();static draggingBlock=null;static get tag(){return this.makeTag(this.slug())}static makeTag(w){return`qrcg-biolinks-${w}-block`}static isEnabled(){return!0}static get properties(){return{qrcodeId:{attribute:"qrcode-id"},modelId:{attribute:"model-id",reflect:!0}}}static slug(){throw new Error("Slug is not defined")}static name(){throw new Error("Name is not defined")}static icon(){throw new Error("Icon is not specified")}static makeNewModel(w=0){return BlockModel.instance(this.slug(),w)}constructor(){super(),this.model=null,this.qrcodeId=null,this.findModel()}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.catchInput),this.addEventListener("dragover",this.onDragOver),this.addEventListener("dragstart",this.onDragStart),this.addEventListener("dragend",this.onDragEnd),this.addEventListener("drop",this.onDrop),this.addEventListener("dragleave",this.onDragLeave),document.addEventListener(BaseBlock.EVENT_CLOSE_ALL_REQUESTED,this.onCloseAllRequested),document.addEventListener(WebpageDesigner.EVENT_SAVE_COMPLETED,this.onSaveCompleted),document.addEventListener(BaseBlock.EVENT_DUPLCIATE_START,this.onDuplicateStart),document.addEventListener(BaseBlock.EVENT_DUPLCIATE_END,this.onDuplicateEnd)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.catchInput),this.removeEventListener("dragover",this.onDragOver),this.removeEventListener("dragstart",this.onDragStart),this.removeEventListener("dragend",this.onDragEnd),this.removeEventListener("dragleave",this.onDragLeave),this.removeEventListener("drop",this.onDrop),document.removeEventListener(BaseBlock.EVENT_CLOSE_ALL_REQUESTED,this.onCloseAllRequested),this.model?.disconnect(this),document.removeEventListener(WebpageDesigner.EVENT_SAVE_COMPLETED,this.onSaveCompleted),document.removeEventListener(BaseBlock.EVENT_DUPLCIATE_START,this.onDuplicateStart),document.removeEventListener(BaseBlock.EVENT_DUPLCIATE_END,this.onDuplicateEnd)}onSaveCompleted=async()=>{await sleep(1700);const w=this.$(".save-button");w&&(w.loading=!1)};onCloseAllRequested=()=>{this.onCloseClick()};onDragEnd(){}onDragStart(){this.sortManager.setDraggingBlock(this)}onDragLeave(){this.classList.remove("dragover")}onDragOver(w){w.preventDefault(),this!=this.sortManager.draggingBlock&&this.classList.add("dragover")}onDrop(w){this.sortManager.onDrop(w)}findModel(){this.model=BlockModel.find(this.getAttribute("model-id")),this.model||(this.model=BlockModel.instance(this.constructor.slug())),this.model.subscribe(this)}async updated(w){w.has("modelId")&&this.findModel(),await this.updateComplete,this.syncInputs(),this.syncEnabledSwitchLazily()}catchInput=w=>{w.stopPropagation(),w.preventDefault(),this.model?.updateData(w.detail.name,w.detail.value),clearTimeout(this._onInputTimeout),this._onInputTimeout=setTimeout(()=>{this.syncInputs(),this.fireOnSave()},500)};inputs(){return Array.from(this.shadowRoot.querySelectorAll("[name]"))}syncInputs(){const w=this.model?.getData();w&&this.inputs().forEach(q=>{const D=q.getAttribute("name"),Q=w[D];q.value=Q})}onDeleteClick(){this.fireOnDelete()}onDuplicateStart=()=>{this.setButtonsDisabled(!0)};onDuplicateEnd=()=>{this.setButtonsDisabled(!1)};setButtonsDisabled(w){this.$$("qrcg-button").forEach(q=>{q.disabled=w})}async onDuplicateClick(){this.notifyDuplicateStart();const{json:w}=await post(`/qrcodes/${this.qrcodeId}/duplicate-biolink-block/${this.model.getId()}`),q=new BlockModel(w);this.dispatchEvent(new CustomEvent("on-block-duplicate",{bubbles:!0,composed:!0,detail:{model:q}})),this.notifyDuplicateEnd()}notifyDuplicateStart(){document.dispatchEvent(new CustomEvent(BaseBlock.EVENT_DUPLCIATE_START))}notifyDuplicateEnd(){document.dispatchEvent(new CustomEvent(BaseBlock.EVENT_DUPLCIATE_END))}onDeprecatedDuplicateClick(){const w=BlockModel.instance(this.constructor.slug(),100);w.setData(this.model.getData()),w.setSortOrder(this.model.getSortOrder()+1),this.dispatchEvent(new CustomEvent("on-block-duplicate",{bubbles:!0,composed:!0,detail:{model:w}}))}onCloseClick(){this.setMode(BlockModel.MODE_PREVIEW)}onSaveClick(){const w=this.$(".save-button");w.loading=!0,this.fireOnSave()}onSaveAndCloseClick(){this.setMode(BlockModel.MODE_PREVIEW),this.fireOnSave()}onEditClick(){this.setMode(BlockModel.MODE_EDIT)}setMode(w){this.model.setMode(w),this.syncEnabledSwitchLazily()}setIsEnabled(w){const{value:q}=w.detail;this.model.updateData("is_enabled",q?"enabled":"disabled")}getIsEnabledSwitch(){return this.$("qrcg-switch.is-enabled-switch")}syncEnabledSwitchLazily(){clearTimeout(this.__syncEnabledSwitchTimeout),this.__syncEnabledSwitchTimeout=setTimeout(()=>{this.syncEnabledSwitch()},50)}syncEnabledSwitch(){const w=this.getIsEnabledSwitch();w&&(this.model.isEmpty("is_enabled")||this.model.field("is_enabled")==="enabled"?w.value=!0:w.value=!1)}onModelChange(){}fireOnSave(){clearTimeout(this.__saveTimeout),this.__saveTimeout=setTimeout(()=>{this.dispatchEvent(new CustomEvent("on-block-save",{composed:!0,bubbles:!0,detail:{model:this.model}}))},500)}async fireOnDelete(){try{await confirm$1({message:x`
                    ${t$3`Are you sure you want to delete`}
                    <strong>${this.constructor.name()}</strong>
                    ${t$3`block?`}
                `}),this.dispatchEvent(new CustomEvent("on-block-delete",{composed:!0,bubbles:!0,detail:{model:this.model}}))}catch{}}modelName(){}focusFirstInput(){const w=Array.from(this.shadowRoot.querySelectorAll("qrcg-input, qrcg-textarea"));isEmpty(w)||w[0].focus()}renderFileInput(w,q,D){const Q=()=>{if(D)return x`<div slot="instructions">${D}</div>`};return x`
            <qrcg-file-input
                name="${w}"
                upload-endpoint="qrcodes/${this.qrcodeId}/webpage-design-file"
            >
                ${q} ${Q()}
            </qrcg-file-input>
        `}static renderPreviewModeIcon(){return x`
            <qrcg-icon mdi-icon=${this.icon()} class="block-icon"></qrcg-icon>
        `}getStackName(){return this.getStackData().find(w=>w.id===this.model.field("stack"))?.title}hasStack(){return isNotEmpty(this.getStackData())&&this.model.field("stack")!="*"&&isNotEmpty(this.model.field("stack"))}getStackData(){return WebpageDesigner.data.design.stack_data}isStackEnabled(){return WebpageDesigner.data.design.stack_enabled==="enabled"}shouldRenderStackName(){return this.isStackEnabled()&&this.hasStack()}renderStackName(){if(this.shouldRenderStackName())return x` <div class="stack-name">${this.getStackName()}</div> `}renderDataPreview(){}renderPreviewMode(){return x`
            <div class="preview-container" draggable="true">
                <qrcg-icon mdi-icon=${mdiDrag} class="drag"></qrcg-icon>

                <div class="block-name-container">
                    <div class="block-name">
                        ${this.constructor.renderPreviewModeIcon()}
                        <span> ${this.constructor.name()} </span>
                    </div>
                </div>

                <qrcg-switch
                    class="is-enabled-switch"
                    @on-input=${this.setIsEnabled}
                ></qrcg-switch>

                <div class="model-name">${this.modelName()}</div>

                <div class="data-preview">${this.renderDataPreview()}</div>

                ${this.renderStackName()}

                <qrcg-button
                    transparent
                    class="preview-action"
                    @click=${this.onDuplicateClick}
                >
                    ${t$3`Duplicate`}
                </qrcg-button>

                <qrcg-button
                    transparent
                    class="preview-action"
                    @click=${this.onDeleteClick}
                >
                    ${t$3`Delete`}
                </qrcg-button>

                <qrcg-button
                    transparent
                    class="preview-action"
                    @click=${this.onEditClick}
                >
                    ${t$3`Edit`}
                </qrcg-button>
            </div>
        `}renderEditMode(){return x`
            <div class="edit-box" part="edit-box">
                <header class="edit-header" part="edit-header">
                    <div class="name">
                        ${t$3`Edit`} ${this.constructor.name()}
                    </div>
                    <qrcg-icon
                        mdi-icon=${mdiChevronUp}
                        class="close-icon"
                        @click=${this.onSaveAndCloseClick}
                        title=${t$3`Close`}
                        part="close-icon"
                    ></qrcg-icon>
                </header>

                <div class="edit-body">${this.renderBaseEditForm()}</div>

                <footer class="edit-footer" part="edit-footer">
                    <qrcg-button
                        class="delete-button"
                        transparent
                        @click=${this.onDeleteClick}
                    >
                        ${t$3`Delete`}
                    </qrcg-button>

                    <qrcg-button
                        class="save-close-button"
                        transparent
                        @click=${this.onSaveAndCloseClick}
                    >
                        ${t$3`Close`}
                    </qrcg-button>
                </footer>
            </div>
        `}renderBaseEditForm(){return x`
            ${this.renderEditForm()}
            <!--  -->
            <qrcg-stack-selector name="stack"></qrcg-stack-selector>
        `}renderEditForm(){}render(){return this.model?.getMode()===BlockModel.MODE_PREVIEW?this.renderPreviewMode():this.renderEditMode()}}class BlockRenderHelper{static renderFontInputs(w=""){return[this.renderFontSizeInput(w),this.renderFontStyleInput(w),this.renderFontWeightInput(w),this.renderTextAlignInput(w),this.renderTextDecorationInput(w)]}static renderMarginTop(){return x`
            <qrcg-range-input
                name="margin-top"
                min="0"
                max="15"
                step="0.25"
                show-value
                value="1"
            >
                ${t$3`Margin Top`}
            </qrcg-range-input>
        `}static renderMarginBottom(){return x`
            <qrcg-range-input
                name="margin-bottom"
                min="0"
                max="15"
                step="0.25"
                show-value
                value="1"
            >
                ${t$3`Margin Bottom`}
            </qrcg-range-input>
        `}static prepaned(w,q){return isEmpty(q)?w:`${q}_${w}`}static renderFontSizeInput(w=""){return x`
            <qrcg-range-input
                name="${this.prepaned("font_size",w)}"
                min="5"
                max="100"
                step="1"
                show-value
                value="16"
            >
                ${t$3`Font Size`}
            </qrcg-range-input>
        `}static renderFontStyleInput(w=""){const q=[{name:t$3`Italic`,value:"italic"},{name:t$3`Normal`,value:"normal"}];return x`
            <qrcg-balloon-selector
                name="${this.prepaned("font_style",w)}"
                .options=${q}
            >
                ${t$3`Font Style`}
            </qrcg-balloon-selector>
        `}static renderTextDecorationInput(w=""){const q=[{name:t$3`Under Line`,value:"underline"},{name:t$3`Line Through`,value:"line-through"},{name:t$3`None`,value:"none"}];return x`
            <qrcg-balloon-selector
                name="${this.prepaned("text_decoration",w)}"
                .options=${q}
            >
                ${t$3`Text Decoration`}
            </qrcg-balloon-selector>
        `}static renderTextAlignInput(w=""){const q=[{name:t$3`Center`,value:"center"},{name:t$3`Left`,value:"left"},{name:t$3`Right`,value:"right"}];return x`
            <qrcg-balloon-selector
                name="${this.prepaned("text_align",w)}"
                .options=${q}
            >
                ${t$3`Text Align`}
            </qrcg-balloon-selector>
        `}static renderFontWeightInput(w="",q=null){const D=[{name:t$3`Bold`,value:"bold"},{name:t$3`Normal`,value:"normal"},{name:t$3`Lighter`,value:"lighter"}];return x`
            <qrcg-balloon-selector
                name="${this.prepaned("font_weight",w)}"
                .options=${D}
            >
                ${q??t$3`Font Weight`}
            </qrcg-balloon-selector>
        `}static renderBorderRadiusInput(){return x`
            <qrcg-range-input
                name="borderRadius"
                min="0"
                max="5"
                step="0.2"
                show-value
                value="0.6"
            >
                ${t$3`Border Radius`}
            </qrcg-range-input>
        `}static renderBlockPaddingInput(){return x`
            <qrcg-range-input
                name="padding"
                min="0"
                max="10"
                step="0.2"
                show-value
                value="2"
            >
                ${t$3`Padding`}
            </qrcg-range-input>
        `}}class LinkBlock extends BaseBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static name(){return t$3`Link`}static slug(){return"link"}static icon(){return mdiLink}getIcons(){return BALLOON_SELECTOR_ICONS}modelName(){return this.model.getData()?.text}renderUrlInput(){return x`
            <qrcg-input name="url" placeholder="https://...">
                ${t$3`URL`}
            </qrcg-input>

            <!--  -->
        `}renderBorderTypeSpecificInputs(){switch(this.model.field("border_type")){case"solid":case"dashed":return x`
                    <qrcg-color-picker name="border_color">
                        ${t$3`Border Color`}
                    </qrcg-color-picker>
                `;case"gradient":return x`
                    <qrcg-gradient-input name="border_gradient">
                        <div slot="label">${t$3`Border Gradient`}</div>
                    </qrcg-gradient-input>
                `}}renderBorderWidthInput(){const w=this.model.field("border_type");if(!(isEmpty(w)||w==="no-border"))return x`
            <qrcg-range-input
                name="border_width"
                value="3"
                min="0"
                max="25"
                step="0.5"
                show-value
            >
                ${t$3`Border Width`}
            </qrcg-range-input>
        `}renderCurrentBorderTypeInputs(){return x`
            ${this.renderBorderWidthInput()}
            <!--  -->
            ${this.renderBorderTypeSpecificInputs()}
        `}renderBorderInputs(){return x`
            <qrcg-balloon-selector
                name="border_type"
                .options=${[{name:t$3`No Border`,value:"no-border"},{name:t$3`Solid`,value:"solid"},{name:t$3`Dashed`,value:"dashed"},{name:t$3`Gradient`,value:"gradient"}]}
            >
                ${t$3`Border Type`}
            </qrcg-balloon-selector>

            ${this.renderCurrentBorderTypeInputs()}
        `}renderCurrentBackgroundTypeInputs(){switch(this.model.field("background_type")){case"gradient":return x`
                    <qrcg-gradient-input name="background_gradient">
                        <div slot="label">${t$3`Background Gradient`}</div>
                    </qrcg-gradient-input>
                `;case"image":return this.renderFileInput("background_image",t$3`Background Image`);default:return x`
                    <qrcg-color-picker name="backgroundColor">
                        ${t$3`Background Color`}
                    </qrcg-color-picker>
                `}}renderBackgroundInputs(){return x`
            <qrcg-balloon-selector
                name="background_type"
                .options=${[{name:t$3`Solid Color`,value:"solid-color"},{name:t$3`Gradient`,value:"gradient"},{name:t$3`Image`,value:"image"},{name:t$3`No Background`,value:"no-background"}]}
            >
                ${t$3`Background Type. (Default Solid Color)`}
            </qrcg-balloon-selector>

            ${this.renderCurrentBackgroundTypeInputs()}
        `}renderCustomIconInput(){if(this.model.field("icon")==="custom")return this.renderFileInput("icon_file",t$3`Icon File`)}renderTargetInput(){return x`
            <qrcg-balloon-selector
                name="target"
                .options=${[{name:t$3`Same Window`,value:"self"},{name:t$3`New Window`,value:"_blank"}]}
            >
                ${t$3`Open Link in (Default: Same Window)`}
            </qrcg-balloon-selector>
        `}renderEditForm(){return x`
            <qrcg-textarea name="text" placeholder="${t$3`Book Now`}">
                ${t$3`Text`}
            </qrcg-textarea>

            ${this.renderUrlInput()}

            <!--  -->

            <qrcg-balloon-selector .options=${this.getIcons()} name="icon">
                ${t$3`Icon`}
            </qrcg-balloon-selector>

            ${this.renderCustomIconInput()}

            <!--  -->

            ${this.renderBackgroundInputs()}

            <qrcg-color-picker name="textColor">
                ${t$3`Text Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="icon-color">
                ${t$3`Icon Color`}
            </qrcg-color-picker>

            <qrcg-range-input
                name="borderRadius"
                min="0"
                max="5"
                step="0.2"
                show-value
                value="0.6"
            >
                ${t$3`Border Radius`}
            </qrcg-range-input>

            <qrcg-range-input
                name="width"
                min="0"
                max="100"
                step="0.1"
                show-value
            >
                ${t$3`Width (%)`}
            </qrcg-range-input>

            <qrcg-range-input
                name="padding"
                min="0"
                max="10"
                step="0.2"
                show-value
                value="2"
            >
                ${t$3`Padding`}
            </qrcg-range-input>

            <qrcg-range-input
                name="margin-top"
                min="0"
                max="10"
                step="0.2"
                show-value
                value="2"
            >
                ${t$3`Margin Top`}
            </qrcg-range-input>

            <qrcg-range-input
                name="margin-bottom"
                min="0"
                max="10"
                step="0.2"
                show-value
                value="2"
            >
                ${t$3`Margin Bottom`}
            </qrcg-range-input>

            <qrcg-range-input
                name="icon-size"
                min="0"
                max="10"
                step="0.2"
                show-value
                value="1"
            >
                ${t$3`Icon Size`}
            </qrcg-range-input>

            ${this.renderBorderInputs()}

            <!--  -->

            ${BlockRenderHelper.renderFontInputs()}

            <!--  -->
            ${this.renderTargetInput()}
        `}}window.defineCustomElement(LinkBlock.tag,LinkBlock);class QrcgCodeInput extends i$1{static styles=[i$3`
            :host {
                display: block;
                position: relative;
            }

            #editor-container {
                min-height: 450px;
                margin-bottom: 0.5rem;
            }

            label *::slotted(*) {
                display: block;
                margin-bottom: 1rem;
                font-size: 0.8rem;
                font-weight: bold;
                letter-spacing: 1px;
                user-select: none;
                -webkit-user-select: none;
            }

            .error {
                color: var(--danger);
                position: absolute;
                font-size: 0.8rem;
                font-weight: bold;
                bottom: 0.5rem;
                transform: translateY(100%);
                animation: fade-in ease 1s both;
            }

            .monaco-editor {
                padding-top: 1rem;
            }

            @keyframes fade-in {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }

            qrcg-loader {
                position: absolute;
                top: 50%;
                left: 50%;
                z-index: 100;
                transform: translate(-50%, -50%);
            }

            .instructions *::slotted(*) {
                font-size: 0.8rem;
                padding: 0.5rem;
                background-color: var(--gray-0);
                margin-bottom: 0.5rem;
                line-height: 1.7;
            }
        `];static get properties(){return{name:{},value:{},errors:{type:Array},loading:{type:Boolean},language:{}}}constructor(){super(),this.loading=!0,this.language="html"}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),window.monaco.editor.getModels().forEach(w=>w.dispose())}async firstUpdated(){await this.loadMonaco(),window.require.config({paths:{vs:"/assets/lib/monaco-editor/min/vs"}}),window.require(["vs/editor/editor.main"],()=>{this.editor=window.monaco.editor.create(this.shadowRoot.querySelector("#editor-container"),{theme:"vs-dark",value:"",language:this.getLanguage(),fontSize:"18px"}),this.editor.getModel().onDidChangeContent(()=>{this.fireOnInput()}),this.syncEditorValue(),this.loading=!1})}updated(w){w.has("value")&&this.syncEditorValue(),w.has("language")&&this.syncLanguage()}syncEditorValue(){if(this.editor&&this.value!==this.editor.getModel().getValue())try{this.editor.getModel().setValue(this.value)}catch{}}fireOnInput(){this.value=this.editor.getValue(),this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:this.value}}))}async loadMonaco(){typeof window.monaco>"u"&&await this.loadMonacoScript(),await this.loadMoncoStyles()}loadMonacoScript(){return new Promise(w=>{window.require={paths:{vs:"/assets/lib/monaco-editor/min/vs"}};let q;q=document.createElement("script"),q.onload=w,q.src="/assets/lib/monaco-editor/min/vs/loader.js",document.body.appendChild(q)})}async loadMoncoStyles(){let w;this.constructor.__monacoStyles?w=this.constructor.__monacoStyles:(w=await(await fetch("/assets/lib/monaco-editor/min/vs/editor/editor.main.css")).text(),this.constructor.__monacoStyles=w);const q=document.createElement("style");q.innerHTML=w,this.shadowRoot.appendChild(q)}hasValidLanguage(){return!!["css","html","javascript"].find(w=>w==this.language)}getLanguage(){return this.hasValidLanguage()?this.language:"html"}syncLanguage=()=>{const w=this?.editor?.getMode();w&&window?.monaco?.editor?.setModelLanguage(w,this.getLanguage())};renderErrors(){return isEmpty(this.errors)?x``:x` <label class="error"> ${this.errors[0]} </label> `}renderInstructions(){return x`
            <div class="instructions">
                <slot name="instructions"></slot>
            </div>
        `}render(){return x`
            <label>
                <slot></slot>
            </label>

            ${this.renderInstructions()}
            ${this.loading?x`<qrcg-loader></qrcg-loader>`:null}

            <div id="editor-container"></div>

            ${this.renderErrors()}
        `}}window.defineCustomElement("qrcg-code-input",QrcgCodeInput);class CustomCodeBlock extends BaseBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static isEnabled(){return isCustomer()?!featureAllowed("designer.hide-custom-code-input"):!0}static name(){return t$3`Custom Code`}static slug(){return"custom-code"}static icon(){return mdiCodeBraces}modelName(){return this.model?.getData()?.name}syncInputs(){super.syncInputs();const w=this.model?.field("language");this.editor&&w&&(this.editor.language=w)}get editor(){return this.shadowRoot?.querySelector("qrcg-code-input")}renderEditForm(){return x`
            <qrcg-input name="name" placeholder="${t$3`Name of this code`}">
                ${t$3`Name`}
            </qrcg-input>

            <qrcg-balloon-selector
                name="language"
                .options=${[{name:"JavaScript",value:"javascript"},{name:"HTML",value:"html"},{name:"CSS",value:"css"}]}
            >
                ${t$3`Language. Default (HTML)`}
            </qrcg-balloon-selector>

            <qrcg-code-input
                name="code"
                language=${this.model?.field("language")}
            >
                <span> ${t$3`Code`} </span>
            </qrcg-code-input>
        `}}window.defineCustomElement(CustomCodeBlock.tag,CustomCodeBlock);const style$1A="qrcg-file-image{width:2rem;height:1.5rem;border-radius:.25rem;overflow:hidden;margin-inline-end:.5rem}qrcg-file-image::part(img){width:100%;height:100%;object-fit:cover;object-position:center}";class ImageBlock extends BaseBlock{static styleSheets=[...super.styleSheets,style$1A];static name(){return t$3`Image`}static slug(){return"image"}static icon(){return mdiImage}modelName(){return this.model.getData()?.text}renderDataPreview(){return x`
            <qrcg-file-image
                file-id="${this.model.getData()?.image}"
            ></qrcg-file-image>
        `}renderEditForm(){return x`
            ${this.renderFileInput("image",t$3`Image`)}

            <qrcg-input name="url" placeholder="${t$3`https://...`}">
                ${t$3`URL (Optional)`}
            </qrcg-input>

            <qrcg-input name="text" placeholder="${t$3`Image caption`}">
                ${t$3`Text (Optional)`}
            </qrcg-input>

            <qrcg-textarea
                name="description"
                placeholder="${t$3`Image description`}"
            >
                ${t$3`Description (Optional)`}
            </qrcg-textarea>

            ${this.renderFileInput("file",t$3`File (Optional)`,t$3`Open this file when the image is clicked.`)}

            <qrcg-color-picker name="textColor">
                ${t$3`Text Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="descriptionColor">
                ${t$3`Description Color`}
            </qrcg-color-picker>

            <qrcg-balloon-selector
                name="borderEnabled"
                .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
            >
                ${t$3`Border. Default (Enabled)`}
            </qrcg-balloon-selector>

            <qrcg-color-picker name="borderColor">
                ${t$3`Border Color. Default (White)`}
            </qrcg-color-picker>
        `}}window.defineCustomElement(ImageBlock.tag,ImageBlock);class QrcgImageGridBlockItemsModal extends ImageListModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `]}window.defineCustomElement("qrcg-image-grid-block-items-modal",QrcgImageGridBlockItemsModal);class QrcgImageGridBlockItemsInput extends ImageListInput{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{...super.properties}}openItemModal(w){return QrcgImageGridBlockItemsModal.open({data:w,qrcodeId:this.qrcodeId})}}window.defineCustomElement("qrcg-image-grid-block-items-input",QrcgImageGridBlockItemsInput);class ImageGridBlock extends BaseBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }

            qrcg-image-grid-block-items-input {
                border: solid 0.25rem var(--gray-0);
            }
        `];static name(){return t$3`Image Grid`}static slug(){return"image-grid"}static icon(){return mdiImageMultiple}modelName(){return this.model.getData()?.text}getBackgroundTypeOptions(){return[{name:t$3`No Background`,value:"no_background"},{name:t$3`Solid Color`,value:"solid_color"}]}isBackgroundEnabled(){return this.model.field("background_type")==="solid_color"}isTitleProvided(){return isNotEmpty(this.model.field("title"))}renderEditForm(){return x`
            <qrcg-image-grid-block-items-input
                name="items"
                qrcode-id=${this.qrcodeId}
            ></qrcg-image-grid-block-items-input>

            <qrcg-range-input
                name="grid_gap"
                min="0.1"
                max="50"
                step="0.1"
                show-value
            >
                ${t$3`Grid Gap`}
            </qrcg-range-input>

            <qrcg-input name="title" placeholder=${t$3`Enter title`}>
                ${t$3`Title`}
            </qrcg-input>

            <div
                class=${e$1({hidden:!this.isTitleProvided()})}
            >
                <qrcg-color-picker name="title_color">
                    ${t$3`Title Color`}
                </qrcg-color-picker>

                ${BlockRenderHelper.renderFontInputs("title")}
            </div>

            <qrcg-balloon-selector
                name="background_type"
                .options=${this.getBackgroundTypeOptions()}
            >
                ${t$3`Background Type`}
            </qrcg-balloon-selector>

            <div
                class=${e$1({hidden:!this.isBackgroundEnabled()})}
            >
                <qrcg-color-picker name="background_color">
                    ${t$3`Background Color`}
                </qrcg-color-picker>

                <qrcg-range-input
                    name="padding"
                    min="0.1"
                    max="100"
                    step="0.1"
                    show-value
                >
                    ${t$3`Padding`}
                </qrcg-range-input>

                <qrcg-range-input
                    name="border-radius"
                    min="0.1"
                    max="100"
                    step="0.1"
                    show-value
                >
                    ${t$3`Border Radius`}
                </qrcg-range-input>
            </div>
        `}}window.defineCustomElement(ImageGridBlock.tag,ImageGridBlock);class ProfileBlock extends BaseBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static name(){return t$3`Profile`}static slug(){return"profile"}static icon(){return mdiImage}modelName(){return this.model.getData()?.text}getBorderStyleOption(){return[{name:t$3`Circle`,value:"circle"},{name:t$3`Default`,value:"default"}]}renderEditForm(){return x`
            ${this.renderFileInput("profile_image",t$3`Profile Image`)}
            <!--  -->
            ${this.renderFileInput("background_image",t$3`Background Image`)}

            <qrcg-balloon-selector
                .options=${this.getBorderStyleOption()}
                name="border_style"
            >
                ${t$3`Border Style`}
            </qrcg-balloon-selector>

            <qrcg-range-input
                name="size"
                min="5"
                max="20"
                step="1"
                show-value
                value="7"
            >
                ${t$3`Size`}
            </qrcg-range-input>

            <qrcg-range-input
                name="margin_top"
                min="0"
                max="20"
                step="1"
                value="2"
                show-value
            >
                ${t$3`Margin Top`}
            </qrcg-range-input>

            <qrcg-range-input
                name="margin_bottom"
                min="0"
                max="20"
                step="1"
                show-value
                value="1"
            >
                ${t$3`Margin Bottom`}
            </qrcg-range-input>

            <qrcg-input name="text" placeholder="${t$3`@handle`}">
                ${t$3`Text`}
            </qrcg-input>

            <qrcg-color-picker name="textColor">
                ${t$3`Text Color`}
            </qrcg-color-picker>
        `}}window.defineCustomElement(ProfileBlock.tag,ProfileBlock);class SocialLinksBlock extends BaseBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static name(){return t$3`Social Links`}static slug(){return"social-links"}static icon(){return mdiTwitter}modelName(){return""}renderEditForm(){return x`
            <qrcg-textarea
                name="socialLinks"
                placeholder="https://youtube.com/...&#10;https://twitter.com/...&#10;https://instagram.com/...."
            >
                ${t$3`Social Links`}

                <div slot="instructions">
                    ${t$3`Add each social media link in a new line`}
                </div>
            </qrcg-textarea>

            <qrcg-color-picker name="iconsColor">
                ${t$3`Icon Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="backgroundColor">
                ${t$3`Background Color`}
            </qrcg-color-picker>
        `}}window.defineCustomElement(SocialLinksBlock.tag,SocialLinksBlock);class TitleBlock extends BaseBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static name(){return t$3`Title`}static slug(){return"title"}static icon(){return mdiText}modelName(){return this.model.getData()?.text}renderEditForm(){return x`
            <qrcg-input name="text" placeholder="${t$3`My Social Links`}">
                ${t$3`Text`}
            </qrcg-input>

            <qrcg-color-picker name="textColor">
                ${t$3`Text Color`}
            </qrcg-color-picker>

            <!--  -->
            ${BlockRenderHelper.renderMarginTop()}
            <!--  -->
            ${BlockRenderHelper.renderMarginBottom()}
            <!--  -->
            ${BlockRenderHelper.renderFontInputs()}
        `}}window.defineCustomElement(TitleBlock.tag,TitleBlock);class ParagraphBlock extends BaseBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static name(){return t$3`Paragraph`}static slug(){return"paragraph"}static icon(){return mdiText}modelName(){let w=this.model.getData()?.text;return w=w?.substring(0,20),w}renderEditForm(){return x`
            <qrcg-textarea name="text" placeholder="${t$3`Text`}">
                ${t$3`Text`}
            </qrcg-textarea>

            <qrcg-color-picker name="textColor">
                ${t$3`Text Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="background_color">
                ${t$3`Background Color`}
            </qrcg-color-picker>

            ${BlockRenderHelper.renderBlockPaddingInput()}
            <!--  -->
            ${BlockRenderHelper.renderBorderRadiusInput()}
            <!--  -->
            ${BlockRenderHelper.renderFontInputs()}
        `}}window.defineCustomElement(ParagraphBlock.tag,ParagraphBlock);class OpeningHoursBlock extends BaseBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static name(){return t$3`Opening Hours`}static slug(){return"opening-hours"}static icon(){return mdiTimer}modelName(){return t$3`Opening Hours`}renderEditForm(){return x`
            <qrcg-business-hours-input name="openingHours">
                ${t$3`Opening Hours`}
            </qrcg-business-hours-input>

            <qrcg-input name="title_text"> ${t$3`Title Text`} </qrcg-input>

            <qrcg-color-picker
                name="title_color"
                placeholder=${t$3`Enter title text`}
            >
                ${t$3`Title Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="icon_color">
                ${t$3`Icon Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="text_color">
                ${t$3`Text Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="background_color">
                ${t$3`Background Color`}
            </qrcg-color-picker>

            <qrcg-range-input
                name="block_padding"
                min="0"
                max="100"
                step="0.1"
                show-value
            >
                ${t$3`Padding`}
            </qrcg-range-input>

            <qrcg-range-input
                name="title_font_size"
                min="5"
                max="100"
                step="0.1"
                show-value
            >
                ${t$3`Title Font Size`}
            </qrcg-range-input>

            ${BlockRenderHelper.renderFontWeightInput("title",t$3`Title Font Weight`)}

            <qrcg-range-input
                name="content_font_size"
                min="5"
                max="100"
                step="0.1"
                show-value
            >
                ${t$3`Content Font Size`}
            </qrcg-range-input>

            ${BlockRenderHelper.renderFontWeightInput("content",t$3`Content Font Weight`)}
        `}}window.defineCustomElement(OpeningHoursBlock.tag,OpeningHoursBlock);class LeadFormBlock extends LinkBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{...super.properties,buttonText:{}}}static name(){return t$3`Lead Form`}static slug(){return"lead-form"}static icon(){return mdiMenu}constructor(){super(),this.buttonText=""}modelName(){return this.model.field("text",t$3`Lead Form`)}renderLegacyLeadFormInput(){return x`
            <qrcg-lead-form-input
                name="lead_form_id"
                related_model="QRCode"
                related_model_id="${this.qrcodeId}"
                mode=${QrcgLeadformInput.MODE_EXPANDED}
            ></qrcg-lead-form-input>
        `}renderUrlInput(){}renderFormFields(){if(currentPlanHasQrCodeType("lead-form"))return super.renderEditForm()}renderTargetInput(){}renderEditForm(){return x`
            <qrcg-lead-form-selector name="lead_form_id">
            </qrcg-lead-form-selector>

            ${this.renderFormFields()}
        `}}window.defineCustomElement(LeadFormBlock.tag,LeadFormBlock);class FileBlock extends LinkBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static name(){return t$3`File`}static slug(){return"file"}static icon(){return mdiFile}modelName(){return this.model.getData()?.text}renderUrlInput(){return this.renderFileInput("file",t$3`File`)}}window.defineCustomElement(FileBlock.tag,FileBlock);class InformationPopupBlock extends BaseBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static name(){return t$3`Information Popup`}static slug(){return"information-popup"}static icon(){return mdiLink}modelName(){return this.model.getData()?.text}renderEditForm(){return x`
            <qrcg-input name="text" placeholder="${t$3`More information`}">
                ${t$3`Link Text`}
            </qrcg-input>

            <qrcg-input name="title"> ${t$3`Popup Title`} </qrcg-input>

            <qrcg-textarea
                name="content"
                placeholder="${t$3`Add information here.`}"
            >
                <div slot="instructions">
                    ${t$3`Any additional information can be added here, html is accepted.`}
                </div>
                ${t$3`Popup Content`}
            </qrcg-textarea>

            <qrcg-color-picker name="textColor">
                ${t$3`Text Color`}
            </qrcg-color-picker>

            ${BlockRenderHelper.renderFontStyleInput()}
            <!--  -->
            ${BlockRenderHelper.renderFontWeightInput()}
            <!--  -->
            ${BlockRenderHelper.renderTextDecorationInput()}
        `}}window.defineCustomElement(InformationPopupBlock.tag,InformationPopupBlock);class vCardForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: block;
            }

            .grid {
                display: grid;
                margin-top: 1rem;
                margin-bottom: 1rem;
                grid-gap: 1rem;
            }

            @media (min-width: 850px) {
                .grid {
                    grid-template-columns: 1fr 1fr;
                }
                [name='mobile'] {
                    grid-column: 1 / span 2;
                }

                [name='email'] {
                    grid-column: 1 / span 2;
                }

                [name='street'] {
                    grid-column: 1 / span 2;
                }

                [name='state'] {
                    grid-column: 1 / span 2;
                }

                [name='country'] {
                    grid-column: 1 / span 2;
                }

                [name='website'] {
                    grid-column: 1 / span 2;
                }

                qrcg-button {
                    width: fit-content;
                    margin-top: 1rem;
                }
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Saves contact details on the smartphone`}
            </qrcg-form-comment>

            <qrcg-form>
                <div class="grid">
                    <qrcg-input
                        placeholder=${t$3`Enter your first name`}
                        name="firstName"
                    >
                        ${t$3`First name`}
                    </qrcg-input>

                    <qrcg-input
                        placeholder=${t$3`Enter your last name`}
                        name="lastName"
                    >
                        ${t$3`Last name`}
                    </qrcg-input>

                    <qrcg-vcard-list-input name="phones" label=${t$3`Phone`}>
                    </qrcg-vcard-list-input>

                    <qrcg-vcard-list-input name="emails" label=${t$3`Email`}>
                    </qrcg-vcard-list-input>

                    <qrcg-vcard-list-input
                        name="website_list"
                        label=${t$3`Website`}
                    >
                    </qrcg-vcard-list-input>

                    <qrcg-input
                        placeholder="${t$3`Enter your company`}"
                        name="company"
                    >
                        ${t$3`Company`}
                    </qrcg-input>

                    <qrcg-input placeholder="${t$3`Enter your job`}" name="job">
                        ${t$3`Job`}
                    </qrcg-input>

                    <qrcg-input
                        placeholder="${t$3`Enter your street`}"
                        name="street"
                    >
                        ${t$3`Street`}
                    </qrcg-input>

                    <qrcg-input placeholder="${t$3`Enter your city`}" name="city">
                        ${t$3`City`}
                    </qrcg-input>

                    <qrcg-input placeholder="${t$3`Enter your zip`}" name="zip">
                        ${t$3`Zip`}
                    </qrcg-input>

                    <qrcg-input
                        placeholder="${t$3`Enter your state`}"
                        name="state"
                    >
                        ${t$3`State`}
                    </qrcg-input>

                    <qrcg-input
                        placeholder="${t$3`Enter your country`}"
                        name="country"
                    >
                        ${t$3`Country`}
                    </qrcg-input>
                </div>
                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-vcard-form",vCardForm);class VCardBlock extends LinkBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static name(){return t$3`vCard`}static slug(){return"vcard"}static icon(){return mdiAccount}syncInputs(){super.syncInputs(),this.syncFormData()}syncFormData(){this.getForm()&&isEmpty(this.getForm().data)&&(this.getForm().data=this.model.getData())}getTabs(){return[{name:t$3`Data`,value:"data"},{name:t$3`Appearance`,value:"appearance"},{name:t$3`Image`,value:"image"}]}getForm(){return this.$("qrcg-vcard-form")}renderDataTab(){const w=this.model.field("tab");if(!(isNotEmpty(w)&&w!=="data"))return x` <qrcg-vcard-form multi-websites></qrcg-vcard-form> `}renderAppearanceTab(){if(this.model.field("tab")=="appearance")return super.renderEditForm()}renderImageTab(){if(this.model.field("tab")==="image")return this.renderFileInput("logo",t$3`Image`,t$3`Will be displayed in the contacts app. Should be small size. Recommended size 200x200`)}renderUrlInput(){}renderEditForm(){return x`
            <qrcg-balloon-selector .options=${this.getTabs()} name="tab">
            </qrcg-balloon-selector>

            ${this.renderAppearanceTab()}
            <!--  -->
            ${this.renderDataTab()}
            <!--  -->
            ${this.renderImageTab()}
        `}}VCardBlock.register();class ShareBlock extends LinkBlock{static name(){return t$3`Share`}static slug(){return"share"}static icon(){return mdiOpenInNew}renderUrlInput(){}}window.defineCustomElement(ShareBlock.tag,ShareBlock);class VideoBlock extends BaseBlock{static name(){return t$3`Video`}static slug(){return"video"}static icon(){return mdiVideo}modelName(){return t$3`Video`}renderEditForm(){return x` ${this.renderFileInput("video",t$3`Video`)} `}}window.defineCustomElement(VideoBlock.tag,VideoBlock);class TableBlock extends BaseBlock{static name(){return t$3`Table`}static slug(){return"table"}static icon(){return mdiGrid}modelName(){let w=this.model.getData()?.text;return w=w?.substring(0,20),w}renderEditForm(){return x`
            <qrcg-textarea
                name="table_data"
                placeholder="${t$3`Enter lines here.`}"
                rows="10"
            >
                <div slot="instructions">
                    ${t$3`Comma separated values. Each row in a new line.`}
                </div>
                ${t$3`Table Details`}
            </qrcg-textarea>

            <qrcg-color-picker name="text_color">
                ${t$3`Text Color`}
            </qrcg-color-picker>
        `}}window.defineCustomElement(TableBlock.tag,TableBlock);class FAQsBlock extends BaseBlock{static tag="qrcg-faq-block";static styleSheets=[...super.styleSheets];static name(){return t$3`FAQ`}static slug(){return"faqs"}static icon(){return mdiChatQuestion}isBlockTabActive(){const w=this.model.field("tab");return w==="block"||isEmpty(w)}isQuestionTabActive(){return this.model.field("tab")==="content"}isTitleTabActive(){return this.model.field("tab")==="title"}isAnswerTabActive(){return this.model.field("tab")==="answer"}isLinkTabActive(){return this.model.field("tab")==="link"}isSubtitleTabActive(){return this.model.field("tab")==="subtitle"}getTabs(){return[{name:t$3`Block Style`,value:"block"},{name:t$3`Question Style`,value:"content"},{name:t$3`Answer Style`,value:"answer"},{name:t$3`Title Style`,value:"title"},{name:t$3`Subtitle Style`,value:"subtitle"},{name:t$3`Link Styles`,value:"link"}]}renderQuestionStyles(){return x`
            <qrcg-color-picker name="text_color">
                ${t$3`Text Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="border_color">
                ${t$3`Border Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="icon_color">
                ${t$3`Icon Color`}
            </qrcg-color-picker>
        `}renderDataInputs(){return x`
            <qrcg-input name="main_title" placeholder=${t$3`Enter title`}>
                ${t$3`Title`}
            </qrcg-input>

            <qrcg-input name="subtitle" placeholder=${t$3`Enter subtitle`}>
                ${t$3`Subtitle`}
            </qrcg-input>

            <qrcg-faqs-input name="faqs"></qrcg-faqs-input>
        `}renderTabs(){return x`
            <qrcg-balloon-selector name="tab" .options=${this.getTabs()}>
            </qrcg-balloon-selector>
        `}renderTitleColorInputs(){return x`
            <qrcg-color-picker name="title_color">
                ${t$3`Title Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="title_border_color">
                ${t$3`Title Border Color`}
            </qrcg-color-picker>
        `}renderSubtitleColorInputs(){return x`
            <qrcg-color-picker name="subtitle_color">
                ${t$3`Subtitle Color`}
            </qrcg-color-picker>
        `}renderAnswerColorInputs(){return x`
            <qrcg-color-picker name="answer_color">
                ${t$3`Answer Text Color`}
            </qrcg-color-picker>
        `}renderAnswerFontInputs(){return BlockRenderHelper.renderFontInputs("answer")}renderContentFontInputs(){return BlockRenderHelper.renderFontInputs()}renderTitleFontInputs(){return BlockRenderHelper.renderFontInputs("title")}renderSubtitleFontInputs(){return BlockRenderHelper.renderFontInputs("subtitle")}renderBlockStyleInputs(){return x`
            <qrcg-color-picker name="background_color">
                ${t$3`Background Color`}
            </qrcg-color-picker>

            <qrcg-range-input
                name="border_radius"
                min="0"
                max="100"
                step="0.1"
                show-value
            >
                ${t$3`Border Radius`}
            </qrcg-range-input>

            <qrcg-range-input
                name="block_padding"
                min="0"
                max="100"
                step="0.1"
                show-value
            >
                ${t$3`Padding`}
            </qrcg-range-input>
        `}renderLinkTabInputs(){return x`
            <qrcg-balloon-selector
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                name="link_enabled"
            >
                ${t$3`Show Link Button?`}
            </qrcg-balloon-selector>

            <qrcg-input name="link_text" placeholder=${t$3`Enter text`}>
                ${t$3`Link Text`}
            </qrcg-input>

            <qrcg-input name="link_url" placeholder=${t$3`Enter url`}>
                ${t$3`Link URL`}
            </qrcg-input>

            <qrcg-color-picker name="link_background_color">
                ${t$3`Background Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="link_text_color">
                ${t$3`Text Color`}
            </qrcg-color-picker>

            <qrcg-range-input
                name="link_border_radius"
                min="0"
                max="100"
                step="0.1"
                show-value
            >
                ${t$3`Border Radius`}
            </qrcg-range-input>

            <qrcg-range-input
                name="link_width"
                min="0"
                max="100"
                step="0.1"
                show-value
            >
                ${t$3`Width (%)`}
            </qrcg-range-input>

            ${BlockRenderHelper.renderFontInputs("link")}
        `}renderEditForm(){return x`
            ${this.renderDataInputs()}

            <!--  -->
            ${this.renderTabs()}

            <div
                class=${e$1({hidden:!this.isBlockTabActive()})}
            >
                ${this.renderBlockStyleInputs()}
            </div>

            <div class=${e$1({hidden:!this.isQuestionTabActive()})}>
                <!--  -->
                ${this.renderQuestionStyles()}
                <!--  -->
                ${this.renderContentFontInputs()}
            </div>

            <div class=${e$1({hidden:!this.isAnswerTabActive()})}>
                <!--  -->
                ${this.renderAnswerColorInputs()}
                <!--  -->
                ${this.renderAnswerFontInputs()}
            </div>

            <div class=${e$1({hidden:!this.isTitleTabActive()})}>
                <!--  -->
                ${this.renderTitleColorInputs()}
                <!--  -->
                ${this.renderTitleFontInputs()}
            </div>

            <div class=${e$1({hidden:!this.isSubtitleTabActive()})}>
                ${this.renderSubtitleColorInputs()}
                <!--  -->
                ${this.renderSubtitleFontInputs()}
            </div>

            <div class=${e$1({hidden:!this.isLinkTabActive()})}>
                ${this.renderLinkTabInputs()}
            </div>
        `}}FAQsBlock.register();class ItemModal extends ImageListModal{static tag="qrcg-list-block-item-modal";getIconOptions(){return[{name:t$3`No Icon`,value:"no-icon"},...BALLOON_SELECTOR_ICONS]}renderInputs(){return x`
            <qrcg-textarea name="text" placeholder=${t$3`Enter text`}>
                ${t$3`Text`}
            </qrcg-textarea>

            <qrcg-balloon-selector
                .options=${this.getIconOptions()}
                name="icon"
            >
                ${t$3`Icon`}
            </qrcg-balloon-selector>

            ${this.renderCustomIconInput()}
        `}renderCustomIconInput(){if(this.data.icon==="custom")return this.renderFileInput("icon_file",t$3`Icon File`)}renderImageFileInput(){}}ItemModal.register();class ItemInput extends ImageListInput{static tag="qrcg-list-block-item-input";openItemModal(w){return ItemModal.open({data:w,qrcodeId:WebpageDesigner.data.qrcode_id})}getItemName(w){return w.text}renderItemImage(){}}ItemInput.register();class ListBlock extends BaseBlock{static tag="qrcg-list-block";static styleSheets=[...super.styleSheets];static name(){return t$3`List`}static slug(){return"list"}static icon(){return mdiMenu}getTabs(){return[{name:t$3`Block Styles`,value:"block_style"},{name:t$3`Text Style`,value:"text_style"},{name:t$3`Icon Style`,value:"icon_style"},{name:t$3`Title Style`,value:"title_style"}]}getIconBorderStyleOptions(){return[{name:t$3`Round`,value:"round"},{name:t$3`Square`,value:"square"},{name:t$3`None`,value:"none"}]}isTabActive(w,q=!1){const D=this.model.field("tab")===w;return q?D||isEmpty(this.model.field("tab")):D}renderItemsInput(){return x`
            <qrcg-list-block-item-input name="items">
            </qrcg-list-block-item-input>
        `}renderTabs(){return x`
            <qrcg-balloon-selector name="tab" .options=${this.getTabs()}>
            </qrcg-balloon-selector>
        `}renderTextStyles(){return x`
            <qrcg-color-picker name="text_color">
                ${t$3`Text Color`}
            </qrcg-color-picker>

            ${BlockRenderHelper.renderFontInputs("text")}
        `}renderIconStyles(){return x`
            <qrcg-color-picker name="icon_color">
                ${t$3`Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="icon_background_color">
                ${t$3`Background Color`}
            </qrcg-color-picker>

            <qrcg-range-input
                name="icon_size"
                min="1"
                max="100"
                step="0.1"
                show-value
            >
                ${t$3`Size`}
            </qrcg-range-input>

            <qrcg-balloon-selector
                name="icon_border_style"
                .options=${this.getIconBorderStyleOptions()}
            >
                ${t$3`Border Style`}
            </qrcg-balloon-selector>
        `}renderTitleStyles(){return x`
            <qrcg-color-picker name="title_color">
                ${t$3`Color`}
            </qrcg-color-picker>

            ${BlockRenderHelper.renderFontInputs("title")}
        `}renderBlockStyles(){return x`
            <qrcg-color-picker name="background_color">
                ${t$3`Background Color`}
            </qrcg-color-picker>

            <qrcg-range-input
                name="border_radius"
                min="0"
                max="100"
                step="0.1"
                show-value
            >
                ${t$3`Border Radius`}
            </qrcg-range-input>

            <qrcg-range-input
                name="block_padding"
                min="0"
                max="100"
                step="0.1"
                show-value
            >
                ${t$3`Padding`}
            </qrcg-range-input>
        `}renderEditForm(){return x`
            <qrcg-input name="main_title" placeholder=${t$3`Enter title`}>
                ${t$3`Title`}
            </qrcg-input>

            ${this.renderItemsInput()}

            <!--  -->
            ${this.renderTabs()}

            <div
                class=${e$1({hidden:!this.isTabActive("block_style",!0)})}
            >
                ${this.renderBlockStyles()}
            </div>

            <div
                class=${e$1({hidden:!this.isTabActive("text_style")})}
            >
                <!--  -->
                ${this.renderTextStyles()}
            </div>

            <div
                class=${e$1({hidden:!this.isTabActive("icon_style")})}
            >
                ${this.renderIconStyles()}
            </div>

            <div
                class=${e$1({hidden:!this.isTabActive("title_style")})}
            >
                <!--  -->
                ${this.renderTitleStyles()}
            </div>
        `}}ListBlock.register();class QrcgUpiQRCodeForm extends BaseTypeForm{static styles=[super.styles,i$3`
            qrcg-form-section {
                margin-top: 1rem;
            }
        `];constructor(){super(),this.submitOnInput=!0}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}static renderFormFields(){return x`
            <qrcg-input name="payee_name" placeholder=${t$3`Payee Name`}>
                ${t$3`Payee Name`}
            </qrcg-input>

            <qrcg-input name="upi_id" placeholder=${t$3`UPI ID`} type="email">
                ${t$3`UPI ID`}
            </qrcg-input>

            <qrcg-input
                name="amount"
                placeholder=${t$3`Amount`}
                type="number"
                min="1"
            >
                ${t$3`Amount. (Optional)`}
            </qrcg-input>
        `}render(){return x`
            <qrcg-form-comment>
                ${t$3`Create UPI payment QR code.`}
            </qrcg-form-comment>
            <qrcg-form>
                <qrcg-form-section>
                    <h2 class="section-title">${t$3`Details`}</h2>

                    ${QrcgUpiQRCodeForm.renderFormFields()}
                </qrcg-form-section>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-upi-form",QrcgUpiQRCodeForm);class UpiBlock extends LinkBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static name(){return t$3`UPI Block`}static slug(){return"upi"}static icon(){return mdiContactlessPayment}renderEditForm(){return x`
            ${QrcgUpiQRCodeForm.renderFormFields()}
            <!--  -->
            ${super.renderEditForm()}
        `}renderUrlInput(){}renderTargetInput(){}}UpiBlock.register();class CopyableDataBlock extends BaseBlock{static name(){return t$3`Copyable Data`}static slug(){return"copyable-data"}static icon(){return mdiText}getTabsOptions(){return[{name:t$3`Label Styles`,value:"label"},{name:t$3`Value Styles`,value:"value"},{name:t$3`Block Styles`,value:"block"}]}modelName(){let w=this.model.field("label");return w=w?.substring(0,20),w}shouldShowLabelStyles(){return this.model.isEmpty("tab")||this.model.field("tab")==="label"}shouldShowBlockStyles(){return this.model.field("tab")==="block"}shouldShowValueStyles(){return this.model.field("tab")==="value"}renderEditForm(){return x`
            <qrcg-input name="label" placeholder="${t$3`Label`}">
                ${t$3`Label`}
            </qrcg-input>

            <qrcg-input name="value" placeholder="${t$3`Value`}">
                ${t$3`Value`}
            </qrcg-input>

            <qrcg-balloon-selector name="tab" .options=${this.getTabsOptions()}>
            </qrcg-balloon-selector>

            <div
                class="tab ${this.shouldShowLabelStyles()?"active":"hidden"}"
            >
                <qrcg-color-picker name="label_color">
                    ${t$3`Label Color`}
                </qrcg-color-picker>

                <!--  -->

                ${BlockRenderHelper.renderFontInputs("label")}
                <!--  -->
            </div>

            <div
                class="tab ${this.shouldShowValueStyles()?"active":"hidden"}"
            >
                <qrcg-color-picker name="value_color">
                    ${t$3`Value Color`}
                </qrcg-color-picker>

                <!--  -->
                ${BlockRenderHelper.renderFontInputs("value")}
            </div>

            <div
                class="tab ${this.shouldShowBlockStyles()?"active":"hidden"}"
            >
                <!--  -->
                ${BlockRenderHelper.renderBlockPaddingInput()}

                <qrcg-color-picker name="background_color">
                    ${t$3`Background Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="border_color">
                    ${t$3`Border Color`}
                </qrcg-color-picker>

                ${BlockRenderHelper.renderBorderRadiusInput()}
            </div>
        `}}window.defineCustomElement(CopyableDataBlock.tag,CopyableDataBlock);const style$1z=".instructions{margin-bottom:1rem;color:var(--gray-2)}qrcg-audio-recorder{margin-bottom:1rem}";class AudioBlock extends BaseBlock{static styleSheets=[...super.styleSheets,style$1z];static name(){return t$3`Audio`}static slug(){return"audio"}static icon(){return mdiCastAudio}onRecordCompleted(w){const q=w.detail.file;this.getFileInput().uploadFile(q)}getFileInput(){return this.$("[name=audio_file]")}renderEditForm(){return x`
            <div class="instructions">
                ${t$3`You can record your voice or upload an audio file.`}
            </div>

            <qrcg-audio-recorder
                @on-record-completed=${this.onRecordCompleted}
            ></qrcg-audio-recorder>

            ${this.renderFileInput("audio_file",t$3`Audio File`)}
        `}}AudioBlock.register();class iFrameBlock extends LinkBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static name(){return t$3`Full Screen iFrame`}static slug(){return"iframe"}static icon(){return mdiFitToScreen}renderTargetInput(){}}iFrameBlock.register();class BlockInput extends ImageCarouselInput{static tag="qrcg-image-carousel-block-input";static styleSheets=[...super.styleSheets];updateField(w,q){super.updateField(w,q),this.value.mode="enabled"}renderModeInput(){}}BlockInput.register();class ImageCarouselBlock extends BaseBlock{static tag="qrcg-image-carousel-block";static styleSheets=[...super.styleSheets];static name(){return t$3`Image Carousel`}static slug(){return"image-carousel"}static icon(){return mdiHorizontalRotateClockwise}renderEditForm(){return x`
            <qrcg-image-carousel-block-input
                name="image-carousel"
            ></qrcg-image-carousel-block-input>
        `}}ImageCarouselBlock.register();class QRCodeDetailsBlock extends BaseBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static name(){return t$3`QR Code Details`}static slug(){return"qrcode-details"}static icon(){return mdiQrcode}modelName(){return this.model.getData()?.text}renderEditForm(){return x`
            <qrcg-color-picker name="backgroundColor">
                ${t$3`Background Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="textColor">
                ${t$3`Text Color`}
            </qrcg-color-picker>

            <!--  -->
            ${BlockRenderHelper.renderFontInputs()}

            <!--  -->
            ${BlockRenderHelper.renderBorderRadiusInput()}

            <qrcg-range-input
                name="padding"
                value="3"
                min="0"
                max="50"
                step="0.5"
                show-value
            >
                ${t$3`Padding`}
            </qrcg-range-input>

            <qrcg-range-input
                name="border_width"
                value="3"
                min="0"
                max="25"
                step="0.5"
                show-value
            >
                ${t$3`Border Width`}
            </qrcg-range-input>

            <qrcg-color-picker name="border_color">
                ${t$3`Border Color`}
            </qrcg-color-picker>
        `}}window.defineCustomElement(QRCodeDetailsBlock.tag,QRCodeDetailsBlock);class BlocksManager{static#e=[];static registerBlock(w){w.isEnabled()&&(this.#e.find(q=>q.slug()===w.slug())||this.#e.push(w))}static getBlocks(){return this.#e}static find(w){return this.getBlocks().find(q=>q.slug()===w)}static renderBlock(w,q){const D=new BlockModel(w),Q=this.find(D.getSlug());if(Q)return u$3`${s$3(`<${Q.tag} model-id='${D.getId()}' qrcode-id="${q}">
            </${Q.tag}>`)}`}}BlocksManager.registerBlock(TitleBlock);BlocksManager.registerBlock(LinkBlock);BlocksManager.registerBlock(SocialLinksBlock);BlocksManager.registerBlock(ProfileBlock);BlocksManager.registerBlock(ImageGridBlock);BlocksManager.registerBlock(CustomCodeBlock);BlocksManager.registerBlock(ImageBlock);BlocksManager.registerBlock(ParagraphBlock);BlocksManager.registerBlock(OpeningHoursBlock);BlocksManager.registerBlock(LeadFormBlock);BlocksManager.registerBlock(FileBlock);BlocksManager.registerBlock(InformationPopupBlock);BlocksManager.registerBlock(VCardBlock);BlocksManager.registerBlock(ShareBlock);BlocksManager.registerBlock(VideoBlock);BlocksManager.registerBlock(TableBlock);BlocksManager.registerBlock(FAQsBlock);BlocksManager.registerBlock(ListBlock);BlocksManager.registerBlock(UpiBlock);BlocksManager.registerBlock(CopyableDataBlock);BlocksManager.registerBlock(AudioBlock);BlocksManager.registerBlock(iFrameBlock);BlocksManager.registerBlock(ImageCarouselBlock);BlocksManager.registerBlock(QRCodeDetailsBlock);class BaseDynamicBlock extends BaseBlock{static styles=[...super.styles,i$3`
            :host {
                display: block;
            }
        `];static name(){}static slug(){return`dynamic-${this.dynamicBlock.id}`}static get dynamicBlock(){return null}get dynamicBlock(){return this.constructor.dynamicBlock}static get iconId(){return this.dynamicBlock?.icon_id}static renderPreviewModeIcon(){if(this.iconId)return x`
            <img src=${this.dynamicBlock.icon_url} class="block-icon" />
        `}modelName(){let w=0,q=this.sortedFields[w];for(;q.type&&q.type!="text";)q=this.sortedFields[++w],console.log(q);return this.model.field(q.name)}get sortedFields(){return this.dynamicBlock?.fields?this.dynamicBlock.fields.sort((w,q)=>parseNumberValue(w.sort_order,100)-parseNumberValue(q.sort_order,100)):[]}renderField(w){switch(w.type){case"text":return this.renderTextField(w);case"textarea":return this.renderTextAreaField(w);case"image":return this.renderFileInput(w.name,w.name);case"custom-code":return this.renderCustomCodeInput(w);default:return this.renderTextField(w)}}renderCustomCodeInput(w){return x`
            <qrcg-code-input name=${w.name}>
                <div>${w.name}</div>
            </qrcg-code-input>
        `}renderTextAreaField(w){return x`
            <qrcg-textarea name=${w.name} placeholder=${w.placeholder}>
                ${w.name}
            </qrcg-textarea>
        `}renderTextField(w){return x`
            <qrcg-input name=${w.name} placeholder=${w.placeholder}>
                ${w.name}
            </qrcg-input>
        `}renderCustomFields(){return this.dynamicBlock.fields.map(w=>this.renderField(w))}renderColorInputs(){return x`
            <qrcg-color-picker name="text_color">
                ${t$3`Text Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="background_color">
                ${t$3`Background Color`}
            </qrcg-color-picker>
        `}renderFontStyleFields(){return BlockRenderHelper.renderFontInputs()}renderEditForm(){return[this.renderCustomFields(),this.renderColorInputs(),this.renderFontStyleFields()]}}class DynamicBlocksManager{async registerBlocks(){if(DynamicBlocksManager.__didFetchBlocks)return;(await this.buildDynamicBlocksClasses()).forEach(q=>{BlocksManager.registerBlock(q),window.defineCustomElement(q.tag,q)}),document.dispatchEvent(new CustomEvent("biolinks-blocks-input:request-update")),DynamicBlocksManager.__didFetchBlocks=!0}async buildDynamicBlocksClasses(){return(await this.fetchDynamicBlocks()).map(D=>this.generateClass(D))}async fetchDynamicBlocks(){const{response:w}=await get("dynamic-biolink-blocks?list_all=true");return await w.json()}generateClass(w){return class extends BaseDynamicBlock{static name(){return w.name}static get dynamicBlock(){return w}}}}const style$1y=":host{display:block}.empty-message{margin:2rem 0;text-align:center;color:var(--gray-2)}.block-types{display:flex;flex-wrap:wrap;gap:.5rem}.add-block-button{--button-color: var(--dark);--button-background-color: var(--light);--button-color-hover: var(--dark);--button-background-color-hover: var(--gray-1);--button-box-shadow: none;--button-hover-box-shadow: none}.add-block-button::part(button){border:1px solid var(--gray-1);font-size:.8rem;padding:.35rem .5rem;min-width:unset}@media(max-width:900px){.add-block-button::part(button){padding:1rem .5rem;min-width:unset}}.add-block-button .block-icon{margin-right:.5rem;opacity:.8}.block-types-container{position:relative}.block-types-title{color:var(--gray-2);text-align:center;margin-bottom:.5rem}.block-icon{width:1rem;height:1rem}.block-icon::part(loader){transform:scale(.5)}.toolbar{display:flex;flex-wrap:wrap;border:1px solid var(--gray-1);border-radius:.25rem;margin:1rem 0}.toolbar .action{color:var(--primary-0);cursor:pointer;padding:.5rem;font-size:.8rem;font-weight:700}.toolbar .action:hover{text-decoration:underline}";class QrcgBlocksInput extends BaseComponent{dynamicBlocks=new DynamicBlocksManager;static styleSheets=[...super.styleSheets,style$1y];static get properties(){return{name:{},value:{type:Array},loading:{type:Boolean},qrcodeId:{attribute:"qrcode-id"}}}constructor(){super(),this.value=[],this.dynamicBlocks.registerBlocks()}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.addEventListener("on-input",this.onInput),this.addEventListener("on-block-save",this.onBlockSave),this.addEventListener("on-block-delete",this.onBlockDelete),this.addEventListener("on-block-duplicate",this.onBlockDuplicate),document.addEventListener("biolinks-blocks-input:request-update",this.onRequestUpdate),SortManager.connectInput(this)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),this.removeEventListener("on-input",this.onInput),this.removeEventListener("on-block-save",this.onBlockSave),this.removeEventListener("on-block-delete",this.onBlockDelete),this.removeEventListener("on-block-duplicate",this.onBlockDuplicate),document.removeEventListener("biolinks-blocks-input:request-update",this.onRequestUpdate),SortManager.disconnectInput()}onRequestUpdate=()=>{this.requestUpdate()};onBlockSave=w=>{w.preventDefault(),w.stopImmediatePropagation(),w.stopPropagation();const q=this.getValue().map(D=>{const Q=new BlockModel(D),O=w.detail.model;return Q.getId()===O.getId()?O.toPlainObject():D});this.fireOnInput(q)};onBlockDelete=w=>{const q=this.getValue().filter(D=>{const Q=new BlockModel(D),O=w.detail.model;return Q.getId()!==O.getId()});this.fireOnInput(q),this.recalculateFormSectionHeight()};recalculateFormSectionHeight(){setTimeout(()=>{QrcgFormSection.recalculateHeights()},1500)}onClick=w=>{const q=w.composedPath()[0];let D=null;if(D=parentMatches(q,".add-block-button"))return this.onAddBlockButtonClick(D)};onAddBlockButtonClick(w){this.addBlock(w.block)}updated(w){w.has("value")&&this.updateComplete.then(()=>{this.focusFirstInputInNewlyAddedBlock()})}requestPositionalVariablesReset(){}onBlockDuplicate(w){const q=w.detail.model,D=q.toPlainObject(),Q=[...this.getValue(),D];this.fireOnInput(Q),showToast(t$3`Block duplicated successfully`),this.newlyAddedModel=q}async addBlock(w){const q=w.makeNewModel(this.getValue().length),D=[...this.getValue(),q.toPlainObject()];this.fireOnInput(D),showToast(t$3`Block added successfully`),this.newlyAddedModel=q,this.recalculateFormSectionHeight()}focusFirstInputInNewlyAddedBlock(){if(!this.newlyAddedModel)return;Array.from(this.shadowRoot.querySelectorAll("*")).find(D=>D instanceof BaseBlock&&D.model.getId()===this.newlyAddedModel.getId())?.focusFirstInput(),this.newlyAddedModel=null}fireOnInput(w){this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:w}}))}getValue(){return this.value??[]}sortedBlocks(){return this.getValue().sort(function(w,q){return new BlockModel(w).getSortOrder()-new BlockModel(q).getSortOrder()})}requestCloseAllBlocks(){document.dispatchEvent(new CustomEvent(BaseBlock.EVENT_CLOSE_ALL_REQUESTED))}renderEmptyBlocksMessage(){if(isEmpty(this.getValue()))return x`
            <div class="empty-message">
                ${t$3`There are no blocks. Click on block above to add new block.`}
            </div>
        `}renderBlockTypes(){return BlocksManager.getBlocks().map(w=>x`
                <qrcg-button class="add-block-button" .block=${w}>
                    ${w.renderPreviewModeIcon()} ${w.name()}
                </qrcg-button>
            `)}renderBlocks(){return x`
            <div class="blocks">
                ${this.sortedBlocks().map(w=>BlocksManager.renderBlock(w,this.qrcodeId))}
            </div>
        `}renderBlockTypeSelector(){return x`
            <div class="block-types-container">
                <div class="block-types-title">${t$3`Add Block`}</div>

                <div class="block-types">${this.renderBlockTypes()}</div>
            </div>
        `}renderToolbar(){return x`
            <div class="toolbar">
                <!--  -->
                <div class="action sort" @click=${this.requestCloseAllBlocks}>
                    ${t$3`Sort Blocks`}
                </div>
            </div>
        `}render(){return x`
            ${this.renderBlockTypeSelector()}
            <!--  -->
            ${this.renderToolbar()}
            <!-- -->
            ${this.renderEmptyBlocksMessage()}
            <!-- -->
            ${this.renderBlocks()}
        `}}window.defineCustomElement("qrcg-biolinks-blocks-input",QrcgBlocksInput);class BioLinksWebpageDesigner extends WebpageDesigner{static get styles(){return[super.styles,i$3`
                qrcg-balloon-selector[name='backgroundType'] {
                    margin-bottom: 1rem;
                }
            `]}async fetchData(){await super.fetchData(),await this.updateComplete,this.syncInputs()}renderCurrentBackgroundTypeInputs(){switch(this.data.design.backgroundType){case"solid":return x`
                    <qrcg-color-picker name="backgroundColor">
                        ${t$3`Background Color`}
                    </qrcg-color-picker>
                `;case"gradient":return x`
                    <qrcg-gradient-input name="backgroundGradient">
                        ${t$3`Background Gradient`}
                    </qrcg-gradient-input>
                `;case"image":return x`
                    ${this.renderFileInput("biolinksBackgroundImage",t$3`Background Image`,t$3`Recommended size 400x1200`)}
                `;case"video":return x`
                    ${this.renderFileInput("biolinksBackgroundVideo",t$3`Video Background`)}
                `;default:return x`
                    <qrcg-color-picker name="backgroundColor">
                        ${t$3`Background Color`}
                    </qrcg-color-picker>
                `}}renderCurrentBannerInputs(){switch(this.data.design.banner_type){case"no-banner":return;case"image":return this.renderBannerImageInput();case"video":return this.renderBannerVideoInput()}}renderBannerOptions(){return x`
            <qrcg-balloon-selector
                name="banner_type"
                .options=${[{name:t$3`No Banner`,value:"no-banner"},{name:t$3`Image`,value:"image"},{name:t$3`Video`,value:"video"}]}
            >
                ${t$3`Banner Type. Default (No Banner)`}
            </qrcg-balloon-selector>

            ${this.renderCurrentBannerInputs()}
        `}renderProfileImageInput(){if(this.data.design.profile_image_enabled=="enabled")return x`
            ${this.renderFileInput("profile_image",t$3`Profile Image`,t$3`Square Image`,".jpg,.png,.svg")}
        `}renderProfileImageOptions(){return x`
            <qrcg-balloon-selector
                name="profile_image_enabled"
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
            >
                ${t$3`Profile Image. Default (Disabled)`}
            </qrcg-balloon-selector>

            ${this.renderProfileImageInput()}
        `}renderBackgroundSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Settings`}</h2>

                <!-- -->
                ${this.renderFaviconInput()}

                <!--  -->
                ${this.renderSeoInput()}

                <!--  -->
                ${this.renderBannerOptions()}

                <!--  -->

                ${this.renderProfileImageOptions()}

                <qrcg-balloon-selector
                    name="backgroundType"
                    .options=${[{name:t$3`Solid Color`,value:"solid"},{name:t$3`Gradient`,value:"gradient"},{name:t$3`Image`,value:"image"},{name:t$3`Video`,value:"video"}]}
                >
                    ${t$3`Background Type. Default (Solid Color)`}
                </qrcg-balloon-selector>

                ${this.renderCurrentBackgroundTypeInputs()}

                <!-- -->
                ${this.renderQRCodeLanguageInput()}

                <!--  -->
                ${this.renderDesktopCustomizationInput()}

                <!--  -->
                ${this.renderStackInput()}

                <!--  -->
                ${this.formBuilder.renderInputs()}

                <!--  -->
                ${this.welcomeModal.render(this.data.design)}

                <!--  -->

                ${this.renderSplashScreenInputs()}

                <!--  -->

                ${this.renderShareOverlayInputs()}
                <!--  -->
                ${this.renderAnimatePreviewField()}
            </qrcg-form-section>
        `}renderBlocksSection(){return x`
            <qrcg-biolinks-blocks-input
                name="blocks"
                qrcode-id=${this.qrcodeId}
            ></qrcg-biolinks-blocks-input>
        `}renderSections(){return x`
            ${this.renderBlocksSection()}
            <!--  -->
            ${this.renderBackgroundSection()}
        `}}window.defineCustomElement("qrcg-biolinks-webpage-designer",BioLinksWebpageDesigner);class BioLinksDesigner extends BaseTypeDesigner{webPageDesignerElementName(){return"qrcg-biolinks-webpage-designer"}}window.defineCustomElement("qrcg-biolinks-designer",BioLinksDesigner);class BioLinksType extends BaseQRCodeType{static qrcodeType(){return"biolinks"}renderTypeDesigner(){return x` <qrcg-biolinks-designer></qrcg-biolinks-designer> `}}class QrcgEventDateTimeModal extends ImageListModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];renderFileInput(){return null}renderInputs(){return x`
            <qrcg-input name="day_name" placeholder="${t$3`Day 1`}" required>
                ${t$3`Day name`}
            </qrcg-input>

            <qrcg-input
                required
                name="date"
                type="date"
                placeholder="${t$3`Date`}"
            >
                ${t$3`Date`}
            </qrcg-input>

            <qrcg-input
                name="time_from"
                type="time"
                placeholder="${t$3`Time`}"
                required
            >
                ${t$3`Time from`}
            </qrcg-input>

            <qrcg-input
                name="time_to"
                type="time"
                placeholder="${t$3`Time`}"
                required
            >
                ${t$3`Time to`}
            </qrcg-input>

            <qrcg-textarea
                name="description"
                placeholder="${t$3`Optional description`}"
            >
                ${t$3`Description`}
            </qrcg-textarea>
        `}}window.defineCustomElement("qrcg-event-date-time-modal",QrcgEventDateTimeModal);class QrcgEventDateTimeInput extends ImageListInput{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            .day-date {
                color: var(--gray-2);
                display: inline-block;
                margin-left: 1rem;
            }
        `];static get properties(){return{...super.properties}}renderItemImage(){return null}getItemName(w){return x`
            <span class="day-name"> ${w.day_name} </span>

            <span class="day-date"> ${w.date} </span>
        `}openItemModal(w){return QrcgEventDateTimeModal.open({data:w,qrcodeId:this.qrcodeId})}}window.defineCustomElement("qrcg-event-date-time-input",QrcgEventDateTimeInput);let QRCGEventForm$1=class extends BaseTypeForm{static styles=[super.styles,i$3`
            qrcg-form-section {
                margin-top: 1rem;
            }

            [name] {
                margin-bottom: 0;
            }

            [name='bio'] {
                margin-top: 1rem;
            }

            .row {
                display: grid;
                grid-gap: 1rem;
                grid-template-columns: 1fr 1fr;
            }

            @media (max-width: 900px) {
                .row {
                    grid-template-columns: 1fr;
                }
            }

            .add-contact-field {
                color: var(--primary-0);
                text-decoration: none;
                margin-bottom: 1rem;
            }

            .add-contact-field-container {
                display: flex;
                align-items: flex-end;
            }

            .custom-field-delete {
                position: absolute;
                right: 0.25rem;
                top: 1.6rem;
            }

            .custom-field-delete::part(button) {
                min-width: 0;
                padding: 0.5rem;
            }
        `];constructor(){super(),this.data.contactFields=[]}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}renderContactDetails(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Contact Person Details`}</h2>

                <div class="row">
                    <qrcg-input name="contact_name" placeholder=${t$3`Name`}>
                        ${t$3`Name`}
                    </qrcg-input>
                    <qrcg-input name="contact_mobile" placeholder=${t$3`Mobile`}>
                        ${t$3`Mobile`}
                    </qrcg-input>
                    <qrcg-input
                        name="contact_email"
                        placeholder=${t$3`Email`}
                        type="email"
                    >
                        ${t$3`Email`}
                    </qrcg-input>
                </div>
            </qrcg-form-section>
        `}renderBasicDetailsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Basic Details`}</h2>

                <div class="row">
                    <qrcg-input
                        name="event_name"
                        placeholder="${t$3`Special event`}"
                    >
                        ${t$3`Event name`}
                    </qrcg-input>

                    <qrcg-input
                        name="organizer_name"
                        placeholder="${t$3`Organizer name`}"
                    >
                        ${t$3`Organizer name`}
                    </qrcg-input>

                    <qrcg-input
                        placeholder="https://...."
                        name="registration_url"
                    >
                        ${t$3`Registration URL`}
                    </qrcg-input>

                    <qrcg-textarea
                        name="description"
                        placeholder="${t$3`Add event description here`}"
                    >
                        ${t$3`Event Description`}
                    </qrcg-textarea>
                </div>
            </qrcg-form-section>
        `}renderLocationDetailsSections(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Location Details`}</h2>

                <div class="row">
                    <qrcg-input
                        name="location_url"
                        placeholder="${t$3`https://....`}"
                    >
                        ${t$3`Maps URL`}
                        <div slot="instructions">
                            ${t$3`Could be Google maps or any other maps application`}
                        </div>
                    </qrcg-input>

                    <qrcg-input
                        name="location"
                        placeholder="${t$3`Event full address`}"
                    >
                        <div slot="instructions">
                            ${t$3`Full address of the event.`}
                        </div>
                        ${t$3`Location (Venue)`}
                    </qrcg-input>
                </div>
            </qrcg-form-section>
        `}renderTimeSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Date & Time Breakdown`}</h2>
                <qrcg-event-date-time-input
                    name="day_breakdown"
                ></qrcg-event-date-time-input>

                <qrcg-timezone-select name="timezone"></qrcg-timezone-select>
            </qrcg-form-section>
        `}render(){return x`
            <qrcg-form-comment>
                ${t$3`Create life calendar events that can be easily added to your customer phone.`}
            </qrcg-form-comment>
            <qrcg-form>
                ${this.renderBasicDetailsSection()}

                <!-- -->
                ${this.renderContactDetails()}

                <!-- -->
                ${this.renderLocationDetailsSections()}

                <!-- -->
                ${this.renderTimeSection()}

                <qrcg-textarea
                    name="socialProfiles"
                    placeholder="https://youtube.com/...&#10;https://twitter.com/...&#10;https://instagram.com/...."
                >
                    ${t$3`Social Profiles`}

                    <div slot="instructions">
                        ${t$3`Add each social media link in a new line`}
                    </div>
                </qrcg-textarea>
            </qrcg-form>
        `}};window.defineCustomElement("qrcg-event-form",QRCGEventForm$1);class EventWebpageDesigner extends WebpageDesigner{static get styles(){return[super.styles,i$3`
                * {
                    box-sizing: border-box;
                }

                .image-block {
                    display: grid;
                    grid-template-columns: 2fr 3fr;
                    grid-gap: 1rem;
                    background-color: var(--gray-0);
                    padding: 1rem;
                    margin: 0 0 1rem 0;
                    align-items: flex-start;
                }

                .image-block img {
                    max-width: 100%;
                    grid-row: span 3;
                }
            `]}constructor(){super()}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}renderImagesSection(){return x`
            <section>
                <h2 class="section-title">${t$3`Images`}</h2>
                <qrcg-input
                    name="portfolio_section_title"
                    placeholder=${t$3`Title`}
                >
                    ${t$3`Section Title`}
                </qrcg-input>

                <qrcg-color-picker name="portfolio_section_title_color">
                    ${t$3`Color`}
                </qrcg-color-picker>

                <qrcg-business-profile-portfolio-input
                    name="portfolio"
                    qrcode-id=${this.qrcodeId}
                ></qrcg-business-profile-portfolio-input>
            </section>
        `}renderColorBackgroundPosition(w){switch(w){case"last-elements":return this.renderAdditionalColors()}}renderAdditionalColors(){return x`
            <qrcg-color-picker name="secondBackgroundColor">
                ${t$3`Second Background Color`}
            </qrcg-color-picker>
        `}renderAdvancedSection(){return x`
            <section>
                <h2 class="section-title">${t$3`Advanced`}</h2>

                ${this.renderCustomCodeInput()}

                <!--  -->
                ${this.renderDesktopCustomizationInput()}
            </section>
        `}renderRegisterButtonSection(){if(!isEmpty(get$1(this.qrcode,"data.registration_url")))return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Register Button`}</h2>

                <qrcg-input
                    name="registration_button_text"
                    placeholder=${t$3`Register Now`}
                >
                    ${t$3`Register Button Text`}
                </qrcg-input>

                <qrcg-color-picker name="registerButtonColor">
                    ${t$3`Register Button Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="registerButtonTextColor">
                    ${t$3`Register Button Text Color`}
                </qrcg-color-picker>
            </qrcg-form-section>
        `}renderAddToCalendarButtonSection(){const w=()=>{if(this.data.design.addToCalendarButtonEnabled!=="disabled")return x`
                <qrcg-input
                    name="addToCalendarButtonText"
                    placeholder=${t$3`Add to Calendar`}
                >
                    ${t$3`Add to Calendar Button Text`}
                </qrcg-input>

                <qrcg-color-picker name="addToCalendarButtonColor">
                    ${t$3`Add to Calendar Button Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="addToCalendarButtonTextColor">
                    ${t$3`Add to Calendar Button Text Color`}
                </qrcg-color-picker>
            `};return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Add To Calendar Button`}</h2>

                <qrcg-balloon-selector
                    name="addToCalendarButtonEnabled"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`Show Button. Default (Enabled)`}
                </qrcg-balloon-selector>

                ${w()}
            </qrcg-form-section>
        `}renderFAQsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`FAQs`}</h2>

                <qrcg-input
                    name="faqs_main_title"
                    placeholder="${t$3`Our Services`}"
                >
                    ${t$3`Main Title`}
                </qrcg-input>

                <qrcg-faqs-input name="faqs"></qrcg-faqs-input>
            </qrcg-form-section>
        `}renderBackgroundImageInput(){return x`
            ${this.renderFileInput("backgroundImage",t$3`Banner Image`,t$3`Recommended size 400x700`)}
            ${this.renderFileInput("logo",t$3`Logo (Optional)`,t$3`Recommended size 300x300`)}
            ${this.renderFileInput("backgroundVideo",t$3`Video Background`)}
            ${this.renderQRCodeLanguageInput()}
        `}renderLeadformSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Lead Form`}</h2>

                <qrcg-lead-form-input
                    name="lead_form_id"
                    related_model="QRCodeWebPageDesign"
                    related_model_id="${this.data.id}"
                ></qrcg-lead-form-input>
            </qrcg-form-section>
        `}renderSections(){return x`
            ${super.renderSections()}

            <!-- -->
            ${this.renderRegisterButtonSection()}

            <!-- -->
            ${this.renderAddToCalendarButtonSection()}

            <!-- -->

            ${this.renderLeadformSection()}

            <!-- -->
            ${this.renderImagesSection()}

            <!-- -->
            ${this.renderFAQsSection()}

            <!-- -->
            ${this.renderAdvancedSection()}
        `}}window.defineCustomElement("qrcg-event-webpage-designer",EventWebpageDesigner);class EventDesigner extends BaseTypeDesigner{webPageDesignerElementName(){return"qrcg-event-webpage-designer"}}window.defineCustomElement("qrcg-event-designer",EventDesigner);class EventType extends BaseQRCodeType{static qrcodeType(){return"event"}renderTypeDesigner(){return x` <qrcg-event-designer></qrcg-event-designer> `}}class QRCGLeadFormForm extends BaseTypeForm{static styles=[super.styles,i$3`
            qrcg-form-section {
                margin-top: 1rem;
            }

            [name] {
                margin-bottom: 0;
            }

            [name='bio'] {
                margin-top: 1rem;
            }

            .row {
                display: grid;
                grid-gap: 1rem;
                grid-template-columns: 1fr 1fr;
            }

            @media (max-width: 900px) {
                .row {
                    grid-template-columns: 1fr;
                }
            }

            .add-contact-field {
                color: var(--primary-0);
                text-decoration: none;
                margin-bottom: 1rem;
            }

            .add-contact-field-container {
                display: flex;
                align-items: flex-end;
            }

            .custom-field-delete {
                position: absolute;
                right: 0.25rem;
                top: 1.6rem;
            }

            .custom-field-delete::part(button) {
                min-width: 0;
                padding: 0.5rem;
            }
        `];constructor(){super(),this.data.contactFields=[]}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}renderContactDetails(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Contact Person Details`}</h2>

                <div class="row">
                    <qrcg-input name="contact_name" placeholder=${t$3`Name`}>
                        ${t$3`Name`}
                    </qrcg-input>
                    <qrcg-input name="contact_mobile" placeholder=${t$3`Mobile`}>
                        ${t$3`Mobile`}
                    </qrcg-input>
                    <qrcg-input
                        name="contact_email"
                        placeholder=${t$3`Email`}
                        type="email"
                    >
                        ${t$3`Email`}
                    </qrcg-input>
                </div>
            </qrcg-form-section>
        `}renderBasicDetailsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Basic Details`}</h2>

                <div class="row">
                    <qrcg-input
                        name="form_name"
                        placeholder="${t$3`Feedback Collection`}"
                    >
                        ${t$3`Form name`}
                    </qrcg-input>
                </div>
            </qrcg-form-section>
        `}render(){return x`
            <qrcg-form-comment>
                ${t$3`Generate leads or collect customer feedback.`}
            </qrcg-form-comment>

            <qrcg-form> ${this.renderBasicDetailsSection()} </qrcg-form>
        `}}window.defineCustomElement("qrcg-lead-form-form",QRCGLeadFormForm);class LeadFormWebpageDesigner extends WebpageDesigner{constructor(){super()}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}updated(w){w.has("data")&&this.forceUpdate()}async forceUpdate(){this.requestUpdate(),await this.updateComplete,setTimeout(()=>{this.syncInputs()})}renderLeadformSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Lead Form`}</h2>

                <qrcg-lead-form-input
                    name="lead_form_id"
                    related_model="QRCodeWebPageDesign"
                    related_model_id="${this.data.id}"
                    mode=${QrcgLeadformInput.MODE_EXPANDED}
                    .shouldRenderTriggerButtonInput=${!1}
                ></qrcg-lead-form-input>
            </qrcg-form-section>
        `}renderColorsAndBackgroundSection(){return x`
            <section>
                <h2>${t$3`Page Settings`}</h2>

                <!-- -->
                ${this.renderFaviconInput()}

                <!--  -->
                ${this.renderSeoInput()}

                <!--  -->
                ${this.renderDesktopCustomizationInput()}

                <!--  -->
                ${this.renderQRCodeLanguageInput()}

                <!--  -->
                ${this.renderCustomCodeInput()}
            </section>
        `}renderSections(){return x`
            ${this.renderLeadformSection()}

            <!--  -->
            ${super.renderSections()}
        `}}window.defineCustomElement("qrcg-lead-form-webpage-designer",LeadFormWebpageDesigner);class LeadFormDesigner extends BaseTypeDesigner{webPageDesignerElementName(){return"qrcg-lead-form-webpage-designer"}}window.defineCustomElement("qrcg-lead-form-designer",LeadFormDesigner);class LeadFormType extends BaseQRCodeType{static qrcodeType(){return"lead-form"}renderTypeDesigner(){return x` <qrcg-lead-form-designer></qrcg-lead-form-designer> `}}class ResumeQRCodeDesigner extends BaseTypeDesigner{render(){return x` <qrcg-bound-qrcode-designer></qrcg-bound-qrcode-designer> `}}window.defineCustomElement("qrcg-resume-designer",ResumeQRCodeDesigner);class QrcgResumeQRCodeForm extends BaseTypeForm{static styles=[super.styles,i$3`
            qrcg-form-section {
                margin-top: 1rem;
            }
        `];connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}render(){return x`
            <qrcg-form-comment>
                ${t$3`Upload your resume and use it with a dynamic link`}
            </qrcg-form-comment>
            <qrcg-form>
                <qrcg-form-section>
                    <h2 class="section-title">${t$3`Resume Details`}</h2>

                    <qrcg-input name="name" placeholder=${t$3`Name`}>
                        ${t$3`Name`}
                    </qrcg-input>

                    <qrcg-file-input
                        name="resume_file_id"
                        upload-endpoint="qrcodes/data-file"
                    >
                        ${t$3`Resume File`}
                    </qrcg-file-input>
                </qrcg-form-section>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-resume-form",QrcgResumeQRCodeForm);class ResumeType extends BaseQRCodeType{static qrcodeType(){return"resume"}renderTypeDesigner(){return x` <qrcg-resume-designer></qrcg-resume-designer> `}}class FileUploadQRCodeDesigner extends BaseTypeDesigner{render(){return x` <qrcg-bound-qrcode-designer></qrcg-bound-qrcode-designer> `}}window.defineCustomElement("qrcg-file-upload-designer",FileUploadQRCodeDesigner);class QrcgFileUploadQRCodeForm extends BaseTypeForm{static styles=[super.styles,i$3`
            qrcg-form-section {
                margin-top: 1rem;
            }
        `];connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}render(){return x`
            <qrcg-form-comment>
                ${t$3`Upload your file and get a dynamic link, the QR code will still work if you upload another file in the futuer, it will point to the new file.`}
            </qrcg-form-comment>
            <qrcg-form>
                <qrcg-form-section>
                    <h2 class="section-title">${t$3`Details`}</h2>

                    <qrcg-input name="name" placeholder=${t$3`Name`}>
                        ${t$3`Name`}
                    </qrcg-input>

                    <qrcg-file-input
                        name="file_id"
                        upload-endpoint="qrcodes/data-file"
                    >
                        ${t$3`File`}
                    </qrcg-file-input>
                </qrcg-form-section>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-file-upload-form",QrcgFileUploadQRCodeForm);class FileUploadType extends BaseQRCodeType{static qrcodeType(){return"file-upload"}renderTypeDesigner(){return x` <qrcg-file-upload-designer></qrcg-file-upload-designer> `}}class QRCGAppDownloadForm extends BaseTypeForm{static styles=[super.styles,i$3`
            qrcg-balloon-selector:first-child {
                margin-top: 1rem;
            }

            qrcg-input:first-child {
                margin-top: 1rem;
            }

            qrcg-business-hours-input {
                margin-bottom: 1rem;
            }
        `];renderOpeningHoursInput(){if(this.data.openingHoursEnabled!=="disabled")return x`
            <qrcg-business-hours-input name="openingHours">
                ${t$3`Opening Hours`}
            </qrcg-business-hours-input>
        `}render(){return x`
            <qrcg-form-comment>
                ${t$3`Automatic redirect to Apple Store and Play Store when scanned using the mobile camera.`}
            </qrcg-form-comment>
            <qrcg-form>
                <qrcg-input
                    name="appName"
                    placeholder=${t$3`Enter your app name`}
                >
                    ${t$3`App Name`}
                </qrcg-input>

                <qrcg-textarea
                    name="appDescription"
                    placeholder=${t$3`Enter app description here`}
                >
                    ${t$3`App Description`}
                </qrcg-textarea>

                <qrcg-input name="google_play_url" placeholder="https://....">
                    ${t$3`Google Play URL`}
                </qrcg-input>

                <qrcg-input name="apple_store_url" placeholder="https://....">
                    ${t$3`Apple Store URL`}
                </qrcg-input>

                <qrcg-textarea
                    name="socialProfiles"
                    placeholder="https://youtube.com/...&#10;https://twitter.com/...&#10;https://instagram.com/...."
                >
                    ${t$3`Social Profiles`}

                    <div slot="instructions">
                        ${t$3`Add each social media link in a new line`}
                    </div>
                </qrcg-textarea>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-app-download-form",QRCGAppDownloadForm);class AppDownloadWebpageDesigner extends WebpageDesigner{updated(w){w.has("data")&&this.forceUpdate()}async forceUpdate(){this.requestUpdate(),await this.updateComplete,setTimeout(()=>{this.syncInputs()})}renderAdvancedSection(){return x`
            <section>
                <h2 class="section-title">${t$3`Advanced`}</h2>

                ${this.renderCustomCodeInput()}
                <!--  -->
                ${this.renderDesktopCustomizationInput()}
            </section>
        `}renderIconsColorsInput(){}renderSections(){return x`
            ${super.renderSections()}
            <!-- -->
            ${this.renderAdvancedSection()}
        `}}window.defineCustomElement("qrcg-app-download-webpage-designer",AppDownloadWebpageDesigner);class AppDownloadDesigner extends BaseTypeDesigner{webPageDesignerElementName(){return"qrcg-app-download-webpage-designer"}}window.defineCustomElement("qrcg-app-download-designer",AppDownloadDesigner);class AppDownloadType extends BaseQRCodeType{static qrcodeType(){return"app-download"}renderTypeDesigner(){return x` <qrcg-app-download-designer></qrcg-app-download-designer> `}}class QRCGWebsiteBuilderForm extends BaseTypeForm{static styles=[super.styles,i$3`
            qrcg-form-section {
                margin-top: 1rem;
            }

            [name] {
                margin-bottom: 0;
            }

            [name='bio'] {
                margin-top: 1rem;
            }

            .row {
                display: grid;
                grid-gap: 1rem;
                grid-template-columns: 1fr 1fr;
            }

            @media (max-width: 900px) {
                .row {
                    grid-template-columns: 1fr;
                }
            }

            .add-contact-field {
                color: var(--primary-0);
                text-decoration: none;
                margin-bottom: 1rem;
            }

            .add-contact-field-container {
                display: flex;
                align-items: flex-end;
            }

            .custom-field-delete {
                position: absolute;
                right: 0.25rem;
                top: 1.6rem;
            }

            .custom-field-delete::part(button) {
                min-width: 0;
                padding: 0.5rem;
            }
        `];constructor(){super(),this.data.contactFields=[]}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}renderBasicDetailsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Basic Details`}</h2>

                <div class="row">
                    <qrcg-input
                        name="website_name"
                        placeholder="${t$3`My new website`}"
                    >
                        ${t$3`Website Name`}
                    </qrcg-input>
                </div>
            </qrcg-form-section>
        `}render(){return x`
            <qrcg-form-comment>
                ${t$3`Design web pages without coding skills`}
            </qrcg-form-comment>

            <qrcg-form> ${this.renderBasicDetailsSection()} </qrcg-form>
        `}}window.defineCustomElement("qrcg-website-builder-form",QRCGWebsiteBuilderForm);class WebsiteBuilderFullScreen extends i$1{static tag="qrcg-website-builder-fullscreen";static styles=[i$3`
            :host {
                display: block;
                position: fixed;
                top: 0;
                left: 0;
                bottom: 0;
                right: 0;
                width: 100%;
                height: 100%;
                z-index: 100;
                background-color: white;
                color: white;
            }

            iframe {
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0;
                right: 0;
                width: 100%;
                min-height: 100%;
                z-index: 1;
                border: 0;
            }

            .close-container {
                position: absolute;
                top: 0;
                width: 100;
                left: 0;
                right: 0;
                z-index: 2;
                display: flex;
                align-items: center;
                justify-content: center;
                user-select: none;
                pointer-events: none;
            }

            .close-text {
                padding: 10px;
                font-weight: bold;
                cursor: pointer;
                pointer-events: all;
                font-size: 16px;
            }

            .close-text.disabled {
                opacity: 0.5;
                pointer-events: none;
                cursor: initial;
            }

            qrcg-loader-h {
                --qrcg-loader-h-color: currentColor;
                transform: translateY(-33%);
            }

            .close-text:hover {
                background-color: rgba(255, 255, 255, 0.5);
            }
        `];static get properties(){return{...super.properties,saving:{type:Boolean}}}static open(w){const q=document.createElement(this.tag);q.url=w,document.body.appendChild(q);const D=PluginManager.applyFilters(FILTER_WEBSITE_BUILDER_FULLSCREEN_TEXT_COLOR,"white");q.style.color=D}connectedCallback(){super.connectedCallback(),window.addEventListener("message",this.onMessage),window.addEventListener("beforeunload",this.onBeforeUnload)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("message",this.onMessage),window.removeEventListener("beforeunload",this.onBeforeUnload)}onBeforeUnload=w=>{this.saving?(w.preventDefault(),w.returnValue=t$3`There are unsaved changes, are you sure you want to close the window?`):delete w.returnValue};onMessage=w=>{switch(w.data){case"saving:start":this.onSavingStart();break;case"saving:end":this.onSavingEnd();break;case"saving:error":this.onSavingError();break}};onSavingStart(){this.saving=!0}onSavingEnd(){this.saving=!1}onSavingError(){showToast(t$3`Error while saving the web page.`)}async doClose(){this.saving||(this.remove(),document.dispatchEvent(new CustomEvent(QrcgWebpagePreview.EVENT_REQEUST_REFRESH)))}renderCloseText(){return this.saving?x` <qrcg-loader-h></qrcg-loader-h> `:t$3`Close`}render(){return x`
            <div class="close-container">
                <div
                    class="close-text ${this.saving?"disabled":""}"
                    @click=${this.doClose}
                >
                    ${this.renderCloseText()}
                </div>
            </div>

            <iframe src=${this.url}></iframe>
        `}}defineCustomElement(WebsiteBuilderFullScreen.tag,WebsiteBuilderFullScreen);class WebsiteBuilderOpener extends QRCGButton{static tag="qrcg-website-builder-opener";static get properties(){return{...super.properties,qrcodeId:{attribute:"qrcode-id"}}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}async onClick(){const w=await this.generateUrl();WebsiteBuilderFullScreen.open(w)}async generateUrl(){this.loading=!0;const{response:w}=await post("/generate-website-builder-url/"+this.qrcodeId),q=await w.json();return this.loading=!1,q.url}renderContent(){return t$3("Open Website Builder")}}defineCustomElement(WebsiteBuilderOpener.tag,WebsiteBuilderOpener);class WebsiteBuilderWebpageDesigner extends WebpageDesigner{static get styles(){return[super.styles,i$3`
                * {
                    box-sizing: border-box;
                }

                .image-block {
                    display: grid;
                    grid-template-columns: 2fr 3fr;
                    grid-gap: 1rem;
                    background-color: var(--gray-0);
                    padding: 1rem;
                    margin: 0 0 1rem 0;
                    align-items: flex-start;
                }

                .image-block img {
                    max-width: 100%;
                    grid-row: span 3;
                }
            `]}constructor(){super()}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}renderWebsiteBuilderOpenerSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Website Builder`}</h2>

                <qrcg-website-builder-opener
                    .qrcodeId=${this.qrcode?.id}
                ></qrcg-website-builder-opener>
            </qrcg-form-section>
        `}renderBackgroundImageInput(){}renderColorsBackgroundSectionTitle(){return t$3`Page Settings`}renderDefaultColorsInputs(){}renderSeoInput(){return[this.renderAllSeoInputs(!0),this.renderQRCodeLanguageInput()]}renderSections(){return[super.renderSections(),this.renderWebsiteBuilderOpenerSection()]}}window.defineCustomElement("qrcg-website-builder-webpage-designer",WebsiteBuilderWebpageDesigner);class WebsiteBuilderDesigner extends BaseTypeDesigner{webPageDesignerElementName(){return"qrcg-website-builder-webpage-designer"}}window.defineCustomElement("qrcg-website-builder-designer",WebsiteBuilderDesigner);class WebsiteBuilderType extends BaseQRCodeType{static qrcodeType(){return"website-builder"}renderTypeDesigner(){return x`
            <qrcg-website-builder-designer></qrcg-website-builder-designer>
        `}}class UPIQRCodeDesigner extends BaseTypeDesigner{render(){return x` <qrcg-bound-qrcode-designer></qrcg-bound-qrcode-designer> `}}window.defineCustomElement("qrcg-upi-designer",UPIQRCodeDesigner);class UpiType extends BaseQRCodeType{static qrcodeType(){return"upi"}renderTypeDesigner(){return x` <qrcg-upi-designer></qrcg-upi-designer> `}}class BusinessReviewForm extends BaseTypeForm{renderGoogleReviewInput(){if(this.data.action==="google_review")return x`
            <qrcg-google-place-input name="google_place">
            </qrcg-google-place-input>
        `}renderReviewUrlInput(){if(this.data.action==="review_url")return x`
            <qrcg-input
                name="review_url"
                placeholder=${t$3`Enter review site url`}
            >
                ${t$3`Review Site URL`}
            </qrcg-input>
        `}render(){return x`
            <qrcg-form-comment>
                ${t$3`Redirect to google review if more than 3 stars selected, or collect feed back if less.`}
            </qrcg-form-comment>
            <qrcg-form>
                <qrcg-input
                    name="businessName"
                    placeholder=${t$3`Enter your business name`}
                >
                    ${t$3`Business Name`}
                </qrcg-input>

                <qrcg-input
                    name="totalNumberOfStars"
                    type="number"
                    min="5"
                    step="1"
                    placeholder=${t$3`Enter total number of stars`}
                >
                    ${t$3`Total Number Of Stars. Default 5`}
                </qrcg-input>

                <qrcg-input
                    name="numberOfStarsToRedirect"
                    type="number"
                    min="1"
                    step="1"
                    placeholder=${t$3`Enter number of stars`}
                >
                    ${t$3`Numbers of Stars to Redirect. Default 3`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="action"
                    .options=${[{name:t$3`Google Review`,value:"google_review"},{name:t$3`Other Review URL`,value:"review_url"}]}
                >
                    ${t$3`If (Number of Stars to Redirect) or more is selected, redirect to:`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="show_final_review_link"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                    ${t$3`Show Final Review Link`}
                    <div slot="instructions">
                        ${t$3`If enabled, a small link to Google Review will be displayed at the bottom of the form.`}
                    </div>
                </qrcg-balloon-selector>

                ${this.renderGoogleReviewInput()}

                <!--  -->

                ${this.renderReviewUrlInput()}
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-business-review-form",BusinessReviewForm);const style$1x=".feedback{display:grid;grid-template-columns:1fr 1fr;border-bottom:1px solid var(--gray-1);padding:.5rem;font-size:.95rem;gap:.5rem}.feedback .key{color:var(--gray-2)}.loader-container{display:flex;justify-content:center;align-items:center;padding:1rem}.empty-message{padding:.5rem;color:var(--gray-2);text-align:center}.actions .action{color:var(--info-0);cursor:pointer}.actions .action:hover{text-decoration:underline}";class BusinessReviewFeedbacks extends BaseComponent{static tag="qrcg-business-review-feedbacks";static styleSheets=[...super.styleSheets,style$1x];static get properties(){return{...super.properties,qrcodeId:{attribute:"qrcode-id"},loading:{type:Boolean},feedbacks:{type:Array}}}constructor(){super(),this.qrcodeId=null,this.loading=!0,this.feedbacks=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.fetchData()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick(w){mapEventDelegate(w,{".action.delete":this.onDeleteFeedbackClick})}onDeleteFeedbackClick=async(w,q)=>{const D=q.feedback;await confirm$1({message:t$3`Are you sure you want to delete feedback?`});try{await destroy("qrcodes/"+this.qrcodeId+"/business-review-feedbacks/"+D.id),showToast(t$3`Feedback deleted successfully.`),this.fetchData()}catch(Q){console.error(Q),showToast(t$3`Error while deleting feedback. Please try again later.`)}};async fetchData(){this.loading=!0;try{const{json:w}=await get("qrcodes/"+this.qrcodeId+"/business-review-feedbacks");this.feedbacks=w}catch{}this.loading=!1}renderLoader(){if(this.loading)return x`
            <!--  -->
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderFeedbacks(){return this.feedbacks.map(w=>x`
                <div class="feedback">
                    <div class="key">${t$3`Stars`}</div>
                    <div class="value">${w.stars??"---"}</div>

                    <div class="key">${t$3`Name`}</div>
                    <div class="value">${w.name??"---"}</div>

                    <div class="key">${t$3`Email`}</div>
                    <div class="value">${w.email??"---"}</div>

                    <div class="key">${t$3`Mobile`}</div>
                    <div class="value">${w.mobile??"---"}</div>

                    <div class="key">${t$3`Feedback`}</div>
                    <div class="value">${w.feedback??"---"}</div>

                    <div class="actions">
                        <div class="action delete" .feedback=${w}>
                            ${t$3`Delete`}
                        </div>
                    </div>
                </div>
            `)}renderEmptyMessage(){if(!this.loading&&!isNotEmpty(this.feedbacks))return x`
            <div class="empty-message">${t$3`No feedbacks could be found.`}</div>
        `}render(){return[this.renderEmptyMessage(),this.renderLoader(),this.renderFeedbacks()]}}BusinessReviewFeedbacks.register();class BusinessReviewFeedbacksModal extends QrcgModal{static tag="qrcg-business-review-feedbacks-modal";static get properties(){return{...super.properties,qrcodeId:{}}}constructor(){super(),this.qrcodeId=null}renderTitle(){return t$3`Feedback List`}getNegativeText(){}renderBody(){return BusinessReviewFeedbacks.renderSelf({"qrcode-id":this.qrcodeId})}}BusinessReviewFeedbacksModal.register();const style$1w=".view-feedbacks-button{color:var(--primary-0);padding:1rem;text-align:center;cursor:pointer}.view-feedbacks-button:hover{text-decoration:underline}";class BusinessReviewWebpageDesigner extends WebpageDesigner{static styleSheets=[...super.styleSheets,style$1w];updated(w){w.has("data")&&this.forceUpdate()}async forceUpdate(){this.requestUpdate(),await this.updateComplete,setTimeout(()=>{this.syncInputs()})}onViewFeedbacksClick(){BusinessReviewFeedbacksModal.open({qrcodeId:this.qrcodeId})}renderBannerVideoInput(){}renderDefaultColorsInputs(){return this.renderQRCodeLanguageInput()}renderColorsBackgroundSectionTitle(){return t$3`Settings`}renderLogoSection(){return x`
            <section>
                <h2>${t$3`Logo & Form`}</h2>

                <qrcg-file-input
                    name="logo"
                    upload-endpoint="qrcodes/${this.qrcodeId}/webpage-design-file"
                >
                    ${t$3`Logo`}
                </qrcg-file-input>

                <qrcg-input
                    name="page_title"
                    placeholder=${t$3`Enter page title`}
                >
                    ${t$3`Page Title`}
                </qrcg-input>

                <qrcg-input
                    name="placeholder_text"
                    placeholder=${t$3`Enter placeholder text`}
                >
                    ${t$3`Placeholder Text`}
                </qrcg-input>

                <qrcg-input
                    name="send_button_text"
                    placeholder=${t$3`Enter send button text`}
                >
                    ${t$3`Send Button Text`}
                </qrcg-input>

                <qrcg-input
                    name="success_message"
                    placeholder=${t$3`Enter success message`}
                >
                    ${t$3`Success Message`}
                </qrcg-input>

                <qrcg-color-picker name="send_button_background_color">
                    ${t$3`Send Button Background Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="send_button_text_color">
                    ${t$3`Send Button Text Color`}
                </qrcg-color-picker>
            </section>
        `}renderAdvancedSection(){return x`
            <section>
                <h2 class="section-title">${t$3`Advanced`}</h2>

                ${this.renderCustomCodeInput()}
                <!--  -->
                ${this.renderDesktopCustomizationInput()}
            </section>
        `}renderFeedbackSettings(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Feedback Settings`}</h2>

                <qrcg-input
                    name="recepient_email"
                    placeholder=${t$3`Comma separated recepient emails.`}
                >
                    ${t$3`Recepient Email`}
                </qrcg-input>

                <qrcg-input
                    name="email_subject"
                    placeholder=${t$3`Email Subject`}
                >
                    ${t$3`Email Subject`}
                </qrcg-input>

                <div
                    class="view-feedbacks-button"
                    @click=${this.onViewFeedbacksClick}
                >
                    ${t$3`View Feedbacks`}
                </div>
                <!--  -->
            </qrcg-form-section>
        `}renderSections(){return x`
            ${super.renderSections()}
            <!-- -->
            ${this.renderLogoSection()}
            <!--  -->
            ${this.renderFeedbackSettings()}

            <!-- -->
            ${this.renderAdvancedSection()}
        `}}window.defineCustomElement("qrcg-business-review-webpage-designer",BusinessReviewWebpageDesigner);class BusinessReviewDesigner extends BaseTypeDesigner{webPageDesignerElementName(){return"qrcg-business-review-webpage-designer"}}window.defineCustomElement("qrcg-business-review-designer",BusinessReviewDesigner);class BusinessReviewType extends BaseQRCodeType{static qrcodeType(){return"business-review"}renderTypeDesigner(){return x`
            <qrcg-business-review-designer></qrcg-business-review-designer>
        `}}class UpiDynamicForm extends QrcgUpiQRCodeForm{}window.defineCustomElement("qrcg-upi-dynamic-form",UpiDynamicForm);class UpiDynamicWebPageDesigner extends WebpageDesigner{updated(w){w.has("data")&&this.forceUpdate()}async forceUpdate(){this.requestUpdate(),await this.updateComplete,setTimeout(()=>{this.syncInputs()})}renderBannerVideoInput(){}renderDefaultColorsInputs(){return this.renderQRCodeLanguageInput()}renderColorsBackgroundSectionTitle(){return t$3`Settings`}renderLogoSection(){return x`
            <section>
                <h2>${t$3`Logo & Form`}</h2>

                <qrcg-file-input
                    name="logo"
                    upload-endpoint="qrcodes/${this.qrcodeId}/webpage-design-file"
                >
                    ${t$3`Logo`}
                </qrcg-file-input>

                <qrcg-input
                    name="page_title"
                    placeholder=${t$3`Enter page title`}
                >
                    ${t$3`Page Title`}
                </qrcg-input>

                <qrcg-textarea name="text" placeholder=${t$3`Enter text`}>
                    ${t$3`Text`}
                </qrcg-textarea>

                <qrcg-input
                    name="pay_button_text"
                    placeholder=${t$3`Enter pay button text`}
                >
                    ${t$3`Pay Button Text`}
                </qrcg-input>

                <qrcg-color-picker name="pay_button_background_color">
                    ${t$3`Pay Button Background Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="pay_button_text_color">
                    ${t$3`Pay Button Text Color`}
                </qrcg-color-picker>
            </section>
        `}renderAdvancedSection(){return x`
            <section>
                <h2 class="section-title">${t$3`Advanced`}</h2>

                ${this.renderCustomCodeInput()}
                <!--  -->
                ${this.renderDesktopCustomizationInput()}
                <!-- -->
                ${this.renderShareOverlayInputs()}
            </section>
        `}renderSections(){return x`
            ${super.renderSections()}
            <!-- -->
            ${this.renderLogoSection()}

            <!-- -->
            ${this.renderAdvancedSection()}
        `}}window.defineCustomElement("qrcg-upi-dynamic-webpage-designer",UpiDynamicWebPageDesigner);class UpiDynamicDesigner extends BaseTypeDesigner{webPageDesignerElementName(){return"qrcg-upi-dynamic-webpage-designer"}}window.defineCustomElement("qrcg-upi-dynamic-designer",UpiDynamicDesigner);class UpiDynamicType extends BaseQRCodeType{static qrcodeType(){return"upi-dynamic"}renderTypeDesigner(){return x` <qrcg-upi-dynamic-designer></qrcg-upi-dynamic-designer> `}}const QRCodeTypeList=[VCardPlusType,BusinessProfileType,BusinessReviewType,BaseQRCodeType,GoogleReviewType,RestaurantMenuType,ProductCatalogueType,BioLinksType,EventType,LeadFormType,ResumeType,FileUploadType,AppDownloadType,WebsiteBuilderType,UpiType,UpiDynamicType];class QRCodeTypeManager{constructor(w){this.type=w}resolve(){const w=PluginManager.applyFilters(FILTER_QRCODE_TYPES_CLASS_LIST,QRCodeTypeList);for(const D of w)if(D.qrcodeType()===this.type)return new D;const q=QRCodeTypeList.find(D=>D.qrcodeType()=="*");return new q}}class QrcgQrcodeStatsLink extends i$1{__dir=new DirectionAwareController(this);types=new QRCodeTypeManager$1;static styles=[i$3`
            :host {
                display: block;
                transition: all 0.5s 0.1s ease;
            }

            a.stats {
                text-decoration: none;
                color: var(--gray-2);
                display: flex;
                align-items: center;
                padding: 1rem;
            }

            .stats qrcg-icon {
                margin-right: 0.5rem;
            }

            :host(.dir-rtl) qrcg-icon {
                margin-right: 0;
                margin-left: 0.5rem;
            }

            :host([disabled]) {
                opacity: 0.3;
                pointer-events: none;
            }
        `];static get properties(){return{qrcodeId:{attribute:"qrcode-id"},redirect:{},qrcode:{},disabled:{type:Boolean,reflect:!0}}}updated(w){w.has("qrcodeId")&&this.fetchData()}async fetchData(){await this.fetchQRCode(),await this.fetchQRCodeRedirect()}async fetchQRCode(){if(isEmpty(this.qrcodeId)){this.qrcode=null;return}const{response:w}=await get(`qrcodes/${this.qrcodeId}`);this.qrcode=await w.json()}shouldFetchRedirect(){if(!isEmpty(this.qrcode))return this.types.isDynamic(this.qrcode.type)}async fetchQRCodeRedirect(){if(!this.shouldFetchRedirect()){this.redirect=null;return}const{response:w}=await get(`qrcodes/${this.qrcodeId}/redirect`);this.redirect=await w.json()}shouldRender(){return isEmpty(this.redirect)||isEmpty(this.qrcode)?!1:this.types.isDynamic(this.qrcode.type)}render(){if(this.shouldRender())return x`
            <qrcg-button
                class="elegant"
                href="${url("/dashboard/qrcodes/stats/")+this.qrcodeId}"
            >
                <qrcg-icon mdi-icon=${mdiChartBar}></qrcg-icon>
                ${t$3`Stats`}
            </a>
        `}}window.defineCustomElement("qrcg-qrcode-stats-link",QrcgQrcodeStatsLink);class FolderModel{static get onChangeEventName(){return"folder:on-change"}static fireOnChange(){document.dispatchEvent(new CustomEvent(this.onChangeEventName))}}const style$1v="[name]{margin-bottom:1rem}.template-actions{padding:1rem;background-color:var(--gray-0);display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.modify-button{margin-right:.5rem;--button-background-color: var(--gray-1);--button-color: black;--button-color-hover: white}";class QrcgQrCodeTemplateModal extends QrcgModal{static tag="qrcg-qrcode-template-modal";static styleSheets=[...super.styleSheets,style$1v];static EVENT_TEMPLATE_DELETED=`${this.tag}:template-deleted`;static get properties(){return{...super.properties,isNewTemplate:{type:Boolean}}}constructor(){super(),this.template=null,this.isNewTemplate=!0,setTimeout(()=>this.fetchTemplate(),100)}get qrcode_id(){return this.qrcode.id}async fetchTemplate(){this.setLoading(!0);try{const{response:w}=await get("qrcode-templates/"+this.qrcode_id),q=await w.json();this.template=q,this.requestUpdate(),this.syncInputs(),this.isNewTemplate=!await this.isCurrentQRCodeAlreadyTemplate(),console.log(this.isNewTemplate)}catch{}this.setLoading(!1)}syncInputs(){this.inputs().forEach(w=>w.value=this.template[w.getAttribute("name")])}renderTitle(){return t$3`Template`}handleValidationErrors(w){const q=w.errors(),D=Object.keys(q);for(const Q of D){const O=this.shadowRoot.querySelector(`[name="${Q}"]`);O&&(O.errors=q[Q])}}resetValidationErrors(){this.inputs().forEach(w=>w.errors=[])}async isCurrentQRCodeAlreadyTemplate(){const{response:w}=await get("qrcodes/"+this.qrcode_id);return(await w.json()).is_template}async confirmTemplateCreation(){if(await this.isCurrentQRCodeAlreadyTemplate())return!0;try{return await confirm$1({message:t$3`Are you sure you want to convert this QR code to template? The QR code will be removed from the QR code list and all folders.`}),!0}catch{return!1}}async affiramtivePromise(){if(this.resetValidationErrors(),!await this.confirmTemplateCreation())return;const w=this.collectData();try{await post("qrcode-templates",w),window.location.pathname.match(/qrcode-templates/)||push("/dashboard/qrcode-templates"),showToast(t$3`Template saved successfully`)}catch(q){throw q instanceof ValidationError&&this.handleValidationErrors(q),showToast(t$3`Save error`),q}}collectData(){return this.inputs().reduce((w,q)=>(w[q.getAttribute("name")]=q.value,w),{qrcode_id:this.qrcode.id})}inputs(){return Array.from(this.shadowRoot.querySelectorAll("[name]"))}async onDeleteTemplateClicked(){try{await confirm$1({message:t$3`Are you sure you want to delete this template? This cannot be undone.`}),await destroy("qrcodes/"+this.qrcode_id),showToast(t$3`Template deleted successfully`),this.close(),this.notifyDelete()}catch{}}notifyDelete(){document.dispatchEvent(new CustomEvent(QrcgQrCodeTemplateModal.EVENT_TEMPLATE_DELETED))}shouldRenderTemplateActions(){if(this.isNewTemplate)return!1;if(permitted("qrcode-template.manage-all"))return!0;const w=this.template?.user_id;return loadUser().id==w}renderTemplateActions(){if(this.shouldRenderTemplateActions())return x`
            <div class="template-actions">
                <qrcg-button
                    href="/dashboard/qrcodes/edit/${this.qrcode_id}"
                    @click=${this.close}
                    class="modify-button"
                >
                    ${t$3`Modify Design`}
                </qrcg-button>

                <qrcg-button danger @click=${this.onDeleteTemplateClicked}>
                    ${t$3`Delete Template`}
                </qrcg-button>
            </div>
        `}renderAccessLevelOptions(){if(permitted("qrcode-template.manage-all"))return x`
            <qrcg-balloon-selector
                name="template_access_level"
                .options=${[{name:t$3`Public`,value:"public"},{name:t$3`Private`,value:"private"}]}
            >
                ${t$3`Access Level. Default (Private)`}
            </qrcg-balloon-selector>
        `}renderCategoryOption(){if(permitted("template-category.store"))return x`
            <qrcg-relation-select
                name="category_id"
                api-endpoint="template-categories?no-pagination=true"
            >
                ${t$3`Category`}
            </qrcg-relation-select>
        `}renderBody(){return x`
            <qrcg-input name="name" placeholder=${t$3`Template name`}>
                ${t$3`Name`}
            </qrcg-input>

            <qrcg-textarea
                name="description"
                placeholder=${t$3`Template description`}
            >
                ${t$3`Description`}
            </qrcg-textarea>

            <qrcg-file-input
                name="screenshot_id"
                attachable_type="QRCodeTemplate"
                upload-endpoint="files"
            >
                ${t$3`Screenshot (optional)`}
            </qrcg-file-input>

            <qrcg-file-input
                name="video_id"
                attachable_type="QRCodeTemplate"
                upload-endpoint="files"
                accept=".mp4"
            >
                ${t$3`Video (optional)`}
            </qrcg-file-input>

            ${this.renderCategoryOption()}

            <!--  -->
            ${this.renderAccessLevelOptions()}
            <!--  -->
            ${this.renderTemplateActions()}
        `}}defineCustomElement(QrcgQrCodeTemplateModal.tag,QrcgQrCodeTemplateModal);class QrcgChangeQrCodeTypeModal extends QrcgModal{static tag="qrcg-change-qrcode-type-modal";static get styles(){return[super.styles,i$3`
                :host {
                    --desktop-max-width: 80vw;
                }
            `]}static get properties(){return{...super.properties,selectedType:{},qrcode:{}}}constructor(){super(),this.selectedType="",this.qrcode={}}connectedCallback(){super.connectedCallback(),this.addEventListener(QRCGQRCodeTypeSelector.EVENT_TYPE_SELECTED,this.onTypeSelected)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(QRCGQRCodeTypeSelector.EVENT_TYPE_SELECTED,this.onTypeSelected)}onTypeSelected=w=>{this.selectedType=w.detail.type};async affiramtivePromise(){if(!this.selectedType)throw showToast(t$3`You must select type.`),new Error;try{await post("qrcodes/"+this.qrcode.id+"/change-type",{type:this.selectedType}),showToast(t$3`Type changed succssfully`),await sleep(500),window.location.reload(),await sleep(1500)}catch(w){throw showToast(t$3`Error changing type`),w}}renderBody(){return x`
            <qrcg-qrcode-type-selector
                .value=${this.selectedType}
            ></qrcg-qrcode-type-selector>
        `}renderTitle(){return t$3`Change Type`}}defineCustomElement(QrcgChangeQrCodeTypeModal.tag,QrcgChangeQrCodeTypeModal);const style$1u=":host{display:block}.step-navigator{display:flex;justify-content:space-between;margin-bottom:1rem}.step-navigator.bottom{position:fixed;inset-inline-end:3.5rem;bottom:-10rem;background-color:#fff;border:1px solid black;border-radius:.5rem;opacity:0;pointer-events:none;gap:1rem;z-index:1000000;transition:.5s ease}.step-navigator.bottom.visible{opacity:1;pointer-events:all;bottom:0}*[hidden]{display:none}header{display:flex;align-items:center;flex-wrap:wrap;justify-content:space-between;border:1px solid var(--gray-1);border-radius:.5rem;padding-inline-start:1rem;margin-bottom:1rem}header .actions{display:flex;align-items:center;flex-wrap:wrap}.steps-container{display:flex;align-items:center;gap:.5rem;margin:0 0 1rem;justify-content:space-between;flex-wrap:wrap}.steps-container .start{display:flex;align-items:center;gap:.5rem}.steps-container .step-navigator{gap:.5rem;margin:auto 0}.header-toggle{padding:.5rem;border:1px solid var(--gray-1);border-radius:.5rem;cursor:pointer}.header-toggle:hover{background-color:var(--gray-0)}qrcg-button[disabled]{opacity:.3}",style$1t=".container{max-width:90vw}.body{max-height:90vh}.loading-message{text-align:center;margin-bottom:1rem}",style$1s=":host{display:flex;flex-direction:column;position:relative;-webkit-user-select:none;user-select:none}video{position:absolute;top:0;left:0;pointer-events:none;object-fit:cover;width:100%;height:100%}.screenshot{position:relative;width:100%;padding-bottom:120%;background-size:cover;background-repeat:no-repeat;background-position:center;border-radius:2rem;cursor:pointer;overflow:hidden}.screenshot iframe{--iframe-width: 400;--iframe-width-px: 400px;position:absolute;top:0;left:0;height:900px;width:var(--iframe-width-px);overflow:hidden;border:0;pointer-events:none;transform-origin:top left;transform:scale(calc(var(--screenshot-width, 200) / var(--iframe-width)))}:host([disabled]),:host([loading]){opacity:.5;pointer-events:none}.name{margin:1rem 0 .5rem;white-space:nowrap;height:1.2rem;overflow:hidden;text-overflow:ellipsis;font-weight:700;max-width:10rem}.name-text{text-overflow:ellipsis}.description{height:1.3rem;overflow:hidden;text-overflow:ellipsis;margin-bottom:1rem}.buttons{display:flex;position:absolute;top:1rem;inset-inline-end:1rem}qrcg-button::part(button){min-width:0}.use-template{--button-background-color: var(--gray-1);--button-color: black;--button-color-hover: white;--qrcg-loader-h-color: black}.use-template::part(button){font-size:.7rem;letter-spacing:0}.use-template.disabled{--button-color: var(--gray-2)}qrcg-icon.settings{width:2.5rem;height:2.5rem;padding:.5rem;border-radius:50%;background-color:#00000080;color:#fff;cursor:pointer}qrcg-icon.settings:hover{background-color:#000}.meta{display:flex;font-size:.7rem;font-weight:700;align-items:center;text-transform:uppercase;flex-wrap:wrap}.cat{margin-left:.25rem;color:var(--gray-2)}.type{background-color:var(--gray-1);color:var(--gray-2);padding:.25rem .5rem;max-width:90%;overflow:hidden;border-radius:.25rem}",style$1r=":host{pointer-events:none}iframe{border:0;height:500px;width:100%}";class LivePreview extends QrcgDropdown{static tag="qrcg-live-card-preview";static styleSheets=[...super.styleSheets,style$1r];connectedCallback(){super.connectedCallback(),this.style.setProperty("--overlay-background-color","transparent"),document.addEventListener("click",this.onDocumentClick)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("click",this.onDocumentClick)}onDocumentClick=()=>{this.remove()};makePreview(w){return this.destinationUrl=w,this.dropDownContent=this.renderPreviewContent(),this.withBindPoint(LivePreview.BIND_POINT_RIGHT),this}getWidth(){return 350}getDestinationUrl(){return`${this.destinationUrl}&smooth-scroll=true`}renderPreviewContent(){return x`
            <div class="iframe-container">
                <iframe src="${this.getDestinationUrl()}"></iframe>
            </div>
        `}}LivePreview.register();class QrcgQRCodeTemplateCard extends BaseComponent{static tag="qrcg-qrcode-template-card";static styleSheets=[...super.styleSheets,style$1s];static EVENT_REQUEST_DISABLE_ALL_TEMPLATE_CARDS=`${this.tag}:request-disable-all-template-cards`;static EVENT_REQUEST_ENABLE_ALL_TEMPLATE_CARDS=`${this.tag}:request-enable-all-template-cards`;static EVENT_BEFORE_CREATE_QRCODE=`${this.tag}:before-create-qrcode`;static get properties(){return{qrcodeTemplate:{type:Object},disabled:{type:Boolean,reflect:!0},loading:{reflect:!0,type:Boolean}}}typeManager=new QRCodeTypeManager$1;constructor(){super(),this.qrcodeTemplate={}}connectedCallback(){super.connectedCallback(),document.addEventListener(QrcgQRCodeTemplateCard.EVENT_REQUEST_DISABLE_ALL_TEMPLATE_CARDS,this.onDisableRequested),document.addEventListener(QrcgQRCodeTemplateCard.EVENT_REQUEST_ENABLE_ALL_TEMPLATE_CARDS,this.onEnableRequested),window.addEventListener("resize",this.onWindowResize),this.addEventListener("mouseover",this.onMouseOver),this.addEventListener("mouseleave",this.onMouseLeave)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener(QrcgQRCodeTemplateCard.EVENT_REQUEST_DISABLE_ALL_TEMPLATE_CARDS,this.onDisableRequested),document.removeEventListener(QrcgQRCodeTemplateCard.EVENT_REQUEST_ENABLE_ALL_TEMPLATE_CARDS,this.onEnableRequested),window.removeEventListener("resize",this.onWindowResize),this.removeEventListener("mouseover",this.onMouseOver),this.removeEventListener("mouseleave",this.onMouseLeave)}firstUpdated(){super.firstUpdated(),this.bindScreenshotWidthVariable()}getPreviewUrl(){return`${this.qrcodeTemplate?.redirect?.route}?preview=true`}onWindowResize=async()=>{this.bindScreenshotWidthVariable()};onMouseOver=async()=>{this.shouldRenderIframePreview()&&(this.isShowingLivePreview||(this.isShowingLivePreview=!0,this.livePreview=await LivePreview.withTarget(this).makePreview(this.getPreviewUrl()).open()))};onMouseLeave=()=>{this.livePreview.remove(),this.isShowingLivePreview=!1};bindScreenshotWidthVariable(){clearTimeout(this.__bindTimeout),this.__bindTimeout=setTimeout(()=>{const{width:w}=this.$(".screenshot").getBoundingClientRect();this.style.setProperty("--screenshot-width",w)},300)}onDisableRequested=()=>{this.disabled=!0};onEnableRequested=()=>{this.disabled=!1};onSettingsClicked(){QrcgQrCodeTemplateModal.open({qrcode:this.qrcodeTemplate})}dispatchBeforeCreateQRCode(){return this.dispatchEvent(new CustomEvent(QrcgQRCodeTemplateCard.EVENT_BEFORE_CREATE_QRCODE,{cancelable:!0,bubbles:!0,composed:!0,detail:{template:this.qrcodeTemplate}}))}async onUseTemplateClick(){if(this.dispatchBeforeCreateQRCode())try{this.loading=!0,this.requestDisableAllTemplates();const w=post("qrcode-templates/"+this.qrcodeTemplate.id+"/use");await Promise.all([showToast(t$3`Creating QR Code`),w]);const{response:q}=await w,D=await q.json();push("/dashboard/qrcodes/edit/"+D.id),showToast(t$3`QR Code created successfully`)}catch(w){this.loading=!1,console.log(w),this.requestEnableAllTemplates(),showToast(t$3`Sorry, there is an error when trying to use this template.`)}}requestEnableAllTemplates(){document.dispatchEvent(new CustomEvent(this.constructor.EVENT_REQUEST_ENABLE_ALL_TEMPLATE_CARDS,{detail:{qrcodeTemplate:this.qrcodeTemplate}}))}requestDisableAllTemplates(){document.dispatchEvent(new CustomEvent(QrcgQRCodeTemplateCard.EVENT_REQUEST_DISABLE_ALL_TEMPLATE_CARDS,{detail:{qrcodeTemplate:this.qrcodeTemplate}}))}shouldRenderIframePreview(){return this.typeManager.isDynamic(this.qrcodeTemplate.type)?["url","google-review"].indexOf(this.qrcodeTemplate.type)<0:!1}resolveScreenshot(){return this.qrcodeTemplate.screenshot_url}resolveVideo(){return this.qrcodeTemplate.video_url}getScreenshotUrl(){return this.resolveScreenshot()??"/assets/images/image-placeholder.svg"}renderVideoPreviewIfNeeded(){const w=this.resolveVideo();if(w)return x`
            <video src="${w}" autoplay muted loop playsinline></video>
        `}renderTemplateScreenshot(){return x`
            <div
                @click=${this.onUseTemplateClick}
                class="screenshot"
                style="background-image: url(${this.getScreenshotUrl()});"
            >
                ${this.renderIframePreview()}
                ${this.renderVideoPreviewIfNeeded()}
            </div>
        `}renderIframePreview(){if(this.resolveScreenshot()||this.resolveVideo()||!this.shouldRenderIframePreview())return;const w=this.getPreviewUrl()+"&smooth-scroll=false";if(w)return x`
            <iframe src=${w} seamless="seamless" scrolling="no"></iframe>
        `}shouldShowSettingsButton(){return permitted("qrcode-template.manage-all")?!0:this.qrcodeTemplate.user_id==loadUser().id}renderSettingsButton(){if(this.shouldShowSettingsButton())return x`
            <qrcg-icon
                class="settings"
                mdi-icon=${mdiCog}
                @click=${this.onSettingsClicked}
            ></qrcg-icon>
        `}renderDescription(){return x`
            <!--  -->
            <div class="description" title="${this.qrcodeTemplate.description}">
                ${this.qrcodeTemplate.description}
            </div>
        `}render(){return x`
            ${this.renderTemplateScreenshot()}

            <div class="name" title=${this.qrcodeTemplate.name}>
                <div class="name-text">${this.qrcodeTemplate.name}</div>
            </div>

            ${this.renderDescription()}

            <div class="meta">
                <div class="type">${this.qrcodeTemplate.type}</div>

                <div class="cat">
                    ${this.typeManager.isDynamic(this.qrcodeTemplate.type)?t$3`Dynamic`:t$3`Static`}
                </div>
            </div>

            <div class="buttons">${this.renderSettingsButton()}</div>
        `}}QrcgQRCodeTemplateCard.register();class UseTemplateModal extends QrcgModal{static tag="qrcg-use-template-modal";static styleSheets=[...super.styleSheets,style$1t];static get properties(){return{...super.properties,qrcode:{type:Object},template:{type:Object},loading:{type:Boolean}}}constructor(){super(),this.qrcode={},this.template={},this.loading=!1}connectedCallback(){super.connectedCallback(),this.addEventListener(QrcgQRCodeTemplateCard.EVENT_BEFORE_CREATE_QRCODE,this.onBeforeCreate)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(QrcgQRCodeTemplateCard.EVENT_BEFORE_CREATE_QRCODE,this.onBeforeCreate)}renderActions(){}affiramtivePromise(){return this.useTemplate()}async useTemplate(){try{await confirm$1({message:t$3`Current details, images, and design will be lost, this cannot be undone.`})}catch{return}try{this.loading=!0,await post(`qrcode-templates/${this.template.id}/use-in-existing`,{qrcode_id:this.qrcode.id}),showToast(t$3`Template copied successfully.`),setTimeout(()=>{window.location.reload()},1e3)}catch(w){console.error(w),showToast(t$3`Error while trying to use selected template.`),this.loading=!1}}async onBeforeCreate(w){w.preventDefault(),this.template=w.detail.template,this.onAffirmativeClick()}renderTitle(){return t$3`Use Template`}renderBodyLoader(){return x`
            <div class="loading-message">
                ${t$3`Copying template details, please wait...`}
            </div>

            ${super.renderBodyLoader()}
        `}renderBody(){return this.loading?this.renderBodyLoader():x` <qrcg-qrcode-templates-list></qrcg-qrcode-templates-list> `}}UseTemplateModal.register();class QRCGQRCodeForm extends observeState(i$1){static EVENT_REQUEST_REFRESH="qrcg-qrcode-form:request-refresh";static get properties(){return{steps:{type:Array},loaders:{state:!0}}}api=new QRCGApiConsumer(this,"qrcodes","qrcg-button");titleController=new QRCGTitleController(this);routeParams=new QRCGRouteParamsController(this);billing=new BillingMode;accountCredit=new AccountCreditManager;droplet=new Droplet;stepsManager=new StepsManager;get loading(){return this.loaders>0}set loading(w){this.loaders=w?this.loaders-1:this.loaders+1}get localRecord(){return{id:state$1.id,data:state$1.data,type:state$1.type,design:state$1.design,name:state$1.name}}set localRecord(w){state$1.id=w.id,state$1.data=w.data,state$1.type=w.type,state$1.name=w.name,isEmpty(w.design)||(state$1.design=w.design)}get downloadStep(){return this.renderRoot.querySelector("qrcg-download-qrcode")}constructor(){super(),this.updatePageTitle=this.updatePageTitle.bind(this),this.save=this.save.bind(this),this.steps=this.stepsManager.getSteps(),this.api.loadableElementsSelector="none",this.api.disableableInputsSelector="qrcg-input,qrcg-button,qrcg-qrcode-stats-link"}connectedCallback(){super.connectedCallback(),this.addEventListener("before-step-change",this._onBeforeStepChange),this.addEventListener("after-step-change",this._onAfterStepChange),this.addEventListener("api:success",this._onApiSuccess),this.addEventListener("api:before-request",this._onBeforeRequest),this.addEventListener("api:after-request",this._onAfterRequest),this.addEventListener("qrcg-download-qrcode:name-change",this.save),this.addEventListener("on-input",this.onInput),this.addEventListener("qrcg-img-selector:disabled-option-click",this.onImgSelectorDisabledOptionClick),this.addEventListener("qrcg-qrcode-link:change",this.refresh),document.addEventListener(QRCGQRCodeForm.EVENT_REQUEST_REFRESH,this.onRefreshRequested),window.addEventListener("qrcg-router:location-changed",this.onLocationChanged),document.addEventListener("qrcg-qrcode-form:request-save",this.onSaveRequested),window.addEventListener("scroll",this.onWindowScroll);const w=this.routeParams.get("id");this.fetch(w),this.updatePageTitle(),this.resetState(),this.updateBreadcrumbs(),this.resetSteps(),this.injectStyles()}disconnectedCallback(){this.removeEventListener("before-step-change",this._onBeforeStepChange),this.removeEventListener("after-step-change",this._onAfterStepChange),this.removeEventListener("api:success",this._onApiSuccess),this.removeEventListener("api:before-request",this._onBeforeRequest),this.removeEventListener("api:after-request",this._onAfterRequest),this.removeEventListener("qrcg-download-qrcode:name-change",this.save),this.removeEventListener("on-input",this.onInput),this.removeEventListener("qrcg-qrcode-link:change",this.refresh),document.removeEventListener("qrcg-qrcode-form:request-save",this.onSaveRequested),document.removeEventListener(QRCGQRCodeForm.EVENT_REQUEST_REFRESH,this.onRefreshRequested),window.removeEventListener("qrcg-router:location-changed",this.onLocationChanged),window.removeEventListener("scroll",this.onWindowScroll),this.removeEventListener("qrcg-img-selector:disabled-option-click",this.onImgSelectorDisabledOptionClick)}injectStyles(){const w=document.createElement("style");w.innerHTML=style$1u,this.shadowRoot.appendChild(w)}isDynamic(){return new QRCodeTypeManager$1().isDynamic(this.localRecord.type)}onImgSelectorDisabledOptionClick(w){(w.detail.name==="shape"||w.detail.name==="advancedShape")&&confirm$1({title:"Upgrade Required",message:t$3`You need to upgrade your subscription to use this feature.`,affirmativeText:t$3`OK`,negativeText:null})}onLocationChanged=()=>{this.updatePageTitle(),this.updateBreadcrumbs()};onWindowScroll=()=>{const w=this.shadowRoot.querySelector(".step-navigator.bottom");window.scrollY>80?w.classList.add("visible"):w.classList.remove("visible")};async resetSteps(){this.steps=this.stepsManager.getSteps(),state$1.currentStep=this.stepsManager.getFirstStepSlug()}async syncFormData(){await this.updateComplete,this.form()&&(this.form().data=state$1.data),this.syncHeaderVisibility()}syncHeaderVisibility(){this.isNewQRCode()||this.isDynamic()&&(this.headerIsVisible=!0,this.requestUpdate())}onInput=async w=>{const q=w.composedPath()[0];if(q.tagName==="QRCG-FILE-INPUT"&&q._name){const D={...this.localRecord};await this.fetch(state$1.id),this.localRecord=D}w.detail.name==="qrcg-qrcode-designer"&&(state$1.design=w.detail.value)};async onUseTemplateClick(){UseTemplateModal.open({qrcode:this.localRecord})}updateBreadcrumbs(){const w=QrcgDashboardBreadcrumbs.buildBreadcrumbFromCurrentPath(D=>D.match(/qrcodes/)?"QR Codes":titleCase(D));if(w.length===0)return;w[w.length-1].href.match(/\d+/)&&w.splice(w.length-1);const q=w[w.length-1];w[w.length-1]={...q,text:this.titleController.pageTitle},QrcgDashboardBreadcrumbs.setLinks(w)}async fetch(w){if(!w)return;const q=w||state$1.id;isEmpty(q)||await this.api.get(q)}onRefreshRequested=()=>{this.refresh()};refresh(){this.fetch(this.localRecord.id)}isNewQRCode(){return window.location.pathname.match(/new/)}resetState(){this.isNewQRCode()&&Object.keys(defaultState).forEach(w=>{state$1[w]=defaultState[w]})}updatePageTitle(){window.location.pathname.match("edit")?this.titleController.pageTitle=t$3("Edit QR Code"):this.titleController.pageTitle=t$3("Create QR Code")}_onBeforeRequest=()=>{state$1.loading=!0};_onAfterRequest=()=>{state$1.loading=!0};async _onTypeSelected(w){try{await this.validateCanCreateQRCodeWhenAccountCreditIsEnabled(w.detail.type)}catch{return}state$1.type=w.detail.type,this.changeCurrentStep("data")}async validateCanCreateQRCodeWhenAccountCreditIsEnabled(w){if(!state$1.id&&this.billing.isAccountCredit())try{await this.accountCredit.canCreateQRCode(w)}catch{throw this.accountCredit.showAddToCartModal(w),new Error("cannot create QR code")}}_onStepChangeRequested=w=>{this.changeCurrentStep(w.detail.step)};_onBeforeStepChange=async w=>{w.detail.currentStep==="data"&&(state$1.data=this.form().data),w.detail.currentStep!=="type"&&(this.beforeStepChangePromise=this.save())};_onAfterStepChange=async()=>{await new Promise(w=>setTimeout(w,0)),this.refreshAccountBalance(),this.syncFormData()};onHeaderToggleClick(){this.headerIsVisible=!this.headerIsVisible,this.requestUpdate()}refreshAccountBalance(){document.dispatchEvent(new CustomEvent("account-balance:request-refresh"))}_onApiSuccess=async w=>{const q=this.localRecord.id;this.localRecord=w.detail.response,state$1.remoteRecord=w.detail.response;const D=`/dashboard/qrcodes/edit/${this.localRecord.id}`;isEmpty(q)&&window.location.pathname!==D&&push(D),await this.updateComplete,this.syncFormData()};onSaveRequested=()=>{this.save()};async save(){await this.api.save({id:state$1.id,data:state$1.data,type:state$1.type,design:state$1.design,name:state$1.name}),FolderModel.fireOnChange(),document.dispatchEvent(new CustomEvent("qrcg-qrcode-form:save-completed"))}shouldSave(){const w=only(this.api.record,Object.keys(this.localRecord));return!(equals(w,this.localRecord)||isEmpty(this.localRecord.data))}clearValidationErrors(){this.form()?.dispatchEvent(new CustomEvent("validation-errors",{detail:{errors:{}}}))}handleValidationErrors(w){this.form()?.dispatchEvent(new CustomEvent("validation-errors",{detail:{errors:w}}))}async changeCurrentStep(w){this.dispatchEvent(new CustomEvent("before-step-change",{cancelable:!0,detail:{currentStep:state$1.currentStep,nextStep:w}}));let q=!1;if(this.beforeStepChangePromise){this.__beforeStepChangeToastTimeout=setTimeout(()=>{showToast(t$3`Saving QR code details. Please wait ...`)},1500);try{this.clearValidationErrors(),await this.beforeStepChangePromise}catch(Q){q=!0,isFunction(Q.errors)&&this.handleValidationErrors(Q.errors())}finally{clearTimeout(this.__beforeStepChangeToastTimeout)}}if(q)return;const D=state$1.currentStep;state$1.currentStep=w,this.dispatchEvent(new CustomEvent("after-step-change",{detail:{prevStep:D,currentStep:state$1.currentStep}}))}form(){return this.renderRoot.querySelector("[role=form]")}navigateNext(){this.navigate(1)}navigateBack(){this.navigate(-1)}navigate(w){const D=this.steps.indexOf(this.steps.find(Q=>Q.value===state$1.currentStep))+w;if(D===this.steps.length)return this.onClose();this.changeCurrentStep(this.steps[D].value)}onClose(){push("/dashboard/qrcodes")}renderStepType(){return u$3`
            <qrcg-qrcode-type-selector
                value=${state$1.type}
                @qrcode-type-selected=${this._onTypeSelected}
            ></qrcg-qrcode-type-selector>
        `}renderStepData(){return new QRCodeTypeManager(state$1.type).resolve().renderForm()}renderStepDesign(){return new QRCodeTypeManager(state$1.type).resolve().renderDesigner()}renderStepDownload(){return u$3`<qrcg-download-qrcode></qrcg-download-qrcode>`}renderCurrentStep(){const w=`renderStep${capitalize(state$1.currentStep)}`;return this[w]()}renderNavigation(w){return u$3`
            <div
                class="step-navigator ${w}"
                .hidden=${state$1.currentStep==="type"}
            >
                <qrcg-button @click=${this.navigateBack} class="elegant">
                    <qrcg-icon mdi-icon=${mdiArrowLeft}></qrcg-icon>
                    ${t$3`Back`}
                </qrcg-button>

                <qrcg-button @click=${this.navigateNext} class="elegant">
                    ${this.nextText()}
                    <!--  -->
                    ${this.renderNextStepIcon()}
                </qrcg-button>
            </div>
        `}nextText(){return state$1.currentStep==="download"?t$3("Close"):t$3("Next")}renderNextStepIcon(){let w=null;return state$1.currentStep==="download"?w=null:w=mdiArrowRight,u$3` <qrcg-icon mdi-icon=${w}></qrcg-icon> `}async onSaveAsTemplateClick(){try{await QrcgQrCodeTemplateModal.open({qrcode:this.localRecord})}catch{}}renderSaveAsTemplateButton(){if(!(this.droplet.isSmall()||!this.localRecord?.id||!PluginManager.applyFilters(FILTER_QRCODE_FORM_SHOULD_RENDER_SAVE_AS_TEMPLATE_BUTTON,!0)))return u$3`
            <qrcg-button
                class="save-as-template-button elegant"
                @click=${this.onSaveAsTemplateClick}
            >
                <qrcg-icon mdi-icon=${mdiDrawing}></qrcg-icon>
                ${t$3`Save as Template`}
            </qrcg-button>
        `}renderQrcodeStatsLink(){return Config.get("dashboard.view_stats_link_in_edit_qrcode_page")==="disabled"?null:u$3`
            <qrcg-qrcode-stats-link
                qrcode-id=${this.localRecord?.id}
            ></qrcg-qrcode-stats-link>
        `}onChangeTypeClick(){QrcgChangeQrCodeTypeModal.open({selectedType:this.localRecord.type,qrcode:this.localRecord})}renderChangeTypeButton(){if(!(this.stepsManager.isStepAvailable("type")||!PluginManager.applyFilters(FILTER_QRCODE_FORM_CHANGE_TYPE_BUTTON,!0)))return u$3`
            <qrcg-button
                class="change-type elegant"
                @click=${this.onChangeTypeClick}
            >
                <qrcg-icon mdi-icon=${mdiFileEdit}></qrcg-icon>
                ${t$3`Change Type`}
            </qrcg-button>
        `}shouldRenderUseTemplateButton(){return this.droplet.isSmall()?!1:permitted("qrcode.list-all")?!0:Config.get("dashboard.use_template_button")!=="disabled"}renderUseTemplateButton(){if(this.shouldRenderUseTemplateButton())return u$3`
            <qrcg-button class="elegant" @click=${this.onUseTemplateClick}>
                <qrcg-icon mdi-icon=${mdiDownload}></qrcg-icon>
                ${t$3`Use Template`}
            </qrcg-button>
        `}renderHeader(){if(this.headerIsVisible)return u$3`
            <header>
                <qrcg-qrcode-link
                    qrcode-id=${this.localRecord?.id}
                ></qrcg-qrcode-link>

                <div class="actions">
                    ${this.renderQrcodeStatsLink()}
                    ${this.renderUseTemplateButton()}
                    ${this.renderChangeTypeButton()}
                    ${this.renderSaveAsTemplateButton()}
                </div>
            </header>
        `}renderHeaderToggle(){if(this.localRecord?.id)return u$3`
            <qrcg-icon
                mdi-icon=${mdiCog}
                @click=${this.onHeaderToggleClick}
                class="header-toggle"
            ></qrcg-icon>
        `}render(){return u$3`
            <div class="steps-container">
                <div class="start">
                    <qrcg-qrcode-form-steps
                        @request-step-change=${this._onStepChangeRequested}
                        currentStep=${state$1.currentStep}
                        .steps=${this.steps}
                    ></qrcg-qrcode-form-steps>

                    ${this.renderHeaderToggle()}
                </div>

                ${this.renderNavigation("top")}
            </div>
            ${this.renderHeader()}
            <!--  -->
            ${this.renderCurrentStep()}

            <!--  -->
            ${this.renderNavigation("bottom")}
        `}}window.defineCustomElement("qrcg-qrcode-form",QRCGQRCodeForm);const style$1q=":host{display:block}.empty-message{padding:1rem;background-color:var(--gray-0);color:var(--gray-2);line-height:1.5}.loader-container{display:flex;align-items:center;justify-content:center}.search-box{margin-bottom:1rem}.search-box .input-container{display:flex;gap:.5rem;align-items:flex-end;margin-bottom:1rem}.search-box qrcg-input{flex:1}.search-box qrcg-input::part(input){margin-bottom:0}.search-box qrcg-button:not([round]):not(.create-button){--button-color: var(--primary-0);--button-background-color: transparent;--button-background-color-hover: var(--gray-0);--button-outline-focus: var(--gray-1);margin-inline-end:.2rem;margin-bottom:.2rem}.search-box qrcg-button:not([round]):not(.create-button) qrcg-icon{color:var(--gray-2);margin-inline-end:.5rem;pointer-events:none}.search-box qrcg-button:not([round]):not(.create-button)::part(button){box-shadow:none;min-width:initial;display:flex}.template-list{display:grid;grid-gap:1rem}.number-of-templates{color:var(--gray-2);font-size:.8rem}.section-title{color:var(--gray-2)}@media(min-width:550px){.template-list{grid-template-columns:repeat(2,1fr)}}@media(min-width:780px){.template-list{grid-template-columns:repeat(3,1fr)}}@media(min-width:1050px){.template-list{grid-template-columns:repeat(4,1fr)}}@media(min-width:1300px){.template-list{grid-template-columns:repeat(5,1fr)}}@media(min-width:1900px){.template-list{grid-template-columns:repeat(6,1fr)}}.separator-line{width:100%;height:1px;background-color:var(--gray-1);margin:2rem 0}";class TypeFilterModal extends QrcgModal{static tag="qrcg-type-filter-modal";getAvailableTypes(){return new QRCodeTypeManager$1().getAvailableQrCodeTypes().map(w=>({value:w.id,name:t$3(w.name)}))}resolvedData(){return this.$('[name="type"]').value}renderTitle(){return t$3`Filter By Type`}renderBody(){return x`
            <qrcg-balloon-selector
                .options=${this.getAvailableTypes()}
                name="type"
            >
                ${t$3`Type`}
            </qrcg-balloon-selector>
        `}}TypeFilterModal.register();class QrcgQRCodeTemplatesList extends BaseComponent{static tag="qrcg-qrcode-templates-list";static styleSheets=[...super.styleSheets,style$1q];static get properties(){return{loading:{type:Boolean},templates:{type:Array},filteredTemplates:{type:Array},categoryId:{attribute:"category-id"}}}static async loadTemplates(){const{response:w}=await get("qrcode-templates");return await w.json()}static async hasTemplates(){return(await this.loadTemplates()).length>0}get keyword(){return this.shadowRoot.querySelector('[name="keyword"]')?.value}constructor(){super(),this.templates=[],this.loading=!0,this.filteredTemplates=[],this.categoryId=null}connectedCallback(){super.connectedCallback(),this.fetchTemplates(),document.addEventListener(QrcgQrCodeTemplateModal.EVENT_TEMPLATE_DELETED,this.onTemplateDeleted)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener(QrcgQrCodeTemplateModal.EVENT_TEMPLATE_DELETED,this.onTemplateDeleted)}willUpdate(w){w.has("categoryId")&&this.filterTemplates()}async openFilterModal(){const w=await TypeFilterModal.open();this.type=w,this.filterTemplates()}onTemplateDeleted=()=>{this.fetchTemplates()};onKeywordChanged(){clearTimeout(this.__searchTimeout),this.__searchTimeout=setTimeout(()=>{this.filterTemplates()},500)}filterTemplates(){this.filteredTemplates=this.templates.filter(w=>currentPlanHasQrCodeType(w.type)).filter(w=>this.categoryId?w.category_id==this.categoryId:!0).filter(w=>{if(isEmpty(this.keyword)&&isEmpty(this.type))return!0;let q=!0;try{const D=escapeRegExp(this.keyword),Q=new RegExp(D,"i");w.__stringified||(w.__stringified=JSON.stringify(w)),q=q&&w.__stringified.match(Q)}catch{}return isNotEmpty(this.type)&&(q=q&&w.type===this.type),q}).sort((w,q)=>w.type.localeCompare(q.type))}async fetchTemplates(){this.loading=!0;try{this.templates=await QrcgQRCodeTemplatesList.loadTemplates(),this.filterTemplates()}catch{showToast(t$3`Error loading templates`)}this.loading=!1}renderTypeTemplates(w,q){const D=q.filter(Q=>Q.type===w);return x`
            <div class="template-list">
                ${D.map(Q=>x`
                        <qrcg-qrcode-template-card
                            .qrcodeTemplate=${Q}
                        ></qrcg-qrcode-template-card>
                    `)}
            </div>

            <div class="separator-line"></div>
        `}renderTemplateList(w){return w.map(D=>D.type).reduce((D,Q)=>(D.indexOf(Q)>=0||D.push(Q),D),[]).map(D=>this.renderTypeTemplates(D,w))}getPrivateTemplates(){return this.filteredTemplates?.filter(w=>w.template_access_level=="private")}getPublicTemplates(){return this.filteredTemplates?.filter(w=>w.template_access_level=="public")}renderLoader(){return x`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderEmptyMessage(){return x`
            <div class="empty-message">
                <div>${t$3`No templates could be found.`}</div>

                <div>
                    ${t$3`You can create a new template from the QR Code form and then click on Save as Template button at top right corner of the screen`}
                </div>
            </div>
        `}renderNumberOfTemplates(){if(!isEmpty(this.templates))return this.filteredTemplates.length==this.templates.length?`${t$3("Showing")} ${this.templates.length} ${t$3("templates")}.`:`${t$3("Showing")} ${this.filteredTemplates.length} ${t$3("out of")} ${this.templates.length} ${this.templates.length>1?t$3("templates"):t$3("template")}.`}renderSearchbox(){if(!isEmpty(this.templates))return x`
            <div class="search-box" part="search-box">
                <div class="input-container">
                    <qrcg-input
                        name="keyword"
                        placeholder=${t$3`Search`}
                        autofocus
                        @on-input=${this.onKeywordChanged}
                    >
                        ${t$3`Search`}
                    </qrcg-input>

                    <qrcg-button @click=${this.openFilterModal}>
                        <qrcg-icon mdi-icon=${mdiFilter}></qrcg-icon>
                        ${t$3`Filter`}
                    </qrcg-button>
                </div>

                <div class="number-of-templates">
                    ${this.renderNumberOfTemplates()}
                </div>
            </div>
        `}renderLists(){if(isEmpty(this.filteredTemplates))return this.renderEmptyMessage();const w=[];return this.getPrivateTemplates()?.length&&w.push(x`
                <h3 class="section-title" part="section-title">
                    ${t$3`My Templates`}
                </h3>

                ${this.renderTemplateList(this.getPrivateTemplates())}
            `),this.getPublicTemplates()?.length&&w.push(x`
                <h3 class="section-title" part="section-title">
                    ${t$3`Public Templates`}
                </h3>

                ${this.renderTemplateList(this.getPublicTemplates())}
            `),w}render(){return this.loading?this.renderLoader():x`
            ${this.renderSearchbox()}
            <!--  -->
            ${this.renderLists()}
        `}}defineCustomElement(QrcgQRCodeTemplatesList.tag,QrcgQRCodeTemplatesList);class QrcgTheme extends i$1{static styles=[i$3`
            :host {
                display: none;
            }
        `];static get globalStyle(){const w="qrcg-theme-global-style";let q=document.getElementById(w);return q||(q=document.createElement("style"),q.id=w,q.innerHTML=`:root {

            }`,document.head.appendChild(q)),q}static getCssVar(w,q=null){return q||(q=document.body),getComputedStyle(q).getPropertyValue(w)}static configToCssVarName(w){return`--${w.replace("theme.","").replace(/_/g,"-")}`}static setThemeConfig({key:w,value:q}){return this.setCssVar({key:this.configToCssVarName(w),value:q})}static setCssVar({key:w,value:q}){if(this.globalStyle.innerHTML.match(new RegExp(w))){const D=this.globalStyle.innerHTML.replace(new RegExp(`${w}: .*`),`${w}: ${q};`);this.globalStyle.innerHTML=D}else{const D=this.globalStyle.innerHTML.replace("}",`
            ${w}: ${q}; 
        }
        `);this.globalStyle.innerHTML=D}}render(){return x``}}window.defineCustomElement("qrcg-theme",QrcgTheme);const style$1p=":host{display:block;-webkit-user-select:none;user-select:none;position:relative}.loader-container{display:flex;align-items:center;justify-content:center}.template-selection{display:grid;grid-template-columns:1fr 1fr;grid-gap:2rem;max-width:800px;margin:auto}@media(max-width:800px){.template-selection{grid-template-columns:1fr}}.option{background-color:var(--gray-0);padding:1rem;text-align:center;display:flex;flex-direction:column;justify-content:space-around}.template-image{padding-bottom:100%;background-size:contain;background-position:center;background-repeat:no-repeat}.template-list{display:grid;grid-template-columns:1fr 1fr;grid-gap:.5rem}.option-title{font-weight:700;margin-top:2rem}.icon{margin:auto 0}.template-category{--length: 20%;background-size:cover;background-repeat:no-repeat;background-position:center;background-color:#eee;background-image:var(--image);border-radius:2rem;width:var(--length);padding-bottom:var(--length);text-align:center;position:relative}@media(max-width:900px){.template-category{--length: calc(50% - .25rem) }}.category-name{position:absolute;inset:0;width:100%;height:100%;text-align:center;display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--color, white);font-size:2.5rem;cursor:pointer}.category-name .category-name-text{max-width:80%;text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.template-categories{display:flex;gap:1rem;flex-wrap:wrap}@media(max-width:900px){.template-categories{gap:.5rem}}.category-header{display:flex;gap:1rem;align-items:center;margin-bottom:1rem;color:var(--primary-0);font-weight:700;font-size:1.2rem;justify-content:flex-start;width:max-content;cursor:pointer}.category-header .close-category{width:2rem;height:2rem}.category-templates::part(section-title),.category-templates::part(search-box){display:none}.start-from-scratch{margin-top:1rem;padding:1rem;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem}";class QrcgNewQRCodeFormAdapter extends BaseComponent{static tag="qrcg-new-qrcode-form-adapter";static styleSheets=[...super.styleSheets,style$1p];static get properties(){return{loading:{type:Boolean},templates:{type:Boolean},templateCategories:{type:Array},shouldCreateBlank:{type:Boolean},shouldShowCategoryTemplates:{type:Boolean}}}droplet=new Droplet;constructor(){super(),this.loading=!0,this.shouldCreateBlank=!1,this.templateCategories=[],this.shouldShowCategoryTemplates=!1,this.startFromScratch=!1}connectedCallback(){super.connectedCallback(),this.init(),window.addEventListener("qrcg-router:location-changed",this.onLocationChanged)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("qrcg-router:location-changed",this.onLocationChanged)}onLocationChanged=()=>{this.requestUpdate(),this.pullCategoryTemplateIdQueryParam()};async init(){try{const{json:w}=await get("template-categories?no-pagination=true");this.templateCategories=w,this.templates=await QrcgQRCodeTemplatesList.loadTemplates()}catch{this.templates=!1}this.loading=!1,this.pullCategoryTemplateIdQueryParam()}onCreateBlankQRCodeClicked(){this.shouldCreateBlank=!0}hasTemplates(){return this.templates?.length>=2}hasTemplateCategories(){return this.templateCategories?.length>0}renderTemplateImage(w){return u$3`
            <div
                class="template-image"
                style="background-image: url(${w.screenshot_url});"
            ></div>
        `}renderSampleTemplates(){return u$3`
            <div class="template-list">
                ${shuffle(this.templates).slice(0,4).map(w=>this.renderTemplateImage(w))}
            </div>
        `}renderForm(){return u$3` <qrcg-qrcode-form></qrcg-qrcode-form> `}renderLoader(){return u$3`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}primaryColor(){return QrcgTheme.getCssVar("--primary-0")}getBlankSvgIcon(){return BLANK_SVG.replace(/PRIMARY_COLOR/,this.primaryColor())}shouldRenderTemplateCategoriesList(){return this.hasTemplateCategories()&&this.creatingNewQRCode()&&!this.shouldCreateBlank}shouldRenderStartBlankOrSelectTemplateView(){return this.hasTemplates()&&this.creatingNewQRCode()&&!this.shouldCreateBlank}renderStartBlankOrSelectTemplateView(){return u$3`
            <div class="template-selection">
                <div class="use-template option">
                    ${this.renderSampleTemplates()}

                    <div class="option-title">
                        <qrcg-button href="/dashboard/qrcode-templates">
                            ${t$3`Create Using Template`}
                        </qrcg-button>
                    </div>
                </div>

                <div class="start-new option">
                    <div class="icon">
                        ${s$3(this.getBlankSvgIcon())}
                    </div>
                    <div class="option-title">
                        <qrcg-button @click=${this.onCreateBlankQRCodeClicked}>
                            ${t$3`Create Blank QR Code`}
                        </qrcg-button>
                    </div>
                </div>
            </div>
        `}pullCategoryTemplateIdQueryParam(){const w=queryParam("template-category-id");if(!w)return;const q=this.templateCategories.find(D=>D.id==w);q&&(this.selectedCategory=q,this.shouldShowCategoryTemplates=!0)}onCategoryClick(w){const q=parentMatches(w.target,".template-category");this.selectedCategory=q.category,this.shouldShowCategoryTemplates=!0}closeCategory(){this.selectedCategory=null,this.shouldShowCategoryTemplates=!1}renderCategoryTemplates(){return u$3`
            <header class="category-header" @click=${this.closeCategory}>
                <qrcg-icon
                    mdi-icon=${mdiChevronLeft}
                    class="close-category"
                ></qrcg-icon>

                <div>${this.selectedCategory.name}</div>
            </header>

            <qrcg-qrcode-templates-list
                class="category-templates"
                category-id=${this.selectedCategory.id}
            >
            </qrcg-qrcode-templates-list>
        `}renderTemplateCategory(w){return u$3`
            <div
                class="template-category"
                style="--image: url(${w.image_url}); --color: ${w.text_color};"
                title=${w.name}
                .category=${w}
                @click=${this.onCategoryClick}
            >
                <div class="category-name">
                    <div class="category-name-text">${w.name}</div>
                </div>
            </div>
        `}renderTemplateCategoriesList(){return u$3`
            <div class="template-categories">
                ${this.templateCategories.map(w=>this.renderTemplateCategory(w))}
            </div>

            <div class="start-from-scratch">
                <div class="text">
                    ${t$3`If you couldn't find what are you looking for click the button below.`}
                </div>
                <qrcg-button
                    class="elegant"
                    @click=${this.onCreateBlankQRCodeClicked}
                >
                    <qrcg-icon mdi-icon=${mdiPlusThick}></qrcg-icon>
                    ${t$3`Start from scratch`}
                </qrcg-button>
            </div>
        `}creatingNewQRCode(){return window.location.pathname.match(/new/)}render(){return this.droplet.isSmall()?this.renderForm():this.loading?this.renderLoader():this.shouldShowCategoryTemplates&&this.creatingNewQRCode()?this.renderCategoryTemplates():this.shouldRenderTemplateCategoriesList()?this.renderTemplateCategoriesList():this.shouldRenderStartBlankOrSelectTemplateView()?this.renderStartBlankOrSelectTemplateView():this.renderForm()}}QrcgNewQRCodeFormAdapter.register();class QRCGQRCodeFormPage extends i$1{titleController=new QRCGTitleController(this);static get styles(){return i$3`
            :host {
                display: block;
            }

            qrcg-dashboard-layout::part(content-header) {
                display: none;
            }
        `}render(){return x`
            <qrcg-dashboard-layout>
                <div slot="content">
                    <qrcg-new-qrcode-form-adapter></qrcg-new-qrcode-form-adapter>
                </div>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-qrcode-form-page",QRCGQRCodeFormPage);class QRCG_QRcodeImage extends i$1{imageManager=new QRCodeImageManager;get defaultImage(){return url("assets/images/default-qrcode-placeholder.png")}static get styles(){return i$3`
            :host {
                display: block;
                position: relative;
                user-select: none;
                -webkit-user-select: none;
            }

            :host([preview-on-dbl-click]) {
                cursor: pointer;
            }

            .image {
                padding-bottom: 100%;
                width: 100%;
                background-position: center;
                background-size: contain;
                background-repeat: no-repeat;
                position: relative;
                transition: opacity 0.5s ease-in-out;
            }

            .instructions {
                color: var(--gray-2);
                font-size: 0.8rem;
                text-align: center;
                margin-top: 1rem;
            }

            qrcg-loader {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translateX(-50%) translateY(-50%) scale(0.5);
            }

            .inactive {
                opacity: 0.5;
            }

            .loading {
                opacity: 0.1;
            }

            svg {
                width: 100%;
                height: 100%;
            }

            #svg-container {
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0;
                right: 0;
            }
        `}static get properties(){return{url:{},imageUrl:{state:!0},loading:{type:Boolean,state:!0},previewOnDblClick:{type:Boolean,attribute:"preview-on-dbl-click",reflect:!0},dblClickUrl:{attribute:"dbl-click-url"},converToPng:{type:Boolean,attribute:"convert-to-png"},renderSvgTag:{type:Boolean,attribute:"render-svg-tag"},svgContent:{}}}constructor(){super(),this.loaders=0,this.clickCount=0,this.converToPng=!1,this.renderSvgTag=!1,this.svgContent=""}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),this.imageManager.disconnect()}onClick=()=>{if(this.clickCount++,this.dblClickHandle=setTimeout(()=>{this.clickCount=0},500),this.clickCount>1){if(!this.previewOnDblClick)return;this.clickCount=0,window.open(QRCG_QRcodeImage.getPreviewPageUrl(this.dblClickUrl),"_blank")}};static getPreviewPageUrl(w){const q={src:w},D=new URLSearchParams(q).toString();return Config.get("app.url")+"/dashboard/qrcodes/designer/preview?"+D}updated(w){w.has("url")&&this.fetch()}shouldRenderPng(){return!iPhoneSafari()||this.converToPng}fetch(){try{this.doFetch()}catch(w){ConfigHelper.isLocal()&&console.error(w)}}async doFetch(){if(isEmpty(this.url)){this.imageUrl=null;return}this.loading=++this.loaders>0,this.imageManager.withUrl(this.url),this.renderSvgTag?(this.svgContent=await this.imageManager.getSvgString(),this.updateComplete.then(()=>{this.renderSvgContent()})):this.shouldRenderPng()?this.imageUrl=await this.imageManager.getPngObjectUrl({width:300,height:300}):this.imageUrl=await this.imageManager.getSvgObjectUrl(),this.loading=--this.loaders>0}renderSvgContent(){const w=this.shadowRoot.querySelector("#svg-container");if(w){if(isEmpty(this.svgContent)){w.innerHTML="";return}w.innerHTML=this.svgContent,this.dispatchEvent(new CustomEvent("qrcg-qrcode-image:svg-after-render",{composed:!0,bubbles:!0,detail:{svgContainer:w}}))}}renderSvgContainer(){const w=isEmpty(this.svgContent)?this.defaultImage:"";return x`
            <div
                class=${e$1({image:!0,inactive:isEmpty(this.svgContent),loading:this.loading})}
                style="background-image:url(${w})"
            >
                <div id="svg-container"></div>
            </div>
        `}renderImageContainer(){if(this.renderSvgTag)return this.renderSvgContainer();let w=isEmpty(this.imageUrl)?this.defaultImage:this.imageUrl;return x`
            <div
                class=${e$1({image:!0,inactive:isEmpty(this.imageUrl),loading:this.loading})}
                style="background-image:url(${w})"
            ></div>
        `}renderLoader(){if(this.loading)return x`<qrcg-loader></qrcg-loader>`}renderInstructions(){if(this.previewOnDblClick)return x`
            <div class="instructions" part="instructions">
                ${t$3`Double click to enlarge`}
            </div>
        `}render(){return x`
            ${this.renderImageContainer()}

            <!-- -->

            ${this.renderLoader()}

            <!-- -->

            ${this.renderInstructions()}
        `}}window.defineCustomElement("qrcg-qrcode-image",QRCG_QRcodeImage);const style$1o="qrcg-qrcode-image{width:200px;height:200px;margin:auto}qrcg-qrcode-image::part(instructions){display:none}.view-full-size{margin:.5rem auto 0;width:max-content}";class QrcgQrcodePreviewModal extends QrcgModal{static styleSheets=[...super.styleSheets,style$1o];static get properties(){return{...super.properties,title:{},qrcode:{},editText:{},statsText:{}}}renderTitle(){return this.title}renderBody(){return x`
            <div class="image-container">
                <qrcg-qrcode-image
                    url=${this.qrcode?.getFileUrl("svg")}
                ></qrcg-qrcode-image>

                <qrcg-button
                    class="elegant view-full-size"
                    target="_blank"
                    href=${QRCG_QRcodeImage.getPreviewPageUrl(this.qrcode?.getFileUrl("svg"))}
                >
                    <qrcg-icon mdi-icon=${mdiOpenInNew}></qrcg-icon>
                    ${t$3`View Full Size`}
                </qrcg-button>
            </div>
        `}renderActions(){return x`
            <qrcg-button transparent modal-negative>
                ${this.negativeText}
            </qrcg-button>

            <qrcg-button modal-affirmative href=${this.qrcode?.getEditLink()}>
                ${this.editText}
            </qrcg-button>
        `}}async function openPreviewModal({qrcode:F,title:w="Preview",editText:q="Edit",statsText:D="Stats",negativeText:Q="Close"}={}){const O=new QrcgQrcodePreviewModal;return O.title=w,O.qrcode=F,O.editText=q,O.statsText=D,O.negativeText=Q,document.body.appendChild(O),await new Promise(U=>setTimeout(U,10)),O.open()}window.defineCustomElement("qrcg-qrcode-preview-modal",QrcgQrcodePreviewModal);const style$1n=":host{display:block}.loader-container{display:flex;align-items:center;justify-content:center;padding:1rem 0}.add-folder{margin-top:1rem;display:flex;align-items:center;--qrcg-loader-h-color: var(--dark)}.folder{padding:.5rem;background-color:var(--gray-0);display:flex;align-items:center;margin-bottom:.5rem;-webkit-user-select:none;user-select:none}.folder qrcg-icon{color:var(--gray-2);margin-right:.5rem}.folder-actions{display:flex;font-size:.8rem}.folder .name{flex:1}.folder a{color:var(--primary-0);cursor:pointer}.folder .count{margin-right:1rem;color:var(--gray-2)}[name=folder_name]{flex:1;margin-right:1rem}[name=folder_name]::part(input){margin-bottom:0}[name=folder_name]::part(label){display:none}.no-folders-message{text-align:center;margin:1rem 0;color:var(--gray-2)}";class QrcgSelectFolderModal extends QrcgModal{static tag="qrcg-select-folder-modal";static styleSheets=[...super.styleSheets,style$1n];static get properties(){return{...super.properties,foldersLoading:{type:Boolean},saveFolderLoading:{type:Boolean},folders:{type:Array},data:{},value:{type:Array},userId:{},multi:{type:Boolean}}}api=new QRCGApiConsumer(this);constructor(){super(),this.foldersLoading=!0,this.folders=[],this.data={},this.userId=null,this.multi=!1,this.value=[],this.addFolderUi=!0,this.deleteFolderUi=!0}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput),this.addEventListener("click",this.onClick),setTimeout(()=>{this.fetchFolders()})}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput),this.removeEventListener("click",this.onClick)}onClick(w){const q=w.composedPath()[0];parentMatches(q,"a.delete")&&this.onDeleteFolder(w)}async onDeleteFolder(w){const q=w.composedPath()[0];w.preventDefault(),w.stopPropagation();const D=q.folder;D.qrcode_count>0&&await confirm$1({title:t$3`Folder is not empty`,message:t$3`Are you sure you want to delete`+` ${D.name}?`});const Q=loadUser().id;await destroy(`folders/${Q}/${D.id}`),showToast(t$3`Folder deleted successfully`),await this.fetchFolders()}onInput(w){if(w.detail.name==="folder_check")return this.onFolderChecked(w);this.data={...this.data,[w.detail.name]:w.detail.value}}resetCheckInputs(){this.shadowRoot.querySelectorAll('[name="folder_check"]').forEach(q=>q.value=!1)}onFolderChecked(w){const q=w.composedPath()[0];this.multi||this.resetValue(),q.value=w.detail.value,q.value?this.addFolderId(q.getAttribute("folder-id")):this.removeFolderId(q.getAttribute("folder-id"))}async updated(w){(w.has("value")||w.has("folders"))&&(await this.updateComplete,this.syncValue())}syncValue(){this.resetCheckInputs(),this.value.forEach(w=>{const q=this.shadowRoot.querySelector(`[folder-id="${w}"]`);q&&(q.value=!0)})}addFolderId(w){this.value=[...this.value,w]}removeFolderId(w){this.value=this.value.filter(q=>q!=w)}resetValue(){this.value=[]}resolvedData(){return this.value}async fetchFolders(){this.foldersLoading=!0;try{const{response:w}=await get(`folders/${this.userId}`);this.folders=await w.json()}catch{}this.foldersLoading=!1}async saveFolder(){this.saveFolderLoading=!0;try{const q=await this.api.post(`folders/${this.userId}`,this.data);this.shadowRoot.querySelector('[name="folder_name"]').value="",showToast(t$3`Folder saved successfully`),await this.fetchFolders(),this.multi||this.resetValue(),this.addFolderId(q.id)}catch(w){console.error(w),showToast(t$3`Error saving new folder`)}this.saveFolderLoading=!1}onFolderNameKeyUp(w){w.key=="Enter"&&this.saveFolder()}renderTitle(){return t$3`Select Folder`}renderLoader(){return x`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderDeleteFolderLink(w){if(this.deleteFolderUi)return x`
            <a class="delete" href="#" .folder=${w}> ${t$3`Delete`} </a>
        `}renderFolders(){return this.foldersLoading?this.renderLoader():isEmpty(this.folders)?x`
                <div class="no-folders-message">
                    ${t$3`You do not have any folders.`}
                </div>
            `:this.folders.map(w=>x`
                <div class="folder">
                    <qrcg-checkbox
                        class="name"
                        name="folder_check"
                        folder-id=${w.id}
                    >
                        <qrcg-icon mdi-icon=${mdiFolder}></qrcg-icon>
                        ${w.name}
                    </qrcg-checkbox>

                    <div class="folder-actions">
                        <div class="count">
                            ${w.qrcode_count} ${t$3`QR Codes`}
                        </div>

                        ${this.renderDeleteFolderLink(w)}
                    </div>
                </div>
            `)}renderFolderInput(){if(this.addFolderUi)return x`
            <div class="add-folder">
                <qrcg-input
                    name="folder_name"
                    placeholder="${t$3`Add new folder`}"
                    ?disabled=${this.saveFolderLoading}
                    @keyup=${this.onFolderNameKeyUp}
                >
                </qrcg-input>

                <qrcg-button
                    @click=${this.saveFolder}
                    transparent
                    ?loading=${this.saveFolderLoading}
                >
                    ${t$3`Add folder`}
                </qrcg-button>
            </div>
        `}renderBody(){return x`
            <div class="folders-container">${this.renderFolders()}</div>

            <!-- -->

            ${this.renderFolderInput()}
        `}}QrcgSelectFolderModal.register();class QrcgExtendedLicenseModal extends QrcgModal{renderTitle(){return"Upgrade Required"}renderBody(){return x`
            This feature is available only to the
            <strong> Extended License </strong>
        `}onAffirmativeClick(){this.setLoading(!0),window.location=BrandUrl.pricingUrl()}renderActions(){return x`
            <qrcg-button transparent modal-negative> Cancel </qrcg-button>
            <qrcg-button modal-affirmative> Upgrade Now </qrcg-button>
        `}}window.defineCustomElement("qrcg-extended-license-modal",QrcgExtendedLicenseModal);const style$1m=":host([fetching-folder]){opacity:.5;pointer-events:none}";class QrcgSelectFolderLink extends BaseComponent{#e=new DirectionAwareController(this);droplet=new Droplet;static EVENT_FOLDERS_LOADED="qrcg-select-folder-link::folders-loaded";static folders=[];static loadingFolders=!1;static styleSheets=[...super.styleSheets,style$1m];static get properties(){return{qrcode:{type:Object},folder:{type:Object},fetchingFolder:{type:Boolean,reflect:!0,attribute:"fetching-folder"}}}constructor(){super(),this.fetchingFolder=!1}connectedCallback(){super.connectedCallback(),this.fetchFolder(),this.addEventListener("click",this.onClick),document.addEventListener(QrcgSelectFolderLink.EVENT_FOLDERS_LOADED,this.onFoldersLoaded)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),document.removeEventListener(QrcgSelectFolderLink.EVENT_FOLDERS_LOADED,this.onFoldersLoaded)}onFoldersLoaded=()=>{this.fetchFolder(),this.requestUpdate()};async onClick(){if(this.droplet.isSmall())return QrcgExtendedLicenseModal.open();try{const[w]=await QrcgSelectFolderModal.open({value:[this.qrcode.folder_id],multi:!1,userId:loadUser().id});if(w==this.qrcode.folder_id)return;await put(`qrcodes/${this.qrcode.id}`,{...this.qrcode,folder_id:w??null}),FolderModel.fireOnChange(),await this.fetchQRCode(),await this.fetchFolder(!0),this.folder&&showToast(t$3`QR code moved to `+this.folder.name+" "+t$3`successfully`)}catch(w){console.error(w),this.fetchFolder(),FolderModel.fireOnChange()}}static async loadRemoteFolders(){const{json:w}=await get(`folders/${loadUser().id}`);return this.folders=w,w}static async loadFolders(w=!1){return w?this.loadRemoteFolders():this.loadingFolders?[]:isNotEmpty(this.folders)?this.folders:(this.loadingFolders=!0,await this.loadRemoteFolders(),this.loadingFolders=!1,document.dispatchEvent(new CustomEvent(QrcgSelectFolderLink.EVENT_FOLDERS_LOADED)),this.folders)}async fetchFolder(w=!1){if(this.fetchingFolder=!0,this.qrcode.folder_id)try{const q=await QrcgSelectFolderLink.loadFolders(w);this.folder=q.find(D=>D.id==this.qrcode.folder_id)}catch{this.folder=null}else this.folder=null;this.fetchingFolder=!1}async fetchQRCode(){const{response:w}=await get(`qrcodes/${this.qrcode.id}`);this.qrcode=await w.json()}renderName(){return this.fetchingFolder?t$3`Loading ...`:this.folder?this.folder.name:t$3`Select Folder`}updated(){this.shouldRender()?this.removeAttribute("hidden"):this.setAttribute("hidden","true")}shouldRender(){return this.droplet.isSmall()&&!isSuperAdmin()||this.qrcode.archived||!permitted("folder.store")||this.superAdminTryingToMoveClientQRCodeToFolder()?!1:PluginManager.applyFilters(FILTER_QRCODE_ROW_FOLDERS_LINK,!0)}superAdminTryingToMoveClientQRCodeToFolder(){return isSuperAdmin()&&this.qrcode.user_id!=loadUser().id}render(){return x`
            <qrcg-icon mdi-icon=${mdiFolder} part="icon"></qrcg-icon>

            ${this.renderName()}
        `}}window.defineCustomElement("qrcg-select-folder-link",QrcgSelectFolderLink);class QrcgSearchableSelect extends i$1{static get tag(){return"qrcg-searchable-select"}static get EVENT_NAME_SHOULD_OPEN(){return QrcgSearchableSelect.tag+":should-open"}static get EVENT_NAME_SHOULD_TOGGLE(){return QrcgSearchableSelect.tag+":should-toggle"}static get EVENT_NAME_MODE_CHANGED(){return QrcgSearchableSelect.tag+":mode-changed"}static get EVENT_NAME_OPTION_CLICKED(){return QrcgSearchableSelect.tag+":option-clicked"}static get EVENT_NAME_REQUEST_FOCUS_FIRST_ITEM(){return QrcgSearchableSelect.tag+":request-focus-first-item"}static get EVENT_NAME_REQUEST_VALUE_CLEAR(){return QrcgSearchableSelect.tag+":request-value-clear"}static get EVENT_NAME_ON_SEARCH(){return QrcgSearchableSelect.tag+":on-search"}static get MODE_CLOSED(){return"closed"}static get MODE_OPEN(){return"open"}static get POSITION_MODE_ABSOLUTE(){return"absolute"}static get POSITION_MODE_RELATIVE(){return"relative"}static styles=[i$3`
            :host {
                display: block;
                position: relative;
                box-sizing: border-box;
            }

            * {
                box-sizing: border-box;
            }

            .window-container {
                background-color: white;
                border-radius: 0.5rem;
                border: 0.1rem solid var(--gray-1);
                padding: 0 0.5rem 0.5rem 0.5rem;
                width: 100%;
                left: 0;
                z-index: 100;
            }

            :host([position-mode='absolute']) .window-container {
                position: absolute;
            }

            qrcg-select-search {
                border-bottom: 1px solid var(--gray-1);
                margin-bottom: 0.5rem;
            }

            .select-button-content {
                display: flex;
            }
        `];static get properties(){return{items:{type:Array},itemsToRender:{type:Array},mode:{},value:{},name:{},selectedOption:{},renderItemId:{type:Boolean,attribute:"render-item-id"},loading:{type:Boolean},positionMode:{attribute:"position-mode",reflect:!0}}}constructor(){super(),this.items=this.transformOptionTagsIntoItems(),this.items=this.dummyItems(),this.itemsToRender=this.items,this.mode=QrcgSearchableSelect.MODE_CLOSED,this.value=null,this.name=null,this.selectedOption={},this.observer=new MutationObserver(this.onSubtreeModification),this.observer.observe(this,{childList:!0,subtree:!0}),this.renderItemId=!0,this.positionMode=QrcgSearchableSelect.POSITION_MODE_ABSOLUTE}connectedCallback(){super.connectedCallback(),this.addEventListener(QrcgSearchableSelect.EVENT_NAME_SHOULD_OPEN,this.onOpenRequested),document.addEventListener("click",this.onDocumentClick),this.addEventListener("keyup",this.onKeyUp),this.addEventListener(QrcgSearchableSelect.EVENT_NAME_OPTION_CLICKED,this.onOptionClicked),this.addEventListener(QrcgSearchableSelect.EVENT_NAME_SHOULD_TOGGLE,this.onToggleRequested),this.addEventListener(QrcgSearchableSelect.EVENT_NAME_REQUEST_VALUE_CLEAR,this.onValueClearRequested),this.addEventListener(QrcgSearchableSelect.EVENT_NAME_ON_SEARCH,this.onSearch)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(QrcgSearchableSelect.EVENT_NAME_SHOULD_OPEN,this.onOpenRequested),document.removeEventListener("click",this.onDocumentClick),this.removeEventListener(QrcgSearchableSelect.EVENT_NAME_OPTION_CLICKED,this.onOptionClicked),this.removeEventListener("keyup",this.onKeyUp),this.removeEventListener(QrcgSearchableSelect.EVENT_NAME_SHOULD_TOGGLE,this.onToggleRequested),this.observer.disconnect(),this.observer=null,this.removeEventListener(QrcgSearchableSelect.EVENT_NAME_REQUEST_VALUE_CLEAR,this.onValueClearRequested),this.removeEventListener(QrcgSearchableSelect.EVENT_NAME_ON_SEARCH,this.onSearch)}onValueClearRequested(){this.setSelectedOption(null)}updated(w){(w.has("value")||w.has("items"))&&this.syncSelectedOption()}syncSelectedOption(){this.selectedOption=this.items?.find(w=>this.getOptionValue(w)==this.value)}onSubtreeModification=()=>{this.setItems(this.transformOptionTagsIntoItems())};transformOptionTagsIntoItems(){const w=Array.from(this.querySelectorAll("option"));return isEmpty(w)?[]:w.map(function(q){return{id:q.getAttribute("value")??q.innerText,name:q.innerText}})}onOptionClicked=w=>{const{item:q}=w.detail;this.setSelectedOption(q),this.setMode(QrcgSearchableSelect.MODE_CLOSED)};onKeyUp=w=>{w.key==="Escape"&&(w.preventDefault(),w.stopImmediatePropagation(),this.setMode(QrcgSearchableSelect.MODE_CLOSED))};onDocumentClick=w=>{const q=w.composedPath()[0];parentMatches(q,this.tagName)||this.setMode(QrcgSearchableSelect.MODE_CLOSED)};async onOpenRequested(){this.setMode(QrcgSearchableSelect.MODE_OPEN)}async onToggleRequested(){this.mode===QrcgSearchableSelect.MODE_OPEN?this.setMode(QrcgSearchableSelect.MODE_CLOSED):this.setMode(QrcgSearchableSelect.MODE_OPEN)}setSelectedOption(w){this.selectedOption=w;const q=this.getOptionValue(w);this.value=q,this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:q}}))}getOptionValue(w){return w?.value??w?.id}async afterOpen(){this.setSearch(""),await new Promise(q=>setTimeout(q,1)),this.shadowRoot.querySelector("qrcg-select-search").focus()}async setMode(w){this.mode=w,w===QrcgSearchableSelect.MODE_OPEN&&this.afterOpen(),await this.updateComplete,this.dispatchEvent(new CustomEvent(QrcgSearchableSelect.EVENT_NAME_MODE_CHANGED,{bubbles:!0,composed:!0,detail:{mode:w}}))}onSearch=w=>{const q=w.detail.value;this.setSearch(q)};withItemsTransformer(w){return this.itemsTransformer=w,this}itemsTransformer(w){return w}setItems(w){this.items=this.itemsTransformer(w),this.setSearch("")}setSearch(w){isEmpty(w)&&(this.itemsToRender=this.items),this.itemsToRender=this.items.filter(function(q){try{const D=new RegExp(escapeRegExp(w),"ig");return JSON.stringify(q).match(D)}catch(D){return console.log(D),!0}})}dummyItems(){return range(10,1e3).map(w=>({name:`User name ${w}`,email:`email${w}@example.com`,id:w}))}renderControl(){return x`
            <qrcg-select-control
                .mode=${this.mode}
                .loading=${this.loading}
                .value=${this.value}
                .selectedOption=${this.selectedOption}
            >
                <slot name="label"></slot>

                <slot name="instructions" slot="instructions"></slot>
                <!--  -->
            </qrcg-select-control>
        `}renderWindow(){if(this.mode===QrcgSearchableSelect.MODE_OPEN)return x`
            <div class="window-container">
                <qrcg-select-search></qrcg-select-search>
                <!-- -->

                <qrcg-select-window
                    .items=${this.itemsToRender}
                    .selectedOption=${this.selectedOption}
                    .renderItemId=${this.renderItemId}
                ></qrcg-select-window>
            </div>
        `}render(){return x`
            ${this.renderControl()}

            <!-- -->

            ${this.renderWindow()}

            <qrcg-input-errors .errors=${this.errors}></qrcg-input-errors>
        `}}window.defineCustomElement(QrcgSearchableSelect.tag,QrcgSearchableSelect);class QrcgSearchableRelationSelect extends QrcgSearchableSelect{static get tag(){return"qrcg-searchable-relation-select"}static styles=[...super.styles];static get properties(){return{...super.properties,apiEndpoint:{attribute:"api-endpoint"}}}constructor(){super(),this.loading=!0}connectedCallback(){super.connectedCallback(),this.fetch()}async fetch(){this.loading=!0;try{const{response:w}=await get(this.apiEndpoint),q=await w.json();let D=[];q instanceof Array?D=q:q.data instanceof Array&&(D=q.data),this.setItems(D)}catch{}this.loading=!1}itemsTransformer(w){return w}}window.defineCustomElement(QrcgSearchableRelationSelect.tag,QrcgSearchableRelationSelect);class QrcgSearchableUserRelationSelect extends QrcgSearchableRelationSelect{constructor(){super(),this.apiEndpoint="users?list_all=true"}itemsTransformer(w){return w.map(q=>({id:q.id,name:q.name,email:q.email}))}}window.defineCustomElement("qrcg-searchable-user-relation-select",QrcgSearchableUserRelationSelect);class QrcgChangeUserModal extends QrcgModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            qrcg-searchable-user-relation-select {
                line-height: 1;
            }
        `];static get properties(){return{userId:{}}}renderTitle(){return t$3`Change Owner`}onUserIdInput(w){this.userId=w.detail.value}async affiramtivePromise(){if(!this.userId)throw showToast(t$3`You must select a user first`),"canceled";try{await post(`qrcodes/${this.qrcode.id}/change-user`,{user_id:this.userId})}catch{throw showToast(t$3`Error changing ownership`),new Error("error")}}transformUsers(w){return w.map(q=>({id:q.id,name:q.name,email:q.email}))}renderBody(){return x`
            <qrcg-searchable-user-relation-select
                name="user_id"
                api-endpoint="users?list_all=true"
                @on-input=${this.onUserIdInput}
                position-mode=${QrcgSearchableUserRelationSelect.POSITION_MODE_RELATIVE}
                .itemsTransformer=${this.transformUsers}
            >
                ${t$3`User`}
            </qrcg-searchable-user-relation-select>
        `}}window.defineCustomElement("qrcg-change-user-modal",QrcgChangeUserModal);const style$1l=":host([loading]){opacity:.5;pointer-events:none}";class QrcgChangeUserLink extends BaseComponent{static tag="qrcg-change-user-link";static styleSheets=[...super.styleSheets,style$1l];static get properties(){return{qrcode:{type:Object}}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.shouldRender()||this.classList.add("hidden")}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick=async()=>{await QrcgChangeUserModal.open({qrcode:this.qrcode}),document.dispatchEvent(new CustomEvent("qrcg-qrcode-list:request-refresh",{bubbles:!0,composed:!0}))};shouldRender(){return permitted("user.list-all")}render(){if(this.shouldRender())return x`
            <qrcg-icon mdi-icon=${mdiAccount} part="icon"></qrcg-icon>

            ${t$3`Change Owner`}
        `}}QrcgChangeUserLink.register();class QrcgPincodeModal extends QrcgModal{static tag="qrcg-pincode-modal";static get properties(){return{...super.properties,qrcode:{}}}async fetch(){const{response:w}=await get("qrcodes/"+this.qrcode.id);this.qrcode=await w.json()}firstUpdated(){this.fetch()}updated(w){w.has("qrcode")&&this.input&&(this.input.value=this.qrcode.pincode)}renderTitle(){return t$3`PIN Code`}get input(){return this.shadowRoot.querySelector("qrcg-input")}resetErrors(){this.input.errors=[]}validateNumbers(){const w=new RegExp("^\\d{"+this.getAllowedLength()+"}$");return this.input.value.match(w)}inputIsValid(){return this.input.value?this.isOnlyNumbersAllowed()?this.validateNumbers():this.input.value.length==this.getAllowedLength():!0}showErrors(){this.input.errors=[t$3`Must be exactly`+" "+this.getAllowedLength()+" "+(this.isOnlyNumbersAllowed()?t$3`digits`:t$3`characters`)]}async affiramtivePromise(){if(this.resetErrors(),!this.inputIsValid())throw this.showErrors(),new Error("invalid pin code");try{const{response:w}=await post(`qrcodes/${this.qrcode.id}/pincode`,{pincode:this.input.value});if((await w.json()).success)return showToast(t$3`PIN Code has been set successfully`),!0;throw new Error("Error setting PIN Code")}catch{throw showToast(t$3`Error setting PIN Code`),new Error("Error setting PIN Code")}}isOnlyNumbersAllowed(){return Config.get("qrcode.pincode_type")!=="any"}getAllowedLength(){const w=Config.get("qrcode.pincode_length");return isEmpty(w)||isNaN(w)?5:w}resolvedData(){return this.input.value}renderInputInstructions(){return x`
            <div slot="instructions">
                ${this.getAllowedLength()} +
                ${this.isOnlyNumbersAllowed()?t$3`digits`:t$3`characters`},
                ${t$3`leave empty to remove PIN code protection.`}
            </div>
        `}renderNumberInput(){return x`
            <qrcg-input
                name="pincode"
                placeholder="12345"
                pattern="[0-9]*"
                type="number"
                maxlength="5"
            >
                ${t$3`PIN Code.`}

                <div slot="instructions">
                    ${t$3`5 Digits, leave empty to remove PIN code protection.`}
                </div>
            </qrcg-input>
        `}renderBody(){return this.isOnlyNumbersAllowed()?this.renderNumberInput():x`
            <qrcg-input name="pincode" placeholder="Enter PIN Code">
                ${t$3`PIN Code.`}
            </qrcg-input>
        `}}QrcgPincodeModal.register();const style$1k="";class QrcgQrCodePinCodeLink extends BaseComponent{#e=new DirectionAwareController(this);static styleSheets=[...super.styleSheets,style$1k];static get properties(){return{qrcode:{type:Object},hasPinCode:{type:Boolean}}}get icon(){return this.hasPinCode?mdiLock:mdiLockOpenOutline}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick=async()=>{const w=await QrcgPincodeModal.open({qrcode:this.qrcode});this.hasPinCode=!isEmpty(w),this.dispatchEvent(new CustomEvent("on-change"))};updated(w){w.has("qrcode")&&(this.hasPinCode=!isEmpty(this.qrcode.pincode),this.qrcode.isDynamic()||this.setAttribute("hidden","true"))}text(){return this.hasPinCode?t$3`Change PIN Code`:t$3`Protect By PIN Code`}render(){if(permitted("qrcode.pin-code"))return x`
            <!--  -->
            <qrcg-icon part="icon" mdi-icon=${this.icon}></qrcg-icon>

            ${this.text()}
        `}}window.defineCustomElement("qrcg-pincode-link",QrcgQrCodePinCodeLink);const style$1j=":host{display:block}.share-container{display:flex;align-items:flex-end;gap:1rem;margin-bottom:1rem}.share-container qrcg-input{flex:1}.share-container qrcg-input::part(input){margin-bottom:0}.other-options-container .text{margin-bottom:.5rem;color:var(--gray-2)}.other-options-container .other-options{display:flex;gap:1rem}.other-options-container .other-options qrcg-icon{cursor:pointer;padding:.5rem;width:2.5rem;height:2.5rem;background-color:var(--gray-0);border-radius:50%;border:1px solid transparent}.other-options-container .other-options qrcg-icon:hover{border:1px solid black}";class QrcgQrcodeShareModal extends QrcgModal{static styleSheets=[...super.styleSheets,style$1j];constructor(){super(),this.qrcode={name:"",redirect:{route:""}}}sendOnWhatsapp(){const w=this.shadowRoot.querySelector('[name="whatsapp_number"]')?.value;if(!w)return showToast(t$3`Please enter WhatsApp number`);const q=this.formatWhatsAppNumber(w),D=this.generateMessage(),Q=`https://wa.me/${q}?text=${D}`;openLinkInNewTab(Q),setTimeout(()=>{this.close()},1500)}generateMessage(){let w=this.qrcode.name+" "+this.qrcode.redirect.route;return encodeURIComponent(w)}formatWhatsAppNumber(w){return w=w.replace(/[^\d]/g,""),w=w.replace(/^0+/g,""),w}shareUrl(){navigator.share({url:this.qrcode.redirect.route})}copyUrl(){try{navigator.clipboard.writeText(this.qrcode.redirect.route),showToast(t$3`Copied successfully.`)}catch{showToast(t$3`Cannot copy URL.`)}}onWhatsAppKeyUp(w){w.key==="Enter"&&this.sendOnWhatsapp()}downloadPing(){new QRCGDownloadQRCode().downloadPng(this.qrcode)}renderShareOnWhatsapp(){return x`
            <div class="share-container">
                <qrcg-input
                    name="whatsapp_number"
                    placeholder=${t$3`WhatsApp number`}
                    type="tel"
                    pattern="\\d*"
                    @keyup=${this.onWhatsAppKeyUp}
                >
                    ${t$3`Share on Whatsapp`}
                </qrcg-input>

                <qrcg-button @click=${this.sendOnWhatsapp} class="elegant">
                    <qrcg-icon mdi-icon=${mdiSend}> </qrcg-icon>
                    ${t$3`Send`}
                </qrcg-button>
            </div>
        `}renderTitle(){return t$3`Share QR Code`}renderNativeShare(){return x`
            <div class="other-options-container">
                <div class="text">${t$3`Other Options`}</div>
                <div class="other-options">
                    <qrcg-icon
                        mdi-icon=${mdiShare}
                        @click=${this.shareUrl}
                    ></qrcg-icon>
                    <qrcg-icon
                        mdi-icon=${mdiDownload}
                        @click=${this.downloadPing}
                    ></qrcg-icon>
                </div>
            </div>
        `}renderCopyButton(){return x`
            <div class="share-container">
                <qrcg-input disabled .value=${this.qrcode.redirect.route}>
                </qrcg-input>
                <qrcg-button class="elegant" @click=${this.copyUrl}>
                    <qrcg-icon mdi-icon=${mdiTag}> </qrcg-icon>
                    ${t$3`Copy`}
                </qrcg-button>
            </div>
        `}renderBody(){return[this.renderCopyButton(),this.renderShareOnWhatsapp(),this.renderNativeShare()]}getAffirmativeText(){return null}getNegativeText(){}}window.defineCustomElement("qrcg-qrcode-share-modal",QrcgQrcodeShareModal);const style$1i=":host{display:flex;align-items:center;gap:.25rem}.action{color:var(--dark);cursor:pointer;display:flex;align-items:center}:host(:hover) .action{text-decoration:underline;color:var(--info-0)}qrcg-icon{color:var(--gray-2)}.action[loading]{opacity:.5;pointer-events:none}.name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:10rem}";class QrcgQrcodeShareLink extends BaseComponent{qrcodeType=new QRCodeTypeManager$1;static styleSheets=[...super.styleSheets,style$1i];static get properties(){return{qrcode:{type:Object}}}async openModal(w){w.preventDefault(),w.stopPropagation(),await QrcgQrcodeShareModal.open({qrcode:this.qrcode})}render(){if(this.qrcodeType.isDynamic(this.qrcode.type))return x`
            <a class="action" @click=${this.openModal} part="action">
                <qrcg-icon mdi-icon=${mdiShare}></qrcg-icon>
                <div class="name">${t$3`Share`}</div>
            </a>
        `}}window.defineCustomElement("qrcg-qrcode-share-link",QrcgQrcodeShareLink);class QRCodeCopyModal extends QrcgModal{static tag="qrcg-qrcode-copy-modal";static get styles(){return[super.styles,i$3`
                .demo-message {
                    font-weight: bold;
                }
            `]}resolvedData(){return ConfigHelper.isDemo()?1:this.shadowRoot?.querySelector("qrcg-input")?.value??1}renderTitle(){return t$3`Copy QR Code`}renderDemoMessage(){if(ConfigHelper.isDemo())return x`
            <div class="message demo-message">
                ${t$3`Only one copy is allowed in the demo server.`}
            </div>
        `}renderInstructions(){return x`
            <div class="message">
                ${t$3`How many times the QR code should be copied`}
            </div>

            ${this.renderDemoMessage()}
        `}renderBody(){return x`
            <qrcg-input
                type="number"
                min="1"
                step="1"
                placeholder="1"
                value="1"
                autofocus
            >
                ${t$3`Number of copies`}
            </qrcg-input>
        `}}defineCustomElement(QRCodeCopyModal.tag,QRCodeCopyModal);const style$1h=":host{--image-width: 7rem;padding:1rem;border-radius:1rem;border:1px solid var(--gray-2);position:relative;overflow:hidden;user-select:none;-webkit-user-select:none;transition:opacity .3s cubic-bezier(.215,.61,.355,1)}@media(min-width:900px){:host{display:flex;border-color:var(--gray-1);padding:1.5rem 1rem 1.3rem 2rem}}@media(min-width:900px){:host([dynamic]){padding-top:2rem;padding-inline-start:2.5rem}}:host(:hover){border-color:#000}.qrcode-details{flex:1;display:flex;justify-content:space-between}@media(max-width:900px){.qrcode-details{flex-direction:column-reverse}}.selection-container{display:flex;flex-direction:column;align-items:center;justify-content:center;padding-inline-end:2rem;animation:reveal-selection-container .3s ease both;overflow:hidden}@media(max-width:900px){.selection-container{position:absolute;inset-inline-start:2rem;top:2rem;--selection-container-max-initial-height: 0}}@keyframes reveal-selection-container{0%{opacity:0;max-width:0;max-height:var(--selection-container-max-initial-height, 999px)}to{opacity:1;max-width:150px;max-height:999px}}.open-preview{color:var(--gray-2);padding:0 .5rem;-webkit-tap-highlight-color:transparent;display:flex}.open-preview:hover{color:#000}:host([disabled]){opacity:.5;pointer-events:none}qrcg-qrcode-image{align-self:center;padding:.5rem;background-color:#fff;border-radius:.25rem;width:var(--image-width);min-width:var(--image-width);height:var(--image-width);min-height:var(--image-width);cursor:pointer;position:relative}@media(min-width:900px){qrcg-qrcode-image{margin:0;left:0}}.name{margin:0;display:flex;align-items:center}.name span{max-width:180px;display:block;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media(min-width:900px){.name span{max-width:400px}}.name-actions{display:flex;flex-direction:column;justify-content:space-between;margin-top:1rem}@media(min-width:900px){.name-actions{margin-top:0}}.numbers{color:var(--gray-2);font-size:.8rem;line-height:1.2rem;max-width:10rem}@media(min-width:500px){.numbers{max-width:unset}}.custom-action .sep{margin-top:0}:host(:not([dynamic])) .stats{opacity:.5;pointer-events:none;text-decoration:none}.type-container{margin-top:1rem;display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}.user{font-size:.8rem;color:var(--gray-2);display:none}@media(min-width:900px){.user{display:block}}.black-value{color:#000}.type{font-size:.7rem;background-color:var(--gray-2);color:#fff;padding:.25rem .5rem;border-radius:.25rem;text-transform:uppercase;display:inline-flex}.dynamic-badge{position:absolute;font-size:.7rem;top:0;left:0;background-color:var(--dynamic-ribbon-color, var(--primary-0));color:#fff;padding:.25rem 1.5rem;transform:translate(-24%,77%) rotate(-45deg);text-transform:uppercase}:host(.dir-rtl) .dynamic-badge{left:initial;transform:translate(142px,16px) rotate(45deg);right:0;padding:.25rem 8.5rem}.name-and-scans{display:flex;align-items:center}.name-and-scans .numbers{margin-top:0}.name-and-scans qrcg-switch{margin-inline-start:auto}@media(min-width:900px){.name-and-scans qrcg-switch{margin-inline-start:.5rem}}.actions-trigger{align-self:center;margin-top:2rem}.actions-trigger.desktop{display:none}.actions-trigger.mobile{margin:0;margin-inline-start:auto}.actions-trigger.mobile::part(button){padding:.5rem}@media(min-width:900px){.actions-trigger.desktop{display:block}.actions-trigger.mobile{display:none}.actions-trigger{margin-inline-end:1rem;margin-top:0;margin-inline-start:auto}}.actions-trigger::part(button){border:1px solid var(--gray-2)}.actions-trigger qrcg-icon{margin:0;color:var(--dark);width:1.2rem;height:1.2rem}.action{display:flex;align-items:center;gap:.25rem;color:var(--dark)}.action:hover{color:var(--info-0)}.action qrcg-icon{color:var(--gray-2)}.main-actions{display:flex;align-items:center;gap:1rem;margin-top:1rem}";class QrcgQRCodeListPageStore{data={};static#e=null;static EVENT_AFTER_UPDATE="qrcg-qrcode-list-page-store::after-update";static MODE_MINIMAL="minimal";static MODE_DETAILED="detailed";get EVENT_AFTER_UPDATE(){return QrcgQRCodeListPageStore.EVENT_AFTER_UPDATE}static singleton(){return this.#e||(this.#e=new QrcgQRCodeListPageStore),this.#e}get selectedQRCodeIds(){return this.qrcodes.filter(w=>w.is_selected).map(w=>w.id)}get mode(){const w=localStorage.qrcodeListPageStoreMode;return isEmpty(w)?this.getDefaultMode():w}set mode(w){console.log("setting mode"),localStorage.qrcodeListPageStoreMode=w}constructor(){return this.isSelectionEnabled=!1,this.pageSize=10,this.showQRCodePreview=!0,this.qrcodes=[],new Proxy(this,this)}getDefaultMode(){return Config.get("dashboard.qrcode_list_mode")??QrcgQRCodeListPageStore.MODE_DETAILED}isMinimal(){return this.mode==QrcgQRCodeListPageStore.MODE_MINIMAL}isDetailed(){return this.mode==QrcgQRCodeListPageStore.MODE_DETAILED}get(w,q){return this[q]}set(w,q,D){return this[q]=D,this.notifyAfterUpdate(),!0}clearSelectedQRCodeIds(){this.qrcodes.forEach(w=>w.is_selected=!1),this.notifyAfterUpdate()}selectAll(){this.qrcodes.forEach(w=>w.is_selected=!0),this.notifyAfterUpdate()}notifyAfterUpdate(){document.dispatchEvent(new CustomEvent(this.EVENT_AFTER_UPDATE))}addAfterUpdateEventListener(w){document.addEventListener(this.EVENT_AFTER_UPDATE,w)}removeAfterUpdateEventListener(w){document.removeEventListener(this.EVENT_AFTER_UPDATE,w)}}const actionStyles$1=".actions{display:flex;flex-direction:column;padding-top:.5rem}.action{display:flex;align-items:center;gap:.5rem;cursor:pointer;padding:.55rem 1rem;color:var(--dark);text-decoration:none;font-size:.9rem}.action:hover{text-decoration:none;background-color:var(--gray-0)}.action:hover qrcg-icon,.action:hover::part(icon){color:var(--dark)}.action qrcg-icon,.action::part(icon){color:var(--gray-2)}";class QRCGQRCodeRow extends BaseComponent{#e=new DirectionAwareController(this);listStore=QrcgQRCodeListPageStore.singleton();static styleSheets=[...super.styleSheets,style$1h];static get properties(){return{qrcode:{type:Object},isDynamic:{type:Boolean,reflect:!0,attribute:"dynamic"}}}constructor(){super(),this.qrcode=new QRCodeModel}connectedCallback(){super.connectedCallback(),this.isDynamic=this.qrcode.isDynamic(),this.downloadQrCode=new QRCGDownloadQRCode,this.listStore.addAfterUpdateEventListener(this.onListStoreChanged)}disconnectedCallback(){super.disconnectedCallback(),this.listStore.removeAfterUpdateEventListener(this.onListStoreChanged)}willUpdate(w){w.has("qrcode")&&(this.isDynamic=this.qrcode.isDynamic())}onListStoreChanged=()=>{this.requestUpdate()};toggleArchive=()=>{this.dispatchEvent(new CustomEvent("qrcg-qrcode-row:will-toggle-archive",{detail:{qrcode:this.qrcode},cancelable:!0,composed:!0,bubbles:!0}))&&this.dispatchEvent(new CustomEvent("on-toggle-archive",{detail:{qrcode:this.qrcode}}))};onCopy=async()=>{if(!featureAllowed("qrcode.copy"))return await confirm$1({title:t$3`Upgrade Required`,message:t$3`This feature is not available on your current plan.`,affirmativeText:t$3`OK`,negativeText:null});const w=await QRCodeCopyModal.open({}),q=x`${t$3`Are you sure you want to copy`}
            [<strong>${this.qrcode.name}</strong>]
            <strong style="color: var(--danger)">${w}</strong>
            ${t$3`times`}?`;w>1&&await confirm$1({message:q}),this.fire("qrcg-qrcode-row:before-copy");const D=showToast(t$3`Copying QR code, please wait ...`,2e3);try{await post(`qrcodes/${this.qrcode.id}/copy`,{count:w}),await D,await new Promise(Q=>setTimeout(Q,100)),showToast(t$3`QR code copied successfully ...`)}catch(Q){await D;try{const O=await Q.json();O.message&&showToast(O.message)}catch{showToast(t$3`Error copying QR code`)}}this.fire("qrcg-qrcode-row:after-copy")};onDelete=async()=>{try{await confirm$1({message:t$3`Are you sure you want to delete: `+this.qrcode.name+"?"}),await destroy(`qrcodes/${this.qrcode.id}`),showToast(t$3`QR code deleted successfully.`),this.fire("qrcg-qrcode-row:after-delete")}catch{}};onDownloadPngClick=()=>{this.downloadQrCode.downloadPng(this.qrcode)};onDownloadSvgClick=()=>{QRCGDownloadQRCode.downloadSVG(this.qrcode)};onPinCodeChange(){const w=this.shadowRoot.querySelector("qrcg-qrcode-image"),q=document.createElement("a");q.href=w.url;const D=new URLSearchParams(q.search);D.set("v1",new Date().getTime()),q.search=D.toString(),w.url=q.href}onActionTriggerClick(w){const q=w.composedPath()[0],D=parentMatches(q,"qrcg-button");QrcgDropdown.withTarget(D).withContent(()=>this.renderExtraActions()).withBindPoint(QrcgDropdown.BIND_POINT_BOTTOM_RIGHT).withContentStyles(actionStyles$1).open()}onResetClick=async()=>{await confirm$1({message:t$3`Are you sure you want to reset QR Code? This will reset all stats of this QR code.`}),await post(`qrcodes/${this.qrcode.id}/reset`),showToast(t$3`QR Code has been reset successfully.`),QRCodeList.requestRefresh()};async onStatusChange(w){const q=w.composedPath()[0];q.disabled=!0,clearTimeout(this.__changeStatusTimeout),this.__changeStatusTimeout=setTimeout(async()=>{const D=w.detail.value;await post(`qrcodes/${this.qrcode.id}/change-status`,{status:D}),showToast(t$3`Updated successfully.`),q.disabled=!1},200)}openPreviewModal(){try{openPreviewModal({qrcode:this.qrcode})}catch{}}fire(w,q={}){this.dispatchEvent(new CustomEvent(w,{composed:!0,bubbles:!0,detail:{...q,qrcode:this.qrcode}}))}getDates(){const w=this.qrcode.updatedAt();return x`
            <!--  -->
            ${t$3`Last edited`}

            <span class="black-value">${w}</span>
        `}async setQRCodeSelected(w){this.qrcode.is_selected=w,this.listStore.notifyAfterUpdate()}isQRCodeSelected(){return this.qrcode.is_selected}async onSelectCheckboxInput(w){const q=w.detail.value;this.setQRCodeSelected(q)}renderUser(){return x`
            <div class="user">
                ${t$3`User`}
                <span class="black-value">${this.qrcode.user?.name}</span>
            </div>
        `}renderDeleteAction(){if(!(!this.qrcode.archived||Config.get("users_can_delete_qrcodes")==="disabled"&&!isSuperAdmin()))return x`
            <a class="action" @click=${this.onDelete}>
                <qrcg-icon mdi-icon=${mdiDelete}></qrcg-icon>

                ${t$3`Delete`}
            </a>
        `}renderArchiveAction(){if(!permitted("qrcode.archive")||!PluginManager.applyFilters(FILTER_QRCODE_ROW_ARCHIVE,!0))return;const q=this.qrcode.archived?mdiArchiveArrowUpOutline:mdiArchiveArrowDownOutline;return x`
            <a class="action" @click=${this.toggleArchive}>
                <qrcg-icon mdi-icon=${q}></qrcg-icon>

                ${this.qrcode.archived?t$3("Restore"):t$3("Archive")}
            </a>
        `}renderPreviewLink(){if(!this.qrcode.isDynamic())return;const w=this.qrcode.getRedirectDestination(!1);if(w)return x`
            <a href="${w}" target="_blank" class="open-preview">
                <qrcg-icon mdi-icon=${mdiOpenInNew}></qrcg-icon>
            </a>
        `}renderScansNumber(){if(!this.qrcode.isDynamic())return;if(!this.qrcode.scans_count&&!this.qrcode.allowed_scans)return t$3`No scans yet`;let w=null;this.qrcode.allowed_scans&&(w=" / "+this.qrcode.allowed_scans);const q=this.qrcode.scans_count>1?t$3`Scans`:t$3`Scan`;return x`
            <span class="black-value"
                >${this.qrcode.scans_count??0}${w}</span
            >

            ${q}
        `}renderCopyAction(){if(PluginManager.applyFilters(FILTER_QRCODE_ROW_COPY,!0))return x`
            <a class="action" @click=${this.onCopy}>
                <qrcg-icon mdi-icon=${mdiContentCopy}></qrcg-icon>

                ${t$3`Copy`}
            </a>
        `}renderDynamicBadge(){if(this.qrcode.isDynamic())return x`<div class="dynamic-badge">${t$3`Dynamic`}</div>`}renderQRCodeSelectionCheckbox(){if(this.listStore.isSelectionEnabled)return x`
            <div class="selection-container">
                <qrcg-checkbox
                    @on-input=${this.onSelectCheckboxInput}
                    .value=${this.isQRCodeSelected()}
                ></qrcg-checkbox>
            </div>
        `}shouldShowPreviewImage(){return!(this.listStore.showQRCodePreview==="no"||isMobile()&&this.listStore.pageSize>5||this.listStore.pageSize>25)}renderPreviewImage(){if(this.shouldShowPreviewImage())return x`
            <qrcg-qrcode-image
                @click=${this.openPreviewModal}
                url=${this.qrcode.getFileUrl("svg")}
                convert-to-png
            ></qrcg-qrcode-image>
        `}renderExtraActions(){return x`
            <div class="actions">
                ${this.renderArchiveAction()}
                <!--  -->
                ${this.renderCopyAction()}
                <!--  -->
                ${this.renderDeleteAction()}

                <a class="action" @click=${this.onDownloadSvgClick}>
                    <qrcg-icon mdi-icon=${mdiDownload}></qrcg-icon>
                    ${t$3`SVG`}
                </a>

                <a class="action" @click=${this.onDownloadPngClick}>
                    <qrcg-icon mdi-icon=${mdiDownload}></qrcg-icon>
                    ${t$3`PNG`}
                </a>

                <qrcg-pincode-link
                    .qrcode=${this.qrcode}
                    @on-change=${this.onPinCodeChange}
                    class="action"
                >
                </qrcg-pincode-link>

                <qrcg-select-folder-link .qrcode=${this.qrcode} class="action">
                </qrcg-select-folder-link>

                <qrcg-change-user-link class="action" .qrcode=${this.qrcode}>
                </qrcg-change-user-link>

                <a class="action" @click=${this.onResetClick}>
                    <qrcg-icon mdi-icon=${mdiRecycle}></qrcg-icon>
                    ${t$3`Reset`}
                </a>

                ${PluginManager.doActions(ACTION_QRCODE_ROW_ACTIONS,this.qrcode)}
            </div>
        `}renderMainActions(){return x`
            <a class="action" href=${this.qrcode.getEditLink()}>
                <qrcg-icon mdi-icon=${mdiPen}></qrcg-icon>
                ${t$3`Edit`}
            </a>

            <a class="action stats" href=${this.qrcode.getStatsLink()}>
                <qrcg-icon mdi-icon=${mdiChartBar}></qrcg-icon>
                ${t$3`Stats`}
            </a>

            <qrcg-qrcode-share-link
                class="action custom-action"
                .qrcode=${this.qrcode}
            >
            </qrcg-qrcode-share-link>
        `}renderActionTrigger(w=""){return x`
            <qrcg-button
                class="elegant actions-trigger ${w}"
                @click=${this.onActionTriggerClick}
            >
                <qrcg-icon mdi-icon=${mdiDotsHorizontal}> </qrcg-icon>
            </qrcg-button>
        `}renderEnabledSwitch(){if(this.qrcode.isDynamic())return x`
            <qrcg-switch
                name="status"
                checked-value="enabled"
                unchecked-value="disabled"
                .value=${this.qrcode?.status}
                @on-input=${this.onStatusChange}
            ></qrcg-switch>
        `}render(){return x`
            ${this.renderDynamicBadge()}
            <!--  -->
            ${this.renderQRCodeSelectionCheckbox()}

            <div class="qrcode-details">
                <div class="name-actions">
                    <div class="name-and-scans">
                        <h3 class="name">
                            <span>${this.qrcode.getName()}</span>
                            ${this.renderPreviewLink()}
                        </h3>

                        <div class="numbers">${this.renderScansNumber()}</div>

                        ${this.renderEnabledSwitch()}
                    </div>

                    <div class="type-container">
                        <div class="type">${t$3(this.qrcode.type)}</div>

                        ${this.renderUser()}

                        <div class="numbers dates">${this.getDates()}</div>
                    </div>

                    <div class="main-actions">
                        ${this.renderMainActions()}
                        ${this.renderActionTrigger("mobile")}
                    </div>
                </div>

                ${this.renderActionTrigger("desktop")}

                <!--  -->

                ${this.renderPreviewImage()}
            </div>
        `}}window.defineCustomElement("qrcg-qrcode-row",QRCGQRCodeRow);class QRCGQRCodeListController extends QRCGApiConsumer{constructor(w){super(w,"qrcodes")}async archive(w,q){return this.resourceCall(()=>post(`${this.baseRoute}/archive/${w}`,{archived:q}))}}class QRCGPagination extends i$1{static get styles(){return i$3`
            :host {
                display: flex;
                flex-direction: column;
                align-items: center;
                user-select: none;
                -webkit-user-select: none;
                -webkit-tap-highlight-color: transparent;
                /** prevent zoom on multiple tap */
                touch-action: manipulation;
                transition: opacity 0.5s ease-in-out;
            }

            :host([loading]) {
                opacity: 0.4;
                pointer-events: none;
            }

            .links {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                text-align: center;
            }

            a {
                margin: 0.1rem;
                padding: 0.5rem;
                color: var(--gray-2);
                text-decoration: none;
            }

            .active {
                color: var(--primary-0);
                text-decoration: underline;
            }

            .disabled {
                pointer-events: none;
                color: var(--gray-1);
            }

            .status {
                margin-bottom: 0.5rem;
                color: var(--gray-2);
                font-size: 0.8rem;
            }
        `}static get properties(){return{pagination:{type:Object},loading:{type:Boolean,reflect:!0}}}makeUrl(w){return w}render(){if(!(isEmpty(this.pagination)||isEmpty(this.pagination?.total)))return u$3`
            <div class="status">
                ${t$3`Showing from`} ${this.pagination.from} ${t$3`to`}
                ${this.pagination.to} ${t$3`out of`} ${this.pagination.total}
            </div>
            <div class="links">
                ${this.pagination.links.map(w=>u$3`<a
                            href="${this.makeUrl(w.url)}"
                            class="${e$1({active:w.active,disabled:!w.url})}"
                            >${s$3(w.label)}</a
                        >`)}
            </div>
        `}}window.defineCustomElement("qrcg-pagination",QRCGPagination);const style$1g="";class QrcgQrcodeMinimalCard extends QrcgQRCodeTemplateCard{static tag="qrcg-qrcode-minimal-card";static styleSheets=[...super.styleSheets,style$1g];static get properties(){return{...super.properties,qrcode:{type:Object}}}constructor(){super(),this.qrcode={}}renderSettingsButton(){}renderDescription(){}resolveScreenshot(){return this.qrcodeTemplate.qrcode_screenshot_url}willUpdate(w){w.has("qrcode")&&(this.qrcodeTemplate=this.qrcode)}onUseTemplateClick(){push("/dashboard/qrcodes/edit/"+this.qrcode.id)}}QrcgQrcodeMinimalCard.register();const style$1f=":host{display:block}.toolbar{display:flex;align-items:center;margin-bottom:1rem}qrcg-pagination{margin:1rem 0}qrcg-qrcode-row{margin-bottom:1rem}.loading-container{display:flex;align-items:center;justify-content:center;padding:3rem}qrcg-loader{color:var(--dark)}.empty-message{text-align:center;color:var(--gray-2);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem;border-radius:.5rem;padding:2rem}.empty-message qrcg-icon{width:4rem;height:4rem;color:var(--gray-1)}.empty-message .text{font-size:1.2rem;line-height:1.7}.search-container{display:flex;align-items:center;margin-bottom:1rem}@media(min-width:900px){.search-container>*:last-child{margin-left:auto}:host(.dir-rtl) .search-container>*:last-child{margin-left:0;margin-right:auto}}@media(max-width:900px){.search-container{flex-direction:column;align-items:unset}.search-container qrcg-relation-select[name=user_id]{margin-bottom:1rem}}.search-label{margin-right:1rem;margin-left:auto;font-weight:700}qrcg-searchable-user-relation-select{min-width:15rem}.minimal-qrcode-list{display:grid;gap:2rem;grid-template-columns:repeat(2,1fr)}@media(min-width:600px){.minimal-qrcode-list{grid-template-columns:repeat(3,1fr)}}@media(min-width:1000px){.minimal-qrcode-list{grid-template-columns:repeat(4,1fr)}}@media(min-width:1200px){.minimal-qrcode-list{grid-template-columns:repeat(5,1fr)}}@media(min-width:1400px){.minimal-qrcode-list{grid-template-columns:repeat(6,1fr)}}.connection-error{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2rem;margin:2rem}.connection-error .text{color:var(--gray-2);font-size:1.5rem}",style$1e="qrcg-balloon-selector{margin-bottom:1rem}";class QrcgQrcodeListPageSettingsModal extends QrcgModal{static tag="qrcg-qrcode-list-page-settings-modal";static styleSheets=[...super.styleSheets,style$1e];store=QrcgQRCodeListPageStore.singleton();static get EVENT_ON_PAGE_SETTINGS_CHANGED(){return this.tag+"::page-settings-changed"}firstUpdated(){super.firstUpdated(),this.syncInputs()}fireChangeEvent(){document.dispatchEvent(new CustomEvent(QrcgQrcodeListPageSettingsModal.EVENT_ON_PAGE_SETTINGS_CHANGED))}syncInputs(){const w=(q,D)=>{const Q=this.$(`[name="${q}"]`);Q&&(Q.value=D)};w("pageSize",this.store.pageSize),w("showQRCodePreview",this.store.showQRCodePreview)}affiramtivePromise(){const w=this.$("[name=pageSize").value,q=this.$("[name=showQRCodePreview]").value;isNaN(w)||(this.store.pageSize=w),q&&(this.store.showQRCodePreview=q),this.fireChangeEvent()}getPageSizeOptions(){return[5,10,25,50,100,300,500,1e3].map(w=>({name:w,value:w}))}renderTitle(){return t$3`Page Settings`}renderBody(){return x`
            <qrcg-balloon-selector
                name="pageSize"
                .options=${this.getPageSizeOptions()}
            >
                ${t$3`Page Size`}
                <div slot="instructions">
                    ${t$3`Specify how many QR codes are visible in each page.`}
                </div>
            </qrcg-balloon-selector>

            <qrcg-balloon-selector
                name="showQRCodePreview"
                .options=${BalloonSelector.OPTIONS_YES_NO}
            >
                ${t$3`Show Preview?`}
                <div slot="instructions">
                    ${t$3`QR Code preview can only be shown when the number of visible QR codes is no more than 25 on desktop and 5 on mobile.`}
                </div>
            </qrcg-balloon-selector>
        `}}QrcgQrcodeListPageSettingsModal.register();class QRCodeList extends BaseComponent{static tag="qrcg-qrcode-list";#e=new DirectionAwareController(this);list=new QRCGQRCodeListController(this);titleController=new QRCGTitleController(this);store=QrcgQRCodeListPageStore.singleton();static EVENT_REQUEST_SORT_CHANGE="qrcg-qrcode-list:request-sort-change";static EVENT_REQUEST_FILTERS_CHANGE="qrcg-qrcode-list:request-filters-change";static EVENT_REQUEST_REFRESH="qrcg-qrcode-list:request-refresh";static styleSheets=[...super.styleSheets,style$1f];static get properties(){return{records:{type:Array},paginated:{type:Object},page:{},archived:{},loading:{type:Boolean},disabled:{type:Boolean},folder_id:{},sort:{},filters:{},hasConnectionError:{type:Boolean}}}static requestRefresh(){document.dispatchEvent(new CustomEvent(this.EVENT_REQUEST_REFRESH))}constructor(){super(),this.onLocationChanged=this.onLocationChanged.bind(this),this.onBeforeRequest=this.onBeforeRequest.bind(this),this.onAfterRequest=this.onAfterRequest.bind(this),this.filters={},this.hasConnectionError=!1}connectedCallback(){super.connectedCallback(),this.addEventListener("api:success",this.onApiSuccess),this.addEventListener("api:error",this.onApiError),this.addEventListener("api:before-request",this.onBeforeRequest),this.addEventListener("api:after-request",this.onAfterRequest),document.addEventListener(QRCodeList.EVENT_REQUEST_REFRESH,this.onRefreshRequested),this.addEventListener("qrcg-qrcode-row:before-copy",this.onBeforeCopy),this.addEventListener("qrcg-qrcode-row:after-copy",this.onAfterCopy),this.addEventListener("qrcg-qrcode-row:after-delete",this.onAfterDelete),this.titleController.pageTitle=t$3`QR Code List`,window.addEventListener("qrcg-router:location-changed",this.onLocationChanged),this.onLocationChanged(),document.addEventListener(QRCodeList.EVENT_REQUEST_SORT_CHANGE,this.onSortChangeRequested),document.addEventListener(QRCodeList.EVENT_REQUEST_FILTERS_CHANGE,this.onFiltersChangeRequested),document.addEventListener(QrcgQrcodeListPageSettingsModal.EVENT_ON_PAGE_SETTINGS_CHANGED,this.onPageSettingsChanged),document.addEventListener(QrcgQRCodeListPageStore.EVENT_AFTER_UPDATE,this.onAfterStoreUpdate),isMobile()&&(this.store.pageSize=5)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("api:success",this.onApiSuccess),this.removeEventListener("api:before-request",this.onBeforeRequest),this.removeEventListener("api:after-request",this.onAfterRequest),window.removeEventListener("qrcg-router:location-changed",this.onLocationChanged),document.removeEventListener(QRCodeList.EVENT_REQUEST_REFRESH,this.onRefreshRequested),this.removeEventListener("qrcg-qrcode-row:before-copy",this.onBeforeCopy),this.removeEventListener("qrcg-qrcode-row:after-copy",this.onAfterCopy),this.removeEventListener("qrcg-qrcode-row:after-delete",this.onAfterDelete),document.removeEventListener(QRCodeList.EVENT_REQUEST_SORT_CHANGE,this.onSortChangeRequested),document.removeEventListener(QRCodeList.EVENT_REQUEST_FILTERS_CHANGE,this.onFiltersChangeRequested),document.removeEventListener(QrcgQrcodeListPageSettingsModal.EVENT_ON_PAGE_SETTINGS_CHANGED,this.onPageSettingsChanged),document.removeEventListener(QrcgQRCodeListPageStore.EVENT_AFTER_UPDATE,this.onAfterStoreUpdate)}onAfterStoreUpdate=()=>{this.requestUpdate()};onLocationChanged(){const w=queryParam("page");this.archived=!isEmpty(queryParam("archived")),this.folder_id=queryParam("folder_id"),queryParam("keyword")?this.filters={...this.filters,keyword:queryParam("keyword")}:this.filters={...this.filters,keyword:null},isEmpty(w)||(this.page=w)}onSortChangeRequested=w=>{this.sort=`${w.detail.key},${w.detail.dir}`};onFiltersChangeRequested=w=>{this.filters=w.detail.filters};onPageSettingsChanged=w=>{this.fetchData()};willUpdate(w){const D=["page","filters","archived","folder_id","sort"].reduce((Q,O)=>Q||w.has(O),!1);w.has("page")||(this.page=1),D&&this.fetchData()}onApiSuccess=w=>{Object.keys(w.detail.response).indexOf("data")<0||w.detail.response.data instanceof Array&&(this.paginated=w.detail.response,this.store.qrcodes=w.detail.response.data.map(q=>new QRCodeModel(q)),this.records=this.store.qrcodes)};onApiError=()=>{this.hasConnectionError=!0};onBeforeRequest(){this.loading=!0}onAfterRequest(){this.loading=!1}onBeforeCopy=()=>{this.disabled=!0};onAfterCopy=()=>{if(this.disabled=!1,this.page==1)this.fetchData();else{const w=this.archived?"&archived=true":"";push(`${window.location.pathname}?page=1${w}`)}};onAfterDelete=()=>{this.fetchData()};onRefreshRequested=()=>{this.fetchData()};applyFiltersToSearchParams(w){isEmpty(this.filters)||Object.keys(this.filters).forEach(q=>{isNotEmpty(this.filters[q])&&(w[q]=this.filters[q])})}fetchData(){const w={};this.archived&&(w.archived=!0),this.folder_id&&(w.folder_id=this.folder_id);let q=`${window.location.origin}${window.location.pathname}`;if(!isEmpty(w)){const Q=Object.keys(w).map(O=>`${O}=${w[O]}`);q+="?"+Q}const D={path:q,search_archived:this.archived};this.applyFiltersToSearchParams(D),queryParam("page")&&(D.page=queryParam("page")),this.folder_id&&(D.folder_id=this.folder_id),this.sort&&(D.sort=this.sort),D.page_size=this.store.pageSize,this.list.search(D)}async firstUpdated(){await this.setUserIdDefaultValue(),this.fetchData()}async onToggleArchive(w){const q=w.detail.qrcode.archived?"restore":"archive";try{await confirm$1({message:t$3`Are you sure you want to ${q} this QR Code?`,affirmativeText:t$3(capitalize(q))}),await this.list.archive(w.detail.qrcode.id,!w.detail.qrcode.archived),q=="archive"&&FolderModel.fireOnChange(),await this.fetchData()}catch{}}shouldShowEmptyMessage(){return this.records instanceof Array&&this.records.length===0&&!this.loading}shouldShowPagination(){return!isEmpty(this.records)&&!this.loading}async setUserIdDefaultValue(){if(Config.get("dashboard.select_qrcodes_of_currently_logged_in_user_by_default")!="enabled"||!loadUser()?.id)return;this.user_id=loadUser()?.id,await sleep(100);const q=this.shadowRoot.querySelector('qrcg-searchable-user-relation-select[name="user_id"]');q&&(q.value=this.user_id)}renderLoader(){if(this.loading)return x`
            <div class="loading-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderMinimalQRCode(w){return x`
            <qrcg-qrcode-minimal-card
                .qrcode=${w}
            ></qrcg-qrcode-minimal-card>
        `}renderQRCode(w){return this.store.isMinimal()?this.renderMinimalQRCode(w):x`
            <qrcg-qrcode-row
                .qrcode=${w}
                @on-toggle-archive=${this.onToggleArchive}
                ?disabled=${this.disabled}
            ></qrcg-qrcode-row>
        `}renderQRCodeList(){return this.records.map(w=>this.renderQRCode(w))}renderQRCodes(){if(!this.loading&&!isEmpty(this.records))return this.store.isMinimal()?x`
                <div class="minimal-qrcode-list">
                    ${this.renderQRCodeList()}
                </div>
            `:this.renderQRCodeList()}renderQRCodesContainer(){if(!this.loading)return x`
            <div class="qrcodes-container">
                <!--  -->
                ${DemoLicenseExplainer.renderSelf()}
                <!--  -->
                ${this.renderQRCodes()}
                <!--  -->
            </div>
        `}guessEmptyMessageText(){return isNotEmpty(this.filters)?x`
                <div>
                    ${t$3`We couldn't find any QR Codes matching your search`}
                </div>

                <div>
                    ${t$3`You may reset the specified filters by clicking on the Filter button above.`}
                </div>
            `:this.archived?t$3`You don't have any archived QR Codes.`:isNotEmpty(this.filters)?x`
                <div>
                    ${t$3`We couldn't find any QR Codes matching your search`}
                </div>

                <div>
                    ${t$3`You may reset the specified filters by clicking on the Filter button above.`}
                </div>
            `:x`
            <div>${t$3`No QR Codes yet `}</div>
            <div>
                ${t$3`Click on the Create button above to create your first QR Code.`}
            </div>
        `}renderEmptyMessage(){if(this.shouldShowEmptyMessage())return x`
            <div class="empty-message">
                <qrcg-icon mdi-icon=${mdiEmoticonHappyOutline}></qrcg-icon>

                <div class="text">${this.guessEmptyMessageText()}</div>
            </div>
        `}renderPagination(){if(this.shouldShowPagination())return x`
            <qrcg-pagination .pagination=${this.paginated}></qrcg-pagination>
        `}renderConnectionErrorMessage(){if(this.hasConnectionError)return x`
            <div class="connection-error">
                <div class="text">${t$3`Cannot connect to the server`}</div>

                <qrcg-button href="/troubleshoot" target="_blank">
                    ${t$3`Troubleshoot`}
                </qrcg-button>
            </div>
        `}renderPageEndAction(){return PluginManager.doActions(ACTION_QRCODE_LIST_PAGE_END)}render(){return[this.renderConnectionErrorMessage(),this.renderLoader(),this.renderQRCodesContainer(),this.renderEmptyMessage(),this.renderPagination(),this.renderPageEndAction()]}}QRCodeList.register();const style$1d=".search-box{display:flex;justify-content:flex-end}.title-container{display:flex;align-items:center;gap:1rem}@media(max-width:900px){.title-text{display:none}}.actions{align-items:center;flex-wrap:wrap;display:flex}@media(max-width:900px){.actions{gap:.25rem}}.actions qrcg-button:not([round]):not(.create-button){--button-color: var(--primary-0);--button-background-color: transparent;--button-background-color-hover: var(--gray-0);--button-outline-focus: var(--gray-1)}.actions qrcg-button:not([round]):not(.create-button) qrcg-icon{color:var(--gray-2);margin-inline-end:.5rem;pointer-events:none}.actions qrcg-button:not([round]):not(.create-button)::part(button){box-shadow:none;min-width:initial}.actions .create-button::part(button){border-radius:2rem;padding:.85rem 1rem}.actions .create-button qrcg-icon{margin-inline-end:.5rem}.actions .bulk-create{margin-inline-end:1rem}@media(max-width:900px){.actions{justify-content:space-between}}@media(max-width:900px){.page-settings{display:none}}@media(max-width:900px){qrcg-button.action:not([round]):not(.create-button)::part(button){border:1px solid var(--gray-1);padding:.6rem}qrcg-button.action:not([round]):not(.create-button) span{display:none}qrcg-button.action:not([round]):not(.create-button) qrcg-icon{margin-inline-end:0;color:var(--dark)}}.sort-name,.number-of-filters{color:var(--dark);margin-inline-start:.5rem;font-size:.8rem}[slot=content]{position:relative}:host([mode=detailed]) qrcg-qrcode-list{margin-top:4rem}.minimal-title{margin:0;color:var(--primary-0);display:flex;align-items:center;gap:.5rem}.minimal-title>span{color:var(--gray-2);font-weight:400}.create-button.minimal{--button-color: white;--button-color-hover: var(--button-color);--button-background-color: #919191;--button-background-color-hover: #919191;position:relative}.create-button.minimal::part(button){border-radius:1rem;padding-inline-start:3.35rem}.create-button.minimal qrcg-icon{background-color:var(--primary-0);color:#fff;pointer-events:none;padding:.5rem;width:3rem;height:100%;border-radius:1rem;position:absolute;inset-inline-start:0;top:0;bottom:0}.switch-mode{color:#000;width:2rem;height:2rem;cursor:pointer}",style$1c=".section-title{font-size:1rem}.body{line-height:1.1}[name]{margin-bottom:1rem}.clear-filters{margin-right:auto}";class QrcgQrcodeFiltersModal extends QrcgModal{static tag="qrcg-qrcode-filters-modal";static styleSheets=[...super.styleSheets,style$1c];static get properties(){return{...super.properties,shouldFilterByType:{type:Boolean},filters:{}}}constructor(){super(),this.shouldFilterByType=!1}connectedCallback(){super.connectedCallback(),this.addEventListener("keypress",this.onKeyPress)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keypress",this.onKeyPress)}firstUpdated(){this.syncInputs()}onKeyPress(w){w.key=="Enter"&&(parentMatches(w.composedPath()[0],"qrcg-searchable-user-relation-select")||this.onAffirmativeClick())}syncInputs(){Object.keys(this.filters).forEach(w=>{const q=this.$(`[name="${w}"]`);let D=this.filters[w];!q||!D||(w==="scans_count"&&(D=JSON.parse(D)),q.value=D)})}resolvedData(){return this.collectInputValues()}collectInputValues(){return this.$$("[name]").reduce((w,q)=>{let D=q.value;return q.name==="scans_count"&&q.value&&(D=JSON.stringify(q.value)),D!=null&&(w[q.name]=D),w},{})}getAvailableTypes(){return new QRCodeTypeManager$1().getAvailableQrCodeTypes().map(q=>({name:t$3(q.name),value:q.id}))}shouldFilterByTypeOptions(){return[{name:t$3`Yes`,value:"yes"},{name:t$3`No`,value:"no"}]}onShouldFilterByTypeChanged(w){this.shouldFilterByType=w.detail.value==="yes"}renderNumberOfAppliedFilters(){const w=Object.keys(this.filters??{}).filter(D=>D!="should_filter_by_type").length;if(!w)return;const q=w>1?t$3`Filters`:t$3`Filter`;return`(${w} ${q})`}renderTitle(){return x` ${t$3`Filters`} ${this.renderNumberOfAppliedFilters()} `}renderTypeSelector(){if(this.shouldFilterByType)return x`
            <qrcg-balloon-selector
                name="type"
                multiple
                .options=${this.getAvailableTypes()}
            >
                ${t$3`QR Code Type`}

                <div slot="instructions">${t$3`Select one or more type.`}</div>
            </qrcg-balloon-selector>
        `}renderUserSearch(){if(isSuperAdmin())return x`
            <qrcg-searchable-user-relation-select name="user_id">
                <div slot="label">${t$3`User`}</div>
            </qrcg-searchable-user-relation-select>
        `}renderBody(){return x`
            <qrcg-input name="keyword" placeholder="${t$3`Enter keyword.`}">
                ${t$3`Keyword`}
                <div slot="instructions">${t$3`Search by name or slug.`}</div>
            </qrcg-input>

            <qrcg-number-range-input name="scans_count">
                ${t$3`Number of Scans`}
            </qrcg-number-range-input>

            <qrcg-balloon-selector
                name="should_filter_by_type"
                .options=${this.shouldFilterByTypeOptions()}
                @on-input=${this.onShouldFilterByTypeChanged}
            >
                ${t$3`Filter By Type?`}
            </qrcg-balloon-selector>

            ${this.renderTypeSelector()}

            <!--  -->
            ${this.renderUserSearch()}
        `}onClearFiltersClick(){this.resolvedData=()=>({}),this.onAffirmativeClick()}getAffirmativeText(){return t$3`Apply Filters`}renderActions(){return x`
            <qrcg-button
                transparent
                class="clear-filters"
                @click=${this.onClearFiltersClick}
            >
                ${t$3`Clear Fitlers`}
            </qrcg-button>

            <!--  -->

            ${super.renderActions()}
        `}}QrcgQrcodeFiltersModal.register();const style$1b=".main-container{padding:1rem;position:fixed;bottom:0;inset-inline-start:calc(var(--dashboard-sidebar-width, 15rem) + 1rem);inset-inline-end:1rem;gap:1.5rem;background-color:#fff;display:flex;align-items:center;justify-content:center;flex-wrap:wrap;z-index:10000;border-bottom-left-radius:2rem;border-bottom-right-radius:2rem;box-shadow:-1rem -1rem 2rem #0000001a;animation:reveal-main-container .5s ease both}@media(max-width:900px){.main-container{inset-inline-start:.5rem;border-bottom-left-radius:0;border-bottom-right-radius:0;inset-inline-end:.5rem}}@keyframes reveal-main-container{0%{transform:translateY(5rem)}to{transform:translateY(0)}}.text{color:var(--gray-2);font-style:italic;font-size:.8rem}.text.no-italic{font-style:normal}.actions{display:flex;flex-wrap:wrap;gap:1rem;font-weight:700;align-items:center}.action{color:var(--primary-0);text-decoration:underline;font-size:.9rem;font-weight:700;padding:.25rem;cursor:pointer}:host([loading]) .action{color:var(--gray-2);text-decoration:none;pointer-events:none}.loading-container{display:flex;align-items:center;justify-content:center;overflow:hidden;width:1.5rem;height:1.5rem;color:#000}.loading-container qrcg-loader{transform:scale(.3)}";class UserSelectorModal extends QrcgModal{static tag="qrcg-user-selector-modal";static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            qrcg-searchable-user-relation-select {
                line-height: 1;
            }
        `];static get properties(){return{userId:{}}}renderTitle(){return t$3`Select User`}onUserIdInput(w){this.userId=w.detail.value}resolvedData(){return this.userId}async affiramtivePromise(){if(!this.userId)throw showToast(t$3`You must select a user first`),"canceled"}renderBody(){return x`
            <qrcg-searchable-user-relation-select
                name="user_id"
                api-endpoint="users?list_all=true"
                @on-input=${this.onUserIdInput}
                position-mode=${QrcgSearchableUserRelationSelect.POSITION_MODE_RELATIVE}
            >
                ${t$3`User`}
            </qrcg-searchable-user-relation-select>
        `}}UserSelectorModal.register();class QrcodeSelectionToolbar extends BaseComponent{static tag="qrcg-qrcode-selection-toolbar";static styleSheets=[...super.styleSheets,style$1b];static get properties(){return{...super.properties,loading:{type:Boolean,reflect:!0},processedCount:{}}}constructor(){super(),this.loading=!1,this.processedCount=0,this.store=QrcgQRCodeListPageStore.singleton()}get selectedQRCodeIds(){return this.store.selectedQRCodeIds}set selectedQRCodeIds(w){this.store.selectedQRCodeIds=w}connectedCallback(){super.connectedCallback(),this.store.addAfterUpdateEventListener(this.onAfterStoreUpdate)}disconnectedCallback(){super.disconnectedCallback(),this.store.removeAfterUpdateEventListener(this.onAfterStoreUpdate)}onAfterStoreUpdate=()=>{this.requestUpdate()};doArchive(){this.changeArchive(!0)}doRestore(){this.changeArchive(!1)}async executeAction(w){this.loading=!0;for(let q=0;q<this.selectedQRCodeIds.length;q++){const D=this.selectedQRCodeIds[q];try{this.processedCount++,await w(D)}catch(Q){console.warn("Error while changing user for QR Code ["+D+"]",Q)}}this.processedCount=0,this.store.clearSelectedQRCodeIds(),this.store.isSelectionEnabled=!1,showToast(t$3`Completed successfully`),this.requestListRefresh(),this.loading=!1}async doChangeOwner(){try{const w=await UserSelectorModal.open({});this.executeAction(q=>post(`qrcodes/${q}/change-user`,{user_id:w}))}catch{}}async changeArchive(w){try{await confirm$1({message:t$3`Are you sure you want to `+(w?t$3`archive`:t$3`restore`)+" "+this.store.selectedQRCodeIds.length+" "+t$3`QR Codes`+"?"}),this.executeAction(q=>post(`qrcodes/archive/${q}`,{archived:w}))}catch{}}async doDelete(){try{await confirm$1({message:t$3`Are you sure you want to delete`+" "+this.selectedQRCodeIds.length+" "+t$3`QR Codes`+"? "+t$3`This cannot be undone.`}),this.executeAction(w=>destroy(`qrcodes/${w}`))}catch{}}async doMoveToFolder(){try{const[w]=await QrcgSelectFolderModal.open({value:[],multi:!1,userId:loadUser().id});this.executeAction(async q=>{const{json:D}=await get("qrcodes/"+q);return w?D.folder_id=w:D.folder_id=null,put(`qrcodes/${q}`,D)})}catch(w){console.error(w)}FolderModel.fireOnChange()}requestListRefresh(){document.dispatchEvent(new CustomEvent(QRCodeList.EVENT_REQUEST_REFRESH))}shouldRender(){return this.selectedQRCodeIds.length>1}renderLoader(){if(this.loading)return x`
            <div class="loading-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderStats(){return this.processedCount>0?`${this.processedCount} ${t$3`out of`} ${this.selectedQRCodeIds.length}`:x`${this.selectedQRCodeIds.length} ${t$3`selected.`}`}renderDeleteAction(){if(queryParam("archived"))return x`
            <div class="action" @click=${this.doDelete}>${t$3`Delete`}</div>
        `}renderArchiveOrRestoreAction(){return queryParam("archived")?x`
                <div class="action" @click=${this.doRestore}>${t$3`Restore`}</div>
            `:x`
            <div class="action" @click=${this.doArchive}>${t$3`Archive`}</div>
        `}renderOtherActions(){return x`
            <div class="action" @click=${this.downloadPng}>
                ${t$3`Download PNG`}
            </div>
            <div class="action" @click=${this.downloadSvg}>
                ${t$3`Download SVG`}
            </div>
        `}renderChangeOwnerAction(){if(isSuperAdmin())return x`
            <div class="action" @click=${this.doChangeOwner}>
                ${t$3`Change Owner`}
            </div>
        `}render(){if(this.shouldRender())return x`
            <div class="main-container">
                ${this.renderLoader()}

                <div class="text">${this.renderStats()}</div>

                <div class="text no-italic">${t$3`Do with selection: `}</div>

                <div class="actions">
                    ${this.renderArchiveOrRestoreAction()}
                    <!--  -->

                    ${this.renderDeleteAction()}
                    <!--  -->
                    ${this.renderChangeOwnerAction()}

                    <div class="action" @click=${this.doMoveToFolder}>
                        ${t$3`Move To Folder`}
                    </div>
                </div>
            </div>
        `}}QrcodeSelectionToolbar.register();const style$1a=".toolbar-container{display:flex;position:absolute;top:-3rem;align-items:center;inset-inline-start:0;inset-inline-end:0;border:1px solid var(--gray-1);border-radius:.5rem;padding-inline-start:2rem;animation:reveal-toolbar .3s ease both}@media(min-width:900px){.toolbar-container{padding-inline-start:2.5rem}}@keyframes reveal-toolbar{0%{opacity:0}to{opacity:1}}.toolbar-container .label{font-size:.8rem;cursor:pointer}.toolbar-container .stats{margin-inline-start:2rem;font-size:.8rem;color:var(--gray-2);font-style:italic}";class QrcgQRCodeSelectionTopToolbar extends BaseComponent{static tag="qrcg-qrcode-selection-top-toolbar";static styleSheets=[...super.styleSheets,style$1a];store=QrcgQRCodeListPageStore.singleton();connectedCallback(){super.connectedCallback(),this.store.addAfterUpdateEventListener(this.onStoreUpdate)}disconnectedCallback(){super.disconnectedCallback(),this.store.removeAfterUpdateEventListener(this.onStoreUpdate)}onStoreUpdate=()=>{this.requestUpdate()};onLabelClick(){this.$("qrcg-checkbox").dispatchEvent(new Event("click"))}onSelectAllChange(w){w.detail.value?this.store.selectAll():this.store.clearSelectedQRCodeIds()}renderStats(){const w=this.store.selectedQRCodeIds.length;return w?w+" "+t$3`QR Codes selected.`:t$3`No QR Codes selected.`}render(){if(this.store.isSelectionEnabled)return x`
            <div class="toolbar-container">
                <qrcg-checkbox
                    @on-input=${this.onSelectAllChange}
                ></qrcg-checkbox>

                <div class="label" @click=${this.onLabelClick}>
                    ${t$3`Select All`}
                </div>

                <div class="stats">${this.renderStats()}</div>
            </div>
        `}}QrcgQRCodeSelectionTopToolbar.register();class QRCGQRCodeListPage extends BaseComponent{static tag="qrcg-qrcode-list-page";titleController=new QRCGTitleController(this);#e=new DirectionAwareController(this);droplet=new Droplet;store=QrcgQRCodeListPageStore.singleton();billing=new BillingMode;static styleSheets=[...super.styleSheets,style$1d];static get properties(){return{...super.properties,totalQRCodeCount:{type:Number}}}constructor(){super(),this.totalQRCodeCount=0}connectedCallback(){super.connectedCallback(),document.addEventListener(QrcgQRCodeListPageStore.EVENT_AFTER_UPDATE,this.onAfterStoreUpdate)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener(QrcgQRCodeListPageStore.EVENT_AFTER_UPDATE,this.onAfterStoreUpdate)}onAfterStoreUpdate=()=>{this.syncModeAttribute(),this.requestUpdate()};syncModeAttribute(){this.setAttribute("mode",this.store.mode)}firstUpdated(){super.firstUpdated(),this.fetchTotalCount(),this.syncModeAttribute()}async fetchTotalCount(){this.store.isMinimal()&&(this.totalQRCodeCount=await getTotalQRCodeCount())}onBulkCreateClick(){push("/dashboard/bulk-operations")}shouldRenderBulkCreateButton(){return this.droplet.isSmall()?!1:featureAllowed("bulk-qrcode-creation")}renderBulkCreateButton(){let w=this.shouldRenderBulkCreateButton();if(w=PluginManager.applyFilters(FILTER_DASHBOARD_LIST_SHOULD_RENDER_BULK_CREATE_BUTTON,w),!!w)return x`
            <qrcg-button
                @click=${this.onBulkCreateClick}
                class="bulk-create action"
            >
                <qrcg-icon mdi-icon=${mdiContentCopy}></qrcg-icon>
                <span>${t$3`Bulk Create`}</span>
            </qrcg-button>
        `}renderCreateButton(){const w=this.store.isMinimal()?mdiPlusThick:mdiQrcodePlus;let q=x`
            <qrcg-button
                href="/dashboard/qrcodes/new"
                title=${t$3`Create QR Code`}
                class="${e$1({"create-button":!0,minimal:this.store.isMinimal()})}"
            >
                <qrcg-icon mdi-icon=${w}></qrcg-icon>
                ${t$3`Create`}
            </qrcg-button>
        `;return q=PluginManager.applyFilters(FILTER_DASHBOARD_LIST_CREATE_BUTTON,q),q}async onFiltersClick(){try{const w=await QrcgQrcodeFiltersModal.open({filters:this.oldFilters??{}});this.numberOfFilters=Object.keys(w).filter(q=>q!="should_filter_by_type").length,this.requestUpdate(),document.dispatchEvent(new CustomEvent(QRCodeList.EVENT_REQUEST_FILTERS_CHANGE,{detail:{filters:w}})),this.oldFilters=w}catch(w){console.error(w)}}onSortClick(){QrcgDropdown.withTarget(this.$(".sort-btn")).withContent(this.renderSortItems).open()}renderSortByName(){if(!isEmpty(this.sortItemName))return x`<span class="sort-name"> ${this.sortItemName} </span>`}renderNumberOfFilters(){if(isEmpty(this.numberOfFilters))return;const w=this.numberOfFilters>1?t$3`Fitlers`:t$3`Filter`;return x`
            <span class="number-of-filters">
                (${this.numberOfFilters} ${w})
            </span>
        `}onSortItemClick=w=>{const q=w.target,D=q.dataset.key,Q=q.dataset.dir;this.sortItemName=q.innerText,this.requestUpdate(),document.dispatchEvent(new CustomEvent(QRCodeList.EVENT_REQUEST_SORT_CHANGE,{detail:{key:D,dir:Q}}))};renderSortItems=()=>[{name:t$3`Name (A-Z)`,key:"name",dir:"asc"},{name:t$3`Name (Z-A)`,key:"name",dir:"desc"},{name:t$3`Type (A-Z)`,key:"type",dir:"asc"},{name:t$3`Type (Z-A)`,key:"type",dir:"desc"},{name:t$3`Most Scans`,key:"scans_count",dir:"desc"},{name:t$3`Fewest Scans`,key:"scans_count",dir:"asc"},{name:t$3`Most Recent`,key:"created_at",dir:"desc"},{name:t$3`Oldest`,key:"created_at",dir:"asc"}].map(q=>x`
                <div
                    class="item"
                    data-key="${q.key}"
                    data-dir="${q.dir}"
                    @click=${this.onSortItemClick}
                >
                    ${q.name}
                </div>
            `);onSelectClick=()=>{this.store.isSelectionEnabled=!this.store.isSelectionEnabled};onPageSettingsClick=()=>{QrcgQrcodeListPageSettingsModal.open()};onSwitchModeClick(){this.store.isDetailed()?this.store.mode=QrcgQRCodeListPageStore.MODE_MINIMAL:this.store.mode=QrcgQRCodeListPageStore.MODE_DETAILED}renderSwitchModeIcon(){let w=null;return this.store.isMinimal(),w=mdiSwapHorizontal,x`
            <qrcg-button
                class="elegant action"
                @click=${this.onSwitchModeClick}
            >
                <qrcg-icon mdi-icon=${w}></qrcg-icon>
                <span>${t$3`Switch View`}</span>
            </qrcg-button>
        `}renderMinimalHeader(){const w=this.billing.formatTotalNumber(currentPlan()?.number_of_dynamic_qrcodes);return x`
            <div slot="title" class="minimal-title">
                ${this.totalQRCodeCount} / ${w}
                <span> ${t$3`QR Codes`} </span>

                ${this.renderSwitchModeIcon()}
            </div>

            <div class="actions" slot="header-actions">
                ${this.renderCreateButton()}
            </div>
        `}renderDetailedHeader(){return x`
            <div slot="title" class="title-container">
                <div class="title-text">${this.titleController.pageTitle}</div>
                <div class="actions">
                    <qrcg-button
                        @click=${this.onPageSettingsClick}
                        class="action page-settings"
                    >
                        <qrcg-icon mdi-icon=${mdiCog}></qrcg-icon>
                        <span>${t$3`Page Settings`}</span>
                    </qrcg-button>
                    ${this.renderSwitchModeIcon()}
                </div>
            </div>
            <div class="actions" slot="header-actions">
                <qrcg-button @click=${this.onSelectClick} class="action">
                    <qrcg-icon mdi-icon=${mdiSelect}></qrcg-icon>
                    <span>${t$3`Select`}</span>
                </qrcg-button>

                <qrcg-button @click=${this.onSortClick} class="sort-btn action">
                    <qrcg-icon mdi-icon=${mdiSort}></qrcg-icon>
                    <span>${t$3`Sort`} ${this.renderSortByName()}</span>
                </qrcg-button>

                <qrcg-button @click=${this.onFiltersClick} class="action">
                    <qrcg-icon mdi-icon=${mdiFilter}></qrcg-icon>
                    <span>${t$3`Filters`} ${this.renderNumberOfFilters()}</span>
                </qrcg-button>

                <!--  -->
                ${this.renderBulkCreateButton()}
                <!--  -->
                ${this.renderCreateButton()}
            </div>
        `}renderHeader(){return this.store.isMinimal()?this.renderMinimalHeader():this.renderDetailedHeader()}render(){return x`
            <qrcg-dashboard-layout>
                <qrcg-dashboard-banner
                    slot="page-start"
                ></qrcg-dashboard-banner>

                ${this.renderHeader()}

                <div slot="content">
                    <qrcg-qrcode-selection-top-toolbar></qrcg-qrcode-selection-top-toolbar>
                    <qrcg-qrcode-list></qrcg-qrcode-list>
                    <qrcg-qrcode-selection-toolbar></qrcg-qrcode-selection-toolbar>
                </div>
            </qrcg-dashboard-layout>
        `}}QRCGQRCodeListPage.register();class QrcgArrayToCsvConverter{constructor(w){this.dataArray=this.normalize(w)}normalize(w){const q=[],D=Object.keys(w[0]);q.push(D);for(const Q of w)q.push(D.map(O=>Q[O]));return console.log(q),q}download(w){w=w+".csv";var q=new Blob([this.csv()],{type:"text/csv;charset=utf-8;"}),D=URL.createObjectURL(q),Q=document.createElement("a");Q.href=D,Q.setAttribute("download",w),Q.click(),setTimeout(()=>{URL.revokeObjectURL(D)},50)}csv(){return this.dataArray.map(w=>w.map(String).map(q=>q.replaceAll('"','""')).map(q=>`"${q}"`).join(",")).join(`\r
`)}}class QrcgQrcodeBaseReport extends i$1{routeParams=new QRCGRouteParamsController(this);static get styles(){return i$3`
            :host {
                display: block;
                border: 0.1rem solid var(--gray-0);
                padding: 2rem;
                box-sizing: border-box;
                border-radius: 0.5rem;
            }

            .chart-title {
                font-size: 1.5rem;
                font-weight: 300;
                margin: 0;
            }

            qrcg-loader {
                margin: auto;
                display: block;
                width: fit-content;
            }

            header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-bottom: 2rem;
            }

            .actions {
                display: flex;
                align-items: center;
            }

            .action {
                color: var(--gray-2);
                cursor: pointer;
                touch-action: manipulation;
            }

            .sep {
                color: var(--gray-1);
                margin: 0 1rem;
            }

            @media (min-width: 1024px) {
                .actions {
                    flex-direction: row;
                    justify-content: space-between;
                    align-items: center;
                }
            }

            :host([resizing]) .chart-container {
                opacity: 0;
            }
        `}static get properties(){return{id:{},chartData:{type:Array},loading:{type:Boolean},from:{},to:{},data:{}}}constructor(){super(),this.chartData=[],this.loading=!0,this.fetchResults=debounce(this.fetchResults.bind(this),100),this.data=[]}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}firstUpdated(){this.id=this.getRouteQRCodeId()}getRouteQRCodeId(){const w=window.location.pathname.split("/");return w[w.length-1]}onRouteParamChange(w){this.id=w.id}updated(w){this.id&&(w.has("id")||w.has("from")||w.has("to"))&&this.fetchResults()}slug(){throw new Error("You must define slug method in child report")}async fetchResults(){this.loading=!0;let w=`qrcodes/${this.id}/reports/${this.slug()}`;const q={};this.from&&(q.from=this.from),this.to&&(q.to=this.to);const D=new URLSearchParams(q).toString();isEmpty(D)||(w+="?"+D);const{response:Q}=await get(w),O=await Q.json();this.data=O,this.chartData=this.createChartData(O),this.debugData()&&console.log({chartData:this.chartData,json:O}),this.loading=!1}createChartData(w){return Config.get("app.env")=="local"&&!isEmpty(this.doctoredData())?this.doctoredData():w.map(q=>this.mapChartDataItem(q))}doctoredData(){}debugData(){return!1}exportFileName(){const w=new Date,q=D=>String(D).padStart(2,"0");return`${this.slug()}-${w.getFullYear()}-${q(w.getMonth()+1)}-${q(w.getDay()+1)}`}exportCsv(){new QrcgArrayToCsvConverter(this.data).download(this.exportFileName())}exportPng(){this.chartElement.downloadPng(this.exportFileName())}mapChartDataItem(w){throw new Error("You must define mapChartDataItem in child report")}chartTag(){throw new Error("You must define chartTag method in child report.")}chartTitle(){throw new Error("You must define chartTitle method in child report.")}get chartElement(){return this.shadowRoot.querySelector(this.chartTag())}renderReport(){const w=this.chartTag();return o$2(`
                <${w} data='${JSON.stringify(this.chartData)}' chart-title="${this.chartTitle()}"></${w}>
            `)}renderChart(){return!this.loading&&isEmpty(this.chartData)?x`<p>${t$3`No data found for this report.`}</p>`:x` ${this.renderReport()} `}render(){return x`
            <div class="container">
                <header>
                    <h3 class="chart-title">${this.chartTitle()}</h3>

                    <div class="actions">
                        <div class="action" @click=${this.exportCsv}>CSV</div>
                        <span class="sep">|</span>
                        <div class="action" @click=${this.exportPng}>PNG</div>
                    </div>
                </header>
                ${this.renderChart()}
            </div>
        `}}class QrcgWindowResizeController{constructor(w){this.host=w,this.host.addController(this),this.resizing=!1,this.resizingX=!1,this.onResizeEnd=debounce(this.onResizeEnd.bind(this),500),this.onResizeXEnd=debounce(this.onResizeXEnd.bind(this),500),this.lastWidth=window.innerWidth}hostConnected(){window.addEventListener("resize",this.onWindowResize)}hostDisconnected(){window.removeEventListener("resize",this.onWindowResize),this.host=null}onWindowResize=()=>{this.onResizeStart(),this.onResizeXStart(),this.onResizeEnd(),this.onResizeXEnd()};onResizeStart(){this.resizing||(this.fire("resize-start"),this.resizing=!0)}onResizeXStart(){this.resizingX||window.innerWidth!=this.lastWidth&&(this.fire("resize-start-x"),this.lastWidth=window.innerWidth,this.resizingX=!0)}onResizeEnd(){this.resizing&&(this.fire("resize-end"),this.resizing=!1)}onResizeXEnd(){this.resizingX&&(this.fire("resize-end-x"),this.resizingX=!1)}fire(w){this.host&&this.host.dispatchEvent(new CustomEvent(w))}}class QrcgBaseChart extends i$1{resizeController=new QrcgWindowResizeController(this);static styles=[i$3`
            :host {
                display: block;
                position: relative;
                max-width: 100%;
            }

            .loader-container {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: 1;
                background-color: white;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            :host([resizing]) {
                opacity: 0;
            }
        `];static get properties(){return{data:{type:Array},chartTitle:{attribute:"chart-title"},resizing:{type:Boolean,reflect:!0}}}constructor(){super(),this.data=[{label:"1/1/2000",number:10},{label:"2/1/2000",number:20},{label:"3/1/2000",number:40},{label:"4/1/2000",number:10}],this.data=[]}firstUpdated(){}connectedCallback(){super.connectedCallback(),this.addEventListener("resize-start-x",this.onResizeStart),this.addEventListener("resize-end-x",this.onResizeEnd)}disconnectedCallback(){super.disconnectedCallback(),this.chart&&this.chart.destroy(),this.removeEventListener("resize-start-x",this.onResizeStart),this.removeEventListener("resize-end-x",this.onResizeEnd)}onResizeStart=()=>{this.resizing=!0;try{this.chart.destroy()}catch{}};onResizeEnd=async()=>{this.resizing=!1;try{await new Promise(w=>setTimeout(w,350)),this.initChart()}catch{}};updated(w){w.has("data")&&(isEmpty(this.data)||(this.chart&&this.chart.destroy(),setTimeout(()=>{this.initChart()},1)))}loadChartJsScript(){return new Promise(q=>{const D=this.tagName.toLowerCase()+"-chartjs";let Q=document.getElementById(D);Q=document.createElement("script"),Q.src="/assets/lib/chart.umd.js",Q.onload=()=>{q()},document.head.appendChild(Q)})}chartJsIsLoaded(){return typeof Chart<"u"}dataSet(){throw new Error("You must define dataSet function in child chart implementation")}type(){throw new Error("You must define type function in child chart implementation")}primaryColor(){return getComputedStyle(document.documentElement).getPropertyValue("--primary-0")}primary1Color(){return getComputedStyle(document.documentElement).getPropertyValue("--primary-1")}getCssVar(w){return getComputedStyle(document.documentElement).getPropertyValue(w)}colors(){const w=[this.primaryColor(),this.primary1Color(),this.getCssVar("--accent-1"),this.getCssVar("--warning-1"),this.getCssVar("--dark")].map(q=>q.trim());return Object.keys(this.data).map((q,D)=>w[D%w.length])}transparentize(w,q){var D=q===void 0?.5:1-q;return new index_esm(w).alpha(D).rgbString()}transparentizeColors(w){return this.colors().map(q=>this.transparentize(q,w))}downloadPng(w){var q=document.createElement("a");q.href=this.chart.toBase64Image(),q.download=w+".png",q.click()}async initChart(){typeof Chart>"u"&&await this.loadChartJsScript();const w=this.renderRoot.getElementById("chart").getContext("2d");if(this.data==null){console.error("Data is null"),console.trace();return}this.chart=new Chart(w,{type:this.type(),resopnsive:!0,data:{labels:this.data.map(q=>q.label),datasets:[this.dataSet()]},options:{plugins:{legend:{display:!1},title:{display:!1}},scales:this.scales(),...this.options()}}),await this.updateComplete,this.requestUpdate()}options(){return{}}scales(){return{}}renderLoader(){return this.chartJsIsLoaded()?null:x`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}render(){return x`
            ${this.renderLoader()}
            <canvas id="chart"></canvas>
        `}}class QrcgChartHorizontalBarChart extends QrcgBaseChart{static styles=[super.styles,i$3``];static get properties(){return{...super.properties}}type(){return"bar"}dataSet(){return{data:this.data.map(w=>w.number),backgroundColor:this.transparentizeColors(.5),borderColor:this.colors(),hoverBackgroundColor:this.colors(),maxBarThickness:55}}options(){return{indexAxis:"y",elements:{bar:{borderWidth:2}},scales:{x:{grid:{display:!1},ticks:{stepSize:1}},y:{grid:{display:!1}}}}}}window.defineCustomElement("qrcg-chart-horizontal-bar-chart",QrcgChartHorizontalBarChart);class QrcgQrcodeScansPerOperatingSystem extends QrcgQrcodeBaseReport{slug(){return"scans-per-operating-system"}chartTag(){return"qrcg-chart-horizontal-bar-chart"}chartTitle(){return t$3`Operating Systems`}mapChartDataItem(w){return{number:w.scans,label:w.os_name}}}window.defineCustomElement("qrcg-qrcode-scans-per-operating-system",QrcgQrcodeScansPerOperatingSystem);class QrcgChartLineChart extends QrcgBaseChart{static styles=[super.styles,i$3``];static get properties(){return{...super.properties}}type(){return"line"}dataSet(){return{data:this.data.map(w=>w.number),borderColor:this.primaryColor(),backgroundColor:this.primary1Color(),borderWidth:2,cubicInterpolationMode:"monotone",tension:.5,pointStyle:"circle",pointRadius:4,pointHoverRadius:8}}scales(){return{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{display:!1},ticks:{stepSize:1}}}}}window.defineCustomElement("qrcg-chart-line-chart",QrcgChartLineChart);class QrcgQrcodeScansPerDay extends QrcgQrcodeBaseReport{slug(){return"scans-per-day"}chartTag(){return"qrcg-chart-line-chart"}chartTitle(){return t$3`Daily Scans`}mapChartDataItem(w){return{label:w.date,number:w.scans}}}window.defineCustomElement("qrcg-qrcode-scans-per-day",QrcgQrcodeScansPerDay);class QrcgQrcodeScansPerDeviceBrand extends QrcgQrcodeBaseReport{slug(){return"scans-per-device-brand"}chartTag(){return"qrcg-chart-horizontal-bar-chart"}chartTitle(){return t$3`Device Brands`}mapChartDataItem(w){return{number:w.scans,label:w.device_brand}}}window.defineCustomElement("qrcg-qrcode-scans-per-device-brand",QrcgQrcodeScansPerDeviceBrand);class QrcgQrcodeScansPerCountry extends QrcgQrcodeBaseReport{slug(){return"scans-per-country"}chartTag(){return"qrcg-chart-horizontal-bar-chart"}chartTitle(){return t$3`Countries`}mapChartDataItem(w){return{number:w.scans,label:w.country}}}window.defineCustomElement("qrcg-qrcode-scans-per-country",QrcgQrcodeScansPerCountry);class QrcgQrcodeScansPerCity extends QrcgQrcodeBaseReport{slug(){return"scans-per-city"}chartTag(){return"qrcg-chart-horizontal-bar-chart"}chartTitle(){return t$3`Cities`}mapChartDataItem(w){return{number:w.scans,label:w.city.replace('"'," ").replace("'"," ")}}}window.defineCustomElement("qrcg-qrcode-scans-per-city",QrcgQrcodeScansPerCity);class QrcgQrcodeScansPerHour extends QrcgQrcodeBaseReport{slug(){return"scans-per-hour"}chartTag(){return"qrcg-chart-line-chart"}chartTitle(){return t$3`Hour of the day`}mapChartDataItem(w){return{number:w.scans,label:w.hour}}}window.defineCustomElement("qrcg-qrcode-scans-per-hour",QrcgQrcodeScansPerHour);class QrcgQrcodeScansPerBrowser extends QrcgQrcodeBaseReport{slug(){return"scans-per-browser"}chartTag(){return"qrcg-chart-horizontal-bar-chart"}chartTitle(){return t$3`Browsers`}mapChartDataItem(w){return{number:w.scans,label:w.browser}}}window.defineCustomElement("qrcg-qrcode-scans-per-browser",QrcgQrcodeScansPerBrowser);class QrcgQrcodeScansPerLanguage extends QrcgQrcodeBaseReport{slug(){return"scans-per-language"}chartTag(){return"qrcg-chart-horizontal-bar-chart"}chartTitle(){return t$3`Language`}mapChartDataItem(w){return{number:w.scans,label:w.language}}}window.defineCustomElement("qrcg-qrcode-scans-per-language",QrcgQrcodeScansPerLanguage);class QrcgQrcodeStatsDateRangeModal extends QrcgModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];static async open(w,q){const D=new QrcgQrcodeStatsDateRangeModal;document.body.appendChild(D);const Q=D.open();return await new Promise(O=>setTimeout(O)),D.setFrom(w),D.setTo(q),Q}$(w){return this.shadowRoot.querySelector(w)}setFrom(w){console.log("setting from",w),w&&(this.$('[name="from"]').value=w)}setTo(w){w&&(this.$('[name="to"]').value=w)}async onAffirmativeClick(){this.resolve({from:this.$('[name="from"]').value,to:this.$('[name="to"]').value}),this.close()}renderTitle(){return t$3`Select date`}renderBody(){return x`
            <qrcg-input type="date" name="from"> ${t$3`From`} </qrcg-input>

            <qrcg-input type="date" name="to"> ${t$3`To`} </qrcg-input>
        `}}window.defineCustomElement("qrcg-qrcode-stats-date-range-modal",QrcgQrcodeStatsDateRangeModal);class QrcgQrcodeStats extends i$1{routeParams=new QRCGRouteParamsController(this);static get styles(){return i$3`
            :host {
                display: block;
                box-sizing: border-box;
            }

            * {
                box-sizing: border-box;
                user-select: none;
                -webkit-user-select: none;
            }

            .qrcode-name {
                margin: 0;
                color: var(--gray-2);

                font-weight: 500;
                opacity: 0;
                transition: all ease 0.5s;
                display: flex;
                align-items: center;
            }

            .qrcode-name span {
                max-width: 25rem;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }

            @media (max-width: 450px) {
                .qrcode-name span {
                    max-width: 15rem;
                }
            }

            .qrcode-link {
                color: var(--gray-2);
                margin-left: 1rem;
                transform: translateY(0.15rem);
            }

            .qrcode-link qrcg-icon {
                width: 1.5rem;
                height: 1.5rem;
            }

            .qrcode-name.loaded {
                opacity: 1;
            }

            .reports {
                display: grid;
                grid-template-columns: 100%;
                grid-gap: 1rem;
            }

            header {
                margin-bottom: 2rem;
                position: relative;
            }

            @media (min-width: 900px) {
                header {
                    display: flex;
                    justify-content: space-between;
                    align-items: baseline;
                }
            }

            .date-range-container {
                margin-top: 1rem;
                display: flex;
                padding: 0.1rem;
            }

            .date-range {
                position: relative;
            }

            @media (max-width: 450px) {
                .date-range:nth-child(2) {
                    display: none;
                }
            }

            @media (max-width: 900px) {
                .date-range:nth-child(3) {
                    display: none;
                }
            }

            .date-range:not(:first-child) {
                margin-left: 1rem;
            }

            .date-range.active::after {
                content: ' ';
                position: absolute;
                height: 0.25rem;
                background-color: var(--primary-0);
                left: 0;
                right: 0;
                bottom: 0rem;
                border-bottom-left-radius: 0.5rem;
                border-bottom-right-radius: 0.5rem;
                pointer-events: none;
                animation: fade-in 0.3s ease-in both;
            }

            .custom-date-range {
                position: absolute;
                color: black;
                bottom: -1.5rem;
                font-size: 1rem;
                font-weight: 400;
                right: 0;
                animation: fade-in 0.3s 0.3s ease-in both;
                color: var(--gray-2);
            }

            @keyframes fade-in {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }

            @media (min-width: 900px) {
                .reports {
                    grid-template-columns: calc(50% - 0.5rem) calc(50% - 0.5rem);
                }
            }
        `}static get properties(){return{qrcode:{type:Object},selectedDateRange:{},from:{},to:{},shouldShowCustomDateRangeText:{type:Boolean},endpoint:{}}}constructor(){super(),this.days=[15,30,90,"Custom"],this.selectedDateRange=15,this.syncDates(),this.shouldShowCustomDateRangeText=!1}connectedCallback(){super.connectedCallback(),this.fetch(),this.updateBreadcrumbs(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick(w){const q=w.composedPath()[0];parentMatches(q,".date-range")&&this.onDateRangeClick(w)}updated(w){(w.has("from")||w.has("to"))&&this.updateReportsDates()}onDateRangeClick(w){const q=parentMatches(w.composedPath()[0],".date-range");this.selectedDateRange=q.day,this.syncDates(),this.hideCustomDateRangeTextIfNeeded(),this.selectedDateRange=="custom"&&this.onCustomDateRangeClick()}hideCustomDateRangeTextIfNeeded(){this.selectedDateRange!="custom"&&(this.shouldShowCustomDateRangeText=!1)}async onCustomDateRangeClick(){try{const{from:w,to:q}=await QrcgQrcodeStatsDateRangeModal.open(this.from,this.to);this.from=w,this.to=q,this.shouldShowCustomDateRangeText=!0}catch{}}syncDates(){if(typeof this.selectedDateRange=="string")return;const w=new Date;let q=new Date;q.setDate(w.getDate()-this.selectedDateRange),this.from=this.formatDate(q),this.to=this.formatDate(w)}formatDate(w){return w.toLocaleDateString([["sv-SE"]])}updateReportsDates(){this.reports.forEach(w=>{w.to=this.to,w.from=this.from})}updateBreadcrumbs(){const w=QrcgDashboardBreadcrumbs.buildBreadcrumbFromCurrentPath();w.pop(),w[w.length-2]={...w[w.length-2],text:t$3`QR Codes`},QrcgDashboardBreadcrumbs.setLinks(w)}getRouteQRCodeId(){const w=window.location.pathname.split("/");return w[w.length-1]}getEndpoint(){return"qrcodes/"+this.getRouteQRCodeId()}async fetch(){const{response:w}=await get(this.getEndpoint());this.qrcode=await w.json()}get reports(){return this.shadowRoot.querySelectorAll(".reports > *")}renderLinkIcon(){if(!isEmpty(this.qrcode))return x`
            <a
                href="${url("/dashboard/qrcodes/edit/"+this.qrcode.id)}"
                class="qrcode-link"
                title="${t$3`Edit`}"
            >
                <qrcg-icon mdi-icon=${mdiLinkVariant}></qrcg-icon>
            </a>
        `}renderQrCodeName(){const w=isEmpty(this.qrcode)?"qrcode name":this.qrcode.name;return x`
            <slot name="qrcode-name">
                <h2
                    class="${e$1({"qrcode-name":!0,loaded:!isEmpty(this.qrcode)})}"
                >
                    <span title=${w}> ${w} </span>
                    ${this.renderLinkIcon()}
                </h2>
            </slot>
        `}renderDateRangeButton(w){let q="date-range";return w==this.selectedDateRange&&(q+=" active"),typeof w=="string"&&(q=w.toLowerCase()===this.selectedDateRange?`${q} active`:q),typeof w=="number"?x`
                <qrcg-button transparent class="${q}" .day=${w}>
                    ${t$3`Last`} ${w} ${t$3`days`}
                </qrcg-button>
            `:x`
            <qrcg-button
                transparent
                class="${q}"
                .day=${w.toLowerCase()}
            >
                ${t$3(w)}
            </qrcg-button>
        `}renderDateRanges(){return x`
            <div class="date-range-container">
                ${this.days.map(w=>this.renderDateRangeButton(w))}
                ${this.renderCustomDateRange()}
            </div>
        `}renderCustomDateRange(){if(this.shouldShowCustomDateRangeText)return x`
            <div class="custom-date-range">
                ${t$3`From`} <strong>${this.from}</strong> ${t$3`to`}
                <strong>${this.to}</strong>
            </div>
        `}render(){return x`
            <header>
                ${this.renderQrCodeName()} ${this.renderDateRanges()}
            </header>

            <div class="reports">
                <qrcg-qrcode-scans-per-day></qrcg-qrcode-scans-per-day>
                <qrcg-qrcode-scans-per-hour></qrcg-qrcode-scans-per-hour>
                <qrcg-qrcode-scans-per-operating-system></qrcg-qrcode-scans-per-operating-system>
                <qrcg-qrcode-scans-per-device-brand></qrcg-qrcode-scans-per-device-brand>
                <qrcg-qrcode-scans-per-browser></qrcg-qrcode-scans-per-browser>
                <qrcg-qrcode-scans-per-language></qrcg-qrcode-scans-per-language>
                <qrcg-qrcode-scans-per-country></qrcg-qrcode-scans-per-country>
                <qrcg-qrcode-scans-per-city></qrcg-qrcode-scans-per-city>
            </div>
        `}}window.defineCustomElement("qrcg-qrcode-stats",QrcgQrcodeStats);class QrcgQrcodeStatsPage extends i$1{static get styles(){return i$3`
            :host {
                display: block;
            }
        `}connectedCallback(){super.connectedCallback(),window.scrollTo({top:0,behavior:"auto"})}render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${t$3`QR Code Stats`}</span>
                <qrcg-qrcode-stats slot="content"></qrcg-qrcode-stats>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-qrcode-stats-page",QrcgQrcodeStatsPage);class QRCGQRCodeRouter extends i$1{static get styles(){return i$3`
            :host {
                display: block;
            }
        `}render(){return x`
            <qrcg-protected-route
                route="/dashboard/qrcodes/new|/dashboard/qrcodes/edit/(?<id>\\d+)"
                permission="qrcode.store"
            >
                <template>
                    <qrcg-qrcode-form-page></qrcg-qrcode-form-page>
                </template>
            </qrcg-protected-route>

            <qrcg-protected-route
                route="/dashboard/qrcodes/bulk-create"
                permission="qrcode.store"
            >
                <template>
                    <qrcg-qrcode-bulk-create-page></qrcg-qrcode-bulk-create-page>
                </template>
            </qrcg-protected-route>

            <qrcg-protected-route
                route="/dashboard/qrcodes$"
                permission="qrcode.list"
            >
                <template>
                    <qrcg-qrcode-list-page></qrcg-qrcode-list-page>
                </template>
            </qrcg-protected-route>

            <qrcg-protected-route
                route="/dashboard/qrcodes/stats/(?<id>\\d+)"
                permission="qrcode.showStats"
            >
                <template>
                    <qrcg-qrcode-stats-page></qrcg-qrcode-stats-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-qrcode-router",QRCGQRCodeRouter);class QRCGRedirect extends i$1{static get styles(){return i$3`
            :host {
                display: none;
            }
        `}static get properties(){return{from:{},to:{}}}redirect(w){this.dispatchEvent(new Event("will-redirect",{cancelable:!0}))&&(w.preventDefault(),push(this.to,!0))}render(){return x`
            <qrcg-route
                route="${this.from}"
                @qrcg-route:will-render=${this.redirect}
            ></qrcg-route>
        `}}window.defineCustomElement("qrcg-redirect",QRCGRedirect);class QRCGDashboardRouter extends i$1{static get styles(){return i$3`
            :host {
                display: block;
            }

            .range-input-container {
                padding: 10rem;
                display: flex;
            }

            qrcg-range-input {
                margin: auto;
                flex: 1;
            }
        `}static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w,50));document.body.appendChild(new QRCGDashboardRouter)}render(){return x`
            <qrcg-redirect
                from="/dashboard$"
                to="${userHomePage()}"
            ></qrcg-redirect>

            <qrcg-route route="/dashboard/range">
                <template>
                    <div class="range-input-container">
                        <qrcg-range-input></qrcg-range-input>
                    </div>
                </template>
            </qrcg-route>
        `}}window.defineCustomElement("qrcg-dashboard-router",QRCGDashboardRouter);QRCGDashboardRouter.boot();class QRCGLink extends i$1{static get styles(){return i$3`
            :host {
                display: inline;
                color: var(--primary-0);
                text-decoration: underline;
                cursor: pointer;
            }
        `}static get properties(){return{href:{type:String}}}constructor(){super()}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}_click(w){w.preventDefault(),push(this.href)}render(){return x`<a @click=${this._click}><slot></slot></a>`}}window.defineCustomElement("qrcg-link",QRCGLink);const style$19=":host{display:flex;position:relative;width:calc(100vw - 2rem);min-height:calc(var(--available-height, 100vh) - 2rem);z-index:1;margin:1rem;border-radius:2rem;overflow:hidden;box-shadow:.2rem .2rem 3rem #00000080}:host(.right){flex-direction:row-reverse}:host(.right) .account-page-background{border-start-start-radius:2rem;border-end-start-radius:2rem}:host(.right) .account-page-background.no-radius{border-start-start-radius:0;border-end-start-radius:0}.account-page-background{flex:2;min-height:10rem;max-width:35vw;background-image:var(--qrcg-account-page-background-image, url(/assets/images/account-page-background.jpg));background-size:cover;background-repeat:no-repeat;background-position:center;border-start-end-radius:2rem;border-end-end-radius:2rem}.account-page-background.no-radius{border-start-end-radius:0;border-end-end-radius:0}.account-page-content{flex:3;background-image:radial-gradient(#e7e5ff80,#ffffff80),linear-gradient(-45deg,#0004ff1a,#4cff431a,#ffffff1a)}.account-page-content.no-gradient{background-image:none}.account-page-content .account-page-content-box{max-width:400px;margin:auto;text-align:center;padding-bottom:2rem}.logo-container{display:flex;align-items:center}qrcg-app-logo{margin:15vh auto 1rem}qrcg-app-logo.is-default{height:7rem}qrcg-form::part(form){display:grid;grid-gap:1rem}a{color:var(--gray-2);text-decoration:none}a:hover{text-decoration:underline;color:var(--dark)}.go-home{display:block;margin-top:2rem;text-align:center}.page-title{font-weight:400;color:var(--dark)}.page-description{font-weight:lighter;line-height:1.7}[name]{text-align:start}@media(max-width:900px){:host{flex-direction:column}.account-page-background{border-radius:2rem;display:none}qrcg-app-logo{margin-top:10vh;margin-bottom:0}.account-page-content-box{padding:0 1rem}}";class QRCGAccountPage extends BaseComponent{api=new QRCGApiConsumer(this);formController=new QRCGFormController(this);static styleSheets=[...super.styleSheets,style$19];static get properties(){return{data:{}}}connectedCallback(){super.connectedCallback(),this.isImageOnRight()&&this.classList.add("right")}disconnectedCallback(){super.disconnectedCallback()}async submitForm(){try{const{token:w,user:q}=await this.api.call(()=>post("login",this.data));window.dispatchEvent(new CustomEvent("qrcg-login:after-login",{detail:{user:q,token:w}}))}catch(w){console.error(w)}}getTitle(){return"Page Title"}getDescription(){return"Welcome Back, description goes here."}isGradientDisabled(){return Config.get("account_page.gradient")==="disabled"}isImageOnRight(){return Config.get("account_page.image_position")==="right"}isImageRoundCornerDisabled(){return Config.get("account_page.image_round_corner")==="disabled"}renderForm(){}renderTitle(){}renderAccountPageForm(){return x` <qrcg-form> ${this.renderForm()} </qrcg-form> `}renderContent(){return x`
            <h1 class="page-title">${this.getTitle()}</h1>

            <p class="page-description">${this.getDescription()}</p>

            ${this.renderAccountPageForm()}
        `}shouldRenderGoHomeLink(){const w=Config.get("app.frontend_links");return!w||w==="enabled"}renderGoHomeLink(){if(this.shouldRenderGoHomeLink())return x`
            <a class="go-home" href="/">
                ${t$3`Or you may go back to the home page.`}
            </a>
        `}renderAccountPageBackground(){const w=Config.get("account_page.background_image_url"),q=e$1({"account-page-background":!0,"no-radius":this.isImageRoundCornerDisabled()});return isEmpty(w)?x` <div class="${q}"></div> `:x`
            <div
                class="${q}"
                style="background-image: url(${w});"
            ></div>
        `}renderAccountPageContent(){return x`
            <div
                class="${e$1({"account-page-content":!0,"no-gradient":this.isGradientDisabled()})}"
            >
                <div class="account-page-content-box">
                    <div class="logo-container">
                        <qrcg-app-logo variation="login"></qrcg-app-logo>
                    </div>

                    <div class="content-container">${this.renderContent()}</div>

                    ${this.renderGoHomeLink()}
                </div>
            </div>
        `}render(){return[this.renderAccountPageBackground(),this.renderAccountPageContent()]}}const style$18="qrcg-button{margin:2rem 0}";class QRCGEmailVerified extends QRCGAccountPage{static styleSheets=[...super.styleSheets,style$18];login(){window.location=url("/account/login")}renderAccountPageForm(){return x`<qrcg-button @click=${this.login}>${t$3`Login`}</qrcg-button>`}getTitle(){return t$3`Your email has been verified`}getDescription(){return t$3`You can login to your account`}}window.defineCustomElement("qrcg-email-verified",QRCGEmailVerified);class QRCGForgotPassword extends QRCGAccountPage{static get properties(){return{data:{},success:{type:Boolean,state:!0}}}constructor(){super(),this.data={email:""},this.success=!1}async submitForm(){try{await this.api.call(()=>post("forgot-password",this.data)),this.success=!0}catch(w){console.error(w)}}renderSuccess(){return x`
            <p>
                ${t$3`If we found your email, we have sent you the reset instructions.`}
            </p>
        `}renderResetForm(){return x`
            <qrcg-input
                autofocus
                name="email"
                placeholder="${t$3`Enter your email`}"
            ></qrcg-input>

            <qrcg-button type="submit">${t$3`Submit`}</qrcg-button>
        `}getTitle(){return t$3`Reset Your Password`}getDescription(){return t$3`We will send you the reset instructions to your email.`}renderForm(){return this.success?this.renderSuccess():this.renderResetForm()}}window.defineCustomElement("qrcg-forgot-password",QRCGForgotPassword);class QRCGPasswordReset extends QRCGAccountPage{static get properties(){return{data:{},errorMessage:{type:String,state:!0},success:{type:Boolean,state:!0}}}constructor(){super(),this.data={email:queryParam("email"),password:"",password_confirmation:"",token:queryParam("token")},this.success=!1}async submitForm(){try{const{status:w}=await this.api.call(()=>post("reset-password",this.data));this.success=this.isSuccess(w),this.success||(this.errorMessage=this.statusError(w))}catch(w){console.error(w)}}isSuccess(w){return w==="passwords.reset"}statusError(w){return{"passwords.user":t$3("User was not found"),"passwords.token":t$3("The reset link is expired."),"passwords.throttled":t$3("Password reset blocked, please try again later.")}[w]}getDescription(){return this.success?t$3`Your password has been reset successfully. You can now login
                with your new password.`:t$3`Create a new password`}getTitle(){return t$3`Password Reset`}renderErrorMessage(){if(!isEmpty(this.errorMessage))return x`<p>${this.errorMessage}</p>`}renderResetForm(){return x`
            ${this.renderErrorMessage()}

            <qrcg-form>
                <qrcg-input
                    name="password"
                    type="password"
                    placeholder=${t$3`your password`}
                >
                    ${t$3`Password`}
                </qrcg-input>

                <qrcg-input
                    name="password_confirmation"
                    type="password"
                    placeholder=${t$3`confirm your password`}
                >
                    ${t$3`Password confirmation`}
                </qrcg-input>

                <qrcg-button type="submit">${t$3`Submit`}</qrcg-button>
            </qrcg-form>
        `}renderSuccess(){return x`
            <qrcg-button href="/account/login">${t$3`Login`}</qrcg-button>
        `}renderForm(){return this.success?this.renderSuccess():this.renderResetForm()}}window.defineCustomElement("qrcg-reset-password",QRCGPasswordReset);const style$17=":host{display:flex;flex-direction:column;position:relative}:host([disabled]){pointer-events:none;opacity:.5}:host(.leadform) qrcg-input::part(input){background-color:transparent;box-shadow:none;border-bottom:2px solid var(--placeholder-color);--placeholder-font-weight: normal;border-radius:0;font-size:1.5rem}:host(.leadform) .label{font-size:1.5rem;height:unset;background-color:transparent;border:1px solid var(--text-color);padding:.25rem .3rem;line-height:1;bottom:1.5rem}:host(.leadform) .label.focused{box-shadow:none}.label{position:absolute;left:.5rem;z-index:1;height:1.25rem;display:flex;align-items:center;justify-content:center;bottom:1rem;padding:.25rem;font-size:.8rem;border-radius:.25rem;background-color:var(--gray-0)}.label.focused{box-shadow:0 0 0 .1rem var(--gray-2)}select{appearance:none;-webkit-appearance:none;min-width:0;border:1px solid black;position:absolute;top:-.5rem;left:-.5rem;right:0;bottom:-.5rem;opacity:0;cursor:pointer}";class QrcgMobileInput extends BaseComponent{static tag="qrcg-mobile-input";static styleSheets=[...super.styleSheets,style$17];static shouldShowDuringRegistration(){const w=Config.get("app.mobile_number_field");return w==="optional"||w==="mandatory"}static renderBasedOnConfigs(w="mobile_number"){if(this.shouldShowDuringRegistration())return x`
            <qrcg-mobile-input name="${w}">
                ${t$3`Mobile number`}
            </qrcg-mobile-input>
        `}static get properties(){return{callingCodes:{type:Array},myIsoCode:{},myCallingCode:{},name:{},value:{},mobileNumber:{},errors:{type:Array},placeholder:{},disabled:{type:Boolean,reflect:!0}}}inputController=new FormInputController(this,FormInputController.MODE_BASE64);constructor(){super(),this.callingCodes=[],this.disabled=!1}connectedCallback(){console.log("mobile-input connected"),super.connectedCallback(),this.fetchData()}disconnectedCallback(){super.disconnectedCallback(),clearInterval(this.computeInterval)}async fetchData(){await this.fetchCallingCodes(),await this.fetchMyDetails(),this.syncMyIsoCode()}$(w){return this.shadowRoot.querySelector(w)}syncMyIsoCode(){this.$("select").value=this.myIsoCode}async fetchMyDetails(){if(isNotEmpty(this.myCallingCode))return;const{response:w}=await get("utils/my-calling-code"),q=await w.json();isNotEmpty(this.myCallingCode)||(this.myIsoCode=q.iso_code,this.myCallingCode=q.calling_code)}async fetchCallingCodes(){const{response:w}=await get("utils/list-calling-codes"),q=await w.json();this.callingCodes=q.filter(D=>{const Q=D.country_name??"";return!isEmpty(Q.trim())})}formatCallingCode(w){return`+${w}`}onSelectChange(w){this.myIsoCode=w.target.value,this.myCallingCode=this.callingCodeByIsoCode(w.target.value)}callingCodeByIsoCode(w){return this.callingCodes.find(q=>q.iso_code==w).calling_code}firstUpdated(){setTimeout(()=>{this.syncInputPadding(),this.syncLabelHeight()},10),this.computeInterval=setInterval(()=>{this.syncInputPadding(),this.syncLabelHeight()},1e3)}willUpdate(w){w.has("myCallingCode")&&this.syncInputPadding(),(w.has("myCallingCode")||w.has("mobileNumber"))&&this.fireOnInput(),w.has("value")&&(isEmpty(this.value)?this.mobileNumber="":(this.myIsoCode=this.value.iso_code,this.myCallingCode=this.callingCodeByIsoCode(this.myIsoCode),this.mobileNumber=this.value.mobile_number))}fireOnInput(){this.value={iso_code:this.myIsoCode,mobile_number:this.mobileNumber,calling_code:this.myCallingCode},this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:this.value}}))}syncLabelHeight(){const w=this.$(".label"),D=this.$("qrcg-input").input.getBoundingClientRect().height+"px";w.style.height=`calc(${D} - 1rem)`}syncInputPadding(){const q=this.$(".label").getBoundingClientRect().width;this.$("qrcg-input").input.style=`padding-left: ${q+remToPx(1)}px`}onSelectFocus(){this.$(".label").classList.add("focused")}onSelectBlur(){this.$(".label").classList.remove("focused")}renderCountryCodesSelect(){return x`
            <select
                @change=${this.onSelectChange}
                @focus=${this.onSelectFocus}
                @blur=${this.onSelectBlur}
            >
                ${this.callingCodes.map(w=>x`
                        <option value=${w.iso_code}>
                            ${w.country_name}
                            (${this.formatCallingCode(w.calling_code)})
                        </option>
                    `)}
            </select>
        `}async onMobileNumberInput(w){w.stopImmediatePropagation();const q=w.detail.value.replace(/[^\d]/g,"");this.mobileNumber=q,this.$("qrcg-input").setValue(this.mobileNumber)}renderCountryCodesLabel(){return x`
            <div class="label" @click=${this.onLabelClick}>
                ${isEmpty(this.myCallingCode)?"--":this.formatCallingCode(this.myCallingCode)}
                ${this.renderCountryCodesSelect()}
            </div>
        `}render(){return x`
            ${this.renderCountryCodesLabel()}

            <qrcg-input
                placeholder=${this.placeholder}
                type="tel"
                pattern="\\d*"
                @on-input=${this.onMobileNumberInput}
                .value=${this.mobileNumber}
                .errors=${this.errors}
            >
                <slot></slot>
            </qrcg-input>
        `}}QrcgMobileInput.register();const style$16=":host{--button-background-color: white;--button-background-color-hover: var(--gray-0)}::slotted(svg){width:1.25rem;height:1.25rem}button{min-width:unset}";class QrcgAuthButton extends QRCGButton{static styleSheets=[...super.styleSheets,style$16];static get properties(){return{...super.properties,context:{},workflow:{}}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onAuthButtonClick),this.setAttribute("title",this.getTitle())}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onAuthButtonClick)}updated(w){w.has("workflow")&&this.syncUrl()}syncUrl(){this.workflow&&(this.href=url(`auth-workflow/${this.workflow.name()}/redirect`))}onAuthButtonClick(){this.loading=!0}getTitle(){return`${this.getMessage()} ${t$3`with`} ${this.workflow.title()}`}getMessage(){switch(this.context){case this.workflow.constructor.CONTEXT_SIGNIN:return t$3`Sign In`;case this.workflow.constructor.CONTEXT_SIGNUP:return t$3`Sign Up`;default:return t$3`Sign In`}}renderContent(){return x` <slot></slot> `}}window.defineCustomElement("qrcg-auth-button",QrcgAuthButton);class AbstractAuthWorkflow{static get CONTEXT_SIGNIN(){return 1}static get CONTEXT_SIGNUP(){return 2}name(){throw new Error("Must be defined in child workflow")}title(){return titleCase(this.name())}getConfigs(){return{enabled:{type:"balloon-selector",label:t$3`Enabled`,options:[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]},...this.getWorkflowConfigs()}}getWorkflowConfigs(){return{}}renderConfigs(){return Object.keys(this.getConfigs()).map(q=>this.renderConfigField(q))}renderCallbackInstructions(){return t$3`Use the following callback URL`}renderConfigField(w){const q=this.getConfigs()[w],D=this.getConfigKey(w);switch(q.type){case"text":return this.renderTextConfig(D,q);case"balloon-selector":return this.renderBalloonSelector(D,q);default:return this.renderTextConfig(D,q)}}renderBalloonSelector(w,q){return x`
            <qrcg-balloon-selector name=${w} .options=${q.options}>
                ${q.label}
            </qrcg-balloon-selector>
        `}renderTextConfig(w,q){return x`
            <qrcg-input name=${w} placeholder=${q.placeholder}>
                ${q.label}
            </qrcg-input>
        `}getConfigKey(w){return`auth-workflow.${this.name()}.${w}`}renderButton(w){return x`
            <qrcg-auth-button .workflow=${this} .context=${w}>
                ${this.renderIcon()}
            </qrcg-auth-button>
        `}renderIcon(){return o$2(this.getIconSvgString())}getIconSvgString(){return""}}class FacebookAuthWorkflow extends AbstractAuthWorkflow{name(){return"facebook"}getWorkflowConfigs(){return{client_id:{label:t$3`App ID`,placeholder:t$3`App ID`},client_secret:{label:t$3`App Secret`,placeholder:t$3`App Secret`}}}getIconSvgString(){return'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 40 40" style="enable-background:new 0 0 40 40;" xml:space="preserve"> <style type="text/css"> .st0{fill:url(#SVGID_1_);} .st1{fill:#FFFFFF;} </style> <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="-277.375" y1="406.6018" x2="-277.375" y2="407.5726" gradientTransform="matrix(40 0 0 -39.7778 11115.001 16212.334)"> <stop offset="0" style="stop-color:#0062E0"/> <stop offset="1" style="stop-color:#19AFFF"/> </linearGradient> <path class="st0" d="M16.7,39.8C7.2,38.1,0,29.9,0,20C0,9,9,0,20,0s20,9,20,20c0,9.9-7.2,18.1-16.7,19.8l-1.1-0.9h-4.4L16.7,39.8z" /> <path class="st1" d="M27.8,25.6l0.9-5.6h-5.3v-3.9c0-1.6,0.6-2.8,3-2.8h2.6V8.2c-1.4-0.2-3-0.4-4.4-0.4c-4.6,0-7.8,2.8-7.8,7.8V20 h-5v5.6h5v14.1c1.1,0.2,2.2,0.3,3.3,0.3c1.1,0,2.2-0.1,3.3-0.3V25.6H27.8z"/> </svg>'}}class GoogleAuthWorkflow extends AbstractAuthWorkflow{name(){return"google"}getWorkflowConfigs(){return{client_id:{label:t$3`Client ID`,placeholder:t$3`Client ID`},client_secret:{label:t$3`Client Secret`,placeholder:t$3`Client Secret`}}}getIconSvgString(){return'<svg xmlns="http://www.w3.org/2000/svg" width="705.6" height="720" viewBox="0 0 186.69 190.5" xmlns:v="https://vecta.io/nano"><g transform="translate(1184.583 765.171)"><path clip-path="none" mask="none" d="M-1089.333-687.239v36.888h51.262c-2.251 11.863-9.006 21.908-19.137 28.662l30.913 23.986c18.011-16.625 28.402-41.044 28.402-70.052 0-6.754-.606-13.249-1.732-19.483z" fill="#4285f4"/><path clip-path="none" mask="none" d="M-1142.714-651.791l-6.972 5.337-24.679 19.223h0c15.673 31.086 47.796 52.561 85.03 52.561 25.717 0 47.278-8.486 63.038-23.033l-30.913-23.986c-8.486 5.715-19.31 9.179-32.125 9.179-24.765 0-45.806-16.712-53.34-39.226z" fill="#34a853"/><path clip-path="none" mask="none" d="M-1174.365-712.61c-6.494 12.815-10.217 27.276-10.217 42.689s3.723 29.874 10.217 42.689c0 .086 31.693-24.592 31.693-24.592-1.905-5.715-3.031-11.776-3.031-18.098s1.126-12.383 3.031-18.098z" fill="#fbbc05"/><path d="M-1089.333-727.244c14.028 0 26.497 4.849 36.455 14.201l27.276-27.276c-16.539-15.413-38.013-24.852-63.731-24.852-37.234 0-69.359 21.388-85.032 52.561l31.692 24.592c7.533-22.514 28.575-39.226 53.34-39.226z" fill="#ea4335" clip-path="none" mask="none"/></g></svg>'}}class TwitterAuthWorkflow extends AbstractAuthWorkflow{name(){return"twitter"}title(){return t$3`Twitter`}getWorkflowConfigs(){return{client_id:{label:t$3`API Key`,placeholder:t$3`API Key`},client_secret:{label:t$3`API Key Secret`,placeholder:t$3`API Key Secret`}}}getIconSvgString(){return'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z" /></svg>'}}class AuthManager{#e=[];static#t;static instance(){return this.#t||(this.#t=new this),this.#t}registerAuthWorkflow(w){this.#e.push(w)}getWorkflows(){return this.#e.map(w=>new w)}getEnabledWorkflows(){return this.getWorkflows().filter(w=>this.isEnabled(w))}isEnabled(w){return this.enabledWorkflowsArray().indexOf(w.name())>-1}enabledWorkflowsArray(){return window.QRCG_ENABLED_WORKFLOWS??[]}renderButtons(w){return this.getEnabledWorkflows().map(q=>q.renderButton(w))}hasButtons(){return this.getEnabledWorkflows().length>0}}AuthManager.instance().registerAuthWorkflow(GoogleAuthWorkflow);AuthManager.instance().registerAuthWorkflow(TwitterAuthWorkflow);AuthManager.instance().registerAuthWorkflow(FacebookAuthWorkflow);const style$15=".disabled-message{font-weight:400;padding:1rem;background-color:var(--gray-0);font-size:.8rem;border-radius:0;margin-bottom:1rem}qrcg-app-logo{margin-top:2rem}.go-home{margin-top:1rem}.login-link{display:block;margin:1.5rem auto .5rem}.terms-link{color:var(--primary-0);text-decoration:none;margin-left:.25rem;display:inline-block}:host(.dir-rtl) .terms-link{margin-left:0;margin-right:.25rem}.auth-manager-container:not(.has-buttons){display:none}.auth-manager-container{display:flex;align-items:center;justify-content:center;gap:1.5rem}",style$14=".links-container{display:flex;justify-content:space-between;margin:1rem 0}.signup{text-align:right}.auth-manager-container:not(.has-buttons){display:none}.auth-manager-container{display:flex;align-items:center;justify-content:center;gap:1.5rem}[name]{margin-bottom:1rem}";class TraditionalLogin extends QRCGAccountPage{static tag="qrcg-traditional-login";static styleSheets=[...super.styleSheets,style$14];static get properties(){return{data:{},installed:{type:Boolean}}}constructor(){super(),this.data={email:"",password:""}}connectedCallback(){super.connectedCallback(),this.installed=new URLSearchParams(window.location.search).get("installed"),this.installed!=="true"&&(Config.get("app.env")==="local"?this.data={email:"mohammad.a.alhomsi@gmail.com",password:"password"}:Config.get("app.env")==="demo"&&(this.data={email:"admin@example.invalid",password:"password"}))}async submitForm(){return this.constructor.login.bind(this)(this.data)}static async login(w,q=!0){try{const D=async U=>{if(this.api)return this.api.call(U);const{response:G}=await U();return await G.clone().json()},{token:Q,user:O}=await D(()=>post("login",w));return this.installed&&this.addRedirectToSystemStatusPage(),window.dispatchEvent(new CustomEvent("qrcg-login:after-login",{detail:{user:O,token:Q,shouldDoRedirect:q}})),!0}catch(D){return console.error(D),!1}}getTitle(){return t$3`Hello Again!`}getDescription(){return t$3`Welcome back, you have been missed!`}addRedirectToSystemStatusPage(){const w=new URLSearchParams(location.search);w.set("redirect","/dashboard/system/status"),push(location.pathname+"?"+w.toString())}renderRegistrationLink(){if(Config.get("app.new_user_registration")!=="disabled")return x`
            <a href="/account/sign-up" class="signup"> ${t$3`Register`} </a>
        `}renderForm(){return x`
            <qrcg-custom-code-renderer position="Login Form: Before Inputs">
            </qrcg-custom-code-renderer>

            <div
                class="auth-manager-container ${e$1({"has-buttons":AuthManager.instance().hasButtons()})}"
            >
                ${AuthManager.instance().renderButtons(AbstractAuthWorkflow.CONTEXT_SIGNIN)}
            </div>

            <qrcg-input
                autofocus
                name="email"
                placeholder=${t$3`Enter your email`}
            ></qrcg-input>

            <qrcg-input
                name="password"
                type="password"
                placeholder=${t$3`Enter your password`}
            ></qrcg-input>

            <div class="links-container">
                <a href="/account/forgot-password">
                    ${t$3`Did you forget your password?`}
                </a>

                ${this.renderRegistrationLink()}
            </div>

            <qrcg-button type="submit">${t$3`Login`}</qrcg-button>
        `}}TraditionalLogin.register();class QRCGSignUp extends QRCGAccountPage{#e=new DirectionAwareController(this);static emailToVerify=null;static styleSheets=[...super.styleSheets,style$15];constructor(){super(),this.data={name:"",email:"",password:"",password_confirmation:"",terms_consent:!1}}getTitle(){return t$3`Create a New Account`}getDescription(){return t$3`Fill out the form below to get started`}async submitForm(){if(!this.data.terms_consent)return showToast(t$3`You must agree to the terms and conditions to use this website.`);try{let w=this.data;w=PluginManager.applyFilters(FILTER_SIGNUP_DATA,w);const{token:q}=await this.api.call(()=>post("register",w));storeToken(q),ConfigHelper.emailVerificationEnabled()?(QRCGSignUp.data=this.data,push("/account/verify-email")):(await TraditionalLogin.login(this.data),showToast(t$3`Account created successfully`))}catch(w){console.error(w)}}renderTitle(){return x`<h1>${t$3`Sign up`}</h1>`}renderDisabledForm(){return x`
            <div class="disabled-message">
                ${t$3`New registrations are disabled.`}
            </div>
        `}renderForm(){return Config.get("app.new_user_registration")==="disabled"?this.renderDisabledForm():x`
            <div
                class="auth-manager-container ${e$1({"has-buttons":AuthManager.instance().hasButtons()})}"
            >
                ${AuthManager.instance().renderButtons(AbstractAuthWorkflow.CONTEXT_SIGNUP)}
            </div>

            <qrcg-input autofocus name="name" placeholder=${t$3`your name`}>
                ${t$3`Name`}
            </qrcg-input>

            <qrcg-input name="email" placeholder=${t$3`email@provider.com`}>
                ${t$3`Email`}
            </qrcg-input>

            ${QrcgMobileInput.renderBasedOnConfigs()}

            <qrcg-input
                name="password"
                type="password"
                placeholder=${t$3`your password`}
            >
                ${t$3`Password`}
            </qrcg-input>

            <qrcg-input
                name="password_confirmation"
                type="password"
                placeholder=${t$3`confirm your password`}
            >
                ${t$3`Password confirmation`}
            </qrcg-input>

            <qrcg-checkbox name="terms_consent">
                ${t$3`I agree to the `}

                <a
                    class="terms-link"
                    href="${url("/terms-and-conditions")}"
                    target="_blank"
                >
                    ${t$3`terms and conditions`} </a
                >.
            </qrcg-checkbox>

            <qrcg-button type="submit">${t$3`Sign up`}</qrcg-button>

            <a href="${url("/account/login")}" class="login-link">
                ${t$3`Login instead`}
            </a>
        `}}window.defineCustomElement("qrcg-sign-up",QRCGSignUp);class QRCGVerifyEmail extends QRCGAccountPage{static get styles(){return[super.styles,i$3`
                :host {
                    user-select: none;
                    -webkit-user-select: none;
                }
            `]}constructor(){super()}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}updated(w){super.updated(w),w.has("data")&&this.onDataChanged()}onDataChanged(){this.data.otp.length>=5&&this.submitForm()}async submitForm(){try{const{result:w}=await this.api.call(()=>post("account/verify-otp-code",{otp:this.data.otp,email:QRCGSignUp.data.email}));if(!w)throw showToast(t$3`Invalid OTP`,"error"),new Error("Invalid OTP");await TraditionalLogin.login(QRCGSignUp.data)}catch(w){console.error(w),showToast(t$3`Error verifying OTP`,"error");return}}renderAccountPageForm(){return x`
            <qrcg-input name="otp" placeholder=${t$3`Enter OTP`}></qrcg-input>
        `}renderGoHomeLink(){return x`
            <a class="go-home" href="/account/sign-up">
                ${t$3`Go back to the registration page.`}
            </a>
        `}getTitle(){return t$3`Verify your email`}getDescription(){return t$3`We have sent you an email to verify your account, please enter the OTP below.`}}window.defineCustomElement("qrcg-verify-email",QRCGVerifyEmail);class QrcgSelectFolderInput extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{loading:{type:Boolean},name:{},value:{},folders:{type:Array},userId:{attribute:"user-id"}}}constructor(){super(),this.loading=!1,this.userId=null,this.folders=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onButtonClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onButtonClick)}async onButtonClick(){if(!this.loading)try{const w=await QrcgSelectFolderModal.open({value:isArray$1(this.value)?this.value:[],userId:this.userId,multi:!0});this.fireOnInput(w)}catch{}}updated(w){w.has("value")&&(isEmpty(this.value)?this.folders=null:this.fetchFolders())}async fetchFolders(){if(!isEmpty(this.value)){try{this.loading=!0;const{response:w}=await get(`folders/${this.userId}`),q=await w.json();this.folders=q.filter(D=>this.value.find(Q=>Q==D.id))}catch{}this.loading=!1}}fireOnInput(w){this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:w}}))}renderName(){return isEmpty(this.folders)?t$3`Select Folder`:this.folders.length==1?this.folders[0].name:this.folders.length+" "+t$3`Folders`}render(){return x`
            <qrcg-button transparent .loading=${this.loading}>
                ${this.renderName()}
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-folder-input",QrcgSelectFolderInput);class QrcgSubusers extends i$1{form=new QRCGFormController(this);static styles=[i$3`
            :host {
                display: block;
            }

            .error-message,
            .no-users-message,
            .invited-users-limit-reached {
                padding: 1rem 0;
                text-align: center;
                color: var(--gray-2);
                margin-bottom: 2rem;
            }

            .invited-users-limit-reached {
                margin-bottom: 0;
            }

            .invite-user-form {
                display: flex;
                align-items: flex-end;
            }

            @media (max-width: 1300px) {
                .invite-user-form {
                    flex-direction: column;
                    align-items: initial;
                }

                .invite-user-form > * {
                    margin-bottom: 1rem;
                }
            }

            .invite-user-form qrcg-button[type='submit'] {
                margin-bottom: 0.5rem;
            }

            qrcg-folder-input {
                margin-bottom: 0.5rem;
            }

            .invite-user-title {
                color: var(--gray-2);
                font-weight: normal;
            }

            [name] {
                margin-right: 1rem;
            }

            [name='email'] {
                flex: 1;
            }

            .user-row {
                display: flex;
                justify-content: space-between;
                background-color: var(--gray-0);
                padding: 1rem;
                margin-bottom: 1rem;
                align-items: center;
                font-weight: bold;
            }

            .user-row > * > span {
                font-weight: normal;
                display: inline-block;
                margin-right: 0.5rem;
                color: var(--gray-2);
            }

            .delete-user {
                position: relative;
            }

            .delete-button {
                position: absolute;
                right: 0;
                bottom: 0;
                transform: translateY(50%);
            }

            .delete-button::part(button) {
                padding: 0.5rem;
                min-width: 0;
            }

            .delete-button qrcg-icon {
                width: 1.5rem;
                height: 1.5rem;
            }

            .user-list {
                margin-bottom: 2rem;
            }

            .loader-container {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .loader-container qrcg-loader {
                margin: auto;
                transform: scale(0.5);
            }
        `];static get properties(){return{user:{type:Object},subUsers:{type:Array},data:{type:Object},userId:{attribute:"user-id"},fetchLoading:{type:Boolean},saveLoading:{type:Boolean}}}constructor(){super(),this.userId=null,this.user={},this.subUsers=[],this.data={},this.saveLoading=!1,this.fetchLoading=!0}connectedCallback(){super.connectedCallback(),setTimeout(()=>this.fetchData()),this.addEventListener("keypress",this.blockEnter),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keypress",this.blockEnter),this.removeEventListener("on-input",this.onInput)}onInput=w=>{w.stopImmediatePropagation(),w.preventDefault(),this.form.onInput(w)};blockEnter=w=>{w.key==="Enter"&&(w.stopImmediatePropagation(),w.preventDefault())};updated(w){w.has("userId")&&this.fetchData(),w.has("saveLoading")&&this.syncSaveLoading()}syncSaveLoading(){this.shadowRoot.querySelectorAll("[name], qrcg-button").forEach(q=>{q.loading=this.saveLoading})}async fetchData(){if(!isEmpty(this.userId)){this.fetchLoading=!0;try{await this.fetchUser(),await this.fetchSubUsers()}catch(w){console.error(w)}this.fetchLoading=!1}}async fetchUser(){const{response:w}=await get(`users/${this.userId}`);this.user=await w.json()}async fetchSubUsers(){const{response:w}=await get(`users/${this.userId}/sub-users`);this.subUsers=await w.json()}async deleteUser(w){const q=w.composedPath()[0],Q=parentMatches(q,"qrcg-button").user;await confirm$1({message:t$3`Are you sure you want to delete ${Q.name} account?`});try{await destroy(`users/${this.userId}/sub-users/${Q.id}`),showToast(t$3("Sub user deleted successfully")),this.fetchData()}catch{showToast(t$3("Error deleting sub user."))}}resetInputs(){this.data={},Array.from(this.shadowRoot.querySelectorAll("[name]")).forEach(q=>q.value=null)}async invite(){if(!this.data.folder_id)return showToast(t$3`You must select folder first.`);this.saveLoading=!0;try{await post(`users/${this.userId}/invite-sub-user`,this.data),this.resetInputs(),showToast(t$3`Invite sent successfully`),await this.fetchData()}catch(w){console.error(w)}this.saveLoading=!1}renderInvitedUsersLimitReachedMessage(){return x`
            <div class="invited-users-limit-reached">
                ${t$3`Invited users limit reached. Upgrade your plan to invite more users.`}
            </div>
        `}renderInviteUserForm(){return userInvitedUsersLimitReached(this.user,this.subUsers)?this.renderInvitedUsersLimitReachedMessage():x`
            <div class="invite-user-form">
                <qrcg-input name="name" placeholder=${t$3`Enter name`}>
                    ${t$3`Name`}
                </qrcg-input>

                ${QrcgMobileInput.renderBasedOnConfigs()}

                <qrcg-input
                    name="email"
                    placeholder="${t$3`Enter email`}"
                    type="email"
                >
                    ${t$3`User email`}
                </qrcg-input>

                <qrcg-folder-input
                    user-id=${this.userId}
                    name="folder_id"
                ></qrcg-folder-input>

                <qrcg-button type="submit" @click=${this.invite}>
                    ${t$3`Invite User`}
                </qrcg-button>
            </div>
        `}renderSuperAdminMessage(){return x`
            <div class="invited-users-limit-reached">
                ${t$3`Only regular subscribers can invite sub users. Admin cannot.`}
            </div>
        `}renderEmptySubUsersMessage(){return x`
            <div class="no-users-message">
                ${t$3`There is no sub users associated with this account.`}
                ${t$3`You can invite users using the form below.`}
            </div>
        `}renderUsersList(){return isEmpty(this.subUsers)?this.renderEmptySubUsersMessage():x`
            <div class="user-list">${this.subUsers.map(this.renderUser)}</div>
        `}renderSubUserFolderNames(w){const q=w.subuser_folders;return isEmpty(q)?"----":q.length>1?q.length+" "+t$3`Folders`:q[0].name}renderUser=w=>x`
            <div class="user-row">
                <div class="user-name">
                    <span>${t$3`Name`}</span>
                    ${w.name}
                </div>

                <div class="user-email">
                    <span>${t$3`Email`}</span>
                    ${w.email}
                </div>

                <div class="user-folder">
                    <span>${t$3`Folder`}</span>
                    ${this.renderSubUserFolderNames(w)}
                </div>

                <div class="delete-user">
                    <qrcg-button
                        class="delete-button"
                        transparent
                        @click=${this.deleteUser}
                        .user=${w}
                    >
                        <qrcg-icon mdi-icon=${mdiDelete}></qrcg-icon>
                    </qrcg-button>
                </div>
            </div>
        `;renderLoader(){return x`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderSubUserMessage(){return x`
            <div class="error-message">
                ${t$3`This user is already sub user.`}
            </div>
        `}renderContent(){return this.fetchLoading?this.renderLoader():isSuperAdmin(this.user)?this.renderSuperAdminMessage():this.user.is_sub?this.renderSubUserMessage():x`
            ${this.renderUsersList()}

            <!-- -->

            ${this.renderInviteUserForm()}
        `}render(){return this.userId?x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Sub Users`}</h2>

                ${this.renderContent()}
            </qrcg-form-section>
        `:null}}window.defineCustomElement("qrcg-subusers",QrcgSubusers);const style$13=".row{display:flex;align-items:center;justify-content:space-between;background-color:var(--gray-0);padding:1rem;margin-bottom:1rem}.row>*:first-child{font-weight:700}.row:last-child{margin-bottom:0}.actions{display:flex;margin-top:1rem}.user-section qrcg-file-input{margin-bottom:.5rem}.user-section qrcg-input:not(:last-of-type){margin-bottom:.5rem}qrcg-mobile-input{margin-bottom:.5rem}.checkboxes{display:flex}qrcg-checkbox:first-child{margin-right:1rem}.management{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}@media(max-width:900px){.management qrcg-button{width:100%;margin-top:1rem}}.cancel-subscription{--button-background-color: var(--danger);--button-background-color-hover: var(--danger-1)}.subscription-canceled-badge{display:inline-block;color:var(--gray-1);text-transform:uppercase;background-color:var(--warning-0);color:#000;font-size:.8rem;padding:.5rem;border-radius:.5rem;margin-left:1rem}.subscription-title{display:flex;align-items:center}.delete-my-account{--button-color: rgba(255, 0, 0, .8);--button-color-hover: var(--button-color);--button-color-active: var(--button-color);--button-color-focused: var(--button-color-hover);--button-background-color: rgba(255, 0, 0, .1);--button-background-color-hover: rgba(255, 0, 0, .2);--button-outline-focus: var(--primary-1);--button-box-shadow: .5rem .5rem 1rem rgba(0, 0, 0, .1);--button-hover-box-shadow: .5rem .5rem 1rem rgba(0, 0, 0, .15)}.delete-my-account::part(button){box-shadow:none}.invoice{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;padding:1rem}qrcg-custom-form-response-preview{line-height:2}qrcg-custom-form-response-preview::part(action-delete){display:none}",style$12="[slot=submit-button]{display:none}",style$11=".loading-container{align-items:center;justify-items:center;padding:1rem}:host[submit-loading] [name]{opacity:.5;pointer-events:none}[has-error]{margin-bottom:1rem}";class BaseField{field=null;static register(){new FormFieldManager().registerFormField(new this)}type(){}isType(w){return new RegExp(this.type(),"i").exec(w)}withField(w){return this.field=w,this}priority(){return 100}render(){}}class FormFieldManager{static __fields=[];get fields(){return FormFieldManager.__fields.sort((q,D)=>q.priority()-D.priority())}set fields(w){FormFieldManager.__fields=w}registerFormField(w){this.fields.push(w)}forModel(w){return this.fields.find(D=>D.isType(w.type))}}class TextField extends BaseField{type(){return".*"}priority(){return 1e5}render(){return x`
            <qrcg-input
                name=${this.field.id}
                placeholder=${this.field.name}
                part="text-input"
            >
                ${this.field.name}
            </qrcg-input>
        `}}TextField.register();class TextareaField extends BaseField{type(){return"textarea"}render(){return x`
            <qrcg-textarea name=${this.field.id} placeholder=${this.field.name}>
                ${this.field.name}
            </qrcg-textarea>
        `}}TextareaField.register();class CustomFormRenderer extends BaseComponent{static tag="qrcg-custom-form-renderer";static styleSheets=[...super.styleSheets,style$11];static EVENT_ON_SUBMIT=`${this.tag}:on-submit`;static EVENT_ON_MODEL_READY=`${this.tag}:on-model-ready`;fields=new FormFieldManager;static get properties(){return{...super.properties,formId:{attribute:"form-id"},responseId:{attribute:"response-id"},model:{},loading:{type:Boolean},submitLoading:{type:Boolean,attribute:"submit-loading"},response:{}}}constructor(){super(),this.model=new FormBuilderModel,this.formId=null,this.loading=!0,this.submitLoading=!0,this.response={}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}async syncResponseIfNeeded(){isEmpty(this.response)||(await sleep(10),this.response.fields.forEach(w=>{const q=this.$(`[name="${w.id}"]`);q&&(q.value=w.value)}))}onClick(w){const q=w.composedPath()[0];parentMatches(q,'[slot="submit-button"]')&&this.submit()}setSubmitLoading(w){const q=this.querySelector("[slot=submit-button]");q.loading=w,this.submitLoading=w}isFormValid(){return this.model.getFields().reduce((w,q)=>{if(q.isMandatory()){const D=this.$(`[name="${q.id}"]`);isEmpty(D.value)?(w=!1,D.setAttribute("has-error","true"),D.errors=[t$3`The field is required`]):(D.removeAttribute("has-error"),D.errors=[])}return w},!0)}async submit(){if(this.isFormValid()){this.setSubmitLoading(!0);try{const w=this.collectFormData();let q=null;if(isEmpty(this.response)){const{json:D}=await post("custom-forms/"+this.formId+"/response",{fields:w});q=D}else{const{json:D}=await put("custom-forms/response/"+this.response.id,{fields:w});q=D}return showToast(t$3`Submitted successfully.`),this.fireSubmitEvent(q),q}catch(w){throw console.error(w),w}finally{this.setSubmitLoading(!1)}}}fireSubmitEvent(w){this.dispatchEvent(new CustomEvent(CustomFormRenderer.EVENT_ON_SUBMIT,{bubbles:!0,composed:!0,detail:{response:w}}))}collectFormData(){return this.model.getFields().reduce((w,q)=>(q.value=this.$(`[name="${q.id}"]`)?.value,w.push(q),w),[])}updated(w){w.has("formId")&&(isEmpty(this.formId)||this.fetch())}async fetch(){this.loading=!0;try{const{json:w}=await get("custom-forms/"+this.formId);this.model=FormBuilderModel.fromObject(w),this.requestUpdate(),this.notifyModelReady(),this.syncResponseIfNeeded()}catch(w){console.log(w)}this.loading=!1}notifyModelReady(){this.dispatchEvent(new CustomEvent(CustomFormRenderer.EVENT_ON_MODEL_READY,{bubbles:!0,composed:!0}))}renderLoader(){return x`
            <div class="loading-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderFormField(w){return this.fields.forModel(w)?.withField(w).render()}renderFormFields(){return this.model.getFields().map(w=>this.renderFormField(w))}renderSubmitButton(){return x`
            <div class="submit-button">
                <slot name="submit-button"></slot>
            </div>
        `}render(){return this.loading?this.renderLoader():[this.renderFormFields(),this.renderSubmitButton()]}}CustomFormRenderer.register();class CustomFormRendererModal extends QrcgModal{static tag="qrcg-custom-form-renderer-modal";static styleSheets=[...super.styleSheets,style$12];static get properties(){return{...super.properties,formId:{}}}constructor(){super(),this.formId=null,this.affirmativeText=null,this.response=null}connectedCallback(){super.connectedCallback(),this.addEventListener(CustomFormRenderer.EVENT_ON_MODEL_READY,this.onFormRendereModelReady)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(CustomFormRenderer.EVENT_ON_MODEL_READY,this.onFormRendereModelReady)}getAffirmativeText(){return this.affirmativeText??t$3`Add To Contacts`}onEnterPress(w){w.preventDefault(),w.stopImmediatePropagation(),this.onAffirmativeClick()}onFormRendereModelReady(){this.requestUpdate()}getFormRenderer(){return this.$("qrcg-custom-form-renderer")}resolvedData(){return this.response}async affiramtivePromise(){if(!this.getFormRenderer().isFormValid())throw new Error;this.setLoading(!0);try{this.response=await this.getFormRenderer().submit()}catch(w){throw console.error(w),showToast(t$3`Error submitting the form.`),w}finally{this.setLoading(!1)}}renderTitle(){return this.getFormRenderer()?.model?.name}renderBody(){return x`
            <qrcg-custom-form-renderer
                form-id=${this.formId}
                .response=${this.response}
            >
                <qrcg-button slot="submit-button"> ${t$3`Save`} </qrcg-button>
            </qrcg-custom-form-renderer>
        `}}CustomFormRendererModal.register();window.CustomFormRendererModal=CustomFormRendererModal;class QrcgMyAccount extends BaseComponent{titleController=new QRCGTitleController(this);droplet=new Droplet;billing=new BillingMode;static styleSheets=[...super.styleSheets,style$13];static get properties(){return{data:{},userLoading:{type:Boolean},dynamicQRCodeCount:{},scanCount:{},cancelSubscriptionLoading:{type:Boolean},invoices:{type:Array},billingDetailsFormResponseId:{type:Number}}}constructor(){super(),this.userLoading=!1,this.dynamicQRCodeCount=0,this.scanCount=0,this.cancelSubscriptionLoading=!1,this.invoices=[],this.billingDetailsFormResponseId=null}connectedCallback(){super.connectedCallback(),window.addEventListener("auth:local-user-ready",this.loadData),this.addEventListener("on-input",this.onInput),this.updateBreadcumbs(),this.updatePageTitle(),this.fetchCount(),this.fetchData(),this.loadData(),console.log("my-account connected"),this.addEventListener(FormResponsePreview.EVENT_CHANGE_REQUESTED,this.onBillingDetailsChange)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("auth:local-user-ready",this.loadData),this.removeEventListener("on-input",this.onInput),this.removeEventListener(FormResponsePreview.EVENT_CHANGE_REQUESTED,this.onBillingDetailsChange)}async fetchInvoices(){const{json:w}=await get("invoices");this.invoices=w}async onBillingDetailsChange(w){await CustomFormRendererModal.open({formId:w.detail.response.custom_form_id,affirmativeText:t$3`Save`,response:w.detail.response}),this.$("qrcg-custom-form-response-preview").fetchResponse()}fetchCount(){const q=new QRCodeTypeManager$1().getDynamicSlugs().join(",");getTotalScans({type:q}).then(D=>this.scanCount=D),getTotalQRCodeCount({type:q}).then(D=>this.dynamicQRCodeCount=D)}async fetchData(){await this.fetchInvoices(),await this.fetchBillingDetailsResponseId()}async fetchBillingDetailsResponseId(){const{json:w}=await get("billing-collection/latest-billing-form-response");this.billingDetailsFormResponseId=w.id}loadData=()=>{this.data={user:isEmpty(loadUser())?{}:loadUser()}};onInput=w=>{w.composedPath()[0].matches('[name^="user"]')&&this.onUserInput(w)};onUserInput(w){this.data={...this.data,user:{...this.data.user??{},[w.detail.name.replace("user.","")]:w.detail.value}}}firstUpdated(){this.syncData()}updated(w){w.has("data")&&this.syncData()}syncData(){this.syncUserData()}syncUserData(){const w=this.data.user;if(!isEmpty(w))for(const q of Object.keys(w)){const D=this.shadowRoot.querySelector(`[name="user.${q}"]`);D&&(D.value=w[q])}}updatePageTitle(){this.titleController.pageTitle=t$3`My Account`}updateBreadcumbs(){QrcgDashboardBreadcrumbs.setLinks(this.breadcrumbs())}breadcrumbs(){return[{text:t$3`Dashboard`,href:userHomePage()},{text:t$3`My Account`}]}async saveUser(){this.userLoading=!0,this.resetValidationErrors();try{await put(`users/${this.data.user.id}`,removeEmptyFields(this.data.user)),this.successToast()}catch(w){w instanceof ValidationError&&this.handleValidationErrors(w)}finally{this.userLoading=!1}}successToast(){showToast(t$3`Saved successfully`)}async cancelSubscription(){try{await confirm$1({message:t$3`Are you sure you want to cancel your subscription?`})}catch{return}this.cancelSubscriptionLoading=!0;try{await post("account/cancel-subscription"),showToast(t$3`Subscription canceled successfully`)}catch{showToast(t$3`Error canceling subscription`)}this.cancelSubscriptionLoading=!1}handleValidationErrors(w){const q=w.errors(),D=Object.keys(q);for(const Q of D){const O=this.shadowRoot.querySelector(`[name="user.${Q}"]`);O&&(O.errors=q[Q])}}async onDeleteMyAccountClick(){await confirm$1({message:t$3`All of your QR codes will be deleted immediatly, you will have no longer access to the platform. Are you sure you want to continue?`});try{await destroy("users/"+loadUser().id),await showToast(t$3`Account deleted successfully.`),logout()}catch{showToast(t$3`There was an error deleting your account, please contact support.`)}}resetValidationErrors(){this.userInputs.forEach(w=>w.errors=[])}get userInputs(){return this.shadowRoot.querySelectorAll('[name^="user"]')}subscriptionRemainingDays(){if(!shouldEnforceSubscriptionRules())return"N/A";if(onTrial())return getTrialRemainingDays();const w=getPlanRemainingDays();return w>365?t$3`Unlimited`:Math.max(0,w)}renderProfileSection(){return x`
            <qrcg-form-section class="user-section">
                <h2 class="section-title">${t$3`Profile`}</h2>

                <qrcg-file-input name="user.profile_image_id">
                    ${t$3`Profile Image`}
                </qrcg-file-input>

                <qrcg-input name="user.name"> ${t$3`Name`} </qrcg-input>

                <qrcg-input disabled name="user.email">
                    ${t$3`Email`}
                </qrcg-input>

                ${QrcgMobileInput.renderBasedOnConfigs("user.mobile_number")}

                <qrcg-input
                    type="password"
                    name="user.password"
                    placeholder=${t$3`Leave empty to keep unchanged`}
                >
                    ${t$3`Password`}
                </qrcg-input>

                <qrcg-input
                    type="password"
                    name="user.password_confirmation"
                    placeholder=${t$3`Leave empty to keep unchanged`}
                >
                    ${t$3`Password Confirmation`}
                </qrcg-input>

                <div class="actions">
                    <qrcg-button
                        @click=${this.saveUser}
                        .loading=${this.userLoading}
                    >
                        ${t$3`Save`}
                    </qrcg-button>
                </div>
            </qrcg-form-section>
        `}renderCanceledBadge(){try{return currentSubscriptionIsCanceled()?x`
                <div class="subscription-canceled-badge">${t$3`Canceled`}</div>
            `:void 0}catch{return null}}renderCurrentPlanDetails(){if(!isEmpty(currentPlan()))return x`
            <div class="row">
                <div>${t$3`Plan`}</div>
                <div>${currentPlan().name}</div>
            </div>

            <div class="row">
                <div>${t$3`Remaining Days`}</div>
                <div>${this.subscriptionRemainingDays()}</div>
            </div>
        `}renderSubscriptionPlanSection(){if(!featureAllowed("account.hide-subscription-details-section"))return x`
            <qrcg-form-section>
                <h2 class="section-title subscription-title">
                    <div>${t$3`Subscription`}</div>
                    ${this.renderCanceledBadge()}
                </h2>
                <div class="details">
                    ${this.renderCurrentPlanDetails()}

                    <div class="row">
                        <div>${t$3`Allowed Dynamic QR Codes`}</div>
                        <div>
                            ${this.billing.formatTotalNumber(currentPlan()?.number_of_dynamic_qrcodes)}
                        </div>
                    </div>

                    <div class="row">
                        <div>${t$3`Used Dynamic QR Codes`}</div>
                        <div>${this.dynamicQRCodeCount??0}</div>
                    </div>

                    <div class="row">
                        <div>${t$3`Remaining Dynamic QR Codes`}</div>
                        <div>
                            ${this.billing.formatRemainingNumber(currentPlan()?.number_of_dynamic_qrcodes-this.dynamicQRCodeCount)}
                        </div>
                    </div>

                    <div class="row">
                        <div>${t$3`Allowed QR Code Scans`}</div>
                        <div>
                            ${this.billing.formatTotalNumber(currentPlan()?.number_of_scans)}
                        </div>
                    </div>

                    <div class="row">
                        <div>${t$3`Used Scans`}</div>
                        <div>${this.scanCount}</div>
                    </div>

                    <div class="row">
                        <div>${t$3`Remaining Scans`}</div>
                        <div>
                            ${this.billing.formatRemainingNumber(currentPlan()?.number_of_scans-this.scanCount)}
                        </div>
                    </div>

                    ${this.renderAiGenerationsNumbers()}
                    ${this.renderSubscriptionManagement()}
                </div>
            </qrcg-form-section>
        `}renderAiGenerationsNumbers(){if(!this.droplet.isSmall()&&window.QRCG_AI_IS_ENABLED)return x`
            <div class="row">
                <div>${t$3`AI Generations`}</div>
                <div>
                    ${loadUser().used_ai_generations} /
                    ${this.billing.formatTotalNumber(currentPlan()?.number_of_ai_generations)}
                </div>
            </div>
        `}renderCancelSubscriptionButton(){if(Config.get("account.cancel_subscription_button")!=="disabled"&&!currentSubscriptionIsCanceled())return x`
            <qrcg-button
                class="cancel-subscription"
                ?loading=${this.cancelSubscriptionLoading}
                @click=${this.cancelSubscription}
            >
                ${t$3`Cancel Subscription`}
            </qrcg-button>
        `}renderSubscriptionManagement(){if(!isSuperAdmin()&&!isSubUser())return x`
            <div class="management">
                ${this.renderCancelSubscriptionButton()}

                <qrcg-button
                    href="${urlWithQueryString(ConfigHelper.pricingPlansUrl(),"action=change-plan")}"
                >
                    ${t$3`Change Plan`}
                </qrcg-button>

                ${PluginManager.doActions(ACTION_MY_ACCOUNT_BELOW_SUBSCRIPTION_MANAGEMENT)}
            </div>
        `}renderSubUsersSection(){if(this.droplet.isLarge()&&permitted("user.invite")&&!this.billing.isAccountCredit())return x` <qrcg-subusers user-id=${loadUser()?.id}></qrcg-subusers> `}renderDynamicTypeLimits(w){return Object.keys(w).map(q=>{const D=new QRCodeTypeManager$1().find(q)?.name;if(D)return x`
                <div class="row">
                    <div>${t$3(D)}</div>
                    <div>${w[q]==-1?t$3`Unlimited`:w[q]}</div>
                </div>
            `})}renderQRCodeTypesSection(){if(!isCustomer())return;const w=currentPlan().dynamic_type_limits;if(!isEmpty(w))return x`
            <qrcg-form-section>
                <h2 class="section-title">
                    <div>${t$3`QR Code Type Limits Details`}</div>
                </h2>
                <div class="details">
                    ${this.renderDynamicTypeLimits(w)}
                </div>
            </qrcg-form-section>
        `}renderDangerZone(){return x`
            <qrcg-form-section>
                <h2 class="section-title">
                    <div>${t$3`Danger Zone`}</div>
                </h2>
                <qrcg-button
                    class="delete-my-account"
                    @click=${this.onDeleteMyAccountClick}
                >
                    ${t$3`Delete My Account`}
                </qrcg-button>
            </qrcg-form-section>
        `}renderInvoice(w){return x`
            <div class="invoice">
                <div class="invoice-date">${w.created_at}</div>
                <a href=${w.url} target="_blank"> ${t$3`View Invoice`} </a>
            </div>
        `}renderInvoicesSection(){if(!isEmpty(this.invoices))return x`
            <qrcg-form-section>
                <h2 class="section-title">
                    <div>${t$3`Invoices`}</div>
                </h2>

                ${this.invoices.map(w=>this.renderInvoice(w))}
            </qrcg-form-section>
        `}renderBillingDetailsSection(){if(!isEmpty(this.billingDetailsFormResponseId))return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Billing Details`}</h2>
                <qrcg-custom-form-response-preview
                    response-id=${this.billingDetailsFormResponseId}
                ></qrcg-custom-form-response-preview>
            </qrcg-form-section>
        `}render(){return x`
            ${this.renderProfileSection()}

            <!--  -->
            ${this.renderSubscriptionPlanSection()}
            <!--  -->
            ${this.renderQRCodeTypesSection()}
            <!-- -->
            ${this.renderSubUsersSection()}
            <!--  -->
            ${this.renderBillingDetailsSection()}
            <!--  -->
            ${this.renderInvoicesSection()}
            <!--  -->
            ${this.renderDangerZone()}
        `}}window.defineCustomElement("qrcg-my-account",QrcgMyAccount);class QrcgMyAccountPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>

                <div slot="content">
                    <qrcg-my-account></qrcg-my-account>
                </div>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-my-account-page",QrcgMyAccountPage);class QrcgPiecexDemo extends i$1{static styles=[i$3`
            :host {
                position: fixed;
                top: 0;
                left: 0;
                bottom: 0;
                right: 0;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                background-color: var(--gray-0);
            }

            div {
                color: var(--primary-0);
                margin-bottom: 1rem;
            }
        `];connectedCallback(){super.connectedCallback(),localStorage.is_piecex_demo="true",setTimeout(()=>{push(url("/account/login"))},1500)}render(){return x`
            <div>Redirecting you now</div>
            <qrcg-loader></qrcg-loader>
        `}}window.defineCustomElement("qrcg-piecex-demo",QrcgPiecexDemo);class QrcgDashboardPage extends BaseComponent{titleController=new QRCGTitleController(this);connectedCallback(){super.connectedCallback(),window.addEventListener("qrcg-router:location-changed",this.onLocationChanged),this.updateNavigation()}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("qrcg-router:location-changed",this.onLocationChanged),this.titleController=null}pageTitle(){return""}updateTitle(){this.titleController&&(this.titleController.pageTitle=this.pageTitle(),console.log("updated page title. ",this.titleController.pageTitle))}breadcrumbs(){return QrcgDashboardBreadcrumbs.buildBreadcrumbFromCurrentPath()}updateBreadcumbs(){this.breadcrumbs()&&QrcgDashboardBreadcrumbs.setLinks(this.breadcrumbs())}onLocationChanged=async()=>{await new Promise(w=>setTimeout(w,0)),this.updateNavigation()};updateNavigation=()=>{this.updateTitle(),this.updateBreadcumbs()};renderBeforeContent(){}renderContent(){}renderTitle(){return s$3(this.titleController.pageTitle)}render(){return u$3`
            <qrcg-dashboard-layout>
                <span slot="title"> ${this.renderTitle()} </span>

                ${this.renderBeforeContent()}

                <div slot="content">${this.renderContent()}</div>
            </qrcg-dashboard-layout>
        `}}class QrcgHostedAccountUpgrade extends QrcgDashboardPage{static get tag(){return"qrcg-hosted-account-upgrade"}pageTitle(){return t$3`Upgrade`}renderTitle(){}renderContent(){return x`
            <qrcg-custom-code-renderer position="Account Upgrade: Hosted Upgrade Page"></qrcg-custom-code-renderer></qrcg-custom-code-renderer>
            `}}defineCustomElement(QrcgHostedAccountUpgrade.tag,QrcgHostedAccountUpgrade);class LoginTypeSelector extends BaseComponent{static tag="qrcg-login-type-selector";render(){return TraditionalLogin.renderSelf()}}LoginTypeSelector.register();class QRCGAccountRouter extends i$1{static get styles(){return i$3`
            :host {
                display: block;
            }
        `}ifLoggedIn(w){loggedIn()||w.preventDefault()}ifVerified(w){verified()||w.preventDefault()}loginRedirect(){const w=queryParam("redirect");return isEmpty(w)?homePage():w}render(){return x`
            <qrcg-route route="/account/login">
                <template>
                    <qrcg-login-type-selector></qrcg-login-type-selector>
                </template>
            </qrcg-route>

            <qrcg-route route="/account/sign-up">
                <template>
                    <qrcg-sign-up></qrcg-sign-up>
                </template>
            </qrcg-route>

            <qrcg-route route="/account/verify-email">
                <template>
                    <qrcg-verify-email></qrcg-verify-email>
                </template>
            </qrcg-route>

            <qrcg-route route="/account/email-verified">
                <template>
                    <qrcg-email-verified></qrcg-email-verified>
                </template>
            </qrcg-route>

            <qrcg-route route="/account/forgot-password">
                <template>
                    <qrcg-forgot-password></qrcg-forgot-password>
                </template>
            </qrcg-route>

            <qrcg-route route="/account/reset-password">
                <template>
                    <qrcg-reset-password></qrcg-reset-password>
                </template>
            </qrcg-route>

            <qrcg-protected-route route="/account/my-account">
                <template>
                    <qrcg-my-account-page></qrcg-my-account-page>
                </template>
            </qrcg-protected-route>

            <qrcg-protected-route route="/account/upgrade">
                <template>
                    <qrcg-hosted-account-upgrade></qrcg-hosted-account-upgrade>
                </template>
            </qrcg-protected-route>

            <qrcg-route route="/account/piecex-demo">
                <template>
                    <qrcg-piecex-demo></qrcg-piecex-demo>
                </template>
            </qrcg-route>

            <qrcg-redirect
                from="/account/login"
                to="${this.loginRedirect()}"
                @will-redirect=${this.ifLoggedIn}
            ></qrcg-redirect>

            <qrcg-redirect
                from="/account/sign-up"
                to="${homePage()}"
                @will-redirect=${this.ifLoggedIn}
            ></qrcg-redirect>

            <qrcg-redirect
                from="/account/forgot-password"
                to="${homePage()}"
                @will-redirect=${this.ifLoggedIn}
            ></qrcg-redirect>

            <qrcg-redirect
                from="/account/reset-password"
                to="${homePage()}"
                @will-redirect=${this.ifLoggedIn}
            ></qrcg-redirect>

            <qrcg-redirect
                from="/account/verify-email"
                to="${homePage()}"
                @will-redirect=${this.ifVerified}
            ></qrcg-redirect>

            <qrcg-redirect
                from="/account/email-verified"
                to="${homePage()}"
                @will-redirect=${this.ifVerified}
            ></qrcg-redirect>
        `}}window.defineCustomElement("qrcg-account-router",QRCGAccountRouter);const black="#000000",white="#ffffff",primaryColor="#1c57cb";class BannerState extends LitState{static get stateVars(){return{data:{},type:qrTypes[0].id,design:{fillType:"solid",module:"square",gradientType:"RADIAL",eyeExternalColor:black,eyeInternalColor:black,gradientStartColor:QRCGColorPicker.presetColors[1],gradientEndColor:QRCGColorPicker.presetColors[0],eyeColor:black,foregroundColor:black,frame:"none",logoScale:.2,logoPositionX:.5,logoPositionY:.5,logoRotate:0,logoBackground:!0,logoBackgroundFill:"#fff",logoUrl:"",logoType:"preset",logoBackgroundScale:1.3,logoBackgroundShape:"circle",backgroundEnabled:!0,backgroundColor:white,finder:"default",finderDot:"default",advancedShape:"none",advancedShapeDropShadow:!0,advancedShapeFrameColor:black,fontFamily:"Raleway",text:t$3("SCAN ME"),textColor:white,textBackgroundColor:primaryColor,textSize:1}}}}const state=new BannerState;class TypeSelector extends observeState(i$1){_customStyleInjector=new CustomStyleInjector(this);#e=new DirectionAwareController(this);static get styles(){return i$3`
            :host {
                display: block;
                overflow: hidden;
            }

            .container {
                display: flex;
                flex-wrap: wrap;
                margin-right: -0.5rem;
            }

            qrcg-icon {
                width: 1.2rem;
                height: 1.2rem;
            }

            button {
                display: flex;
                align-items: center;
                justify-content: center;
                -webkit-appearance: none;
                appearance: none;
                border: 0;
                cursor: pointer;
                padding: 0.25rem 0.6rem;
                background-color: transparent;
                border-bottom: 2px solid var(--gray-1);
                font-weight: bold;
                margin: 0.5rem 0.5rem 0.25rem 0;
                font-size: 0.6rem;
                letter-spacing: 1px;
                flex: 1;
                min-width: max-content;
                user-select: none;
                -webkit-user-select: none;
                -webkit-tap-highlight-color: transparent;
                /** prevent zoom on multiple tap */
                touch-action: manipulation;
                color: var(--dark);
                font-family: var(--qrcg-font-family);
            }

            :host(.dir-rtl) button {
                font-family: var(--qrcg-rtl-font-family);
            }

            :host(.dir-rtl) button {
                letter-spacing: 0;
            }

            button * {
                cursor: pointer;
            }

            button:focus {
                outline: 0;
                border-bottom-color: black;
            }

            button:hover,
            button.active {
                background-color: var(--gray-0);
                border-bottom-color: black;
            }

            button:active {
                color: black;
            }

            qrcg-icon {
                margin-right: 0.5rem;
                opacity: 0.5;
                min-width: 1rem;
                min-height: 1rem;
            }

            :host(.dir-rtl) qrcg-icon {
                margin-left: 0.5rem;
                margin-right: 0;
            }

            button:hover qrcg-icon,
            button.active qrcg-icon {
                opacity: 1;
            }

            .text {
                white-space: nowrap;
            }
        `}static get properties(){return{types:{type:Array}}}constructor(){super(),this.types=getAvailableQrCodeTypes()}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick(w){const q=parentMatches(w.composedPath()[0],"[type-id]");q&&this.onTypeClick(w,q.qrType)}onTypeClick(w,q){w.preventDefault(),w.stopImmediatePropagation();let Q=(window.QRCG_QR_TYPE_CONFIGS||{})[`qrType.${q.id}.url`];if(Q){Q[0]!="/"&&(Q="/"+Q),push(Q);return}this._setSelectedType(q)}_setSelectedType(w){state.type=w.id,this.dispatchEvent(new CustomEvent("selected-type-changed",{detail:{selectedType:w}}))}renderIcon(w){return w.svgIcon?x`<qrcg-icon icon=${w.svgIcon}></qrcg-icon>`:x`<qrcg-icon mdi-icon=${w.icon}></qrcg-icon>`}render(){return x`
            <div class="container">
                ${this.types.map(w=>x`
                            <button
                                class=${e$1({active:w.id===state.type})}
                                .qrType=${w}
                                type-id=${w.id}
                            >
                                ${this.renderIcon(w)}

                                <div class="text">${t$3(w.name)}</div>
                            </button>
                        `)}
            </div>
        `}}window.defineCustomElement("qrcg-type-selector",TypeSelector);class QRCGSelector extends i$1{static get properties(){return{selected:{type:Boolean},name:{type:String}}}constructor(){super()}render(){return this.selected?x`<slot></slot>`:x``}}window.defineCustomElement("qrcg-selector",QRCGSelector);class SelectorHost extends i$1{static get properties(){return{selectedItem:{attribute:"selected-item"}}}willUpdate(){this._updateSelection()}_updateSelection(){this.renderRoot.querySelector("slot")?.assignedElements({flatten:!0})?.filter(D=>D.matches("qrcg-selector"))?.forEach(D=>{D.selected=D.name===this.selectedItem})}connectedCallback(){super.connectedCallback(),setTimeout(()=>{this._updateSelection()},0)}render(){return x`<slot></slot>`}}window.defineCustomElement("qrcg-selector-host",SelectorHost);class QRCGTextArea extends BaseInput{#e=new DirectionAwareController(this);static get styles(){return[super.styles,i$3`
                :host {
                    display: flex;
                    flex-direction: column;
                }

                label {
                    font-size: 0.8rem;
                    margin-bottom: 0.5rem;
                    font-weight: bold;
                    letter-spacing: 1px;
                    user-select: none;
                    -webkit-user-select: none;
                }

                textarea {
                    overflow: scroll;
                    outline: 0;
                    border: 0;
                    font-family: var(--qrcg-font-family);
                    resize: vertical;
                    line-height: 1.6;
                    margin-bottom: 1rem;
                    -ms-overflow-style: none; /* Internet Explorer 10+ */
                    scrollbar-width: none; /* Firefox */
                }

                :host(.dir-rtl) textarea {
                    font-family: var(--qrcg-rtl-font-family);
                }

                textarea::-webkit-scrollbar {
                    display: none; /* Safari and Chrome */
                }

                .mode-hero {
                    font-size: calc(1.5rem + 3 * ((100vw - 360px) / 1240));
                    line-height: calc(2rem + 3 * ((100vw - 360px) / 1240));
                    font-weight: bold;
                    resize: none;
                }

                .mode-form-control {
                    font-size: 1rem;
                    padding: 0.5rem 0.8rem;
                    border: 2px solid var(--gray-1);
                    border-radius: 0.5rem;
                    -webkit-tap-highlight-color: transparent;
                }

                .mode-hero::placeholder {
                    color: var(--gray-1);
                }

                .mode-form-control::placeholder {
                    color: var(--gray-1);
                    font-weight: bold;
                    font-style: italic;
                }

                .mode-form-control:focus {
                    border-color: var(--gray-2);
                    outline: 0;
                }

                .counter {
                    position: absolute;
                    bottom: 1.5rem;
                    right: 0.5rem;
                    font-size: 0.7rem;
                    background-color: white;
                    user-select: none;
                    -webkit-user-select: none;
                    pointer-events: none;
                }

                .counter-current.danger {
                    color: var(--danger);
                }
            `]}static get properties(){return{...super.properties,mode:{type:String},rows:{},maxLength:{attribute:"maxlength"}}}constructor(){super(),this.mode="form-control",this.value=""}connectedCallback(){super.connectedCallback()}firstUpdated(){super.firstUpdated(),this.hasAttribute("autofocus")&&this.focus()}renderLabel(){return this.mode==="form-control"?x`
                  <label for="textarea-${this.name}">
                      <slot></slot>
                  </label>
              `:x``}renderCharacterCounter(){const w=this.value||"";if(!this.maxLength)return null;const q=this.maxLength-w.length<this.maxLength/6?" danger":"";return x`
            <div class="counter">
                <span class="counter-current${q}"> ${w.length} </span>
                /
                <span> ${this.maxLength} </span>
            </div>
        `}async focus(){await this.updateComplete,this.shadowRoot.querySelector("textarea").focus()}renderInput(){return x`
            <textarea
                id="textarea-${this.name}"
                @input=${this._input}
                placeholder=${this.placeholder}
                name=${this.name}
                class="mode-${this.mode}"
                .disabled=${this.disabled}
                .value=${this.value||""}
                rows=${this.rows}
                part="textarea"
                maxlength="${this.maxLength}"
            ></textarea>

            ${this.renderCharacterCounter()}
        `}scrollToBottom(){const w=this.shadowRoot.querySelector("textarea");w.scrollTop=w.scrollHeight}}window.defineCustomElement("qrcg-textarea",QRCGTextArea);class QRCGEmailForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Sends an email with predefined message`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-input name="email" placeholder="${t$3`your email`}">
                    ${t$3`Email`}
                </qrcg-input>

                <qrcg-input name="subject" placeholder="${t$3`your subject`}">
                    ${t$3`Subject`}
                </qrcg-input>

                <qrcg-textarea name="message" placeholder="${t$3`your message`}">
                    ${t$3`Message`}
                </qrcg-textarea>

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-email-form",QRCGEmailForm);class QRCGSMSForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Sends an sms with predefined message`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-input name="phone" placeholder="${t$3`your phone number`}">
                    ${t$3`Phone number`}
                </qrcg-input>

                <qrcg-textarea name="message" placeholder="${t$3`your message`}">
                    ${t$3`Message`}
                </qrcg-textarea>

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-sms-form",QRCGSMSForm);class QRCGTextForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: flex;
                flex-direction: column;
            }

            qrcg-textarea {
                margin: 2rem 0;
            }
        `}static get properties(){return{data:{},submitOnInput:{type:Boolean,attribute:"submit-on-input"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment> ${t$3`Displays a plain text`} </qrcg-form-comment>
            <qrcg-form>
                <qrcg-textarea
                    placeholder="${t$3`Enter your text`}"
                    mode="hero"
                    name="text"
                ></qrcg-textarea>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-text-form",QRCGTextForm);class QRCGFormComment extends i$1{static get styles(){return i$3`
            :host {
                display: grid;
                grid-template-columns: 1fr;
                padding: 1rem;
                background-color: var(--gray-0);
                color: var(--dark);
                grid-gap: 0.25rem;
                line-height: 1.6;
                font-size: 0.8rem;
            }

            qrcg-icon {
                display: none;
                width: 1.5rem;
                height: 1.5rem;
            }

            .usecase {
                display: none;
            }

            @media (min-width: 850px) {
                :host {
                    align-items: center;
                    grid-gap: 1rem;
                    grid-template-areas: 'icon label content';
                    grid-template-columns: 24px auto 1fr;
                }

                qrcg-icon {
                    grid-area: icon;
                    display: block;
                }

                .content {
                    grid-area: content;
                }

                .usecase {
                    display: inline-block;
                    font-weight: bold;
                }
            }
        `}static get properties(){return{label:{},mdiIcon:{attribute:"mdi-icon"}}}constructor(){super(),this.label=t$3`Usecase`,this.mdiIcon=mdiHelpCircle}render(){return x`
            <qrcg-icon mdi-icon=${this.mdiIcon}></qrcg-icon>
            <span class="usecase">${this.label}</span>
            <div class="content">
                <slot></slot>
            </div>
        `}}window.defineCustomElement("qrcg-form-comment",QRCGFormComment);class QRCGURLForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: flex;
                flex-direction: column;
            }

            qrcg-textarea {
                margin-top: calc(100vw / 50);
            }
        `}static get properties(){return{data:{},submitOnInput:{type:Boolean,attribute:"submit-on-input"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Opens the URL after scanning`}
            </qrcg-form-comment>
            <qrcg-form>
                <qrcg-textarea
                    placeholder=${t$3`Enter your website address`}
                    mode="hero"
                    name="url"
                    value=${this.data.url}
                ></qrcg-textarea>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-url-form",QRCGURLForm);const style$10=":host{display:inline-flex;cursor:pointer;user-select:none;-webkit-user-select:none;touch-action:manipulation;align-items:center;font-size:.8rem;font-weight:700;padding:.5rem}qrcg-icon{margin-right:.5rem;width:1.5rem;height:1.5rem}qrcg-icon.checked{color:var(--success-0)}:host(.dir-rtl) qrcg-icon{margin-right:0;margin-left:.5rem}label{cursor:pointer;display:flex;align-items:center}";class QRCGCheckBox extends BaseComponent{static tag="qrcg-checkbox";static styleSheets=[...super.styleSheets,style$10];#e=new DirectionAwareController(this);static get properties(){return{value:{type:Boolean},name:{}}}constructor(){super(),this.value=!1}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.addEventListener("keypress",this.onKeyPress)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),this.removeEventListener("keypress",this.onKeyPress)}onKeyPress=w=>{(w.key==="Enter"||w.key===" ")&&(w.stopImmediatePropagation(),w.preventDefault(),this.onClick())};onClick=()=>{this.value=!this.value,this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{value:this.value,name:this.name}}))};render(){const w=this.value?mdiCheckboxMarked:mdiCheckboxBlankOutline,q=this.value?"checked":"";return x`
            <qrcg-icon
                tabindex="0"
                mdi-icon=${w}
                part="icon"
                class=${q}
            ></qrcg-icon>

            <label part="label"><slot></slot></label>
        `}}QRCGCheckBox.register();class QRCGRadioGroup extends i$1{static get styles(){return i$3`
            :host {
                display: grid;
                align-items: center;
                grid-gap: 1rem;
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }
        `}static get properties(){return{name:{},value:{}}}connectedCallback(){super.connectedCallback(),this.addEventListener("radio-click",this._onRadioClick),setTimeout(()=>{this._setValue(this.value)},0)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("radio-click",this._onRadioClick)}radios(){return this.renderRoot.querySelector("slot:not([name=label])").assignedElements({flatten:!0}).filter(q=>q.matches("qrcg-radio"))}radio(w){return isEmpty(w)?this.radios()[0]:this.radios().find(q=>q.value===w)}_onRadioClick=w=>{this._setValue(w.detail.value),this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{value:this.value,name:this.name}}))};_setValue(w){this.radios().forEach(q=>q.checked=!1),this.radio(w).checked=!0,this.value=w}render(){return x`
            <slot name="label"></slot>

            <slot></slot>
        `}}window.defineCustomElement("qrcg-radiogroup",QRCGRadioGroup);class QRCGRadio extends i$1{#e=new DirectionAwareController(this);static get styles(){return i$3`
            :host {
                display: inline-flex;
                cursor: pointer;
                user-select: none;
                -webkit-user-select: none;
                touch-action: manipulation;
                align-items: center;
                font-size: 0.8rem;
                font-weight: bold;
            }

            qrcg-icon {
                margin-right: 0.5rem;
            }

            :host(.dir-rtl) qrcg-icon {
                margin-right: 0;
                margin-left: 0.5rem;
            }

            label {
                cursor: pointer;
            }
        `}static get properties(){return{value:{type:String},checked:{type:Boolean}}}constructor(){super()}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick=()=>{this.dispatchEvent(new CustomEvent("radio-click",{bubbles:!0,composed:!0,detail:{value:this.value}}))};render(){const w=this.checked?mdiRadioboxMarked:mdiRadioboxBlank;return x`
            <qrcg-icon mdi-icon=${w}></qrcg-icon>
            <label><slot></slot></label>
        `}}window.defineCustomElement("qrcg-radio",QRCGRadio);class QRCGWIFIForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
                grid-template-areas:
                    'ssid hidden'
                    'password password'
                    'type type';

                grid-template-columns: 1fr auto;
            }

            [name='password'] {
                grid-area: password;
            }

            [name='type'] {
                grid-area: type;
            }

            [name='hidden'] {
                margin-top: 1rem;
            }

            qrcg-button {
                margin: auto;
                grid-column: 1 / span 2;
            }

            label {
                user-select: none;
                -webkit-user-select: none;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Connects your guests to your local network`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-input name="ssid" placeholder=${t$3`your network name`}>
                    ${t$3`Network name`}
                </qrcg-input>

                <qrcg-checkbox name="hidden"> ${t$3`Hidden`} </qrcg-checkbox>

                <qrcg-input
                    name="password"
                    placeholder=${t$3`network password`}
                    type="password"
                >
                    ${t$3`Password`}
                </qrcg-input>

                <qrcg-radiogroup value="nopass" name="type">
                    <label slot="label">${t$3`Encryption`}</label>
                    <qrcg-radio value="nopass">${t$3`None`}</qrcg-radio>
                    <qrcg-radio value="WPA">${t$3`WPA/WPA2`}</qrcg-radio>
                    <qrcg-radio value="WEP">${t$3`WEP`}</qrcg-radio>
                </qrcg-radiogroup>

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-wifi-form",QRCGWIFIForm);class QRCGWhatsAppForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Get custom WhatsApp messages from people by scanning the QR code.`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-input
                    name="mobile_number"
                    placeholder="${t$3`your number`}"
                >
                    ${t$3`Mobile number`}
                </qrcg-input>

                <qrcg-textarea
                    name="message"
                    placeholder="${t$3`e.g. Inquiry about: [product name]`}"
                >
                    ${t$3`Default message`}
                </qrcg-textarea>

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-whatsapp-form",QRCGWhatsAppForm);class QRCGFaceTimeForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Get custom Facetime calls from people by scanning the QR code.`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-input
                    name="target"
                    placeholder="${t$3`your number or email`}"
                >
                    ${t$3`Mobile number or email`}
                </qrcg-input>

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-facetime-form",QRCGFaceTimeForm);class QRCGLocationForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
                padding: 0.1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }

            .app-comment {
                background-color: var(--gray-0);
                font-size: 0.8rem;
                padding: 0.5rem;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}renderAppComment(){let w="";switch(this.data.application){case"google_maps":w=t$3`Opens Google Maps with the specified location`;break;case"waze":w=t$3`Opens Waze with the specified location`;break;default:w=t$3`Opens default map app installed on the mobile`;break}return x` <div class="app-comment">${w}</div>`}render(){return x`
            <qrcg-form-comment>
                ${t$3`Embed location coordinates for people to get directions more easily.`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-input
                    name="latitude"
                    placeholder="${t$3`1231564897`}"
                    type="number"
                >
                    ${t$3`Latitude`}
                </qrcg-input>

                <qrcg-input
                    name="longitude"
                    placeholder="${t$3`1231564897`}"
                    type="number"
                >
                    ${t$3`Longitude`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="application"
                    value=${"default"}
                    .options=${[{name:t$3`Default`,value:"default"},{name:t$3`Google Maps`,value:"google_maps"},{name:t$3`Waze`,value:"waze"}]}
                >
                    ${t$3`Application`}
                </qrcg-balloon-selector>

                ${this.renderAppComment()}

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-location-form",QRCGLocationForm);class QrcgTimezoneSelect extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            qrcg-select {
                width: 100%;
            }
        `];static get properties(){return{name:{},value:{},timezones:{type:Array}}}connectedCallback(){super.connectedCallback(),this.fetchTimezones()}disconnectedCallback(){super.disconnectedCallback()}async fetchTimezones(){const{response:w}=await get("system/timezones");let q=await w.json();this.timezones=q}render(){return isEmpty(this.timezones)?x`<qrcg-select disabled>${t$3`Loading ...`}</qrcg-select>`:x`
            <qrcg-select name=${this.name} value=${this.value}>
                ${this.timezones.map(w=>x`<option>${w}</option>`)}

                <span slot="label">
                    <slot>${t$3`Timezone`}</slot>
                </span>
            </qrcg-select>
        `}}window.defineCustomElement("qrcg-timezone-select",QrcgTimezoneSelect);class QRCGEventForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
                padding: 0.1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Generate a custom life calendar event and embed it into QR code.`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-input name="event_name" placeholder="${t$3`Special event`}">
                    ${t$3`Event name`}
                </qrcg-input>

                <qrcg-input name="organizer_name" placeholder="Organizer name">
                    ${t$3`Organizer name`}
                </qrcg-input>

                <qrcg-input
                    name="organizer_email"
                    placeholder="Organizer email"
                    type="email"
                >
                    ${t$3`Organizer email`}
                </qrcg-input>

                <qrcg-input
                    name="location"
                    placeholder="${t$3`Event full address`}"
                >
                    ${t$3`Location (Venue)`}
                </qrcg-input>

                <qrcg-input
                    name="latitude"
                    placeholder="${t$3`1231564897`}"
                    type="number"
                >
                    ${t$3`Latitude`}
                </qrcg-input>

                <qrcg-input
                    name="longitude"
                    placeholder="${t$3`1231564897`}"
                    type="number"
                >
                    ${t$3`Longitude`}
                </qrcg-input>

                <qrcg-input
                    name="website"
                    placeholder="https://company.com/event-name"
                >
                    ${t$3`Event website`}
                </qrcg-input>

                <qrcg-input name="starts_at" type="datetime-local">
                    ${t$3`Start date`}
                </qrcg-input>

                <qrcg-input name="ends_at" type="datetime-local">
                    ${t$3`End date`}
                </qrcg-input>

                <qrcg-timezone-select name="timezone"></qrcg-timezone-select>

                <qrcg-textarea name="description">${t$3`Notes`}</qrcg-textarea>

                <qrcg-balloon-selector
                    name="frequency"
                    .options=${[{name:t$3`None`,value:"NONE"},{name:t$3`Yearly`,value:"YEARLY"},{name:t$3`Monthly`,value:"MONTHLY"},{name:t$3`Weekly`,value:"WEEKLY"},{name:t$3`Daily`,value:"DAILY"}]}
                >
                    ${t$3`Frequency`}
                </qrcg-balloon-selector>

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-event-form-deprecated",QRCGEventForm);class QRCGCryptoForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
                padding: 0.1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }

            .app-comment {
                background-color: var(--gray-0);
                font-size: 0.8rem;
                padding: 0.5rem;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Get paid in crypto from people by scanning the QR code.`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-balloon-selector
                    name="coin"
                    .options=${[{name:t$3`Bitcoin`,value:"bitcoin"},{name:t$3`Ethereum`,value:"ethereum"},{name:t$3`Bitcoin Cash`,value:"bitcoincash"},{name:t$3`Lite Coin`,value:"litecoin"},{name:t$3`Dash`,value:"dash"}]}
                >
                    ${t$3`Coin`}
                </qrcg-balloon-selector>

                <qrcg-input name="address" placeholder="Wallet address here">
                    ${t$3`Receiver Address`}
                </qrcg-input>

                <qrcg-input type="number" name="amount" placeholder="Amount">
                    ${t$3`Amount`}
                </qrcg-input>

                <qrcg-input name="message" placeholder="Optional message">
                    ${t$3`Message`}
                </qrcg-input>

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-crypto-form",QRCGCryptoForm);class QRCGPayPalForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
                padding: 0.1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }

            .app-comment {
                background-color: var(--gray-0);
                font-size: 0.8rem;
                padding: 0.5rem;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Get paid in PayPal from people by scanning the QR code.`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-balloon-selector
                    name="type"
                    .options=${[{name:t$3`Buy now`,value:"_xclick"},{name:t$3`Add to cart`,value:"_cart"},{name:t$3`Donations`,value:"_donations"}]}
                >
                    ${t$3`Payment type`}
                </qrcg-balloon-selector>

                <qrcg-input name="email" placeholder="Email address">
                    ${t$3`Email address`}
                </qrcg-input>

                <qrcg-input name="item_name" placeholder="Item Name">
                    ${t$3`Item Name`}
                </qrcg-input>

                <qrcg-input name="item_id" placeholder="Item ID">
                    ${t$3`Item ID`}
                </qrcg-input>

                <qrcg-input type="number" name="amount" placeholder="Amount">
                    ${t$3`Amount`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="currency"
                    .options=${[{name:"USD",value:"USD"},{name:"EUR",value:"EUR"},{name:"GBP",value:"GBP"},{name:"CAD",value:"CAD"}]}
                >
                    ${"Currency. Default (USD)"}
                </qrcg-balloon-selector>

                ${this.data.type!=="_donations"?x`
                          <qrcg-input
                              type="number"
                              name="shipping"
                              placeholder="${t$3`Shipping`}"
                          >
                              ${t$3`Shipping`}
                          </qrcg-input>

                          <qrcg-input
                              type="number"
                              name="tax"
                              placeholder="Tax rate"
                          >
                              ${t$3`Tax rate %`}
                          </qrcg-input>
                      `:null}

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-paypal-form",QRCGPayPalForm);class QRCGZoomForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
                padding: 0.1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Joins Zoom meeting after scanning.`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-input name="meeting_id" placeholder="Meeting ID">
                    ${t$3`Meeting ID`}
                </qrcg-input>

                <qrcg-input
                    name="meeting_password"
                    placeholder="Meeting Password"
                >
                    ${t$3`Meeting Password`}
                </qrcg-input>

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-zoom-form",QRCGZoomForm);class QRCGBrazilpixForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
                padding: 0.1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Receive payments using Brazillian PIX payment system.`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-input name="key" placeholder="email@example.com">
                    ${t$3`Beneficiary Key`}
                </qrcg-input>

                <qrcg-input name="name" placeholder="${t$3`Your name`}">
                    ${t$3`Beneficiary Name`}
                </qrcg-input>

                <qrcg-input name="city" placeholder="SAO PAULO">
                    ${t$3`City`}
                </qrcg-input>

                <qrcg-input
                    name="amount"
                    placeholder="100"
                    type="number"
                    min="0"
                    step="1"
                >
                    ${t$3`Amount`}
                </qrcg-input>

                <qrcg-input name="transaction_id" placeholder="20390923...">
                    ${t$3`Transaction ID`}
                </qrcg-input>

                <qrcg-input name="message" placeholder="...">
                    ${t$3`Message`}
                </qrcg-input>

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-brazilpix-form",QRCGBrazilpixForm);class QRCGCallForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Receive phone calls after scanning the QR code.`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-input name="phone" placeholder="${t$3`your phone number`}">
                    ${t$3`Phone number`}
                </qrcg-input>

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-call-form",QRCGCallForm);class QrcgTelegramForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Get direct Telegram messages after scanning the QR code.`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-input name="username" placeholder="${t$3`your username`}">
                    ${t$3`Telegram Username`}
                    <span slot="instructions"
                        >${t$3`Open Telegram app on your mobile, and go to Settings to setup or find your username, NOTE: this will not work without the username.`}</span
                    >
                </qrcg-input>

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-telegram-form",QrcgTelegramForm);class QrcgFacebookMessengerForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Get direct Facebook Messenger messages after scanning the QR code.`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-input
                    name="facebook_page_name"
                    placeholder="${t$3`your page name`}"
                >
                    ${t$3`Page Name`}
                    <span slot="instructions">
                        ${t$3`The Facebook Page linked to your messenger app. Could be your personal page or your business page.`}
                    </span>
                </qrcg-input>

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-facebookmessenger-form",QrcgFacebookMessengerForm);class QrcgWeChatForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Get direct WeChat messages after scanning the QR code.`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-input name="username" placeholder="${t$3`your username`}">
                    ${t$3`WeChat Username`}
                </qrcg-input>

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-wechat-form",QrcgWeChatForm);class QrcgViberForm extends i$1{controller=new QRCGTypeFormController(this);static get styles(){return i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            qrcg-button {
                margin: auto;
            }
        `}static get properties(){return{data:{},showSubmitButton:{type:Boolean,attribute:"show-submit-button"}}}constructor(){super(),this.data={}}render(){return x`
            <qrcg-form-comment>
                ${t$3`Get direct Viber messages after scanning the QR code.`}
            </qrcg-form-comment>

            <qrcg-form>
                <qrcg-input name="viber_number" placeholder="${t$3`your number`}">
                    ${t$3`Viber Number`}
                </qrcg-input>

                <qrcg-button type="submit" hidden>
                    ${t$3`Generate QR Code`}
                </qrcg-button>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-viber-form",QrcgViberForm);class QrcgEmailDynamicForm extends QRCGEmailForm{}defineCustomElement("qrcg-email-dynamic-form",QrcgEmailDynamicForm);class QrcgSmsDynamicForm extends QRCGSMSForm{}defineCustomElement("qrcg-sms-dynamic-form",QrcgSmsDynamicForm);const o=F=>F??E;class QRCGPreview extends observeState(i$1){_customStyleInjector=new CustomStyleInjector(this);urlBuilder=new QRCodePreviewUrlBuilder(this);static get styles(){return i$3`
            :host {
                display: flex;
                border-radius: 0.5rem;
                box-shadow: ${QRCGBox.boxShadow};
                align-items: center;
                justify-content: space-around;
                background-color: white;
                flex-direction: column;
                padding: 1rem 2rem;
            }

            qrcg-qrcode-image {
                width: 10rem;
                margin-bottom: 1rem;
            }

            .actions {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin-top: 1rem;
            }

            qrcg-icon {
                margin-right: 0.5rem;
            }

            .button-content {
                display: flex;
                align-items: center;
            }

            qrcg-color-picker::part(color-box) {
                width: 2rem;
                height: 1.5rem;
            }

            .customize-design-instructions {
                font-size: 0.8rem;
                margin-top: 1rem;
                text-align: center;
                color: var(--gray-2);
                line-height: 1.5;
                user-select: none;
                -webkit-user-select: none;
            }
        `}constructor(){super(),this._updatePreview=debounce(this._updatePreview.bind(this),500),this._reset=this._reset.bind(this)}static get properties(){return{previewUrl:{},downloadImageUrl:{},downloadSvgUrl:{},showingAdvancedDesigner:{type:Boolean}}}connectedCallback(){super.connectedCallback(),document.addEventListener("qrcg-banner-preview:update",this._updatePreview),document.addEventListener("qrcg-banner-preview:reset",this._reset)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("qrcg-banner-preview:update",this._updatePreview),document.removeEventListener("qrcg-banner-preview:reset",this._reset)}getQrCodeData(){return state.data}getQrCodeType(){return state.type}getQrCodeDesign(){return state.design}_reset(){this.previewUrl=null}_updatePreview(){this.urlBuilder.canBuildURL()?this.previewUrl=this.urlBuilder.buildURL():this.previewUrl=null}_onColorInput(w){state.design={...state.design,foregroundColor:w.detail.value,eyeExternalColor:w.detail.value,eyeInternalColor:w.detail.value},this._updatePreview()}_download(w){if(!loggedIn())return this.showSignupModal();if(!this.urlBuilder.canBuildURL())return showToast("Please fill the required details to be able to download.");if(w.currentTarget.getAttribute("download-type")!=="png")return push("/dashboard/qrcodes/new");const D=this.urlBuilder.buildURL();new SvgPngConverter(D,"qrcode.png").downloadPng()}requestShowAdvancedDesigner(){this.dispatchEvent(new CustomEvent("qrcg-website-banner:request-show-advanced-designer",{bubbles:!0,composed:!0}))}renderCustomizeDesignButton(){if(Config.get("frontpage.show_customize_design_button")!=="disabled")return x`
            <qrcg-button @click=${this.requestShowAdvancedDesigner}>
                ${t$3`Customize Design`}
            </qrcg-button>

            <div class="customize-design-instructions">
                ${t$3`Add logo, change patterns, add stickers, and many more.`}
            </div>
        `}render(){return x`
            <qrcg-qrcode-image
                url=${o(this.previewUrl===null?void 0:this.previewUrl)}
            ></qrcg-qrcode-image>
            <qrcg-color-picker @on-input=${this._onColorInput} name="color">
            </qrcg-color-picker>
            <div class="actions">${this.renderCustomizeDesignButton()}</div>
        `}}window.defineCustomElement("qrcg-preview",QRCGPreview);class QrcgTeaserForm extends i$1{static styles=[i$3`
            :host {
                display: block;
                padding: 1rem;
                text-align: center;
                background-color: var(--gray-0);
                user-select: none;
            }

            .message {
                margin-bottom: 1rem;
                font-weight: bold;
                color: var(--gray-2);
            }

            a {
                font-weight: bold;
                color: var(--primary-0);
                text-transform: uppercase;
                cursor: pointer;
            }
        `];onActionClick(){if(loggedIn()){window.location=url("/dashboard/qrcodes/new");return}showSubscriptionModal({title:t$3`Subscription Required`,message:t$3`Subscribe now to be able to use this type.`})}actionText(){return loggedIn()?t$3`Go to Dashboard`:t$3`Subscribe Now`}messageText(){return loggedIn()?t$3`You can create QR codes of this type from your dashboard area`:t$3`This type is available for subscribed users.`}render(){return x`
            <div class="container">
                <div class="message">${this.messageText()}</div>

                <a @click=${this.onActionClick}> ${this.actionText()} </a>
            </div>
        `}}window.defineCustomElement("qrcg-teaser-form",QrcgTeaserForm);class WebsiteBanner extends observeState(i$1){customStyleInjector=new CustomStyleInjector(this);typeManager=new QRCodeTypeManager$1;#e=new DirectionAwareController(this);static get styles(){return i$3`
            :host {
                position: relative;

                display: grid;
                grid-gap: 1rem;

                grid-template-columns: 100%;
            }

            @media (min-width: 980px) {
                :host {
                    grid-template-columns: 2fr 1fr;
                }

                :host([showing-advanced-designer]) {
                    grid-template-columns: 100%;
                }
            }

            .data-box {
                border-radius: 0.5rem;
                padding: 1rem;
                background-color: white;
                box-shadow: ${QRCGBox.boxShadow};
            }

            qrcg-preview {
                height: fit-content;
            }

            qrcg-qrcode-designer {
                background: white;
                width: 100%;
            }

            .advanced-designer-close {
                width: 3rem;
                height: 3rem;
                color: var(--gray-2);
                margin-left: auto;
                cursor: pointer;
            }

            .advanced-designer-close-button {
                margin-bottom: 1rem;
                margin-left: auto;
            }

            .advanced-designer-close-button::part(button) {
                border-radius: 50%;
                padding: 0;
                min-width: initial;
            }

            .advanced-designer-close-button::part(content) {
                display: flex;
            }

            .advanced-designer-close-button:hover .advanced-designer-close {
                color: black;
            }

            .designer-container {
                background-color: white;
                padding: 2rem;
            }

            .disabled-file-input-instructions {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                color: var(--gray-2);
            }

            .disabled-file-input-instructions qrcg-button {
                margin-top: 1rem;
            }

            .warning {
                background-color: var(--warning-0);
                font-size: 0.8rem;
                line-height: 1.5;
                padding: 0.5rem;
                margin-top: 1rem;
            }

            a {
                color: var(--primary-0);
                text-decoration: none;
                font-weight: bold;
            }

            .download {
                margin-top: 1rem;
            }

            .form-container {
                margin-top: 1rem;
            }
        `}static get properties(){return{types:{},showingAdvancedDesigner:{type:Boolean,reflect:!0,attribute:"showing-advanced-designer"},selectedTypeId:{attribute:"selected-type-id"}}}constructor(){super(),this.types=qrTypes,this.showingAdvancedDesigner=!1}connectedCallback(){super.connectedCallback(),this.addEventListener("on-submit",this.onSubmit),this.addEventListener("qrcg-website-banner:request-show-advanced-designer",this.onRequestShowAdvancedDesigner),this.addEventListener("on-input",this.onInput),this.defaultRandomColorsCount=QRCGColorPicker.randomColorsCount,QRCGColorPicker.randomColorsCount=4,QRCGQRCodeDesigner.validateShapeWith(this.validateShape),QRCGQRCodeDesigner.validateAdvancedShapeWith(this.validateShape)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-submit",this.onSubmit),this.removeEventListener("qrcg-website-banner:request-show-advanced-designer",this.onRequestShowAdvancedDesigner),this.removeEventListener("on-input",this.onInput),QRCGColorPicker.randomColorsCount=this.defaultRandomColorsCount,QRCGQRCodeDesigner.validateShapeWith(null),QRCGQRCodeDesigner.validateAdvancedShapeWith(null)}get selectedTypeId(){return state.type}set selectedTypeId(w){state.type=w}validateShape(){return!0}onInput(w){w.detail.name==="qrcg-qrcode-designer"&&(state.design=w.detail.value)}onRequestShowAdvancedDesigner=()=>{isEmpty(state.data)&&(state.data={text:"This is QR Code demo"},state.type="text"),window.scrollTo(0,0),setTimeout(()=>{this.showingAdvancedDesigner=!0})};onSubmit=w=>{state.data=w.detail.data,this.dispatchEvent(new CustomEvent("qrcg-banner-preview:update",{bubbles:!0,composed:!0}))};_resetPreview(){state.data={},this.dispatchEvent(new CustomEvent("qrcg-banner-preview:reset",{bubbles:!0,composed:!0}))}isTeaserType(w){return this.typeManager.isDynamic(w)&&w!="url"}renderCurrentTypeForm(){const w=this.selectedTypeId;if(this.isTeaserType(w))return u$3`<qrcg-teaser-form></qrcg-teaser-form>`;let q=`qrcg-${w}-form`,D="";return["url","text"].indexOf(w)>-1&&(D="submit-on-input"),q=s$3(`<${q} ${D} show-submit-button></${q}>`),u$3`${q}`}onAdvancedDesignerClose(){this.showingAdvancedDesigner=!1}renderDisabledFileInputInstructions(){return loggedIn()?u$3`
                <div class="disabled-file-input-instructions">
                    <div class="text">
                        ${t$3`Create QR Code from your dashboard to enable this feature`}
                    </div>
                    <qrcg-button href="/dashboard/qrcodes/new">
                        ${t$3`Create QR Code`}
                    </qrcg-button>
                </div>
            `:u$3`
            <div class="disabled-file-input-instructions">
                <div class="text">${t$3`Sign up now to enable this feature`}</div>
                <qrcg-button href="/account/sign-up">
                    ${t$3`Sign up`}
                </qrcg-button>
            </div>
        `}onDownloadClick(){showSubscriptionModal({title:t$3("Sign up now"),message:shouldEnforceSubscriptionRules()?t$3("Sign up for a free trial to enable all features."):t$3`Create a free account to enable all features.`,link:url("/account/sign-up"),affirmativeText:t$3("Sign up")})}renderBelowPreviewImage(){return loggedIn()?u$3`
                <div class="warning">
                    ${t$3`Create QR codes from `}

                    <a href="/dashboard/qrcodes/new">
                        ${t$3`the dashboard area`}
                    </a>

                    ${t$3` to be able to download.`}
                </div>
            `:u$3`
            <qrcg-button @click=${this.onDownloadClick} class="download">
                ${t$3`Download now`}
            </qrcg-button>
        `}homePageGeneratorEnabled(){return Config.get("homepage.homepage-generator")!="disabled"}render(){if(this.homePageGeneratorEnabled())return this.showingAdvancedDesigner?u$3`
                <qrcg-button
                    class="advanced-designer-close-button"
                    transparent
                    @click=${this.onAdvancedDesignerClose}
                >
                    <qrcg-icon
                        mdi-icon=${mdiCloseCircle}
                        class="advanced-designer-close"
                    ></qrcg-icon>
                </qrcg-button>
                <qrcg-box class="designer-container">
                    <qrcg-qrcode-designer
                        stick-top-rem="2"
                        .data=${state.data}
                        .type=${state.type}
                        .design=${state.design}
                    >
                        <div slot="file-input-instructions-foreground-image">
                            ${this.renderDisabledFileInputInstructions()}
                        </div>

                        <div slot="file-input-instructions-logo">
                            ${this.renderDisabledFileInputInstructions()}
                        </div>

                        <div slot="below-preview-image">
                            ${this.renderBelowPreviewImage()}
                        </div>
                    </qrcg-qrcode-designer>
                </qrcg-box>
            `:u$3`
            <div class="data-box">
                <qrcg-type-selector
                    @selected-type-changed=${this._resetPreview}
                ></qrcg-type-selector>
                <div class="form-container">
                    ${this.renderCurrentTypeForm(state.type)}
                </div>
            </div>
            <qrcg-preview></qrcg-preview>
        `}}window.defineCustomElement("qrcg-website-banner",WebsiteBanner);const style$$=":host{display:block}qrcg-form::part(form){display:grid;grid-gap:1rem}.buttons{display:flex;justify-content:flex-end}qrcg-button[transparent]{margin-right:1rem}";function singularize(F){return F.split(/[^\w]/g).map(w=>w.replace(/(\w+)s$/g,(q,D)=>D)).join(" ")}class QrcgDashboardForm extends BaseComponent{formController=new QRCGFormController(this);routeParams=new QRCGRouteParamsController(this);titleController=new QRCGTitleController(this);static styleSheets=[...super.styleSheets,style$$];static get properties(){return{data:{},id:{}}}constructor({apiBaseRoute:w,editFormLink:q="",listUrl:D="",singularName:Q="",loadableElementsSelector:O,inputsSelector:U,disableableInputsSelector:G}){super(),this.data={},this.apiBaseRoute=w,this.onApiSuccess=this.onApiSuccess.bind(this),this.api=this.createApiConsumer(w,O,U,G),this.editFormLink=q,isEmpty(this.editFormLink)&&(this.editFormLink=`/dashboard/${w}/edit/`),this.listUrl=D,isEmpty(this.listUrl)&&(this.listUrl=`/dashboard/${w}`),this.singularName=t$3(Q),isEmpty(this.singularName)&&(this.singularName=t$3(singularize(this.apiBaseRoute)))}connectedCallback(){super.connectedCallback(),this.addEventListener("api:success",this.onApiSuccess),window.addEventListener("qrcg-router:location-changed",this.onLocationChanged),this.updateTitle(),this.updateBreadcumbs()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("api:success",this.onApiSuccess),window.removeEventListener("qrcg-router:location-changed",this.onLocationChanged)}createApiConsumer(w,q,D,Q){return new QRCGApiConsumer(this,w,q,D,Q)}updateTitle(){const w=window.location.pathname.match(/edit|new|view/);w&&(this.titleController.pageTitle=t$3(titleCase(`${w[0]} ${this.singularName}`)))}updateBreadcumbs(){QrcgDashboardBreadcrumbs.setLinks(this.breadcrumbs())}onLocationChanged=async()=>{this.updateTitle(),this.updateBreadcumbs()};firstUpdated(){this.id=this.routeParams.get("id")}updated(w){w.has("id")&&(isEmpty(this.id)||this.fetchRecord())}fetchRecord(){this.api.get(this.id)}onRouteParamChange(w){this.id=w.id}submitForm=async()=>this.api.save(this.data);onApiSuccess(w){const q=w.detail.response;if(isEmpty(q))return;this.data=q;const D=this.data.id;if(isEmpty(D))return;const Q=`${this.editFormLink}${this.data.id}`;window.location.pathname!==Q&&push(Q),w.detail.request.method!=="GET"&&showToast(t$3("Record saved successfully"))}renderFormFields(){return x``}renderExtraButtons(){}renderCloseButton(){return x`
            <qrcg-button transparent href="${this.listUrl}">
                ${t$3`Close`}
            </qrcg-button>
        `}renderSaveButton(){return x` <qrcg-button type="submit">${t$3`Save`}</qrcg-button>`}renderButtons(){return x`
            <div class="buttons">
                ${this.renderExtraButtons()}
                <!--  -->
                ${this.renderCloseButton()}
                <!--  -->
                ${this.renderSaveButton()}
            </div>
        `}breadcrumbs(){const w=QrcgDashboardBreadcrumbs.buildBreadcrumbFromCurrentPath();w[w.length-1].href.match(/\d+/)&&w.splice(w.length-1);const q=w[w.length-1];return w[w.length-1]={...q,text:this.titleController.pageTitle},w}render(){return x`
            <qrcg-form>
                ${this.renderFormFields()}
                <!-- new line -->
                ${this.renderButtons()}
            </qrcg-form>
        `}}class QrcgRelationSelect extends i$1{static styles=[i$3`
            :host {
                display: flex;
                flex-direction: column;
            }

            qrcg-select {
                display: block;
            }

            .loading-container {
                position: relative;
            }

            .loading-container qrcg-select {
                opacity: 0.5;
                pointer-events: none;
            }

            qrcg-loader-h {
                position: absolute;
                color: black;
                --qrcg-loader-h-color: black;
                transform: translateX(-50%) scale(0.5);
                top: 0;
                left: 50%;
            }
        `];static get properties(){return{endpoint:{},apiEndpoint:{attribute:"api-endpoint"},data:{},name:{},value:{},errors:{type:Array},itemNameKeys:{type:Array},loading:{type:Boolean}}}constructor(){super(),this.itemNameKeys=[],this.loading=!0}connectedCallback(){super.connectedCallback(),this.fetch()}async fetch(){this.loading=!0;let w=this.apiEndpoint;isEmpty(w)&&(w=`${this.endpoint}?list_all=true`);try{const{response:q}=await get(w),D=await q.json();D instanceof Array?this.data=D:D.data instanceof Array&&(this.data=D.data)}catch{}this.loading=!1}onSelectInput(w){this.value=w.detail.value}renderLoader(){return x`
            <div class="loading-container">
                <qrcg-select part="select">
                    <label slot="label"><slot></slot></label>
                </qrcg-select>
                <qrcg-loader-h></qrcg-loader-h>
            </div>
        `}renderItem(w){if(typeof w=="object"){const D=(isEmpty(this.itemNameKeys)?["name"]:this.itemNameKeys).map(Q=>w[Q]).join(" - ");return x`<option value=${w.id}>${D}</option>`}return x`<option value=${w}>${t$3(w)}</option>`}render(){return this.loading?this.renderLoader():x`
            <qrcg-select
                name=${this.name}
                value=${this.value}
                @on-input=${this.onSelectInput}
                .errors=${this.errors}
                part="select"
            >
                <label slot="label"><slot></slot></label>
                ${this.data.map(w=>this.renderItem(w))}
            </qrcg-select>
        `}}window.defineCustomElement("qrcg-relation-select",QrcgRelationSelect);class QrcgAccountBalanceModal extends QrcgModal{accountCredit=new AccountCreditManager;static tag="qrcg-account-balance-modal";static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{userId:{},currentAccountBalance:{}}}static open({userId:w}){const q=document.createElement(QrcgAccountBalanceModal.tag);return q.userId=w,document.body.appendChild(q),q.open()}constructor(){super(),this.currentAccountBalance=0}connectedCallback(){super.connectedCallback(),this.fetchCurrentAccountBalance()}async fetchCurrentAccountBalance(){this.currentAccountBalance=await this.accountCredit.getUserBalance(this.userId)}affiramtivePromise(){return this.saveAccountBalance()}async saveAccountBalance(){if(this.#t(),isEmpty(this.#r().value))throw this.#e(t$3`Account Balance is required`),new Error;const{response:w}=await post(`users/${this.userId}/change-account-balance`,{account_balance:this.#r().value}),{account_balance:q}=await w.json();console.log({account_balance:q})}#e(w){this.#r().errors=[w]}#t(){this.#r().errors=[]}#r(){return this.shadowRoot.querySelector("qrcg-input")}renderTitle(){return t$3`Account Credit`}renderBody(){return x`
            <qrcg-input
                placeholder=${t$3`Account Balance`}
                type="number"
                min="0"
                value=${this.currentAccountBalance}
            >
                ${t$3`New Balance`}
            </qrcg-input>
        `}}window.defineCustomElement(QrcgAccountBalanceModal.tag,QrcgAccountBalanceModal);class QrcgAccountBalanceInput extends i$1{billing=new BillingMode;accountCredit=new AccountCreditManager;static styles=[i$3`
            :host {
                display: flex;
                align-items: flex-end;
            }

            qrcg-button {
                margin-left: 1rem;
            }

            qrcg-input::part(input) {
                margin-bottom: 0;
            }
        `];static get properties(){return{balance:{},userId:{attribute:"user-id"}}}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}updated(w){w.has("userId")&&this.fetchAccountBalance()}fetchAccountBalance=async()=>{this.userId&&(this.balance=await this.accountCredit.getUserBalance(this.userId))};async onChangeAccountBalanceClick(){await QrcgAccountBalanceModal.open({userId:this.userId}),this.fetchAccountBalance()}render(){if(this.billing.isAccountCredit())return x`
            <qrcg-input
                disabled
                .value=${price(this.balance)}
                placeholder=${t$3`Account balance`}
            >
                ${t$3`Account Balance`}
            </qrcg-input>
            <qrcg-button @click=${this.onChangeAccountBalanceClick}>
                ${t$3`Change Account Balance`}
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-account-balance-input",QrcgAccountBalanceInput);class QrcgUserForm extends QrcgDashboardForm{static get styles(){return[super.styles,i$3`
                .verify-email-actions {
                    display: flex;
                }
            `]}constructor(){super({apiBaseRoute:"users",bindEvents:!0})}connectedCallback(){super.connectedCallback(),this.addEventListener("api:success",this.onSuccess)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("api:success",this.onSuccess)}onSuccess(w){const q=w.detail.response;setTimeout(()=>{this.data={...this.data,role_id:q.roles[0]?.id}},0)}async onVerifyEmail(){await confirm$1({message:t$3`Are you sure you want to verify the email address?`});const{response:w}=await post("users/verify-email/"+this.data.id);(await w.json()).success&&(showToast(t$3`Email verified successfully`),this.fetchRecord())}formatDate(w){return new Date(w).toLocaleDateString()}renderRoleSelect(){return this.data.is_sub?x`<label>${t$3`Role`}: ${t$3`Sub User`}</label>`:x`
            <qrcg-relation-select endpoint="roles" name="role_id">
                ${t$3`Role`}
            </qrcg-relation-select>
        `}renderVerifyEmailField(){if(!this.data.id)return;let w="";return this.data.email_verified_at?w=x`
                ${t$3`Email verified at: `}
                ${this.formatDate(this.data.email_verified_at)}
            `:w=x`
                <qrcg-button @click=${this.onVerifyEmail}>
                    ${t$3`Verify Email`}
                </qrcg-button>
            `,x` <div class="verify-email-actions">${w}</div> `}renderFormFields(){return x`
            <qrcg-input name="name" placeholder="${t$3`Full name`}"
                >${t$3`Name`}</qrcg-input
            >

            <qrcg-input
                name="email"
                placeholder=${t$3`email@example.com`}
                type="email"
                >${t$3`Email`}</qrcg-input
            >

            ${QrcgMobileInput.renderBasedOnConfigs()}

            <qrcg-input
                name="password"
                type="password"
                placeholder=${t$3`new password, leave empty to keep it unchanged`}
                >${t$3`Password`}</qrcg-input
            >

            <qrcg-input
                name="password_confirmation"
                type="password"
                placeholder=${t$3`confirm password`}
                >${t$3`Confirm password`}</qrcg-input
            >

            ${this.renderRoleSelect()} ${this.renderVerifyEmailField()}

            <qrcg-account-balance-input
                user-id=${this.data.id}
            ></qrcg-account-balance-input>

            <qrcg-subusers user-id=${this.id}></qrcg-subusers>
        `}}window.defineCustomElement("qrcg-user-form",QrcgUserForm);class QrcgUserFormPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-user-form slot="content"></qrcg-user-form>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-user-form-page",QrcgUserFormPage);const style$_=":host{display:block;position:relative;max-width:100%;overflow-x:auto}:host([loading]){opacity:.4;pointer-events:none;user-select:none;-webkit-user-select:none}qrcg-loader-h{--qrcg-loader-h-color: black;transform:scale(.5) translateY(-1.6rem);height:22.7109px}@media screen and (max-width:600px){qrcg-loader-h{height:14.7109px;margin-left:auto}}table{border-collapse:collapse;margin:0;padding:0;min-width:100%;max-width:100%;table-layout:fixed}table tr{padding:.35em}table thead{background-color:var(--gray-0)}tr.danger{background-color:#ff00001a}table td{padding:1rem .5rem;text-align:center;border-bottom:1px solid var(--gray-1);color:var(--dark);text-overflow:ellipsis;overflow:hidden;line-height:1.6;white-space:nowrap}table th{padding:1rem .5rem;text-align:center;color:var(--gray-2);user-select:none;-webkit-user-select:none}table th{font-size:.85em;letter-spacing:.1em;text-transform:uppercase}table td{-webkit-user-select:text;user-select:text}:host(.dir-rtl) table th{letter-spacing:0}.column-actions a{color:var(--primary-0);font-size:.8rem;display:inline-block;margin:.25rem;text-decoration:underline}td a{color:var(--primary-0);cursor:pointer;touch-action:manipulation;-webkit-user-select:none;user-select:none}.row-actions{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;text-align:center}@media screen and (max-width:600px){table{border:0}table thead{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}table tr{border-bottom:3px solid #ddd;display:block;margin-bottom:.625em}table td{border-bottom:1px solid #ddd;display:flex;font-size:.8em;text-align:right;justify-content:space-between}table td:before{content:attr(data-label);font-weight:700;text-transform:uppercase}table td:last-child{border-bottom:0}}";class QrcgTable extends BaseComponent{#e=new DirectionAwareController(this);static tag="qrcg-table";static styleSheets=[...super.styleSheets,style$_];static get properties(){return{...super.properties,columns:{},rows:{},loading:{type:Boolean,reflect:!0},noResultsMessage:{attribute:"no-results-message"}}}constructor(){super(),this.loading=!1,this.columns=[],this.rows=[],this.renderCell=this.renderCell.bind(this),this.renderCellContent=this.renderCellContent.bind(this),this.noResultsMessage="No results could be found"}connectedCallback(){super.connectedCallback(),this.firstLoad=!0}columnStyles(){const w=this.columns.map(q=>q.width?`
            @media (min-width: 601px) {
                .column-${q.key} { width: ${q.width}}
            }
        `:"").join("");return x`<style>
            ${w}
        </style>`}renderHeader(){return this.columns.map(w=>x`
                    <th scope="col" class="column-${w.key}">
                        ${w.label}
                    </th>
                `)}renderCell(w,q){return isFunction(this.cellRenderer)?this.cellRenderer(w,q):x`
            <td data-label="${q.label}" class="column-${q.key}">
                ${this.renderCellContent(w,q)}
            </td>
        `}renderCellContent(w,q){return isFunction(this.cellContentRenderer)?this.cellContentRenderer(w,q):w[q.key]}setCellRenderer(w){this.cellRenderer=w}setCellContentRenderer(w){this.cellContentRenderer=w}renderRow(w){return console.log(w),x`
            <tr class=${w.additional_classes}>
                ${this.columns.map(q=>this.renderCell(w,q))}
            </tr>
        `}renderNoRowsAvailableMessage(){return x`
            <tr>
                <td colspan="${this.columns.length}">
                    ${this.noResultsMessage}
                </td>
            </tr>
        `}renderRows(){return!this.firtsLoad&&isEmpty(this.rows)?this.renderNoRowsAvailableMessage():this.rows.map(w=>this.renderRow(w))}willUpdate(w){super.willUpdate?.(w)}updated(w){(w.has("rows")||w.has("columns"))&&isEmpty(this.rows)&&!isEmpty(this.columns)&&this.firstLoad&&this.initPlaceholderRows(),w.has("loading")&&this.loading&&(this.initPlaceholderRows(),this.firstLoad=!1)}initPlaceholderRows(){const w=this.rows.length>0?this.rows.length:10;this.rows=Array.from({length:w}).map(()=>this.columns.reduce((q,D)=>(q[D.key]=x`<qrcg-loader-h></qrcg-loader-h>`,q),{}))}render(){return x`
            ${this.columnStyles()}

            <table>
                <thead>
                    <tr>
                        ${this.renderHeader()}
                    </tr>
                </thead>
                <tbody>
                    ${this.renderRows()}
                </tbody>
            </table>
        `}}QrcgTable.register();const style$Z=":host{display:block}qrcg-pagination{margin-top:1rem}.search-form::part(form){display:flex;align-items:center;justify-content:flex-end}.search-form{margin-bottom:1rem}.search-form label{user-select:none;-webkit-user-select:none;margin-right:1rem;font-weight:700}:host(.dir-rtl) .search-form label{margin-left:1rem;margin-right:0rem}";class QRCGDashboardList extends BaseComponent{#e=new DirectionAwareController(this);titleController=new QRCGTitleController(this);static styleSheets=[...super.styleSheets,style$Z];static get properties(){return{columns:{type:Array},rows:{type:Array},pagination:{type:Object},page:{},keyword:{},loading:{type:Boolean,reflect:!0}}}constructor({baseRoute:w,singularRecordName:q,frontendFormUrl:D}){super(),this.baseRoute=w,this.singularRecordName=t$3(q),this.frontendFormUrl=D,this.onLocationChanged=this.onLocationChanged.bind(this),this.onKeywordChanged=this.onKeywordChanged.bind(this),isEmpty(this.frontendFormUrl)&&(this.frontendFormUrl=`/dashboard/${this.baseRoute}/edit/`),this.api=QRCGApiConsumer.instance({host:this,baseRoute:w,loadableElementsSelector:"qrcg-table, qrcg-pagination",bindEvents:!0}),this.onKeywordChanged=debounce(this.onKeywordChanged,1e3),this.rows=[],this.columns=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("api:success",this.onApiSuccess),window.addEventListener("qrcg-router:location-changed",this.onLocationChanged),this.onLocationChanged(),this.fetchData()}disconnectedCallback(){super.disconnectedCallback(),this.disconnected=!0,this.removeEventListener("api:success",this.onApiSuccess),window.removeEventListener("qrcg-router:location-changed",this.onLocationChanged)}firstUpdated(){this.initListColumns(),this.table?.setCellContentRenderer(this.cellContentRenderer)}cellContentRenderer(w,q){const D=q.defaultValue,Q=!isEmpty(D);if(q.key.match(/\./)||q.key.match(/\[\d+\]/)){if(!isEmpty(w[q.key]))return w[q.key];try{const O=get$1(w,q.key);return isEmpty(O)&&Q?D:O}catch(O){return console.error(O),Q?D:void 0}}if(!isNaN(w[q.key]))return w[q.key];if(q.booleanBadge)return QRCGDashboardList.renderBooleanBadgeCell(w[q.key],q.booleanBadge.onText,q.booleanBadge.offText);switch(q.key){case"created_at":case"updated_at":{const O=new Date(w[q.key]);return isNaN(O)?w[q.key]:isFunction(this.renderDate)?this.renderDate(O,q.key):O.toLocaleString()}default:return isEmpty(w[q.key])?"---":w[q.key]}}get table(){return this.renderRoot.querySelector("qrcg-table")}willUpdate(w){const q=["page","keyword"];this.extendFetchDependencies(q),q.reduce((Q,O)=>Q||w.has(O),!1)&&this.fetchData()}async onLocationChanged(){this.bindLocalPropertiesFromQueryParams(),QrcgDashboardBreadcrumbs.setLinks(this.breadcrumbs()),await new Promise(w=>setTimeout(w,0)),!this.disconnected&&this.updatePageTitle()}extendFetchDependencies(w){}bindLocalPropertiesFromQueryParams(){this.page=queryParam("page"),this.keyword=queryParam("keyword")}initListColumns(){isEmpty(this.constructor.listColumns)||(this.columns=this.constructor.listColumns.map(w=>({...w,label:t$3(w.label)})))}fetchData(){const w={};isEmpty(this.keyword)||(w.keyword=this.keyword),this.extendSearch(w),this.addQueryParamsToSearchObject(w);const q=new URLSearchParams(w);q.delete("page");let D=null;Array.from(q.keys()).length>0&&(D=q.toString()),w.path=`${window.location.origin}${window.location.pathname}${D?"?"+D:""}`,this.page&&(w.page=this.page),this.api.search(w)}extendSearch(w){}addQueryParamsToSearchObject(w){const q=new URLSearchParams(window.location.search);for(const D of q.keys())isEmpty(w[D])&&(w[D]=q.get(D))}obtainData(w){this.pagination=w.detail.response,this.rows=this.pagination.data,this.rows=this.rows.map(q=>({...q,actions:this.rowActions(q)}))}onApiSuccess(w){w.detail.request.method==="GET"&&this.obtainData(w),w.detail.request.method==="DELETE"&&this.fetchData()}onApiError(){}onDelete=async w=>{w.preventDefault(),w.stopPropagation();const q=w.composedPath()[0]["row-id"];try{await confirm$1({title:t$3("Confirmation"),message:this.deleteMessage()}),this.api.destroy(q)}catch{}};deleteMessage(){return t$3("Are you sure you want to delete ")+t$3(this.singularRecordName)+t$3("?")}rowActions(w){return x`
            <div class="row-actions" .row=${w}>
                ${this.renderEditRowLink(w)}
                <!--  -->
                ${this.renderDeleteRowLink(w)}
            </div>
        `}renderEditRowLink(w){return x`<a href="${this.frontendFormUrl}${w.id}">${t$3`Edit`}</a>`}renderDeleteRowLink(w){return x`
            <a href="#" @click=${this.onDelete} .row-id=${w.id}>
                ${t$3`Delete`}
            </a>
        `}onKeywordChanged(w){const q=new URLSearchParams(window.location.search);q.set("keyword",w.detail.value),q.set("page",1),push(window.location.pathname+"?"+q.toString())}searchPlaceholder(){return"By name"}breadcrumbs(){return QrcgDashboardBreadcrumbs.buildBreadcrumbFromCurrentPath()}updatePageTitle(){this.titleController.pageTitle=this.pageTitle()}pageTitle(){return titleCase(window.location.pathname.split("/").pop())}static renderBooleanBadgeCell(w,q,D){return typeof w=="object"?w:x`
            <qrcg-on-off-badge
                .enabled=${w}
                on-text=${q}
                off-text=${D}
            ></qrcg-on-off-badge>
        `}renderBooleanBadgeCell(w,q,D){return this.constructor.renderBooleanBadgeCell(w,q,D)}renderBeforeTable(){}renderSearchForm(){return x`
            <qrcg-form class="search-form">
                <label>${t$3`Search`}</label>
                <qrcg-input
                    placeholder=${t$3(this.searchPlaceholder())}
                    type="search"
                    .value=${this.keyword}
                    @on-input=${this.onKeywordChanged}
                ></qrcg-input>
            </qrcg-form>
        `}renderPagination(){return x`
            <qrcg-pagination .pagination=${this.pagination}></qrcg-pagination>
        `}renderDate(w,q){return w.toLocaleString()}render(){return x`
            ${this.renderSearchForm()}

            <!-- -->

            ${this.renderBeforeTable()}

            <qrcg-table
                .columns=${this.columns}
                .rows=${this.rows}
                no-results-message=${t$3`No results could be found`}
            ></qrcg-table>

            ${this.renderPagination()}
        `}}const style$Y=".search-container{display:flex;align-items:center;justify-content:flex-end;gap:1rem;margin-bottom:1rem;flex-wrap:wrap}.search-container>*{margin-bottom:0}",style$X="";class UserFilterModal extends QrcgModal{static tag="qrcg-user-filter-modal";static styleSheets=[...super.styleSheets,style$X];renderTitle(){return t$3`Filter`}resolvedData(){return this.collectInputs()}collectInputs(){return this.$$("[name]").reduce((w,q)=>(w[q.name]=q.value,w),{})}renderBody(){return x`
            <qrcg-number-range-input name="number_of_qrcodes">
                ${t$3`Number Of QR Codes`}
            </qrcg-number-range-input>
        `}}UserFilterModal.register();class QrcgUserList extends QRCGDashboardList{static styleSheets=[...super.styleSheets,style$Y];constructor(){super({baseRoute:"users",singularRecordName:"user",frontendFormUrl:null}),this.cellContentRenderer=this.cellContentRenderer.bind(this)}static listColumns=[{key:"id",label:"ID",width:"2rem"},{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"mobile_number",label:"Mobile"},{key:"roles[0].name",label:"Role"},{key:"qrcodes_count",label:"QRs"},{key:"scans",label:"Scans"},{key:"main_user",label:"Main User"},{key:"created_at",label:"Created at"},{key:"actions",label:"Actions",width:"17rem"}];static get properties(){return{...super.properties,paying:{}}}async openFiltersModal(){const w=await UserFilterModal.open();this.filters=w,this.fetchData()}renderSearchForm(){return x`
            <div class="search-container">
                <qrcg-button class="elegant" @click=${this.openFiltersModal}>
                    <qrcg-icon mdi-icon=${mdiFilter}></qrcg-icon>

                    ${t$3`Filters`}
                </qrcg-button>

                ${super.renderSearchForm()}
            </div>
        `}cellContentRenderer(w,q){switch(q.key){case"main_user":return get$1(w,"parent_user.name")??"---";case"active_subscriptions.status":return isEmpty(w[q.key])?isEmpty(w.subscriptions)?this.constructor.STATUS_INACTIVE:w.subscriptions.sort((Q,O)=>Q.status===this.constructor.STATUS_ACTIVE?-1:O.status===this.constructor.STATUS_ACTIVE?1:0)[0].status:w[q.key];default:return super.cellContentRenderer(w,q)}}renderDate(w){return w.toLocaleDateString()}searchPlaceholder(){return t$3("By name or email")}bindLocalPropertiesFromQueryParams(){super.bindLocalPropertiesFromQueryParams(),this.paying=queryParam("paying")}extendFetchDependencies(w){w.push("paying")}deleteMessage(){let w=super.deleteMessage();return x`
            <div>
                ${w}
                <br />
                ${t$3`This will delete all related`}
                <strong>${t$3`QR Codes`}</strong>,
                <strong>${t$3`subscriptions`}</strong> ${t$3`and`}
                <strong>${t$3`transactions`}</strong>.
            </div>
        `}extendSearch(w){this.paying&&(w.paying=this.paying);for(const q of Object.keys(this.filters??{}))w[q]=JSON.stringify(this.filters[q])}shouldDoActAs(w){return PluginManager.applyFilters(FILTER_QRCODE_ROW_SHOULD_DO_ACT_AS,!0,w)}onActAs=async w=>{w.preventDefault(),w.stopPropagation();const D=w.target.row;if(!this.shouldDoActAs(D))return;const{response:Q}=await post("account/act-as/"+D.id),{user:O,token:U}=await Q.json();actAs(O,U),push(userHomePage()),setTimeout(()=>{window.location.reload()})};onResetRoleClick=async w=>{w.preventDefault(),w.stopPropagation();const D=w.target.row;try{await confirm$1({message:t$3`Are you sure you want to reset user role?`}),await post("users/"+D.id+"/reset-role"),showToast(t$3`User role cleared successfully.`),this.fetchData()}catch{}};onGenerateMagicLoginUrlClick=async w=>{w.preventDefault(),w.stopPropagation();const D=w.target.row;try{showToast(t$3`Generating login URL, please wait ...`);const{response:Q}=await post("account/generate-magic-login-url/"+D.id),{url:O}=await Q.json();confirm$1({tilte:t$3`Magic Login`,message:this.renderMagicLoginUrlModalContent(O),negativeText:null,affirmativeText:t$3`OK`})}catch(Q){console.log(Q)}};onResetScanLimitsClick=async w=>{w.preventDefault(),w.stopPropagation();const D=w.target.row;try{await confirm$1({message:t$3`Are you sure you want to reset scan limits?`}),await post("users/"+D.id+"/reset-scans-limit"),showToast(t$3`Scan limits reset successfully.`),this.fetchData()}catch(Q){console.error(Q),showToast(t$3`Scan limits reset failed. Please try again later.`)}};renderMagicLoginUrlModalContent(w){return x`
            <p>
                ${t$3`Please use the following URL to login the user without a password. Valid for 24 hours.`}
            </p>

            <div style="display: flex; padding: 0.5rem;">
                <div
                    style="max-width: 80%; overflow: auto;  white-space: nowrap;  user-select: all"
                >
                    ${w}
                </div>
                <qrcg-copy-icon>${w}</qrcg-copy-icon>
            </div>
        `}renderActAsLink(w){return x`
            <a href="#" .row=${w} @click=${this.onActAs}> ${t$3`Act as`} </a>
        `}renderGenerateMagicLoginUrl(w){return x`
            <a href="#" .row=${w} @click=${this.onGenerateMagicLoginUrlClick}>
                ${t$3`Magic Login URL`}
            </a>
        `}renderResetRoleLink(w){return x`
            <a href="#" .row=${w} @click=${this.onResetRoleClick}>
                ${t$3`Reset Role`}
            </a>
        `}renderResetScanLimitsLink(w){return x`
            <a href="#" .row=${w} @click=${this.onResetScanLimitsClick}>
                ${t$3`Reset Scan Limits`}
            </a>
        `}rowActions(w){return x`
            <div>
                ${this.renderActAsLink(w)}
                <!-- -->

                ${this.renderEditRowLink(w)}
                <!-- -->

                ${this.renderGenerateMagicLoginUrl(w)}
                <!--  -->
                ${this.renderDeleteRowLink(w)}
                <!--  -->
                ${this.renderResetRoleLink(w)}
                <!--  -->
                ${this.renderResetScanLimitsLink(w)}
            </div>
        `}}window.defineCustomElement("qrcg-user-list",QrcgUserList);class QrcgUserListPage extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${t$3`Users`}</span>
                <qrcg-button slot="header-actions" href="/dashboard/users/new">
                    ${t$3`Create`}
                </qrcg-button>
                <qrcg-user-list slot="content"></qrcg-user-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-user-list-page",QrcgUserListPage);class QrcgUsersRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];connectedCallback(){super.connectedCallback()}render(){return x`
            <qrcg-protected-route
                route="/dashboard/users$"
                permission="user.list-all"
            >
                <template>
                    <qrcg-user-list-page></qrcg-user-list-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route
                route="/dashboard/users/new|/dashboard/users/edit/(?<id>\\d+)"
                permission="user.store"
            >
                <template>
                    <qrcg-user-form-page></qrcg-user-form-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-user-router",QrcgUsersRouter);const features=[{name:t$3`Copy QR Code`,value:"qrcode.copy"},{name:t$3`QR Code Logo`,value:"qrcode.logo"},{name:t$3`Remove Powered By`,value:"qrcode.remove_powered_by"},{name:t$3`Color Customization`,value:"qrcode.color_customization"},{name:t$3`Lead Form in vCard+`,value:"vcard-plus.lead-form"},{name:t$3`Hide Subscription Details Section (Account Page)`,value:"account.hide-subscription-details-section"},{name:t$3`Hide Custom Code Input`,value:"designer.hide-custom-code-input"},{name:t$3`Bulk QR Code Creation`,value:"bulk-qrcode-creation"},{name:t$3`WhatsApp Order`,value:"whatsapp-order"}];function getFilteredFeatures(){return PluginManager.applyFilters(FILTER_PLAN_FEATURES,features)}function getFeatures(){return[...getFilteredFeatures(),...getShapes().map(F=>({name:t$3`Shape: `+F.name,value:"shape."+F.value})),...advancedShapes.map(F=>({name:t$3`Sticker: `+F.name,value:"advancedShape."+F.value}))]}class QrcgSubscriptionPlanCheckoutLink extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            .instructions {
                padding: 1rem;
                background-color: var(--gray-0);
                line-height: 1.5;
                animation: fade-in 0.5s 0.5s ease both;
                overflow: hidden;
            }

            @keyframes fade-in {
                from {
                    max-height: 0;
                    opacity: 0;
                    padding: 0;
                }

                to {
                    max-height: 5rem;
                    opacity: 1;
                    padding: 1rem;
                }
            }

            .url {
                margin-top: 0.5rem;
                background-color: white;
                padding: 0.5rem;
                display: inline-block;
            }

            .url > div {
                user-select: all;
            }
        `];static get properties(){return{frontendCustomLink:{},planId:{attribute:"plan-id"}}}connectedCallback(){super.connectedCallback()}buildUrl(){return url("/checkout?plan-id="+this.planId)}render(){if(!isEmpty(this.planId))return x`
            <div class="instructions">
                <div>${t$3`Use the following direct checkout link`}</div>
                <div class="url">
                    <div>${this.buildUrl()}</div>
                </div>
            </div>
        `}}window.defineCustomElement("qrcg-subscription-plan-checkout-link",QrcgSubscriptionPlanCheckoutLink);class QrcgFieldTranslatorModal extends QrcgModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            .loader-container {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            a {
                color: var(--primary-0);
                text-decoration: none;
            }
        `];static get properties(){return{...super.properties,translations:{type:Array},fetchingData:{type:Boolean},field:{},label:{},modelClass:{},modelId:{},lines:{type:Array}}}static async open({field:w,label:q,modelClass:D,modelId:Q}){const O=new QrcgFieldTranslatorModal;return O.field=w,O.label=q,O.modelClass=D,O.modelId=Q,document.body.appendChild(O),await new Promise(U=>setTimeout(U)),O.open()}get inputs(){return Array.from(this.shadowRoot.querySelectorAll(".input"))}constructor(){super(),this.translations=[],this.loadingTranslations=!1,this.fetchData()}connectedCallback(){super.connectedCallback(),this.addEventListener("keyup",this.watchEnter)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keyup",this.watchEnter)}watchEnter=w=>{w.key=="Enter"&&this.onAffirmativeClick()};async fetchData(){this.fetchingData=!0,await this.fetchTranslations(),await this.fetchLines(),await this.updateComplete,this.fetchingData=!1,await this.updateComplete,this.fillLines()}async fetchLines(){let w={modelClass:this.modelClass,modelId:this.modelId,field:this.field};w=new URLSearchParams(w).toString();const{response:q}=await get("translations/lines?"+w),D=await q.json();this.lines=D}async fetchTranslations(){const{response:w}=await get("translations?is_active=true&paginate=false"),q=await w.json();this.translations=q}fillLines(){this.lines.forEach(w=>{const q=this.shadowRoot.getElementById(w.key.replace(/\./g,"-"));q&&(q.value=JSON.parse(w.value))})}renderTitle(){return this.label}renderLoader(){return x`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderEmptyMessage(){return x`
            <div>
                Multilingual is not enabled on your website. Go to
                <a href="${url("/dashboard/translations")}">Translations</a> to
                enable more than one language.
            </div>
        `}renderTranslationLines(){return this.translations.filter(q=>!q.is_default).map(q=>{const D=`translation-${q.locale}-${this.field.replace(/\./g,"-")}`;return x`
                <qrcg-input class="input" .locale=${q.locale} id=${D}>
                    ${q.name}
                </qrcg-input>
            `})}renderBody(){return this.fetchingData?this.renderLoader():isEmpty(this.translations)||this.translations.length<2?this.renderEmptyMessage():this.renderTranslationLines()}async affiramtivePromise(){this.onBeforeSave();const w=this.inputs.map(q=>post("translations/lines",{modelClass:this.modelClass,modelId:this.modelId,text:q.value,locale:q.locale,field:this.field}));await Promise.all(w),showToast(t$3`Translations saved successfully`)}onBeforeSave(){this.shadowRoot.querySelector("qrcg-button[modal-affirmative]").loading=!0,this.shadowRoot.querySelector("qrcg-button[modal-negative]").disabled=!0}getAffirmativeText(){return t$3`Save`}}window.defineCustomElement("qrcg-field-translator-modal",QrcgFieldTranslatorModal);class QrcgFieldTranslator extends i$1{static styles=[i$3`
            :host {
                display: flex;
                position: absolute;
                right: 0.2rem;
                bottom: 0.65rem;
            }

            qrcg-button::part(button) {
                min-width: initial;
                padding: 0.25rem;
            }

            qrcg-icon {
                width: 1.5rem;
                height: 1.5rem;
            }
        `];static get properties(){return{field:{},label:{},modelClass:{attribute:"model-class"},modelId:{attribute:"model-id"},translations:{type:Array}}}constructor(){super(),this.translations=[],this.fetchActiveTranslations()}async fetchActiveTranslations(){const{response:w}=await get("translations?is_active=true&paginate=false"),q=await w.json();this.translations=q}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick(){QrcgFieldTranslatorModal.open({field:this.field,label:this.label,modelClass:this.modelClass,modelId:this.modelId})}render(){return this.translations.length<2?null:x`
            <qrcg-button transparent>
                <qrcg-icon mdi-icon=${mdiTranslate}></qrcg-icon>
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-field-translator",QrcgFieldTranslator);class Checkpoint{constructor({id:w,text:q,available:D}){w?this.id=w:this.id=this.#e(),this.text=q,this.available=D}#e(){return"cp-"+new Date().getTime()}static fromArray(w){return w.map(q=>new this(q))}static deleteFromList(w,q){return w.filter(D=>D.id!=q)}static addToList(w,q,D){return[...w,new this({text:q,available:D})]}static updateCheckpoint(w,q,D,Q){return w.map(O=>O.id===q?new this({id:q,text:D,available:Q}):O)}}class QrcgSubscriptionPlanCheckpoints extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            .checkpoint {
                display: flex;
                align-items: center;
            }

            .checkpoint qrcg-input {
                flex: 1;
                margin-right: 1rem;
            }

            .checkpoint qrcg-checkbox {
                margin-right: 1rem;
            }

            .action-button::part(button) {
                min-width: initial;
                padding: 0.5rem;
            }

            qrcg-form-comment {
                margin-bottom: 1rem;
            }
        `];static get properties(){return{name:{},value:{},subscriptionPlan:{}}}get checkpoints(){const w=isArray$1(this.value)?this.value:[];return Checkpoint.fromArray(w)}set checkpoints(w){this.value=w,this.fireOnInputEvent(w)}get elemNewCheckpointText(){return this.shadowRoot.querySelector(".new-checkpoint-text")}get elemNewCheckpointAvailable(){return this.shadowRoot.querySelector(".new-checkpoint-available")}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput),this.addEventListener("click",this.onClick),this.addEventListener("keypress",this.watchEnter)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput),this.removeEventListener("click",this.onClick),this.removeEventListener("keypress",this.watchEnter)}watchEnter(w){const q=w.composedPath()[0];parentMatches(q,".new-checkpoint-text")&&w.key==="Enter"&&(w.preventDefault(),w.stopPropagation(),w.stopImmediatePropagation(),this.onAddCheckpointClick())}onInput(w){if(w.detail.name===this.name)return;w.preventDefault(),w.stopPropagation();const q=w.composedPath()[0],D=parentMatches(q,".checkpoint"),Q=D.querySelector('[name="text"]').value,O=D.querySelector('[name="available"]').value,U=D.checkpoint;this.value=Checkpoint.updateCheckpoint(this.checkpoints,U.id,Q,O),setTimeout(()=>{this.checkpoints=this.value},1e3)}onClick(w){const q=w.composedPath()[0];if(parentMatches(q,"qrcg-button.add-checkpoint"))return this.onAddCheckpointClick();if(parentMatches(q,"qrcg-button.delete-checkpoint"))return this.onDeleteCheckpointClick(w)}onDeleteCheckpointClick(w){const q=w.composedPath()[0],Q=parentMatches(q,".checkpoint").checkpoint;this.checkpoints=Checkpoint.deleteFromList(this.checkpoints,Q.id)}onAddCheckpointClick(){const w=this.elemNewCheckpointAvailable.value,q=this.elemNewCheckpointText.value;if(isEmpty(q))return showToast(t$3`Checkpoint text is empty`);this.checkpoints=Checkpoint.addToList(this.checkpoints,q,w),this.resetNewCheckpointFields()}resetNewCheckpointFields(){this.elemNewCheckpointAvailable.value=!1,this.elemNewCheckpointText.value=""}fireOnInputEvent(w){this.dispatchEvent(new CustomEvent("on-input",{composed:!0,bubbles:!0,detail:{name:this.name,value:w}}))}renderCheckpoint(w,q){return x`
            <div class="checkpoint" .checkpoint=${w}>
                <qrcg-checkbox ?value=${w.available} name="available">
                    ${t$3`Available`}
                </qrcg-checkbox>
                <qrcg-input
                    name="text"
                    class="checkpoint-text"
                    value=${w.text}
                >
                    <qrcg-field-translator
                        model-class="SubscriptionPlan"
                        model-id="${this.subscriptionPlan.id}"
                        field="checkpoints.${q}.text"
                        label="${t$3`Plan Checkpoint`}"
                        slot="input-actions"
                    ></qrcg-field-translator>
                </qrcg-input>

                <qrcg-button
                    class="action-button delete-checkpoint"
                    transparent
                >
                    <qrcg-icon mdi-icon=${mdiClose}></qrcg-icon>
                </qrcg-button>
            </div>
        `}renderCheckpoints(){return this.checkpoints.map((w,q)=>this.renderCheckpoint(w,q))}renderAddCheckpointButton(){return x`
            <div class="checkpoint">
                <qrcg-checkbox
                    class="new-checkpoint-available"
                    name="available"
                >
                    ${t$3`Available`}
                </qrcg-checkbox>

                <qrcg-input
                    class="new-checkpoint-text"
                    name="text"
                    placeholder=${t$3`Add new item here`}
                ></qrcg-input>

                <qrcg-button class="add-checkpoint action-button" transparent>
                    <qrcg-icon mdi-icon=${mdiPlus}></qrcg-icon>
                </qrcg-button>
            </div>
        `}render(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Plan Checkpoints`}</h2>

                <qrcg-form-comment label="">
                    ${t$3`Displayed in the pricing plans table in the home page.`}
                </qrcg-form-comment>

                ${this.renderCheckpoints()}
                <!-- -->
                ${this.renderAddCheckpointButton()}
            </qrcg-form-section>
        `}}window.defineCustomElement("qrcg-subscription-plan-checkpoints",QrcgSubscriptionPlanCheckpoints);const style$W="";class DynamicTypeLimits extends BaseComponent{static tag="qrcg-dynamic-type-limits";static styleSheets=[...super.styleSheets,style$W];types=new QRCodeTypeManager$1;static get properties(){return{...super.properties,name:{},value:{}}}constructor(){super(),this.name="",this.value={}}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput)}updated(w){w.has("value")&&this.syncInputs()}onInput(w){const q=w.detail.name;q!==this.name&&(w.stopImmediatePropagation(),this.setValue({...this.value,[q]:w.detail.value}))}syncInputs(){!this.value||this.__didSyncInputs||(Object.keys(this.value).forEach(w=>{const q=this.$(`[name="${w}"]`);q&&(q.value=this.value[w])}),this.__didSyncInputs=!0)}setValue(w){clearTimeout(this.__valueTimeout),this.__valueTimeout=setTimeout(()=>{this.value=w,this.dispatchEvent(new CustomEvent("on-input",{composed:!0,bubbles:!0,detail:{name:this.name,value:this.value}}))},1e3)}getSubInputValue(w){try{return this.value[w]}catch{return null}}renderTypeLimitsInputs(){return this.types.getDynamicTypes().map(w=>x`
                <qrcg-input
                    type="number"
                    step="1"
                    min="-1"
                    name="${w.id}"
                    placeholder=${t$3`Enter limit here.`}
                    .value=${this.getSubInputValue(w.id)}
                >
                    ${t$3(w.name)}
                </qrcg-input>
            `)}render(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Type Limits`}</h2>

                <div class="instructions">
                    ${t$3`Specify each dynamic type limit below. If no value is entered, the (Number of dynamic QR codes) from the form field above will be used. Enter -1 for unlimited allowance.`}
                </div>
                ${this.renderTypeLimitsInputs()}
            </qrcg-form-section>
        `}}DynamicTypeLimits.register();const style$V=":host{padding:.1rem}[name]{margin-top:1rem}[name=dynamic_type_limits],[name=checkpoints]{margin-top:0}.frequency label{font-weight:700;margin-right:1rem;user-select:none;-webkit-user-select:none;font-size:.8rem}.frequency{display:flex;align-items:center}.payment-gateways{padding:1rem;background-color:var(--gray-0);line-height:1.7rem}.payment-gateways-label{font-weight:700;text-transform:capitalize;margin-bottom:1rem;display:block}.payment-gateway-entry{display:flex;flex-wrap:wrap;border-bottom:1px solid var(--gray-1);padding-bottom:.5rem;margin-bottom:.5rem;font-size:.8rem}.payment-gateway-entry:last-child{margin-bottom:0;padding-bottom:0;border-bottom:0}.payment-gateway-key{text-transform:uppercase;margin-right:1rem;flex:1}.payment-gateway-value{flex:1;user-select:text;-webkit-user-select:text}.payment-gateway-value span{display:block}.teaser{color:var(--danger)}";class QrcgSubscriptionPlanForm extends QrcgDashboardForm{static tag="qrcg-subscription-plan-form";droplet=new Droplet;static styleSheets=[...super.styleSheets,style$V];constructor(){super({apiBaseRoute:"subscription-plans"})}connectedCallback(){super.connectedCallback(),this.fetchOneTimePlanConfig()}static get properties(){return{...super.properties,wplusIntegrationEnabled:{type:Boolean}}}async fetchOneTimePlanConfig(){this.wplusIntegrationEnabled=Config.get("app.wplus_integration_enabled")}getScanRetentionDays(){return[{name:t$3`Keep Forever`,value:-1},{name:t$3`30 Days`,value:30},{name:t$3`60 Days`,value:60},{name:t$3`90 Days`,value:90},{name:t$3`One Year`,value:365}]}getFrequencyOptions(){let w=[{name:t$3`Monthly`,value:"monthly"},{name:t$3`Yearly`,value:"yearly"},{name:t$3`Life Time`,value:"life-time"}];return w=PluginManager.applyFilters(FILTER_SUBSCRIPTION_PLAN_FREQUENCIES,w),w=w.reduce((q,D)=>(q.find(Q=>Q.value===D.value)||q.push(D),q),[]),w}renderNumberOfUsersInput(){return this.droplet.isLarge()?x`
                <qrcg-input
                    name="number_of_users"
                    type="number"
                    step="1"
                    min="-1"
                >
                    <div slot="instructions">${t$3`Type -1 for unlimited`}</div>

                    ${t$3`Number of users`}
                </qrcg-input>
            `:x`
                <qrcg-input disabled .value=${this.data.number_of_users}>
                    ${t$3`Number of users`}
                    <span class="teaser"
                        >${window.atob("T25seSBhdmFpbGFibGUgdG8gZXh0ZW5kZWQgbGljZW5zZQ==")}</span
                    >
                </qrcg-input>
            `}renderNumberOfBulkCreatedQRCodes(){const w=t$3`Number of Bulk Created QR Codes`;return this.droplet.isLarge()?x`
                <qrcg-input
                    name="number_of_bulk_created_qrcodes"
                    type="number"
                    min="-1"
                >
                    <div slot="instructions">${t$3`Type -1 for unlimited`}</div>
                    ${w}
                </qrcg-input>
            `:x`
                <qrcg-input
                    disabled
                    .value=${this.data.number_of_bulk_created_qrcodes}
                >
                    ${w}
                    <span class="teaser"
                        >${window.atob("T25seSBhdmFpbGFibGUgdG8gZXh0ZW5kZWQgbGljZW5zZQ==")}</span
                    >
                </qrcg-input>
            `}renderNumberOfProductCatalogueItems(){const w=t$3`Number of Products (Product Catalgoue)`;return this.droplet.isLarge()?x`
                <qrcg-input
                    name="number_of_product_catalogue_items"
                    type="number"
                    min="-1"
                >
                    <div slot="instructions">${t$3`Type -1 for unlimited`}</div>
                    ${w}
                </qrcg-input>
            `:x`
                <qrcg-input
                    disabled
                    .value=${this.data.number_of_product_catalogue_items}
                >
                    ${w}
                    <span class="teaser"
                        >${window.atob("T25seSBhdmFpbGFibGUgdG8gZXh0ZW5kZWQgbGljZW5zZQ==")}</span
                    >
                </qrcg-input>
            `}renderNumberOfAiGenerations(){const w=t$3`Number of AI Generations`;return this.droplet.isLarge()?x`
                <qrcg-input name="number_of_ai_generations">
                    <div slot="instructions">${t$3`Type -1 for unlimited`}</div>

                    ${w}
                </qrcg-input>
            `:x`
                <qrcg-input
                    disabled
                    .value=${this.data.number_of_ai_generations}
                >
                    ${w}
                    <span class="teaser">
                        ${window.atob("T25seSBhdmFpbGFibGUgdG8gZXh0ZW5kZWQgbGljZW5zZQ==")}
                    </span>
                </qrcg-input>
            `}renderNumberOfMenuItemsInRestaurantMenuQRCode(){const w=t$3`Number of Menu Items (Restaurant Menu)`;return this.droplet.isLarge()?x`
                <qrcg-input
                    name="number_of_restaurant_menu_items"
                    type="number"
                    min="-1"
                    step="1"
                >
                    <div slot="instructions">${t$3`Type -1 for unlimited`}</div>
                    ${w}
                </qrcg-input>
            `:x`
                <qrcg-input
                    disabled
                    .value=${this.data.number_of_restaurant_menu_items}
                >
                    ${w}
                    <span class="teaser">
                        ${window.atob("T25seSBhdmFpbGFibGUgdG8gZXh0ZW5kZWQgbGljZW5zZQ==")}
                    </span>
                </qrcg-input>
            `}renderAdsFields(){if(this.data.show_ads=="enabled")return x`
            <qrcg-input name="ads_timeout" placeholder=${15}>
                ${t$3`Ads Timeout. Default (15)`}
                <div slot="instructions">
                    ${t$3`Timeout before showing the final QR code in seconds.`}
                </div>
            </qrcg-input>

            <qrcg-code-input name="ads_code" language="html">
                <div>${t$3`Ads Code. (HTML)`}</div>
                <div slot="instructions">
                    ${t$3`Add the ads code in HTML below.`}
                </div>
            </qrcg-code-input>
        `}renderAdsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Ads Settings`}</h2>

                <qrcg-balloon-selector
                    name="show_ads"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`Show Ads. Default (Disabled)`}
                    <div slot="instructions">
                        ${t$3`Show ads before redirecting to the QR code.`}
                    </div>
                </qrcg-balloon-selector>

                ${this.renderAdsFields()}
            </qrcg-form-section>
        `}renderIsResellerInput(){return x`
            <qrcg-checkbox name="is_reseller">
                ${t$3`Is Reseller`}
            </qrcg-checkbox>
        `}renderBasicDetailsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Basic Details`}</h2>
                <qrcg-input name="name" placeholder="${t$3`basic plan`}">
                    <qrcg-field-translator
                        model-class="SubscriptionPlan"
                        model-id="${this.data?.id}"
                        field="name"
                        label="${t$3`Plan`} ${t$3`name`}"
                        slot="input-actions"
                    ></qrcg-field-translator>
                    ${t$3`Name`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="frequency"
                    .options=${this.getFrequencyOptions()}
                >
                    ${t$3`Frequency`}
                </qrcg-balloon-selector>

                <qrcg-input
                    name="price"
                    placeholder="Price"
                    type="number"
                    min="0"
                >
                    <div slot="instructions">
                        ${t$3`Type 0 to make the plan free of charge`}
                    </div>
                    ${t$3`Price`}
                </qrcg-input>

                <qrcg-input name="sort_order" type="number" placeholder=${t$3`0`}>
                    ${t$3`Sort Order`}
                </qrcg-input>

                <qrcg-checkbox name="is_hidden"> ${t$3`Hidden`} </qrcg-checkbox>

                <qrcg-checkbox name="is_trial"> ${t$3`Is Trial`} </qrcg-checkbox>

                ${this.renderIsResellerInput()}
                <!--  -->

                ${this.renderTrialDaysInput()}
            </qrcg-form-section>
        `}renderTrialDaysInput(){if(this.data.is_trial)return x`
            <qrcg-input
                name="trial_days"
                placeholder="15"
                type="number"
                min="0"
                step="1"
            >
                ${t$3`Trial days`}
            </qrcg-input>
        `}renderPlanConfigurationsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Plan Configuration`}</h2>
                <qrcg-input
                    name="number_of_dynamic_qrcodes"
                    type="number"
                    placeholder="150"
                    min="-1"
                >
                    <div slot="instructions">${t$3`Type -1 for unlimited`}</div>

                    ${t$3` Number of dynamic QR codes`}
                </qrcg-input>

                <qrcg-input
                    name="number_of_scans"
                    placeholder="10000"
                    type="number"
                >
                    <div slot="instructions">${t$3`Type -1 for unlimited`}</div>
                    ${t$3`Number of scans`}
                </qrcg-input>

                <qrcg-input
                    name="number_of_card_scans"
                    placeholder="10000"
                    type="number"
                >
                    <div slot="instructions">${t$3`Type -1 for unlimited`}</div>
                    ${t$3`Number of card scans`}
                </qrcg-input>

                <qrcg-input
                    name="number_of_custom_domains"
                    placeholder="10"
                    type="number"
                    min="-1"
                    step="1"
                >
                    <div slot="instructions">${t$3`Type -1 for unlimited`}</div>
                    ${t$3`Number of custom domains`}
                </qrcg-input>

                <qrcg-input
                    name="file_size_limit"
                    type="number"
                    min="-1"
                    step="1"
                >
                    <div slot="instructions">
                        ${t$3`Please note that the actual maximum file size in your php configuration is `+Config.get("plan.allowed_file_size")}.
                    </div>
                    ${t$3`Upload File Size Limit (MB)`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="scan_retention_days"
                    .options=${this.getScanRetentionDays()}
                >
                    ${t$3`Scan Retention. Default (Keep Forever)`}
                </qrcg-balloon-selector>

                ${this.renderNumberOfUsersInput()}
                ${this.renderNumberOfMenuItemsInRestaurantMenuQRCode()}
                ${this.renderNumberOfProductCatalogueItems()}
                ${this.renderNumberOfAiGenerations()}
                ${this.renderNumberOfBulkCreatedQRCodes()}
            </qrcg-form-section>
        `}getUnavailableTypesBehaviourOptions(){return[{name:t$3`Hide unavailable types.`,value:"hidden"},{name:t$3`Show upgrade message`,value:"show_upgrade_message"}]}renderQRCodeTypesSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Available Types`}</h2>
                <qrcg-balloon-selector
                    name="qr_types"
                    .options=${new QRCodeTypeManager$1().getAvailableQrCodeTypes().map(w=>({...w,value:w.id}))}
                    multiple
                >
                    ${t$3`QR Code Types`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    .options=${this.getUnavailableTypesBehaviourOptions()}
                    name="unavailable_types_behaviour"
                >
                    ${t$3`Unavailable types behaviour. (Default is showing upgrade message)`}
                </qrcg-balloon-selector>
            </qrcg-form-section>
        `}renderFormFields(){return x`
            <qrcg-subscription-plan-checkout-link
                plan-id=${this.data?.id}
            ></qrcg-subscription-plan-checkout-link>

            ${this.renderBasicDetailsSection()}
            <!--  -->
            ${this.renderPlanConfigurationsSection()}

            <!--  -->

            ${this.renderAdsSection()}
            <!--  -->
            ${this.renderQRCodeTypesSection()}

            <qrcg-dynamic-type-limits
                name="dynamic_type_limits"
            ></qrcg-dynamic-type-limits>

            <qrcg-form-section>
                <h2 class="section-title">${t$3`Other Features`}</h2>

                <qrcg-balloon-selector
                    name="features"
                    .options=${getFeatures()}
                    multiple
                >
                    ${t$3`Features`}
                </qrcg-balloon-selector>
            </qrcg-form-section>

            <qrcg-subscription-plan-checkpoints
                name="checkpoints"
                .subscriptionPlan=${this.data}
            ></qrcg-subscription-plan-checkpoints>
        `}}QrcgSubscriptionPlanForm.register();class QrcgSubscriptionPlanFormPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title"> ${this.titleController.pageTitle} </span>

                <div slot="header-actions">
                    <qrcg-form-section-toggler></qrcg-form-section-toggler>
                </div>
                <qrcg-subscription-plan-form
                    slot="content"
                ></qrcg-subscription-plan-form>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-subscription-plan-form-page",QrcgSubscriptionPlanFormPage);class QrcgSubscriptionPlanList extends QRCGDashboardList{constructor(){super({baseRoute:"subscription-plans",singularRecordName:"Subscription Plan",frontendFormUrl:null})}static listColumns=[{key:"name",label:"Name"},{key:"price",label:"Price"},{key:"frequency",label:"Frequency"},{key:"number_of_dynamic_qrcodes",label:"Allowed QRs"},{key:"number_of_scans",label:"Scans"},{key:"is_trial",label:"Trial"},{key:"actions",label:"Actions",width:"15rem"}];cellContentRenderer=(w,q)=>{switch(q.key){case"is_trial":return this.renderBooleanBadgeCell(w[q.key],t$3`YES`,t$3`NO`);case"frequency":return typeof w[q.key]=="object"?w[q.key]:t$3(w[q.key]);default:return super.cellContentRenderer(w,q)}};onDuplicate=async w=>{w.preventDefault(),w.stopPropagation();const q=this.rows.find(D=>D.id===w.target["row-id"]);try{await confirm$1({message:t$3`Are you sure you want to duplicate `+q.name+t$3` Plan`});const{response:D}=await post(`subscription-plans/${q.id}/duplicate`),Q=await D.json();Q.name===q.name?(showToast(t$3`Plan copied successfully.`),this.fetchData()):(console.log({json:Q,row:q}),showToast(t$3`Error while creating new plan.`))}catch(D){console.error(D),showToast(t$3`Error while creating new plan.`)}};renderDuplicateAction(w){return x`
            <a href="#" @click=${this.onDuplicate} .row-id=${w.id}
                >${t$3`Duplicate`}</a
            >
        `}rowActions(w){return x`
            <div>
                ${this.renderDuplicateAction(w)}
                ${this.renderEditRowLink(w)} ${this.renderDeleteRowLink(w)}
            </div>
        `}renderBeforeTable(){return x`
            <qrcg-form-comment
                style="margin-bottom: 1rem;"
                mdi-icon=${mdiExclamationThick}
                label=${t$3`Warning`}
            >
                ${t$3`Users will be automatically onboarded to trial plan, if no trial plan is available then to free plan, otherwise they will be asked to subscribe after every login and they will not be able to access the dashboard area.`}
            </qrcg-form-comment>
        `}}window.defineCustomElement("qrcg-subscription-plan-list",QrcgSubscriptionPlanList);class QrcgSubscriptionPlanListPage extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${t$3`Subscription Plans`}</span>
                <qrcg-button
                    slot="header-actions"
                    href="/dashboard/subscription-plans/new"
                    >${t$3`Create`}</qrcg-button
                >
                <qrcg-subscription-plan-list
                    slot="content"
                ></qrcg-subscription-plan-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-subscription-plan-list-page",QrcgSubscriptionPlanListPage);const style$U=":host{display:block}[name]{margin-top:1rem}section{border:.5rem solid var(--gray-0);padding:1rem;margin-bottom:1rem}.section-title{margin-top:0;color:var(--gray-2)}qrcg-form-comment p{margin:0}@media(min-width:900px){qrcg-input,qrcg-textarea,qrcg-balloon-selector{max-width:50%}qrcg-form-comment{max-width:calc(50% - 2rem)}}.actions{display:flex;justify-content:flex-end}.copy-code{background-color:#fff;padding:.25rem .5rem;display:flex;align-items:center;margin-top:.5rem;width:fit-content}.copy-code qrcg-copy-icon{margin-left:.5rem}.instructions{padding:1rem;background-color:var(--gray-0);line-height:1.5}.copy-text-container{display:flex;align-items:center;margin-top:.5rem}.instructions qrcg-copy-icon{margin-left:1rem}.copy-text{background-color:#fff;padding:.5rem;display:inline-block}.copy-text div{-webkit-user-select:all;user-select:all;max-width:50vw;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media(min-width:900px){.instructions{max-width:50%}}.hidden{display:none}@media(min-width:900px){qrcg-searchable-select{max-width:50%;margin-top:1rem}}";class QrcgSystemSettingsFormBase extends BaseComponent{static styleSheets=[...super.styleSheets,style$U];static get properties(){return{configs:{type:Array}}}initApiAccess(){const w=this.baseRoute();this.api=QRCGApiConsumer.instance({host:this,baseRoute:w,bindEvents:!0,loadableElementsSelector:"qrcg-button",disableableInputsSelector:"[name]"})}connectedCallback(){super.connectedCallback(),this.initApiAccess(),this.addEventListener("on-input",this.onInput),this.addEventListener("keyup",this.onKeyUp)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput),this.removeEventListener("keyup",this.onKeyUp)}baseRoute(){return"system/configs"}firstUpdated(){this.fetchConfigs()}onKeyUp=w=>{const q=w.composedPath()[0];w.key==="Enter"&&parentMatches(q,"qrcg-input, qrcg-select, qrcg-balloon-selector, qrcg-color-picker")&&this.saveConfigs()};async fetchConfigs(){this.configs=await this.api.search({keys:this.getConfigKeysToFetch()})}getConfigKeysToFetch(){return this.inputs.map(w=>w.name)}async syncInputs(){console.log("syncInputs"),this.configs.forEach(w=>{const q=this.shadowRoot.querySelector(`[name="${w.key}"]`);q&&(q.value=w.value,console.log("setting value of ",q,w.value))})}updated(w){w.has("configs")&&this.syncInputs()}successSaveMessage(){return t$3`Settings saved successfully.`}onApiSuccess(w){w.detail.request.method==="POST"&&this.successSaveMessage()&&showToast(this.successSaveMessage())}get inputs(){return Array.from(this.shadowRoot.querySelectorAll("[name]"))}onInput(w){const q=w.composedPath()[0];q.name?.match(/theme/)&&QrcgTheme.setThemeConfig({key:q.name,value:q.value}),this.setLocalConfigLazily(w.detail.name,w.detail.value)}setLocalConfigLazily(w,q){clearTimeout(this.setConfigTimeout),this.setConfigTimeout=setTimeout(()=>{this.setLocalConfig(w,q)},500)}setLocalConfig(w,q){this.configs=this.configs.map(D=>D.key===w?{key:w,value:q}:D)}getValue(w){return this.configs?.find(q=>q.key===w)?.value}getConfigValue(w){return this.getValue(w)}async saveConfigs(){const w=this.inputs.map(q=>({key:q.name,value:q.value}));await this.api.post(this.baseRoute(),w)}renderInstructionsWithCopyDetails(w,q){return isEmpty(q)?x` <div class="instructions">${w}</div> `:x`
                <div class="instructions">
                    <div>${w}</div>
                    <div class="copy-text-container">
                        <div class="copy-text">
                            <div>${q}</div>
                        </div>
                        <qrcg-copy-icon>${q}</qrcg-copy-icon>
                    </div>
                </div>
            `}renderForm(){}renderFileInput({label:w,name:q,instructions:D,accept:Q}){const O=q.split(".");return Q||(Q=`.${O[O.length-1]}`),x`
            <qrcg-file-input
                name="${q}"
                upload-endpoint="system/configs/upload?key=${q}"
                accept=${Q}
            >
                ${t$3(w)}
                ${D?x` <div slot="instructions">${t$3(D)}</div>`:null}
            </qrcg-file-input>
        `}renderActions(){return x`<div class="actions">${this.renderActionButtons()}</div>`}renderActionButtons(){return this.renderSaveButton()}renderSaveButton(){return x`
            <qrcg-button class="save-button" @click=${this.saveConfigs}>
                ${t$3`Save`}
            </qrcg-button>
        `}render(){return x`
            ${this.renderForm()}
            <!-- -->
            ${this.renderActions()}
        `}}class QrcgCreditPricingForm extends QrcgSystemSettingsFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];renderForm(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Dynamic & Static QR Codes`}</h2>
                <qrcg-input
                    type="number"
                    name="account_credit.dynamic_qrcode_price"
                    placeholder="10"
                    min="1"
                >
                    ${t$3`Dynamic QR Code Price`}
                </qrcg-input>
                <qrcg-input
                    type="number"
                    min="1"
                    name="account_credit.static_qrcode_price"
                    placeholder="1"
                >
                    ${t$3`Static QR Code Price`}
                </qrcg-input>
            </qrcg-form-section>
        `}}window.defineCustomElement("qrcg-credit-pricing-form",QrcgCreditPricingForm);class QrcgCreditPricingPage extends QrcgDashboardPage{static styles=[i$3`
            :host {
                display: block;
            }
        `];pageTitle(){return t$3`Pricing Settings`}renderContent(){return x` <qrcg-credit-pricing-form></qrcg-credit-pricing-form> `}}window.defineCustomElement("qrcg-credit-pricing-page",QrcgCreditPricingPage);class QrcgSubscriptionPlanRouter extends i$1{billing=new BillingMode;static styles=[i$3`
            :host {
                display: block;
            }
        `];renderAccountCreditRoutes(){return x`
            <qrcg-protected-route
                route="/dashboard/subscription-plans/credit-pricing$"
                permission="subscription-plan.list-all"
            >
                <template>
                    <qrcg-credit-pricing-page></qrcg-credit-pricing-page>
                </template>
            </qrcg-protected-route>
        `}renderSubscriptionRoutes(){return x`
            <qrcg-protected-route
                route="/dashboard/subscription-plans$"
                permission="subscription-plan.list-all"
            >
                <template>
                    <qrcg-subscription-plan-list-page></qrcg-subscription-plan-list-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route
                route="/dashboard/subscription-plans/new|/dashboard/subscription-plans/edit/(?<id>\\d+)"
                permission="subscription-plan.store"
            >
                <template>
                    <qrcg-subscription-plan-form-page></qrcg-subscription-plan-form-page>
                </template>
            </qrcg-protected-route>
        `}render(){return this.billing.isAccountCredit()?this.renderAccountCreditRoutes():this.renderSubscriptionRoutes()}}window.defineCustomElement("qrcg-subscription-plan-router",QrcgSubscriptionPlanRouter);const MODE_SANDBOX="sandbox",MODE_LIVE="live";class QrcgPaymentGatewayForm extends QrcgDashboardForm{constructor(){super({apiBaseRoute:"payment-gateways"})}firstUpdated(){super.firstUpdated?.(),this.renderRoot.querySelector('qrcg-balloon-selector[name="enabled"').valueType=this.stringToBoolean}stringToBoolean(w){if(w==="true")return!0;if(w==="false"||!w)return!1;throw new Error("Value must be either `true` or `false` or empty")}renderPaypalFields(){if(this.data.slug==="paypal")return x`
            <qrcg-input name="client_id" placeholder="${t$3`your client id`}"
                >${t$3`Client ID`}</qrcg-input
            >

            <qrcg-input
                name="client_secret"
                placeholder=${t$3`your client secret`}
                >${t$3`Client Secret`}</qrcg-input
            >
        `}renderOfflinePaymentGatewayFields(){if(this.data.slug==="offline-payment-gateway")return x`
            <qrcg-markdown-input
                name="customer_instructions"
                placeholder="E.g. your bank details, or transfer instructions."
            >
                ${t$3`Instructions for your customers`}
            </qrcg-markdown-input>
        `}renderStripeFields(){if(this.data.slug==="stripe")return x`
            <qrcg-input name="publisher_key" placeholder=${t$3`pk_......`}>
                ${t$3`Publisher Key`}
            </qrcg-input>

            <qrcg-input name="secret_key" placeholder=${t$3`sk_......`}>
                ${t$3`Secret Key`}
            </qrcg-input>
        `}renderFormInstructions(){if(this.data.slug==="offline-payment-gateway")return x`
            <qrcg-form-comment label=${t$3`Help`}>
                ${t$3`Offline payment gateway helps you recieve payments from your customers without any third party integrations. Customers will be asked to upload a proof of payment attachment, which is typically a transfer note or a deposit receipt.`}
            </qrcg-form-comment>
            <qrcg-form-comment label=${t$3`Instructions`}>
                ${t$3`You can review offline transactions from `}
                <a
                    href="/dashboard/transactions"
                    style="color:var(--primary-0); text-decoration: none;"
                    >${t$3`transactions`}</a
                >
                ${t$3`page.`}
            </qrcg-form-comment>
        `}renderFormFields(){return x`
            ${this.renderFormInstructions()}

            <qrcg-input name="name">${t$3`Name`}</qrcg-input>
            <qrcg-balloon-selector
                name="mode"
                .options=${[{name:t$3("Sandbox"),value:MODE_SANDBOX},{name:t$3("Live"),value:MODE_LIVE}]}
            >
                ${t$3`Mode`}
            </qrcg-balloon-selector>

            <qrcg-balloon-selector
                name="enabled"
                .options=${[{name:t$3("ON"),value:!0},{name:t$3("OFF"),value:!1}]}
            >
                ${t$3`Enabled`}
            </qrcg-balloon-selector>

            ${this.renderStripeFields()}

            <!-- -->

            ${this.renderPaypalFields()}

            <!-- -->

            ${this.renderOfflinePaymentGatewayFields()}
        `}}window.defineCustomElement("qrcg-payment-gateway-form",QrcgPaymentGatewayForm);class QrcgPaymentGatewayFormPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-payment-gateway-form
                    slot="content"
                ></qrcg-payment-gateway-form>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-payment-gateway-form-page",QrcgPaymentGatewayFormPage);class QrcgPaymentGatewayList extends QRCGDashboardList{constructor(){super({baseRoute:"payment-gateways",singularRecordName:t$3("Payment Gateway"),frontendFormUrl:null}),this.cellContentRenderer=this.cellContentRenderer.bind(this)}static listColumns=[{key:"id",label:"ID",width:"2rem"},{key:"name",label:"Name"},{key:"enabled",label:"Enabled"},{key:"actions",label:"Actions",width:"7rem"}];cellContentRenderer(w,q){const D=w[q.key];switch(q.key){case"enabled":return this.renderBooleanBadgeCell(D,t$3`ON`,t$3`OFF`);default:return super.cellContentRenderer(w,q)}}renderDeleteRowLink(){return null}}window.defineCustomElement("qrcg-payment-gateway-list",QrcgPaymentGatewayList);class QrcgPaymentGatewayListPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];connectedCallback(){super.connectedCallback(),this.titleController.pageTitle="Payment Gateways"}render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>

                <qrcg-payment-gateway-list
                    slot="content"
                ></qrcg-payment-gateway-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-payment-gateway-list-page",QrcgPaymentGatewayListPage);class QrcgPaymentGatewayRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(q=>setTimeout(q,50));const w=document.createElement("qrcg-payment-gateway-router");document.body.appendChild(w)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/payment-gateways$"
                permission="payment-gateway.list-all"
            >
                <template>
                    <qrcg-payment-gateway-list-page></qrcg-payment-gateway-list-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route
                route="/dashboard/payment-gateways/edit/(?<id>\\d+)"
                permission="payment-gateway.update-any"
            >
                <template>
                    <qrcg-payment-gateway-form-page></qrcg-payment-gateway-form-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-payment-gateway-router",QrcgPaymentGatewayRouter);QrcgPaymentGatewayRouter.boot();class QRCGCheckoutController{host;storageKey="qrcg-checkout-controller";planIdKey="plan-id";constructor(w){this.host=w,w?.addController(this)}key(w){return this.storageKey+":"+w}savePlanId(w){localStorage[this.key(this.planIdKey)]=w,this.saveAddedDate()}loadPlanId(){if(queryParam(this.planIdKey))return queryParam(this.planIdKey);const w=localStorage[this.key(this.planIdKey)];return isNaN(w)?null:Number(w)}saveAddedDate(){localStorage[this.key("added_at")]=new Date().getTime()}loadAddedDate(){return localStorage[this.key("added_at")]}getPrice(w){return w.price}}class QrcgPaypalButton extends i$1{subscriptions=new QRCGApiConsumer(this,"subscriptions");checkout=new QRCGCheckoutController(this);plans=new QRCGApiConsumer(this,"subscription-plans");static styles=[i$3`
            :host {
                display: block;
                transition: opacity 0.5s ease;
            }

            :host([loading]) {
                opacity: 0.5;
                pointer-events: none;
            }

            :host([buttons-loading]) .paypal-container {
                display: none;
            }

            .loader-container {
                display: flex;
                justify-content: center;
            }
        `];static get properties(){return{planId:{},plan:{},subscription:{},loading:{type:Boolean,reflect:!0},loaders:{},buttonsLoading:{type:Boolean,attribute:"buttons-loading",reflect:!0}}}constructor(){super(),this.loaders=0,this.onCancel=this.onCancel.bind(this),this.onError=this.onError.bind(this),this.onBeforeRequest=this.onBeforeRequest.bind(this),this.onAfterRequest=this.onAfterRequest.bind(this),this.onApprove=this.onApprove.bind(this),this.onScriptLoad=this.onScriptLoad.bind(this),this.buttonsLoading=!0}connectedCallback(){super.connectedCallback(),this.addEventListener("api:before-request",this.onBeforeRequest),this.addEventListener("api:after-request",this.onAfterRequest),this.loadScript()}disconnectedCallback(){super.disconnectedCallback(),document.querySelector(this.getScriptId())?.remove(),this.removeEventListener("api:before-request",this.onBeforeRequest),this.removeEventListener("api:after-request",this.onAfterRequest)}async loadScript(){this.planId=this.checkout.loadPlanId(),this.plan=await this.plans.get(this.planId),await new Promise(q=>setTimeout(q,0));const w=document.createElement("script");w.src=`https://www.paypal.com/sdk/js?client-id=${Config.get("paypal.client_id")}&vault=true&intent=subscription&components=buttons`,w.id=this.getScriptId(),w.async=!0,w.onload=this.onScriptLoad,document.head.appendChild(w)}async saveSubscription(){return this.subscription=await this.subscriptions.post("subscriptions/subscribe",{subscription_plan_id:this.plan.id}),this.subscription}async onApprove(w){await this.subscriptions.put(`subscriptions/${this.subscription.id}/update-paypal-ids`,{paypal_id:w.subscriptionID,paypal_order_id:w.orderID}),showToast(`You have been subscribed successfully to ${this.plan.name} plan`,2500),await validateCurrentToken(),push("/dashboard/qrcodes")}onCancel(){}onError(){}onButtonsInit=()=>{this.buttonsLoading=!1};async onScriptLoad(){await new Promise(w=>setTimeout(w,0)),paypal.Buttons({createSubscription:async(w,q)=>{const D=(await this.saveSubscription()).id;return q.subscription.create({plan_id:this.plan.paypal_plan_id,custom_id:D})},onApprove:this.onApprove,onCancel(){},onError(){},onInit:this.onButtonsInit}).render(this.renderRoot.querySelector(".paypal-container"))}getScriptId(){return"paypal-script"}onBeforeRequest(){this.loading=++this.loaders>0}onAfterRequest(){this.loading=--this.loaders>0}render(){return x`
            <div class="paypal-container"></div>

            <div class="loader-container">
                ${this.buttonsLoading?x` <qrcg-loader></qrcg-loader>`:null}
            </div>
        `}}window.defineCustomElement("qrcg-paypal-button",QrcgPaypalButton);class QrcgStripeButton extends i$1{checkoutController=new QRCGCheckoutController(this);subscriptions=new QRCGApiConsumer(this,"subscriptions");static styles=[i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{planId:{},loading:{type:Boolean}}}connectedCallback(){super.connectedCallback(),this.planId=this.checkoutController.loadPlanId(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick=()=>{this.checkout()};saveSubscription(){return this.subscriptions.post("subscriptions/subscribe",{subscription_plan_id:this.planId})}async checkout(){this.loading=!0;try{const w=await this.saveSubscription(),{response:q}=await post(`checkout/stripe/${w.id}`);location=(await q.json()).url}catch(w){console.error(w),showToast("Payment processing error"),this.loading=!1}}render(){return x`
            <qrcg-button .loading=${this.loading} @disabled=${this.loading}>
                Pay Now
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-stripe-button",QrcgStripeButton);const style$T=":host{display:inline-block;margin:.25rem}qrcg-button{display:inline-block}qrcg-button::part(button){background-color:var(--gray-0);color:#000;font-size:.7rem;padding:.5rem .8rem;min-width:unset}:host([active]) qrcg-button::part(button){background-color:var(--gray-1);color:#000}";class QrcgTab extends BaseComponent{static tag="qrcg-tab";static styleSheets=[...super.styleSheets,style$T];static get properties(){return{tabId:{attribute:"tab-id"},active:{type:Boolean,reflect:!0}}}connectedCallback(){super.connectedCallback(),document.addEventListener("qrcg-tab:activate",this.onActivate)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("qrcg-tab:activate",this.onActivate)}firstUpdated(){this.active&&!this.getQueryParam()?this.fireActivate():this.loadQueryParam()}getQueryParam(){return new URLSearchParams(location.search).get("tab-id")}loadQueryParam(){this.getQueryParam()==this.tabId&&this.fireActivate()}onActivate=w=>{w.detail.tabId===this.tabId?this.active=!0:this.active=!1,this.syncQueryParam()};onLabelClick(){this.fireActivate()}fireActivate(){document.dispatchEvent(new CustomEvent("qrcg-tab:activate",{detail:{tabId:this.tabId}}))}syncQueryParam(){const w=new URLSearchParams(location.search),q=w.get("tab-id");if(!this.firstRender&&this.active&&q!==this.tabId){w.set("tab-id",this.tabId),w.toString();const D=`${location.pathname}?${w.toString()}`;push(D)}this.firstRender=!1}render(){return x`
            <qrcg-button no-shadow @click=${this.onLabelClick}>
                <slot></slot>
            </qrcg-button>
        `}}QrcgTab.register();class QrcgTabContent extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{tabId:{attribute:"tab-id"},active:{type:Boolean}}}connectedCallback(){super.connectedCallback(),document.addEventListener("qrcg-tab:activate",this.onActivate)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("qrcg-tab:activate",this.onActivate)}onActivate=w=>{this.tabId===w.detail.tabId?this.active=!0:this.active=!1};updated(w){w.has("active")&&(this.active?this.renderContent():this.resetContent())}renderContent(){const w=this.shadowRoot.querySelector("slot"),D=Array.from(w.assignedNodes()).find(O=>O.matches&&O.matches("template"));if(!D){console.error("You must wrap tab contents with <template> tag");return}const Q=D.content.cloneNode(!0);this.appendChild(Q)}resetContent(){this.querySelectorAll("*:not(template)").forEach(w=>w.remove())}render(){return x` <slot></slot> `}}window.defineCustomElement("qrcg-tab-content",QrcgTabContent);const defaultLoginLogo="/assets/images/login-logo.png",defaultWhiteLogo="/assets/images/logo-white.png",defaultLogo="/assets/images/logo.png";class QrcgAppLogo extends i$1{static styles=[i$3`
            :host {
                display: block;
                position: relative;
                color: white;
                user-select: none;
                -webkit-user-select: none;
                max-height: var(--dashboard-header-height);
                max-width: 12rem;
                padding: 0.35rem 0;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            a {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
            }

            .logo-img {
                max-width: 100%;
                max-height: 100%;
            }
        `];static get properties(){return{variation:{},sloganLetterSpacing:{},href:{reflect:!0}}}connectedCallback(){super.connectedCallback()}renderLogoImage(){return u$3`
            ${this.renderLink()}

            <img class="logo-img" src=${this.logo} part="logo-img" />
        `}get defaultLogo(){switch(this.variation){case"inverse":return defaultLogo;case"login":return defaultLoginLogo;default:return defaultWhiteLogo}}get logo(){return this.configLogo?(this.classList.remove("is-default"),this.configLogo):(this.classList.add("is-default"),this.defaultLogo)}get configLogo(){const w=Config.get("frontend.header_logo_url"),q=Config.get("frontend.header_logo_inverse_url"),D=Config.get("frontend.login_logo_url");switch(this.variation){case"inverse":return q;case"login":return D;default:return w}}renderLink(){if(Config.get("app.frontend_links")!=="disabled")return u$3`${this.href?u$3`<a href="${this.href}"></a>`:""}`}render(){return this.renderLogoImage()}}window.defineCustomElement("qrcg-app-logo",QrcgAppLogo);class QrcgBodyBackground extends i$1{static styles=[i$3`
            :host {
                display: block;
                position: fixed;
                top: 0;
                bottom: 0;
                left: 0;
                right: 0;
                z-index: 0;
            }

            .layer,
            .color {
                position: fixed;
                top: 0;
                bottom: 0;
                left: 0;
                right: 0;
                z-index: 0;
                opacity: 1;
            }

            .color {
                opacity: 1;
            }

            .color-1 {
                background-color: var(--checkout-page-gradient-color-1);
            }

            .color-2 {
                background-color: rgba(0, 0, 0, 0.5);
            }

            .layer-1 {
                background-image: linear-gradient(
                    35deg,
                    rgba(0, 0, 0, 0),
                    var(--checkout-page-gradient-color-1) 10%,
                    var(--checkout-page-gradient-color-2),
                    rgba(0, 0, 0, 0)
                );
            }

            .layer-2 {
                /* opacity: 0; */
                background-image: linear-gradient(
                    135deg,
                    var(--checkout-page-gradient-color-2),
                    rgba(0, 0, 0, 0),
                    var(--checkout-page-gradient-color-1),
                    rgba(0, 0, 0, 0)
                );
            }
        `];static tag="qrcg-body-background";static instance=null;static remove(){this.instance.remove()}static render(){const w=document.createElement(this.tag);document.body.prepend(w),this.instance=w}constructor(){super()}connectedCallback(){super.connectedCallback(),this.computeColors()}cssVar(w){return getComputedStyle(document.documentElement).getPropertyValue(w)}computeColors(){const w=this.cssVar("--checkout-page-gradient-color-1"),q=this.cssVar("--checkout-page-gradient-color-2");isEmpty(w)&&this.style.setProperty("--checkout-page-gradient-color-1","var(--primary-0)"),isEmpty(q)&&this.style.setProperty("--checkout-page-gradient-color-2","var(--primary-1)")}render(){return x`
            <div class="color color-1"></div>
            <div class="color color-2"></div>
            <div class="color color-3"></div>
            <div class="layer layer-1"></div>
            <div class="layer layer-2"></div>
            <div class="layer layer-3"></div>
        `}}window.defineCustomElement(QrcgBodyBackground.tag,QrcgBodyBackground);const style$S=":host{display:block;padding:1rem;position:relative;z-index:1;--qrcg-input-box-shadow: inset 0 0 0 2px var(--gray-1);--qrcg-input-box-shadow-focus: inset 0 0 0 2px var(--gray-2)}.logo-container{display:flex;align-items:center}qrcg-box{background-color:#fff}qrcg-app-logo{margin:2rem auto}h1{display:flex;min-height:3rem;align-items:center;color:var(--gray-2);margin-top:0}a{color:var(--primary-0);text-decoration:none}.container{max-width:800px;margin:auto}.loader-container{display:flex;align-items:center;padding-top:1rem}qrcg-loader{margin:auto}.page-container{line-height:1.8}";class QrcgCheckoutPage extends BaseComponent{static styleSheets=[...super.styleSheets,style$S];connectedCallback(){super.connectedCallback(),QrcgBodyBackground.render()}disconnectedCallback(){super.disconnectedCallback(),QrcgBodyBackground.remove()}renderTitle(){}renderPage(){}renderLoader(){return x`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}render(){return x`
            <div class="container">
                <div class="logo-container">
                    <qrcg-app-logo variation="login"></qrcg-app-logo>
                </div>
                <qrcg-box>
                    <h1>${this.renderTitle()}</h1>
                    <div class="page-container">${this.renderPage()}</div>
                </qrcg-box>
            </div>
        `}}class QrcgPayButton extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{paymentProcessor:{},loading:{type:Boolean},plan:{}}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}getBillingDetailsResponseId(){return parentMatches(this,"qrcg-billing-details-collector").billingFormResponseId}async onClick(){this.loading=!0;try{let w={};w={billingDetailsResponseId:this.getBillingDetailsResponseId()},w=PluginManager.applyFilters(FILTER_PAYLINK_POST_DATA,w);const q=this.isChangePlanAction()?"?action=change-plan":"",{response:D}=await post(`payment-processors/${this.paymentProcessor.slug}/generate-pay-link/${this.plan.id}${q}`,w),O=(await D.json()).link;if(!O)throw"Link is empty";await validateCurrentToken(),window.location=O}catch{showToast(t$3`Payment error, please contact support.`),this.loading=!1}}isFreePlan(){const w=Number.parseFloat(this.plan.price);return w===0||isNaN(w)}isChangePlanAction(){return queryParam("action")==="change-plan"}renderText(){return this.isFreePlan()?t$3`Continue (No Payment is Required)`:this.isChangePlanAction()?t$3`Change Plan`:this.paymentProcessor?.pay_button_text}render(){return x`
            <qrcg-button ?loading=${this.loading}>
                ${this.renderText()}
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-pay-button",QrcgPayButton);const style$R="h2{color:var(--gray-2);margin:1rem 0 0}.form-inputs{display:grid;grid-template-columns:1fr 1fr;gap:1rem}qrcg-balloon-selector{margin-bottom:1rem}qrcg-button{margin:1rem auto 0;width:max-content}.loading-container{display:flex;align-items:center;justify-content:center;padding:1rem}";class BillingDetailsCollector extends BaseComponent{static tag="qrcg-billing-details-collector";static styleSheets=[...super.styleSheets,style$R];static OPTIONS_CUSTOMER_TYPES=[{name:t$3`Private`,value:"private"},{name:t$3`Company`,value:"company"}];static get properties(){return{...super.properties,billingEnabledLoading:{type:Boolean},isBillingCollectionEnabled:{type:Boolean},customFormId:{},billingDetailsCollectedSuccessfully:{type:Boolean},billingFormResponseId:{},customerType:{}}}constructor(){super(),this.billingEnabledLoading=!0,this.isBillingCollectionEnabled=!0,this.customFormId=null,this.billingDetailsCollectedSuccessfully=!1,this.billingFormResponseId=null}connectedCallback(){super.connectedCallback(),this.fetchBillingCollectionEnabled(),this.addEventListener("on-input",this.onInput),this.addEventListener(CustomFormRenderer.EVENT_ON_SUBMIT,this.onFormSubmit),this.addEventListener(FormResponsePreview.EVENT_CHANGE_REQUESTED,this.onResponseChangeRequested)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput),this.removeEventListener(CustomFormRenderer.EVENT_ON_SUBMIT,this.onFormSubmit),this.removeEventListener(FormResponsePreview.EVENT_CHANGE_REQUESTED,this.onResponseChangeRequested)}onResponseChangeRequested(){this.billingDetailsCollectedSuccessfully=!1}async onFormSubmit(w){const{response:q}=w.detail;this.billingFormResponseId=q.id,this.billingDetailsCollectedSuccessfully=!0,this.response=q}updated(w){super.updated(w),(w.has("isBillingCollectionEnabled")||w.has("billingEnabledLoading"))&&this.initCustomerType()}async initCustomerType(){if(!this.isBillingCollectionEnabled||this.billingEnabledLoading)return;const w=BillingDetailsCollector.OPTIONS_CUSTOMER_TYPES[0].value,q=this.$('[name="customer_type"]');q.value=w,this.fetchCustomerTypeCustomFormId(w)}onInput(w){const{name:q,value:D}=w.detail;q==="customer_type"&&this.fetchCustomerTypeCustomFormId(D)}async fetchCustomerTypeCustomFormId(w){this.customerType=w;const{json:q}=await get("billing-collection/form/"+w);this.customFormId=q.result}async fetchBillingCollectionEnabled(){this.billingEnabledLoading=!0;try{const{json:w}=await get("billing-collection/is-enabled");this.isBillingCollectionEnabled=w.result}catch(w){console.error(w)}this.billingEnabledLoading=!1}renderCustomerTypeSelector(){return x`
            <qrcg-balloon-selector
                name="customer_type"
                .options=${BillingDetailsCollector.OPTIONS_CUSTOMER_TYPES}
                .value=${this.customerType}
            >
                ${t$3`Type`}
            </qrcg-balloon-selector>
        `}renderBillingDetailsForm(){if(!this.billingEnabledLoading&&this.isBillingCollectionEnabled&&!this.billingDetailsCollectedSuccessfully)return x`
            <h2>${t$3`Billing Details`}</h2>

            ${this.renderCustomerTypeSelector()}

            <qrcg-custom-form-renderer form-id=${this.customFormId}>
                <qrcg-button slot="submit-button">
                    ${t$3`Save Billing Details`}
                </qrcg-button>
            </qrcg-custom-form-renderer>
        `}renderLoader(){if(this.billingEnabledLoading)return x`
            <div class="loading-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderPreview(){if(this.billingDetailsCollectedSuccessfully)return x`
            <qrcg-custom-form-response-preview
                .response=${this.response}
            ></qrcg-custom-form-response-preview>
        `}renderContent(){if(!(this.isBillingCollectionEnabled&&!this.billingDetailsCollectedSuccessfully))return x`<slot></slot>`}render(){return[this.renderPreview(),this.renderContent(),this.renderLoader(),this.renderBillingDetailsForm()]}}BillingDetailsCollector.register();const style$Q="qrcg-paypal-button{max-width:17rem;margin:auto}.frequency{text-transform:capitalize}section{display:flex;align-items:center;justify-content:space-between;font-size:1.3rem;line-height:1.8;padding:1rem 0;border-bottom:2px dotted var(--gray-1)}.item{display:flex;color:var(--gray-2)}.item:nth-child(2){font-weight:700}.hero{font-size:6rem}.tabs{display:flex}.loading-or qrcg-loader{transform:translateY(-23%) scale(.5)}.loading-or{height:2rem;display:inline-flex;align-items:center;justify-content:center}.error-message{padding:1rem;background-color:var(--gray-0);margin-top:1rem;color:var(--gray-2);margin-bottom:1rem}qrcg-pay-button{margin:1rem 0rem}";class QrcgCheckout extends QrcgCheckoutPage{static tag="qrcg-checkout";static styleSheets=[...super.styleSheets,style$Q];static get properties(){return{planId:{},plan:{type:Object},paymentGateways:{type:Array},paymentProcessors:{type:Array},paymentProcessorsLoading:{type:Boolean},generatePayLinkLoading:{type:Boolean},selectedPaymentProcessor:{}}}plans=new QRCGApiConsumer(this,"subscription-plans");checkout=new QRCGCheckoutController(this);constructor(){super(),this.plan={},this.paymentProcessorsLoading=!0,this.generatePayLinkLoading=!1}async firstUpdated(){this.planId=this.checkout.loadPlanId(),this.plan=await this.plans.get(this.planId)}connectedCallback(){if(super.connectedCallback(),this.checkout.savePlanId(this.checkout.loadPlanId()),!loggedIn())return this.redirectToSignUpPage();this.fetchPaymentProcessors(),document.addEventListener("qrcg-checkout:request-update",this.onUpdateRequested)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("qrcg-checkout:request-update",this.onUpdateRequested)}onUpdateRequested=()=>{this.requestUpdate()};redirectToSignUpPage(){if(Auth0Manager.isEnabled())return push(Auth0Manager.loginUrl());push(url("/account/sign-up"))}async fetchPaymentProcessors(){try{const{response:w}=await get("payment-processors"),q=await w.json();this.paymentProcessors=q,this.selectedPaymentProcessor=this.paymentProcessors[0]}finally{this.paymentProcessorsLoading=!1}}renderNoPaymentProcessorsMessage(){return QRCGCustomCodeRenderer.hasCode("Checkout: No Billing Method Available")?x`
                <qrcg-custom-code-renderer
                    position="Checkout: No Billing Method Available"
                ></qrcg-custom-code-renderer>
            `:x`
            <div class="error-message">
                ${t$3`We cannot handle your payment at the moment.`}
            </div>
        `}renderPaymentProcessorsTabs(){if(this.paymentProcessorsLoading)return null;if(isEmpty(this.paymentProcessors))return this.renderNoPaymentProcessorsMessage();if(this.paymentProcessors.length!==1)return x`
            <qrcg-balloon-selector
                .options=${this.paymentProcessors.map(w=>({value:w.slug,name:w.display_name}))}
                .value=${this.selectedPaymentProcessor?.slug}
                name="payment_processor"
                @on-input=${this.onPaymentProcessorInput}
            ></qrcg-balloon-selector>
        `}onPaymentProcessorInput(w){this.selectedPaymentProcessor=this.paymentProcessors.find(q=>q.slug===w.detail.value)}renderPaymentProcessorsTabContents(){if(!isEmpty(this.paymentProcessors)&&this.selectedPaymentProcessor)return x`
            <qrcg-pay-button
                .plan=${this.plan}
                .paymentProcessor=${this.selectedPaymentProcessor}
            ></qrcg-pay-button>
        `}isChangePlanAction(){return queryParam("action")==="change-plan"}getTitleText(){return this.isChangePlanAction()?t$3`Change Plan`+" -":t$3`Checkout:`}renderTitle(){return this.loadingOr(this.plan?.name,this.getTitleText()+" "+this.plan.name)}loadingOr(w,q=void 0){return q=q!==void 0?q:w,w?q:x`
            <div class="loading-or">
                <qrcg-loader></qrcg-loader>
            </div>
        `}formatNumericValue(w){return w==-1?t$3`Unlimited`:w}renderAbovePaymentProcessors(){return PluginManager.doActions(ACTION_CHECKOUT_ABOVE_PAYMENT_PROCESSORS_TAB)}getPrice(){let w=this.checkout.getPrice(this.plan);return w=PluginManager.applyFilters(FILTER_CHECKOUT_PRICE,w,this.plan),price(this.loadingOr(this.plan?.price,w))}renderPage(){return x`
            <section>
                <div class="item">${t$3`Dynamic QR codes`}</div>
                <div class="item">
                    ${this.loadingOr(this.formatNumericValue(this.plan?.number_of_dynamic_qrcodes))}
                </div>
            </section>

            <section>
                <div class="item">${t$3`Scans`}</div>
                <div class="item">
                    ${this.loadingOr(this.formatNumericValue(this.plan?.number_of_scans))}
                </div>
            </section>

            <section>
                <div class="item">
                    ${this.loadingOr(this.plan?.name,this.plan.name+" "+t$3`Plan`)}
                </div>
                <div class="item frequency">${t$3(this.plan.frequency)}</div>
            </section>

            <section>
                <div class="item">${t$3`Subtotal`}</div>
                <div class="item">${this.getPrice()}</div>
            </section>

            <section>
                <div class="item">${t$3`Total`}</div>
                <div class="item">${this.getPrice()}</div>
            </section>

            ${this.renderAbovePaymentProcessors()}

            <qrcg-billing-details-collector>
                ${this.renderPaymentProcessorsTabs()}
                ${this.renderPaymentProcessorsTabContents()}
            </qrcg-billing-details-collector>
        `}}QrcgCheckout.register();class QrcgAccountCreditCheckout extends QrcgCheckoutPage{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            .amount-buttons {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                grid-gap: 1rem;
            }

            .amount-btn {
                --button-color: var(--dark);
                --button-color-hover: var(--gray-0);

                --button-background-color: var(--gray-1);
                --button-background-color-hover: var(--gray-2);
            }

            .amount-btn.active {
                --button-color: white;
                --button-color-hover: white;

                --button-background-color: var(--primary-1);
                --button-background-color-hover: var(--primary-1);
            }

            .amount-btn::part(button) {
                font-size: 1.5rem;
                min-width: 0;
                padding: 2rem;
                transition: 0.5s ease;
            }

            .choose-another-amount {
                margin: 1rem 0;
                color: var(--primary-0);
                font-size: 0.8rem;
                font-weight: bold;
                cursor: pointer;
            }

            .error {
                color: var(--danger);
                font-weight: bold;
                font-size: 0.8rem;
                margin: 0.5rem 0;
            }

            qrcg-input {
                margin: 1rem 0;
            }
        `];static get properties(){return{showingCustomAmount:{type:Boolean},amount:{},loading:{type:Boolean}}}constructor(){super(),this.amount=0,loggedIn()||push("/account/login?redirect=/checkout-account-credit")}amounts(){return[5,10,20,30,40,50]}minAmount(){return 5}showCustomAmountInput(){this.showingCustomAmount=!0}onInput(w){this.setAmount(w.detail.value)}static async generatePayLinkAndGo(w){try{const{response:q}=await post("payment-processors/paypal/create-charge-link/"+w),Q=(await q.json()).link;if(!Q)throw new Error("invalid link");return window.location=Q,!0}catch{return showToast(t$3`We cannot handle your request at the moment.`),!1}}async onPayClick(){this.loading=!0,await this.constructor.generatePayLinkAndGo(this.amount)||(this.loading=!1)}onAmountButtonClick(w){const q=w.target;this.setAmount(q.dataset.amount)}setAmount(w){this.amount=+w,this.amountIsDirty=!0,this.requestUpdate()}amountIsInvalid(){return this.amount<this.minAmount()}renderErrorMessage(){if(this.amountIsInvalid()&&this.amountIsDirty)return x`
            <div class="error">
                ${t$3`Amount must be at least`} ${price(this.minAmount())}
            </div>
        `}renderPayButton(){return x`
            <qrcg-button
                ?disabled=${this.amountIsInvalid()}
                @click=${this.onPayClick}
                ?loading=${this.loading}
            >
                ${t$3`Pay Now`}
            </qrcg-button>
        `}renderCustomAmountInput(){return x`
            <qrcg-input
                name="custom_amount"
                type="number"
                min="${this.minAmount()}"
                autofocus
                placeholder=${t$3`100`}
                @on-input=${this.onInput}
            >
                ${t$3`Amount`}
            </qrcg-input>
        `}renderCustomAmountControl(){return this.showingCustomAmount?this.renderCustomAmountInput():x`
            <div
                class="choose-another-amount"
                @click=${this.showCustomAmountInput}
            >
                ${t$3`Or choose another amount`}
            </div>
        `}renderAmountsButtons(){return this.amounts().map(w=>x`
                <qrcg-button
                    data-amount=${w}
                    @click=${this.onAmountButtonClick}
                    class="amount-btn ${w===this.amount?"active":""}"
                >
                    ${price(w)}
                </qrcg-button>
            `)}renderTitle(){return t$3`Buy Account Credit`}renderPage(){if(loggedIn())return x`
            <div class="amount-buttons">${this.renderAmountsButtons()}</div>

            ${this.renderCustomAmountControl()}
            <!-- -->
            ${this.renderPayButton()}
            <!-- -->
            ${this.renderErrorMessage()}
        `}}window.defineCustomElement("qrcg-account-credit-checkout",QrcgAccountCreditCheckout);class QrcgCheckoutRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w));document.body.appendChild(new QrcgCheckoutRouter)}render(){return x`
            <qrcg-route route="/checkout$">
                <template>
                    <qrcg-checkout></qrcg-checkout>
                </template>
            </qrcg-route>

            <qrcg-route
                route="/checkout-account-credit$"
                permission="qrcode.store"
            >
                <template>
                    <qrcg-account-credit-checkout></qrcg-account-credit-checkout>
                </template>
            </qrcg-route>
        `}}window.defineCustomElement("qrcg-checkout-router",QrcgCheckoutRouter);QrcgCheckoutRouter.boot();class QrcgSearchablePlanRelationSelect extends QrcgSearchableRelationSelect{constructor(){super(),this.apiEndpoint="subscription-plans?list_all=true"}itemsTransformer(w){return w.map(q=>({id:q.id,name:q.name,frequency:q.frequency}))}}window.defineCustomElement("qrcg-searchable-plan-relation-select",QrcgSearchablePlanRelationSelect);class QrcgSubscriptionForm extends QrcgDashboardForm{constructor(){super({apiBaseRoute:"subscriptions"})}connectedCallback(){super.connectedCallback(),this.addEventListener("api:success",this.onSuccess)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("api:success",this.onSuccess)}onSuccess=w=>{setTimeout(()=>{const q=w.detail.response;this.data={...this.data,subscription_status:q.statuses[0]?.status}},0)};renderFormFields(){return x`
            <qrcg-searchable-user-relation-select
                name="user_id"
                position-mode=${QrcgSearchableSelect.POSITION_MODE_RELATIVE}
            >
                <div slot="label">${t$3`User`}</div>
            </qrcg-searchable-user-relation-select>

            <qrcg-searchable-plan-relation-select
                name="subscription_plan_id"
                position-mode=${QrcgSearchableSelect.POSITION_MODE_RELATIVE}
            >
                <div slot="label">${t$3`Subscription Plan`}</div>
            </qrcg-searchable-plan-relation-select>

            <qrcg-relation-select
                name="subscription_status"
                endpoint="subscriptions/statuses"
            >
                ${t$3`Subscription status`}
            </qrcg-relation-select>

            <qrcg-input type="date" name="expires_at">
                ${t$3`Expires at`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-subscription-form",QrcgSubscriptionForm);class QrcgSubscriptionFormPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-subscription-form slot="content"></qrcg-subscription-form>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-subscription-form-page",QrcgSubscriptionFormPage);const style$P="qrcg-custom-form-response-preview::part(actions){display:none}";class BillingDetailsModal extends QrcgModal{static styles=[super.styles,r$2(style$P)];static get properties(){return{...super.properties,responseId:{}}}renderTitle(){return t$3`Billing Details`}renderBody(){return x`
            <qrcg-custom-form-response-preview
                response-id=${this.responseId}
                show-form-name
            ></qrcg-custom-form-response-preview>
        `}}defineCustomElement("qrcg-subscription-billing-details-modal",BillingDetailsModal);class QrcgSubscriptionList extends QRCGDashboardList{constructor(){super({baseRoute:"subscriptions",singularRecordName:t$3("Subscription"),frontendFormUrl:null})}static listColumns=[{key:"id",label:"ID",width:"2rem"},{key:"user_name",label:"Name"},{key:"user_email",label:"Email"},{key:"subscription_plan_name",label:"Plan"},{key:"statuses[0].status",label:"Status"},{key:"expires_at",label:"Expires at"},{key:"created_at",label:"Started at"},{key:"actions",label:"Actions"}];cellContentRenderer(w,q){switch(q.key){case"subscription_plan_name":return isEmpty(w[q.key])?w.subscription_plan.name+" - "+t$3(w.subscription_plan.frequency):w[q.key];case"user_name":return isEmpty(w[q.key])?x`
                    <a href="/dashboard/users/edit/${w.user.id}">
                        ${w.user.name}
                    </a>
                `:w[q.key];case"user_email":return isEmpty(w[q.key])?x`
                    <a href="/dashboard/users/edit/${w.user.id}">
                        ${w.user.email}
                    </a>
                `:w[q.key];default:return super.cellContentRenderer(w,q)}}searchPlaceholder(){return t$3("By anything")}onViewBillingDetailsClick=w=>{w.preventDefault(),w.stopImmediatePropagation();const q=w.composedPath()[0].row;BillingDetailsModal.open({responseId:q.billing_details_custom_form_response_id})};renderDeleteRowLink(){return null}renderViewBillingDetails(w){return x`
            <a href="#" @click=${this.onViewBillingDetailsClick} .row=${w}>
                ${t$3`View Billing Details`}
            </a>
        `}rowActions(w){return x`
            <div class="row-actions" .row=${w}>
                ${this.renderEditRowLink(w)}
                <!--  -->
                ${this.renderViewBillingDetails(w)}
            </div>
        `}}window.defineCustomElement("qrcg-subscription-list",QrcgSubscriptionList);class QrcgSubscriptionListPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }

            .actions {
                display: flex;
                flex-wrap: wrap;
            }
        `];connectedCallback(){super.connectedCallback(),this.titleController.pageTitle=t$3("Subscriptions")}async onDeletePendingSubscriptionsClick(){try{await confirm$1({message:t$3`Are you sure you want to delete all pending subscriptions?`});const{json:w}=await post("/subscriptions/delete-pending");if(w.count==0)return showToast(t$3`No pending subscriptions found.`);showToast(t$3`Deleted`+` ${w.count} `+t$3`subscriptions`),this.getList().fetchData()}catch(w){console.log(w)}}getList(){return this.shadowRoot.querySelector("qrcg-subscription-list")}render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>

                <div class="actions" slot="header-actions">
                    <qrcg-button
                        transparent
                        @click=${this.onDeletePendingSubscriptionsClick}
                    >
                        ${t$3`Delete Pending Subscriptions`}
                    </qrcg-button>

                    <qrcg-button href="/dashboard/subscriptions/new">
                        ${t$3`Create`}
                    </qrcg-button>
                </div>

                <qrcg-subscription-list slot="content"></qrcg-subscription-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-subscription-list-page",QrcgSubscriptionListPage);class QrcgSubscriptionRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(q=>setTimeout(q,50));const w=document.createElement("qrcg-subscription-router");document.body.appendChild(w)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/subscriptions$"
                permission="subscription.list-all"
            >
                <template>
                    <qrcg-subscription-list-page></qrcg-subscription-list-page>
                </template>
            </qrcg-protected-route>

            <qrcg-protected-route
                route="/dashboard/subscriptions/new|/dashboard/subscriptions/edit/(?<id>\\d+)"
                permission="subscription.store"
            >
                <template>
                    <qrcg-subscription-form-page></qrcg-subscription-form-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-subscription-router",QrcgSubscriptionRouter);QrcgSubscriptionRouter.boot();class QrcgTransactionList extends QRCGDashboardList{constructor(){super({baseRoute:"transactions",singularRecordName:"Transaction",frontendFormUrl:"/dashboard/transactions/view/"})}static listColumns=[{key:"id",label:"ID",width:"2rem"},{key:"formatted_amount",label:"Amount"},{key:"_user_",label:"User"},{key:"_description_",label:"Description"},{key:"source",label:"Source"},{key:"status",label:"Status"},{key:"created_at",label:"Date"},{key:"actions",label:"Actions",width:"7rem"}];cellContentRenderer=(w,q)=>{switch(q.key){case"formatted_amount":return isEmpty(w.formatted_amount)?`${w.currency} ${w.amount}`:w.formatted_amount;case"_user_":return isEmpty(w._user_)?this.renderUser(w):w._user_;case"_description_":return isEmpty(w._description_)?this.renderRowDescription(w):w._description_;default:return super.cellContentRenderer(w,q)}};renderUser(w){return isEmpty(get$1(w,"subscription.user.name"))?get$1(w,"user.name"):get$1(w,"subscription.user.name")}renderRowDescription(w){return isEmpty(get$1(w,"subscription.subscription_plan.name"))?w.description:w.subscription.subscription_plan.name}approveTransaction=w=>{this.approveOrReject(w,"approve")};rejectTransaction=w=>{this.approveOrReject(w,"reject")};async approveOrReject(w,q){w.preventDefault(),w.stopImmediatePropagation();const Q=w.composedPath()[0].transactionId;await confirm$1({message:t$3`Are you sure you want to ${q} the transaction? The customer will be notified.`,affirmativeText:t$3`${ucfirst(q)}`}),await this.api.post(`transactions/${Q}/${q}`),this.fetchData(),showToast(t$3`Transaction has been ${q}ed successfully!`)}rowActions(w){if(w.source!="offline-payment")return"---";const q=new FileModel({remote:w.payment_proof});return x`
            <div>
                <a href=${q.directLink("inline")} target="_blank">
                    ${t$3`Payment Proof`}
                </a>
                <a
                    href="#"
                    .transactionId=${w.id}
                    @click=${this.approveTransaction}
                >
                    ${t$3`Approve`}
                </a>
                <a
                    href="#"
                    .transactionId=${w.id}
                    @click=${this.rejectTransaction}
                >
                    ${t$3`Reject`}
                </a>
            </div>
        `}searchPlaceholder(){return t$3("By anything")}}window.defineCustomElement("qrcg-transaction-list",QrcgTransactionList);class QrcgTransactionListPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];connectedCallback(){super.connectedCallback(),this.titleController.pageTitle=t$3`Transactions`}render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-transaction-list slot="content"></qrcg-transaction-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-transaction-list-page",QrcgTransactionListPage);class QrcgTransactionRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(q=>setTimeout(q,50));const w=document.createElement("qrcg-transaction-router");document.body.appendChild(w)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/transactions$"
                permission="transaction.list-all"
            >
                <template>
                    <qrcg-transaction-list-page></qrcg-transaction-list-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-transaction-router",QrcgTransactionRouter);QrcgTransactionRouter.boot();const ActiveSubscription={beforeEach(){},localUserReady(){},routeAfterRender(){},locationWillChange(F){},routeWillRender(F){},qrCodeRowWillToggleArchive(F){}},ExpiredSubscription={beforeEach(){return planIsExpired()},localUserReady(){showExpiredNotice()},routeAfterRender(){showExpiredNotice()},locationWillChange(F){const w=F.detail.url;requiresSubscription(w)&&(F.preventDefault(),showExpirationAction())},routeWillRender(F){const w=window.location.pathname;requiresSubscription(w)&&(F.preventDefault(),showExpirationAction(),push(homePage()))},qrCodeRowWillToggleArchive(F){F.preventDefault(),showExpirationAction()}};function planIsExpired(){return!onTrial()&&(currentSubscriptionStatus()===STATUS_EXPIRED||getPlanRemainingDays()<=0)}async function showExpiredNotice(){showSubsciptionNotice({message:t$3("Your subscription has been expired, resubscribe now to continue using our services.")})}const ExpiringSoonSubscription={beforeEach(){return expiringSoon()},localUserReady(){showExpiringSoonNotice()},routeAfterRender(){showExpiringSoonNotice()}};function expiringSoon(){return!onTrial()&&hasActiveSubscription()&&getPlanRemainingDays()<=EXPIRING_SOON_DAYS&&getPlanRemainingDays()>0}async function showExpiringSoonNotice(){showSubsciptionNotice({message:t$3("Your subscription is expiring soon, renew your subscription to enjoy uninterrupted services")})}const TrialSubscription={beforeEach(){return trialIsExpired()},localUserReady(){showTrialExpiredNotice()},routeAfterRender(){showTrialExpiredNotice()},locationWillChange(F){const w=F.detail.url;requiresSubscription(w)&&(F.preventDefault(),showExpirationAction())},routeWillRender(F){const w=window.location.pathname;requiresSubscription(w)&&(F.preventDefault(),showExpirationAction(),push(homePage()))},qrCodeRowWillToggleArchive(F){F.preventDefault(),showExpirationAction()}};function trialIsExpired(){return onTrial()&&getTrialRemainingDays()<=0}async function showTrialExpiredNotice(){showSubsciptionNotice({message:t$3("Your trial is expired, subscribe now to continue using our services.")})}const TrialExpiringSoonSubscription={beforeEach(){return trialIsExpiringSoon()},localUserReady(){showTrialNoticeIfNeeded()},routeAfterRender(){showTrialNoticeIfNeeded()}};function trialIsExpiringSoon(){return onTrial()&&getTrialRemainingDays()<=EXPIRING_SOON_DAYS}async function showTrialNoticeIfNeeded(){showSubsciptionNotice({message:t$3("Your trial is about to expire, upgrade now to enjoy uninterrupted services.")})}const subscriptionTypes=[ExpiredSubscription,ExpiringSoonSubscription,TrialSubscription,TrialExpiringSoonSubscription,ActiveSubscription,PlanEnforcement];function beforeAll(){return loggedIn()&&!isSuperAdmin()&&shouldEnforceSubscriptionRules()}async function callSubscriptionHook(F,w){for(const q of subscriptionTypes)if(beforeAll()&&isFunction(q[F])){if(isFunction(q.beforeEach)&&!q.beforeEach(F))continue;q[F](w)}}function main(){window.addEventListener("auth:local-user-ready",F=>callSubscriptionHook("localUserReady",F)),window.addEventListener("qrcg-route:after-render",F=>callSubscriptionHook("routeAfterRender",F)),window.addEventListener("qrcg-router:location-will-change",F=>callSubscriptionHook("locationWillChange",F)),window.addEventListener("qrcg-route:will-render",F=>callSubscriptionHook("routeWillRender",F)),window.addEventListener("qrcg-qrcode-row:will-toggle-archive",F=>{callSubscriptionHook("qrCodeRowWillToggleArchive",F)})}main();class QRCGInstallPage extends i$1{api=new QRCGApiConsumer(this,"","qrcg-button");formController=new QRCGFormController(this);static get styles(){return i$3`
            :host {
                display: block;
                max-width: 25rem;
                margin: auto;
                margin-top: 3rem;
                margin-bottom: 3rem;

                --qrcg-input-box-shadow: inset 0 0 0 2px var(--gray-1);
                --qrcg-input-box-shadow-focus: inset 0 0 0 2px var(--gray-2);
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
            }

            .go-home {
                display: block;
                color: var(--primary-0);
                margin-top: 2rem;
                text-align: center;
            }

            h1 {
                padding-bottom: 1rem;
                margin-top: 0;
                margin-bottom: 0rem;
                font-size: 1.2rem;
                color: var(--gray-2);
            }

            h2 {
                font-size: 1.2rem;
            }

            p {
                line-height: 1.8;
            }

            .navigation {
                display: flex;
                justify-content: space-between;
                margin-top: 1rem;
            }

            qrcg-button {
                width: fit-content;
            }

            .help,
            .warning {
                line-height: 1.5;
                background-color: var(--gray-0);
                padding: 0.5rem;
                margin-bottom: 1rem;
                font-size: 0.8rem;
            }

            .warning {
                margin-top: 0;
                background-color: var(--warning-0);
            }

            qrcg-box {
                padding: 0;
                border: 2px solid var(--gray-1);
            }

            qrcg-box::part(container) {
                padding: 1.5rem;
            }
        `}static get properties(){return{data:{}}}constructor(){super(),this.data={}}connectedCallback(){super.connectedCallback(),document.addEventListener("keypress",this.onKeyPress),this.setDefaultData(),this.attachGlobalStyles()}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keypress",this.onKeyPress),this.detachGlobalStyles()}attachGlobalStyles(){this.globalStyles=document.createElement("style"),this.globalStyles.innerHTML=styled`
            html {
                font-size: calc(14px + 6 * ((100vw - 320px) / 1240));
            }

            @media (min-width: 800px) {
                html {
                    font-size: calc(12px + 6 * ((100vw - 320px) / 1240));
                }
            }
            

            @media (min-width: 2000px) {
                html {
                    font-size: calc(12px + 6 * ((200vw) / 1240));
                }
            }
        `,document.head.appendChild(this.globalStyles)}detachGlobalStyles(){this.globalStyles.remove()}async setDefaultData(){const w=await this.api.post("install/load",this.envVariables().reduce((q,D)=>(q[D.key]="",q),{}));Object.keys(w).forEach(q=>{this.data[q]=w[q]}),this.requestUpdate()}renderForm(){return this.renderEnvVariables()}renderTitle(){}renderContent(){return x`
            <h1>${this.renderTitle()}</h1>

            ${this.renderHelp()?x`<div class="help">${this.renderHelp()}</div>`:null}
            ${this.renderWarning()?x`<div class="warning">${this.renderWarning()}</div>`:null}

            <qrcg-form> ${this.renderForm()} </qrcg-form>
        `}renderHelp(){}doNotRequireFields(){}verifyFields(){let w=!1;if(this.inputs.forEach(q=>{const D=this.doNotRequireFields();!isEmpty(D)&&q.name.match(new RegExp(D,"i"))||isEmpty(q.value)&&(q.errors=["This field is required"],w=!0)}),w)throw new Error("Some fields are invalid")}get inputs(){return this.renderRoot.querySelectorAll("[name]")}resetValidationErrors(){}envVariables(){return[]}renderEnvVariables(){return this.envVariables().map(w=>w.type==="qrcg-balloon-selector"?x`
                    <qrcg-balloon-selector
                        .options=${w.options}
                        name=${w.key}
                    >
                        ${w.name}
                    </qrcg-balloon-selector>
                `:x`
                <qrcg-input
                    name=${w.key}
                    placeholder=${w.placeholder}
                    type=${w.type}
                >
                    ${w.name}
                </qrcg-input>
            `)}renderNextButton(){return this.isLast()?x`<qrcg-button @click=${this.goNext}
                >Complete Setup</qrcg-button
            >`:this.getNextLink()?x` <qrcg-button @click=${this.goNext}>Next</qrcg-button> `:x`<div class="noop next"></div>`}renderWarning(){}isLast(){return!1}renderNavigation(){return x`
            <div class="navigation">
                ${this.getBackLink()?x`
                          <qrcg-button href=${this.getBackLink()}
                              >Back</qrcg-button
                          >
                      `:x`<div class="noop back"></div>`}
                ${this.renderNextButton()}
            </div>
        `}getBackLink(){}onKeyPress=w=>{w.key==="Enter"&&this.goNext()};async goNext(){this.resetInputErrors();try{if(this.verifyFields(),this.envVariables().length>0&&await this.saveEnvVariables(),this.verifyLink()&&await this.verify(),this.isLast())return this.completeInstallation();this.getNextLink()&&push(this.getNextLink())}catch(w){console.error(w)}}async completeInstallation(){(await this.api.post("install/complete")).pass?(push("/account/login?installed=true"),showToast("Installation completed. Login with super user credetntials.")):showToast("Cannot complete installation!")}resetInputErrors(){this.inputs.forEach(w=>{w.errors=[]})}getNextLink(){}verifyLink(){}verificationFailedMessage(){}verificationSuccessMessage(){}async verify(){const w=await this.api.post(this.verifyLink(),{});if(!w.pass){const q=w.message??this.verificationFailedMessage();throw showToast(q),new Error(q)}showToast(this.verificationSuccessMessage())}saveEnvVariables(){return this.api.post("install/save",this.data)}render(){return x`
            <qrcg-box>
                ${this.renderContent()} ${this.renderNavigation()}
            </qrcg-box>
        `}}class QrcgInstallIntroduction extends QRCGInstallPage{static get styles(){return[super.styles,i$3`
                ul {
                    line-height: 1.8;
                    padding: 0 1rem;
                }
                li {
                    margin: 0;
                }
            `]}renderTitle(){return`Welcome in ${Config.get("app.name")}`}getNextLink(){return"/install/purchase-code"}renderForm(){return x`
            <div>
                <p>
                    This wizard will guide you through the installation process.
                </p>
                <h2>Before you start</h2>
                <div>
                    Make sure you have the following ready:
                    <ul>
                        <li>MySQL database credentials.</li>
                        <li>SMTP mail server credentials.</li>
                        <li>
                            Script is running on Linux system, to configure cron
                            jobs.
                        </li>
                    </ul>
                </div>
                <p>If you are ready to proceed click Next.</p>
            </div>
        `}}window.defineCustomElement("qrcg-install-introduction",QrcgInstallIntroduction);class QrcgInstallDatabase extends QRCGInstallPage{renderTitle(){return"MySQL Database"}getBackLink(){return"/install/app-details"}getNextLink(){return"/install/super-user"}verifyLink(){return"install/verify-database"}verificationFailedMessage(){return"Cannot connect to databse server..."}verificationSuccessMessage(){return"Database connection works..."}doNotRequireFields(){return"DB_PASSWORD"}envVariables(){return[{key:"DB_HOST",name:"Database Host"},{key:"DB_PORT",name:"Database Port"},{key:"DB_DATABASE",name:"Database Name"},{key:"DB_USERNAME",name:"Database Username",placeholder:"Priviliged user"},{key:"DB_PASSWORD",name:"Database User Password",type:"password",placeholder:""}]}}window.defineCustomElement("qrcg-install-database",QrcgInstallDatabase);class QrcgInstallAppDetails extends QRCGInstallPage{renderTitle(){return"App Customisation"}getBackLink(){return"/install/purchase-code"}getNextLink(){return"/install/database"}renderHelp(){return"App name and slogan will be used in the frontend header."}envVariables(){return[{key:"APP_NAME",name:"App Name"},{key:"APP_SLOGAN",name:"App Slogan"}]}}window.defineCustomElement("qrcg-install-app-details",QrcgInstallAppDetails);class QrcgInstallSuperUser extends QRCGInstallPage{renderTitle(){return"Super User"}getBackLink(){return"/install/database"}getNextLink(){return"/install/mail"}envVariables(){return[{key:"SUPER_USER_NAME",name:"Name"},{key:"SUPER_USER_EMAIL",name:"Email"},{key:"SUPER_USER_PASSWORD",name:"Password",type:"password"}]}}window.defineCustomElement("qrcg-install-super-user",QrcgInstallSuperUser);class QrcgInstallMail extends QRCGInstallPage{static get styles(){return[super.styles,i$3`
                .skip-link {
                    user-select: none;
                    -webkit-user-select: none;
                    touch-action: manipulation;
                    margin: 1rem 0 0 0;
                    text-align: center;
                    color: var(--gray-2);
                    font-size: 0.8rem;
                    text-decoration: underline;
                    cursor: pointer;
                }
            `]}renderTitle(){return"Mail Setup"}getBackLink(){return"/install/super-user"}isLast(){return!0}renderWarning(){return x`This is final step, make sure all details are correct, you
            will have <b>no longer access</b> to the installation wizard after
            completing this step.`}getNextLink(){return null}renderNavigation(){return x`
            ${super.renderNavigation()}
            <div class="below-navigation">
                <div class="skip-link" @click=${this.onSkipClick}>
                    Skip Mail Configuration
                </div>
            </div>
        `}async onSkipClick(){try{await confirm$1({message:"Are you sure you want to skip mail configuration? Password reset emails wont work. You can change SMTP configurations later from Settings > Email Settings"}),this.completeInstallation()}catch{}}verifyLink(){return"install/verify-mail"}renderHelp(){return`    
            We will send a test email to the super user email provided in previous step.
        `}verificationFailedMessage(){return"Cannot connect to mail server..."}verificationSuccessMessage(){return"Mail server connection works..."}envVariables(){return[{key:"MAIL_HOST",name:"SMTP Host"},{key:"MAIL_PORT",name:"SMTP Port"},{key:"MAIL_USERNAME",name:"SMTP User Name"},{key:"MAIL_PASSWORD",name:"SMTP Password",type:"password"},{key:"MAIL_ENCRYPTION",name:"SMTP Encryption",type:"qrcg-balloon-selector",options:[{value:"null",name:"None"},{value:"tls",name:"TLS"},{value:"ssl",name:"SSL"}]},{key:"MAIL_FROM_ADDRESS",name:"SMTP From Address"},{key:"MAIL_FROM_NAME",name:"SMTP From Name"}]}}window.defineCustomElement("qrcg-install-mail",QrcgInstallMail);class QrcgInstallPurchaseCode extends QRCGInstallPage{static get styles(){return[super.styles,i$3`
                a {
                    color: var(--primary-0);
                }
            `]}connectedCallback(){super.connectedCallback()}renderTitle(){return ConfigHelper.isPaddle()?"License Key":ConfigHelper.isCodeCanyon()?"Purchase Code":"Purchase Code / License Key"}getBackLink(){return"/install"}getNextLink(){return"/install/app-details"}verifyLink(){return"install/verify-purchase-code"}verificationFailedMessage(){return"Invalid license key ..."}verificationSuccessMessage(){return"License key accepted ..."}renderPieceXHelp(){const w=encodeURIComponent("PieceX License Key"),q=encodeURIComponent("Please generate a license key to activate my Quick Code installation.");return x`
            <div>
                Please enter your license key, if you did not receive it from us
                yet by email, please
                <a
                    href="mailto:mohammad.a.alhomsi@gmail.com?subject=${w}&body=${q}"
                >
                    send us an email
                </a>
                to get your license key.
            </div>
        `}renderHelp(){return ConfigHelper.getMarketPlace()==="PIECEX"?this.renderPieceXHelp():this.renderDefaultHelp()}renderDefaultHelp(){return ConfigHelper.isPaddle()?"Please enter your license key.":ConfigHelper.isCodeCanyon()?"Please enter your purchase code.":"Please enter your license key or purchase code."}envVariables(){return[{key:"ENVATO_PURCHASE_CODE",name:ConfigHelper.isPaddle()?"License Key":"Purchase Code",placeholder:"00000-0000-0000"}]}}window.defineCustomElement("qrcg-install-purchase-code",QrcgInstallPurchaseCode);class QrcgInstallerRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w,50));document.body.appendChild(new QrcgInstallerRouter)}render(){return x`
            <qrcg-route route="/install$">
                <template>
                    <qrcg-install-introduction></qrcg-install-introduction>
                </template>
            </qrcg-route>

            <qrcg-route route="/install/purchase-code$">
                <template>
                    <qrcg-install-purchase-code></qrcg-install-purchase-code>
                </template>
            </qrcg-route>

            <qrcg-route route="/install/app-details$">
                <template>
                    <qrcg-install-app-details></qrcg-install-app-details>
                </template>
            </qrcg-route>

            <qrcg-route route="/install/database$">
                <template>
                    <qrcg-install-database></qrcg-install-database>
                </template>
            </qrcg-route>

            <qrcg-route route="/install/super-user">
                <template>
                    <qrcg-install-super-user></qrcg-install-super-user>
                </template>
            </qrcg-route>

            <qrcg-route route="/install/mail">
                <template>
                    <qrcg-install-mail></qrcg-install-mail>
                </template>
            </qrcg-route>
        `}}window.defineCustomElement("qrcg-installer-router",QrcgInstallerRouter);QrcgInstallerRouter.boot();class QrcgMarkdownInput extends i$1{api=new QRCGApiConsumer(this);static styles=[i$3`
            :host {
                display: grid;
                grid-gap: 1rem;
            }

            @media (min-width: 900px) {
                :host {
                    grid-template-columns: minmax(40%, 1fr) minmax(50%, 1fr);
                }
            }

            #preview {
                /* margin-top: 1.4rem; */
                line-height: 1.5;
                border: 4px solid var(--gray-0);
                margin-bottom: 1rem;
                overflow: hidden;
            }

            qrcg-textarea::part(textarea) {
                margin-bottom: 0;
            }

            @media (min-width: 900px) {
                #preview {
                    margin-top: 1.4rem;
                }
                qrcg-textarea::part(textarea) {
                    margin-bottom: 1rem;
                }
            }

            .preview-body {
                padding: 1rem;
                overflow: scroll;
                max-height: 30rem;
                width: 100%;
                box-sizing: border-box;
            }

            .preview-title {
                margin: 0;
                font-size: 0.8rem;
                padding: 0.5rem;
                line-height: 1;
                text-align: center;
                text-transform: uppercase;
                color: var(--primary-0);
                background-color: var(--gray-0);
                letter-spacing: 1px;
            }

            .empty {
                color: var(--gray-2);
                text-align: center;
                font-style: italic;
            }
        `];static get properties(){return{name:{},value:{},placeholder:{},errors:{}}}constructor(){super(),this.requestPreview=debounce(this.requestPreview,1e3)}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.requestPreview)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.requestPreview)}firstUpdated(){this.renderPreview(),this.requestPreview()}requestPreview=async()=>{const{response:w}=await post("markdown",{markdown:this.value});this.renderPreview((await w.json()).html)};renderPreview(w){let q=w;isEmpty(w)&&(q=`<div class="empty">
                Start typing to see results here ...
            </div>`),this.shadowRoot.querySelector(".preview-body").innerHTML=q}render(){return u$3`
            <qrcg-textarea
                name=${this.name}
                value=${this.value}
                rows="20"
                placeholder=${this.placeholder}
                .errors=${this.errors}
            >
                <slot></slot>
                <slot slot="instructions" name="instructions">
                    <div>
                        Post content in markdown format, check
                        <a
                            href="https://www.markdownguide.org/basic-syntax/"
                            target="_blank"
                            style="color: var(--primary-0); text-decoration: none;"
                            >this guide</a
                        >.
                    </div>
                </slot>
            </qrcg-textarea>

            <div id="preview">
                <h3 class="preview-title">Preview</h3>
                <div class="preview-body"></div>
            </div>
        `}}window.defineCustomElement("qrcg-markdown-input",QrcgMarkdownInput);class QrcgBlogPostForm extends QrcgDashboardForm{constructor(){super({apiBaseRoute:"blog-posts"})}renderFormFields(){return x`
            <qrcg-input name="title"> ${t$3`Title`} </qrcg-input>

            <qrcg-markdown-input name="content" rows="10">
                ${t$3`Content`}
            </qrcg-markdown-input>

            <qrcg-textarea name="excerpt">
                ${t$3`Excerpt`}
                <div slot="instructions">
                    ${t$3`Optional excerpt to be shown on blog index page`}
                </div>
            </qrcg-textarea>

            <qrcg-textarea
                name="meta_description"
                placeholder="${t$3`Your meta description`}"
                maxLength="160"
            >
                ${t$3`Meta description`}
            </qrcg-textarea>

            <qrcg-file-input
                name="featured_image_id"
                ?disabled=${!this.data.id}
                upload-endpoint=${`blog-posts/${this.data.id}/upload-featured-image`}
                disabled-instructions=${t$3`Save the record before uploading a featured image.`}
            >
                ${t$3`Featured Image`}
            </qrcg-file-input>

            <qrcg-input type="date" name="published_at">
                ${t$3`Published at`}
                <div slot="instructions">
                    ${t$3`Only posts with publish date in the past will be available
                    on the front end.`}
                </div>
            </qrcg-input>

            <qrcg-relation-select
                name="translation_id"
                api-endpoint="translations?is_active=true&pagination=false"
            >
                ${t$3`Language`}
            </qrcg-relation-select>
        `}}window.defineCustomElement("qrcg-blog-post-form",QrcgBlogPostForm);class QrcgBlogPostFormPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];connectedCallback(){super.connectedCallback(),window.addEventListener("qrcg-route:after-render",this.onAfterRender),window.addEventListener("qrcg-router:location-changed",this.onAfterRender)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("qrcg-route:after-render",this.onAfterRender),window.removeEventListener("qrcg-router:location-changed",this.onAfterRender)}onAfterRender=()=>{const w=window.location.pathname.match(/edit/);w!==this.hasPreview&&(this.hasPreview=w,this.requestUpdate())};firstUpdated(){this.form.addEventListener("api:success",this.updatePostSlug)}updatePostSlug=()=>{const w=this.form?.data;this.slug=w.slug,this.requestUpdate()};get form(){return this.shadowRoot.querySelector("qrcg-blog-post-form")}render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>

                ${this.hasPreview?x`<qrcg-button
                          slot="header-actions"
                          href=${Config.get("app.url")+"/blog/post/"+this.slug}
                          target="_blank"
                          .loading=${!this.slug}
                          >Preview</qrcg-button
                      >`:""}

                <qrcg-blog-post-form slot="content"></qrcg-blog-post-form>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-blog-post-form-page",QrcgBlogPostFormPage);class QrcgBlogPostList extends QRCGDashboardList{constructor(){super({baseRoute:"blog-posts",singularRecordName:"Blog Post",frontendFormUrl:null})}static listColumns=[{key:"id",label:"ID",width:"2rem"},{key:"title",label:"Title"},{key:"translation.name",label:"Language"},{key:"published_at",label:"Published at"},{key:"actions",label:"Actions",width:"7rem"}];searchPlaceholder(){return"By title"}cellContentRenderer=(w,q)=>{const D=w[q.key];switch(q.key){case"published_at":return this.renderPublishedBadge(D);default:return super.cellContentRenderer(w,q)}};renderPublishedBadge=w=>typeof w=="object"?w:w||"---"}window.defineCustomElement("qrcg-blog-post-list",QrcgBlogPostList);class QrcgBlogPostListPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];connectedCallback(){super.connectedCallback(),this.titleController.pageTitle=t$3("Blog Posts")}render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-button
                    slot="header-actions"
                    href="/dashboard/blog-posts/new"
                >
                    ${t$3`Create`}
                </qrcg-button>
                <qrcg-blog-post-list slot="content"></qrcg-blog-post-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-blog-post-list-page",QrcgBlogPostListPage);class QrcgBlogPostRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w,50));document.body.appendChild(new QrcgBlogPostRouter)}render(){return x`
            <qrcg-protected-route route="/dashboard/blog-posts$">
                <template>
                    <qrcg-blog-post-list-page></qrcg-blog-post-list-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route
                route="/dashboard/blog-posts/new|/dashboard/blog-posts/edit/(?<id>\\d+)"
            >
                <template>
                    <qrcg-blog-post-form-page></qrcg-blog-post-form-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-blog-post-router",QrcgBlogPostRouter);QrcgBlogPostRouter.boot();class QrcgScannerPage extends QrcgDashboardPage{static styles=[...super.styles,i$3`
            .scanner-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                /* padding: 2rem; */
            }

            .scanner-content {
                width: 100%;
                max-width: 600px;
                background: var(--white);
                border-radius: 0.5rem;
                padding: 0;
                overflow: hidden;
                box-shadow: var(--shadow-sm);
                display: flex;
                flex-direction: column;
            }
            .content-header {
                display: none !important;
            }

            .scanner-actions {
                padding: 1rem;
                text-align: center;
                background: var(--white);
                border-top: 1px solid var(--gray-1);
            }

            .video-container {
                position: relative;
                width: 100%;
                height: 420px;
                background: var(--gray-0);
                overflow: hidden;
                border-bottom: 1px solid var(--gray-1);
                border-top-left-radius: 0.5rem;
                border-top-right-radius: 0.5rem;
            }

            video {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                object-fit: cover;
                transform: none !important;
                transform-origin: center center;
                z-index: 1;
            }

            .camera-placeholder {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                background: var(--gray-0);
                z-index: 2;
            }

            .placeholder-text {
                color: var(--gray-2);
                text-align: center;
                padding: 1rem;
                font-size: 1.1rem;
            }

            .overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: rgba(255, 255, 255, 0.85);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                backdrop-filter: blur(4px);
            }

            .overlay-content {
                text-align: center;
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            .overlay-text {
                margin-top: 1rem;
                color: var(--gray-2);
                font-size: 1.1rem;
                font-weight: 500;
            }

            .modal-backdrop {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: rgba(0, 0, 0, 0.4);
                display: flex;
                align-items: flex-start;
                justify-content: center;
                padding-top: 5rem;
                z-index: 10000;
            }

            .modal {
                background: white;
                border-radius: 10px;
                padding: 2rem;
                width: 90%;
                max-width: 850px;
                box-shadow: 0 4px 30px rgba(0,0,0,0.2);
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .modal h3 {
                margin: 0 0 1rem;
                color: var(--gray-2);
                text-align: center;
                font-size: 1.3rem;
            }

            .modal-form {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 1rem 2rem;
            }

            .modal-form .full-width {
                grid-column: span 2;
            }

            .modal label {
                font-weight: 500;
                color: var(--gray-2);
                margin-bottom: 0.3rem;
                display: block;
                font-size: 0.9rem;
            }

            .modal input,
            .modal textarea {
                width: 100%;
                padding: 0.7rem;
                border-radius: 6px;
                border: 1px solid var(--gray-1);
                font-size: 0.95rem;
            }

            .modal textarea {
                resize: vertical;
                min-height: 60px;
            }

            .modal-buttons {
                display: flex;
                justify-content: flex-end;
                gap: 0.8rem;
                margin-top: 1rem;
            }
        `];static get properties(){return{...super.properties,scanning:{type:Boolean},result:{type:String},loading:{type:Boolean},showModal:{type:Boolean},formData:{type:Object}}}constructor(){super(),this.scanning=!1,this.result=null,this.loading=!1,this.error=null,this.showModal=!1,this.formData={business_name:"",person_name:"",phones:"",emails:"",address:""}}connectedCallback(){super.connectedCallback(),this.loading=!1}getAuthHeaders(){let w="";try{const Q=document.querySelector('meta[name="csrf-token"]');Q&&Q.getAttribute&&(w=Q.getAttribute("content")||"")}catch{w=""}w=w||"";const q={"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":w},D="Bearer "+localStorage["auth:token"];return D&&(q.Authorization=`Bearer ${D}`),q}async checkCameraPermission(){try{await navigator.mediaDevices.getUserMedia({video:!0})}catch{throw new Error(t$3`Camera access denied`)}}breadcrumbs(){return[{text:t$3`Dashboard`,href:userHomePage()},{text:t$3`Card Scanner`}]}pageTitle(){return t$3`Visiting Card Scanner`}renderContent(){return this.error?this.renderErrorView():x`
            <div class="scanner-container">
                <div class="scanner-content">
                    ${this.renderScannerView()}
                    <div class="scanner-actions">
                        <qrcg-button
                            @click=${this.toggleScanning}
                            .type=${this.scanning?"secondary":"primary"}
                        >
                            ${this.scanning?t$3`Stop Scanning`:t$3`Start Scanning`}
                        </qrcg-button>
                    </div>
                </div>
                ${this.loading?this.renderLoadingOverlay():""}
                ${this.showModal?this.renderModal():""}
            </div>
        `}renderErrorView(){return x`
            <div class="error-container">
                <div class="error-message">
                    ${this.error?.message||t$3`Camera access denied. Please allow camera access to scan cards.`}
                </div>
                <qrcg-button @click=${this.toggleScanning}>${t$3`Try Again`}</qrcg-button>
            </div>
        `}renderScannerView(){return x`
            <div class="video-container">
                <video 
                    id="scanner-video" 
                    autoplay 
                    playsinline
                    ?hidden=${!this.scanning}
                ></video>
                ${this.scanning?"":x`
                    <div class="camera-placeholder">
                        <div class="placeholder-text">
                            ${t$3`Click 'Start Scanning' to activate camera`}
                        </div>
                    </div>
                `}
            </div>
        `}renderLoadingOverlay(){return x`
            <div class="overlay">
                <div class="overlay-content">
                    <qrcg-loader></qrcg-loader>
                    <p class="overlay-text">${t$3`Analyzing card... Please wait`}</p>
                </div>
            </div>
        `}renderModal(){return x`
            <div class="modal-backdrop" @click=${this.closeModal}>
                <div class="modal" @click=${w=>w.stopPropagation()}>
                    <h3>${t$3`Scanned Card Details`}</h3>

                    <div class="modal-form">
                        <div>
                            <label>Business Name</label>
                            <input 
                                type="text"
                                .value=${this.formData.business_name||""}
                                @input=${w=>this.formData.business_name=w.target.value}
                            />
                        </div>

                        <div>
                            <label>Person Name</label>
                            <input 
                                type="text"
                                .value=${this.formData.person_name||""}
                                @input=${w=>this.formData.person_name=w.target.value}
                            />
                        </div>

                        <div>
                            <label>Phones</label>
                            <textarea
                                .value=${this.formData.phones||""}
                                @input=${w=>this.formData.phones=w.target.value}
                            ></textarea>
                        </div>

                        <div>
                            <label>Emails</label>
                            <textarea
                                .value=${this.formData.emails||""}
                                @input=${w=>this.formData.emails=w.target.value}
                            ></textarea>
                        </div>

                        <div class="full-width">
                            <label>Address</label>
                            <textarea
                                .value=${this.formData.address||""}
                                @input=${w=>this.formData.address=w.target.value}
                            ></textarea>
                        </div>
                    </div>

                    <div class="modal-buttons">
                        <qrcg-button type="secondary" @click=${this.closeModal}>Cancel</qrcg-button>
                        <qrcg-button type="primary" @click=${this.saveScannedData}>Save</qrcg-button>
                    </div>
                </div>
            </div>
        `}closeModal(){this.showModal=!1}async toggleScanning(){if(this.scanning)this.stopScanning();else try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});this.scanning=!0;const q=this.shadowRoot.getElementById("scanner-video");q.srcObject=w,q.style.transform="none",q.addEventListener("loadedmetadata",()=>{q.play(),setTimeout(()=>this.captureAndAnalyze(),1e4)})}catch(w){this.error=w,showToast(t$3`Failed to access camera`),console.error("Error accessing camera:",w)}}stopScanning(){const w=this.shadowRoot.getElementById("scanner-video");w&&w.srcObject&&(w.srcObject.getTracks().forEach(q=>q.stop()),w.srcObject=null),this.scanning=!1,this.error=null}disconnectedCallback(){super.disconnectedCallback(),this.stopScanning()}async captureAndAnalyze(){const w=this.shadowRoot.getElementById("scanner-video");if(!w)return;const q=document.createElement("canvas");q.width=w.videoWidth,q.height=w.videoHeight,q.getContext("2d").drawImage(w,0,0,q.width,q.height);const Q=q.toDataURL("image/jpeg").split(",")[1];this.loading=!0,showToast(t$3`Analyzing card...`);try{const U=await(await fetch("/api/scanner/analyze",{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({image:Q})})).json();if(console.log("Google Vision API Response:",U),U.success){this.result=U.data.full_text;const G=U.data.structured;this.formData={business_name:G.business_name||"",person_name:G.person_name||"",phones:(G.phones||[]).join(", "),emails:(G.emails||[]).join(", "),address:G.address||""},this.showModal=!0,showToast(t$3`Card scanned successfully!`)}else{const G=U.error||t$3`Scan failed. Please try again.`;showToast(G),console.error("Scan error:",U)}}catch(O){const U=O?.message||t$3`Error analyzing image`;console.error("Scan error:",O),showToast(U)}finally{setTimeout(()=>{this.loading=!1,this.stopScanning()},1e3)}}async saveScannedData(){try{const q=await(await fetch("/api/scanner/data/store",{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(this.formData)})).json();q.success?(showToast(t$3`Data saved successfully!`),this.closeModal()):(showToast(t$3`Failed to save data.`),console.error("Save error:",q))}catch(w){console.error(w),showToast(t$3`Error saving data.`)}}}window.defineCustomElement("qrcg-scanner-page",QrcgScannerPage);class QrcgScannerList extends QrcgDashboardPage{static styles=[...super.styles,i$3`
            .title-div {
                width: 1200px; 
                margin: 0 auto; 
                display: flex; 
                align-items: center; 
                justify-content: space-between;
            }

            table {
                width: 100%;
                border-collapse: separate;
                border-spacing: 0;
                background: var(--white);
                border-radius: 0px;
                overflow: hidden;
                box-shadow: var(--shadow-xs);
            }
            th, td {
                padding: 1rem 0.7rem;
                text-align: left;
            }
            th {
                background: #f6f6fa;
                color: #b2b2c3;
                font-weight: 700;
                letter-spacing: 1px;
            }
            td {
                color: #444;
                border-bottom: 1px solid #f0f0f0;
            }
            tr:last-child td {
                border-bottom: none;
            }
            .actions a {
                color: #2d2d7b;
                text-decoration: underline;
                margin-right: 1.2rem;
                cursor: pointer;
            }
            .actions a:last-child {
                margin-right: 0;
            }
            .pagination {
                text-align: center;
                margin-top: 2rem;
                color: #b2b2c3;
            }
            .pagination .active {
                color: #2d2d7b;
                font-weight: 700;
                border-bottom: 2px solid #2d2d7b;
                padding: 0 0.3rem;
            }
            .pagination a {
                color: #b2b2c3;
                text-decoration: none;
                margin: 0 0.5rem;
                cursor: pointer;
            }

            .modal-backdrop {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: rgba(0, 0, 0, 0.4);
                display: flex;
                align-items: flex-start;
                justify-content: center;
                padding-top: 5rem;
                z-index: 10000;
            }

            .modal {
                background: white;
                border-radius: 10px;
                padding: 2rem;
                width: 90%;
                max-width: 850px;
                box-shadow: 0 4px 30px rgba(0,0,0,0.2);
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .modal h3 {
                margin: 0 0 1rem;
                color: var(--gray-2);
                text-align: center;
                font-size: 1.3rem;
            }

            .modal-form {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 1rem 2rem;
            }

            .modal-form .full-width {
                grid-column: span 2;
            }

            .modal label {
                font-weight: 500;
                color: var(--gray-2);
                margin-bottom: 0.3rem;
                display: block;
                font-size: 0.9rem;
            }

            .modal input,
            .modal textarea {
                width: 100%;
                padding: 0.7rem;
                border-radius: 6px;
                border: 1px solid var(--gray-1);
                font-size: 0.95rem;
            }

            .modal textarea {
                resize: vertical;
                min-height: 60px;
            }

            .modal-buttons {
                display: flex;
                justify-content: flex-end;
                gap: 0.8rem;
                margin-top: 1rem;
            }
        `];static get properties(){return{...super.properties,scans:{type:Array},page:{type:Number},pageSize:{type:Number},showEditModal:{type:Boolean},editFormData:{type:Object},showDeleteModal:{type:Boolean},deleteId:{type:String}}}constructor(){super(),this.scans=[],this.page=1,this.pageSize=10,this.showEditModal=!1,this.editFormData={id:"",business_name:"",person_name:"",phones:"",emails:"",address:""},this.showDeleteModal=!1,this.deleteId=""}getAuthHeaders(){let w="";try{const Q=document.querySelector('meta[name="csrf-token"]');Q&&Q.getAttribute&&(w=Q.getAttribute("content")||"")}catch{w=""}w=w||"";const q={"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":w},D="Bearer "+localStorage["auth:token"];return D&&(q.Authorization=`Bearer ${D}`),q}async connectedCallback(){super.connectedCallback(),await this.fetchScans()}async fetchScans(){try{const q=await(await fetch("/api/scanner/data/get",{headers:this.getAuthHeaders()})).json();q.success&&Array.isArray(q.data)?this.scans=q.data:showToast(t$3`Failed to fetch scanned cards.`)}catch{showToast(t$3`Error fetching scanned cards.`)}}breadcrumbs(){return[{text:t$3`Dashboard`,href:userHomePage()},{text:t$3`Card Scanner`,href:"/dashboard/scanner/page"},{text:t$3`Scan List`}]}pageTitle(){return t$3`Scanned Cards List`}editRow(w){this.editFormData={id:w.id,business_name:w.business_name||"",person_name:w.person_name||"",phones:w.phones||"",emails:w.emails||"",address:w.address||""},this.showEditModal=!0}closeEditModal(){this.showEditModal=!1}async updateScannedData(){try{const q=await(await fetch(`/api/scanner/data/update/${this.editFormData.id}`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({business_name:this.editFormData.business_name,person_name:this.editFormData.person_name,phones:this.editFormData.phones,emails:this.editFormData.emails,address:this.editFormData.address})})).json();q.success?(showToast(t$3`Data updated successfully!`),this.closeEditModal(),await this.fetchScans()):(showToast(t$3`Failed to update data.`),console.error("Update error:",q))}catch(w){console.error(w),showToast(t$3`Error updating data.`)}}deleteRow(w){this.deleteId=w.id,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.deleteId=""}async confirmDelete(){try{(await(await fetch(`/api/scanner/data/delete/${this.deleteId}`,{method:"GET",headers:this.getAuthHeaders()})).json()).success?(showToast(t$3`Deleted successfully!`),this.closeDeleteModal(),await this.fetchScans()):showToast(t$3`Failed to delete.`)}catch{showToast(t$3`Error deleting.`)}}renderEditModal(){return x`
            <div class="modal-backdrop"  @click=${this.closeEditModal.bind(this)}>
                <div class="modal" @click=${w=>w.stopPropagation()}>
                    <h3>${t$3`Edit Scanned Card Details`}</h3>
                    <div class="modal-form">
                        <div>
                            <label>Business Name</label>
                            <input 
                                type="text"
                                .value=${this.editFormData.business_name||""}
                                @input=${w=>this.editFormData.business_name=w.target.value}
                            />
                        </div>
                        <div>
                            <label>Person Name</label>
                            <input 
                                type="text"
                                .value=${this.editFormData.person_name||""}
                                @input=${w=>this.editFormData.person_name=w.target.value}
                            />
                        </div>
                        <div>
                            <label>Phones</label>
                            <textarea
                                .value=${this.editFormData.phones||""}
                                @input=${w=>this.editFormData.phones=w.target.value}
                            ></textarea>
                        </div>
                        <div>
                            <label>Emails</label>
                            <textarea
                                .value=${this.editFormData.emails||""}
                                @input=${w=>this.editFormData.emails=w.target.value}
                            ></textarea>
                        </div>
                        <div class="full-width" style="grid-column: span 2;">
                            <label>Address</label>
                            <textarea
                                .value=${this.editFormData.address||""}
                                @input=${w=>this.editFormData.address=w.target.value}
                            ></textarea>
                        </div>
                    </div>
                    <div class="modal-buttons">
                        <qrcg-button type="secondary" @click=${this.closeEditModal.bind(this)}>Cancel</qrcg-button>
                        <qrcg-button type="primary" @click=${this.updateScannedData.bind(this)}>Update</qrcg-button>
                    </div>
                </div>
            </div>
        `}renderDeleteModal(){return x`
            <div class="modal-backdrop" @click=${this.closeDeleteModal.bind(this)}>
                <div class="modal" style="max-width:400px;" @click=${w=>w.stopPropagation()}>
                    <h3 style="text-align:center;">${t$3`Do you really want to delete?`}</h3>
                    <div style="display:flex; justify-content:flex-end; gap:0.8rem; margin-top:2rem;">
                        <qrcg-button type="secondary" @click=${this.closeDeleteModal.bind(this)}>${t$3`No`}</qrcg-button>
                        <qrcg-button type="danger" @click=${this.confirmDelete.bind(this)}>${t$3`Yes`}</qrcg-button>
                    </div>
                </div>
            </div>
        `}renderContent(){const w=[{key:"business_name",label:t$3("BUSINESS NAME")},{key:"person_name",label:t$3("PERSON NAME")},{key:"phones",label:t$3("PHONES")},{key:"emails",label:t$3("EMAILS")},{key:"address",label:t$3("ADDRESS")},{key:"actions",label:t$3("ACTIONS")}],q=this.scans.length,D=(this.page-1)*this.pageSize,Q=Math.min(D+this.pageSize,q),O=this.scans.slice(D,Q),U=Math.max(1,Math.ceil(q/this.pageSize));return x`
            <div style="margin: 0 auto; max-width: 1200px;">
                <table>
                    <thead>
                        <tr>
                            ${w.map(G=>x`<th>${G.label}</th>`)}
                        </tr>
                    </thead>
                    <tbody>
                        ${O.length===0?x`
                            <tr><td colspan="${w.length}" style="text-align:center; color:#b2b2c3;">${t$3`No scanned cards found.`}</td></tr>
                        `:O.map(G=>x`
                            <tr>
                                <td>${G.business_name||""}</td>
                                <td>${G.person_name||""}</td>
                                <td>${G.phones||""}</td>
                                <td>${G.emails||""}</td>
                                <td>${G.address||""}</td>
                                <td class="actions">
                                    <a @click=${()=>this.editRow(G)}>${t$3("Edit")}</a>
                                    <a @click=${()=>this.deleteRow(G)}>${t$3("Delete")}</a>
                                </td>
                            </tr>
                        `)}
                    </tbody>
                </table>
                <div class="pagination">
                    ${t$3`Showing from ${D+1} to ${Q} out of ${q}`}
                    <br />
                    <a @click=${()=>this.page>1&&(this.page-=1)} style="${this.page===1?"pointer-events:none;opacity:0.5;":""}">&laquo; Previous</a>
                    <span class="active">${this.page}</span>
                    <a @click=${()=>this.page<U&&(this.page+=1)} style="${this.page===U?"pointer-events:none;opacity:0.5;":""}">Next &raquo;</a>
                </div>
                ${this.showEditModal?this.renderEditModal():""}
                ${this.showDeleteModal?this.renderDeleteModal():""}
            </div>
        `}render(){return x`
            <qrcg-dashboard-layout>
                <div slot="title">
                    <div class="title-div">
                        <span>${this.pageTitle()}</span>
                        <qrcg-button slot="header-actions" href="/dashboard/scanner/page">${t$3`Scan`}</qrcg-button>
                    </div>
                </div>
                <div slot="content">
                    ${this.renderContent()}
                </div>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-scanner-list",QrcgScannerList);class QrcgScannerRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w,50));document.body.appendChild(new QrcgScannerRouter)}render(){return x`
            <qrcg-protected-route route="/dashboard/scanner/page$">
                <template>
                    <qrcg-scanner-page></qrcg-scanner-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route route="/dashboard/scanner/list$">
                <template>
                    <qrcg-scanner-list></qrcg-scanner-list>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-scanner-router",QrcgScannerRouter);QrcgScannerRouter.boot();class QrcgContentBlocksForm extends QrcgDashboardForm{static get styles(){return[super.styles,i$3`
                .section-title {
                    font-weight: normal;
                    border-bottom: 2px solid var(--gray-1);
                    padding-bottom: 0.5rem;
                    margin-bottom: 1rem;
                }

                .input-title {
                    display: inline-block;
                    width: 150px;
                }

                qrcg-balloon-selector {
                    /* flex-direction: column; */
                }
            `]}constructor(){super({apiBaseRoute:"content-blocks"})}renderFormFields(){return x`
            <qrcg-input name="title" placeholder="${t$3`Block title`}"
                >${t$3`Title`}</qrcg-input
            >

            <qrcg-select name="position">
                <span slot="label">${t$3`Position`}</span>

                ${Config.get("content-manager.positions").map(w=>x`<option value=${w}>${w}</option>`)}
            </qrcg-select>

            <qrcg-input name="sort_order" placeholder="${t$3`Default is 0`}">
                ${t$3`Sort order`}
                <span slot="instructions">
                    ${t$3`Controls the order of each block in the selected position.
                    E.g block with sort order set to 1 will be
                    rendered before block with sort order set to
                    2.`}
                </span>
            </qrcg-input>

            <qrcg-markdown-input name="content">
                ${t$3`Content`}
            </qrcg-markdown-input>

            <qrcg-relation-select
                name="translation_id"
                api-endpoint="translations?is_active=true&pagination=false"
            >
                ${t$3`Language`}
            </qrcg-relation-select>
        `}}window.defineCustomElement("qrcg-content-blocks-form",QrcgContentBlocksForm);class QrcgContentBlocksFormPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-content-blocks-form
                    slot="content"
                ></qrcg-content-blocks-form>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-content-blocks-form-page",QrcgContentBlocksFormPage);class QrcgCopyContentBlocksModal extends QrcgModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{...super.properties,sourceId:{},destinationId:{}}}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.watchInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.watchInput)}watchInput(w){this[w.detail.name]=w.detail.value}static open(){const w=new QrcgCopyContentBlocksModal;return document.body.appendChild(w),w.open()}affiramtivePromise(){if(!this.destinationId||!this.sourceId)throw showToast(t$3`You must select source and destination languages`),"Destination ID is required";return post(`content-blocks/copy/from/${this.sourceId}/to/${this.destinationId}`)}renderTitle(){return t$3`Copy Content Blocks`}renderBody(){return x`
            <p>
                ${t$3`This will copy all content blocks of selected langauge to destination language.`}
            </p>

            <qrcg-relation-select
                name="sourceId"
                api-endpoint="translations?paginate=false"
                on-input=${this.onTranslationChanged}
            >
                ${t$3`Source language`}
            </qrcg-relation-select>

            <qrcg-relation-select
                name="destinationId"
                api-endpoint="translations?paginate=false"
                on-input=${this.onTranslationChanged}
            >
                ${t$3`Destination language`}
            </qrcg-relation-select>
        `}}window.defineCustomElement("qrcg-copy-content-blocks-modal",QrcgCopyContentBlocksModal);class QrcgContentBlocksList extends QRCGDashboardList{static get styles(){return[super.styles,i$3`
                .search-row {
                    display: flex;
                    margin: 1rem 0 2rem 0;

                    align-items: center;
                }

                .search-row > *:not(:last-child) {
                    margin-right: 1rem;
                }

                .search-row > .copy-all {
                    margin-right: auto;
                }

                .search-row > qrcg-button {
                    margin-top: 0.5rem;
                }

                .search-form {
                    margin-bottom: 0;
                }
            `]}constructor(){super({baseRoute:"content-blocks",singularRecordName:"Content Blocks",frontendFormUrl:null})}static listColumns=[{key:"title",label:"Title"},{key:"position",label:"Position"},{key:"translation.name",label:"Language",defaultValue:"English (default)"},{key:"sort_order",label:"Sort order"},{key:"created_at",label:"Created"},{key:"actions",label:"Actions",width:"7rem"}];connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.watchInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.watchInput)}firstUpdated(){super.firstUpdated(),this.syncTranslationIdSelectWithQueryParam()}watchInput(w){w.detail.name==="translation_id"&&this.onTranslationChanged(w)}searchPlaceholder(){return"By title or position"}onTranslationChanged(w){const q=new URLSearchParams(window.location.search);q.set("translation_id",w.detail.value),push(window.location.pathname+"?"+q.toString())}onLocationChanged(){super.onLocationChanged(),this.syncTranslationIdSelectWithQueryParam(),this.fetchData()}syncTranslationIdSelectWithQueryParam(){const w=this.shadowRoot.querySelector('qrcg-relation-select[name="translation_id"]');this.translationId&&w&&(w.value=this.translationId)}get translationId(){return queryParam("translation_id")}async deleteAllContentBlocks(){if(!this.translationId)return showToast(t$3`You must select a language first.`);await confirm$1({title:"Confirmation",message:t$3`Are you sure you want to delete ALL content blocks of the selected language? This cannot be undone.`}),await destroy("content-blocks/of-translation/"+this.translationId),showToast(t$3`Content blocks deleted successfully`),this.fetchData()}async copyAllContentBlocks(){await QrcgCopyContentBlocksModal.open(),this.fetchData()}renderSearchForm(){return x`
            <div class="search-row">
                <qrcg-relation-select
                    name="translation_id"
                    api-endpoint="translations?paginate=false"
                    on-input=${this.onTranslationChanged}
                >
                    ${t$3`Language`}
                </qrcg-relation-select>

                <qrcg-button transparent @click=${this.deleteAllContentBlocks}>
                    ${t$3`Delete all`}
                </qrcg-button>

                <qrcg-button
                    transparent
                    class="copy-all"
                    @click=${this.copyAllContentBlocks}
                >
                    ${t$3`Copy all`}
                </qrcg-button>

                <qrcg-form class="search-form">
                    <qrcg-input
                        placeholder=${t$3(this.searchPlaceholder())}
                        type="search"
                        .value=${this.keyword}
                        @on-input=${this.onKeywordChanged}
                    >
                        ${t$3`Search`}
                    </qrcg-input>
                </qrcg-form>
            </div>
        `}}window.defineCustomElement("qrcg-content-blocks-list",QrcgContentBlocksList);class QrcgContentBlocksListPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-button
                    slot="header-actions"
                    href="/dashboard/content-blocks/new"
                    >${t$3`Create`}</qrcg-button
                >
                <qrcg-content-blocks-list
                    slot="content"
                ></qrcg-content-blocks-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-content-blocks-list-page",QrcgContentBlocksListPage);class QrcgContentBlocksRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w,50));document.body.appendChild(new QrcgContentBlocksRouter)}render(){return x`
            <qrcg-protected-route route="/dashboard/content-blocks$">
                <template>
                    <qrcg-content-blocks-list-page></qrcg-content-blocks-list-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route
                route="/dashboard/content-blocks/new|/dashboard/content-blocks/edit/(?<id>\\d+)"
            >
                <template>
                    <qrcg-content-blocks-form-page></qrcg-content-blocks-form-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-content-blocks-router",QrcgContentBlocksRouter);QrcgContentBlocksRouter.boot();class QrcgCaptchaInput extends i$1{static styles=[i$3`
            :host {
                display: block;
                border: 2px solid var(--gray-1);
                padding: 1rem;
                border-radius: 0.5rem;
                position: relative;
            }

            .empty-image,
            img {
                width: 193px;
                height: 84px;

                background-color: white;
                display: block;
                border: 2px solid var(--gray-1);
            }

            .empty-image {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            qrcg-loader {
                transform: scale(0.5);
            }

            label {
                font-weight: bold;
                display: block;
                margin-bottom: 0.5rem;
            }

            .image-row {
                display: flex;
                align-items: center;
            }

            .refresh {
                margin-left: 1rem;
                display: flex;
                align-items: center;
                font-size: 0.8rem;
                user-select: none;
                -webkit-user-select: none;
                transition: opacity 0.2s ease;
                cursor: pointer;
            }

            .refresh.disabled {
                pointer-events: none;
                opacity: 0.3;
            }
            .refresh:hover {
                text-decoration: underline;
            }

            .refresh .icon {
                margin-right: 0.5rem;
            }

            .refresh:hover .icon {
                /* transition: none; */
                animation: rotate 1s linear both infinite;
            }

            @keyframes rotate {
                from {
                    transform: rotate(0);
                }

                to {
                    transform: rotate(360deg);
                }
            }

            .error {
                color: var(--danger);
                position: absolute;
                font-size: 0.8rem;
                font-weight: bold;
                transform: translateY(100%);
                animation: fade-in ease 1s both;
                bottom: 1.3rem;
            }

            .text {
                font-size: 0.7rem;
            }

            @keyframes fade-in {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }
        `];static get properties(){return{image:{},name:{},value:{},code:{},session_key:{},errors:{type:Array},label:{},differentImageText:{attribute:"different-image-text"},placeholder:{}}}constructor(){super(),this.errors=[],this.differentImageText="Different image",this.placeholder="Enter the code you see above",this.label="Human Verification"}connectedCallback(){super.connectedCallback(),this.fetch()}willUpdate(w){w.has("value")&&(this.code=get$1(this.value,"code")||"",this.session_key=get$1(this.value,"session_key")||"")}fetch=async()=>{this.image=null;const{response:w}=await get("captcha"),q=await w.json();this.image=q.image;const D=q.session_key;this.fireOnInput({session_key:D,code:this.code})};onInput(w){w.stopImmediatePropagation();const q=w.detail.value;this.fireOnInput({code:q,session_key:this.session_key})}refresh=async()=>{await this.fetch(),await new Promise(w=>setTimeout(w,10)),this.fireOnInput({code:"",session_key:this.session_key})};fireOnInput(w){this.dispatchEvent(new CustomEvent("on-input",{composed:!0,bubbles:!0,detail:{name:this.name,value:w}}))}render(){return x`
            <label>${this.label}</label>
            <div class="image-row">
                ${this.image?x`<img src=${this.image} />`:x`<div class="empty-image">
                          <qrcg-loader></qrcg-loader>
                      </div>`}

                <div
                    class=${e$1({refresh:!0,disabled:!this.image})}
                    @click=${this.fetch}
                >
                    <qrcg-icon class="icon" mdi-icon=${mdiRefresh}></qrcg-icon>
                    <span class="text"> ${this.differentImageText} </span>
                </div>
            </div>

            <qrcg-input
                @on-input=${this.onInput}
                name="code"
                placeholder=${this.placeholder}
                .value=${this.code}
            ></qrcg-input>

            ${isEmpty(this.errors)?"":x`<div class="error">${this.errors[0]}</div>`}
        `}}window.defineCustomElement("qrcg-captcha-input",QrcgCaptchaInput);class QrcgContactForm extends i$1{api=new QRCGApiConsumer(this,"contacts");formController=new QRCGFormController(this);static styles=[i$3`
            :host {
                display: block;
                position: relative;
                border-radius: 0.5rem;
                overflow: hidden;
                --qrcg-input-box-shadow: inset 0 0 0 2px var(--gray-1);
                --qrcg-input-box-shadow-focus: inset 0 0 0 2px var(--gray-2);
            }

            qrcg-form::part(form) {
                display: grid;
                grid-gap: 1rem;
                grid-template-columns: 1fr;
            }
            [type='submit'] {
                margin-top: 1rem;
            }

            .success-overlay {
                display: none;
                background-color: var(--success-0);
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: 1;
                color: white;
                padding: 1rem;
                line-height: 1.8;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                animation: fade-in 0.5s ease both;
            }

            :host([success]) .success-overlay {
                display: flex;
            }

            .hero {
                font-size: 1.8rem;
                margin-bottom: 1rem;
                animation: slide-up 0.5s 0.25s ease both;
            }

            .message {
                animation: slide-up 0.5s 0.5s ease both;
            }

            @keyframes fade-in {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }

            @keyframes slide-up {
                from {
                    opacity: 0;
                    transform: translateY(-1rem);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        `];static get properties(){return{data:{},success:{type:Boolean,reflect:!0}}}constructor(){super(),this.data={},this.success=!1}connectedCallback(){super.connectedCallback(),this.addEventListener("api:success",this.onApiSuccess)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("api:success",this.onApiSuccess)}onApiSuccess=()=>{this.success=!0};submitForm=async()=>this.api.save(this.data);onAfterRequest(){this.renderRoot.querySelector("qrcg-captcha-input").refresh()}render(){return x`
            <qrcg-form>
                <qrcg-input name="name" placeholder=${t$3`Your name`}
                    >${t$3`Name`}</qrcg-input
                >
                <qrcg-input name="email" placeholder=${t$3`Your email`}
                    >${t$3`Email`}</qrcg-input
                >
                <qrcg-input name="subject" placeholder=${t$3`Subject`}
                    >${t$3`Subject`}</qrcg-input
                >
                <qrcg-textarea name="message" placeholder=${t$3`Message`}
                    >${t$3`Message`}</qrcg-textarea
                >
                <qrcg-captcha-input
                    label=${t$3`Human verification`}
                    different-image-text=${t$3`Different image`}
                    placeholder=${t$3`Enter the code you see above`}
                    name="captcha"
                ></qrcg-captcha-input>
                <qrcg-button type="submit">${t$3`Send now`}</qrcg-button>
            </qrcg-form>

            <div class="success-overlay">
                <div>
                    <div class="hero">${t$3`Thank you!`}</div>

                    <div class="message">
                        ${t$3`We have received your message successfully. One of our
                        representatives will be in touch with you shortly.`}
                    </div>
                </div>
            </div>
        `}}window.defineCustomElement("qrcg-contact-form",QrcgContactForm);class QrcgContactModuleForm extends QrcgDashboardForm{constructor(){super({apiBaseRoute:"contacts"})}renderFormFields(){return x`
            <qrcg-input name="name">Name</qrcg-input>
            <qrcg-input name="email">Email</qrcg-input>
            <qrcg-input name="subject">Subject</qrcg-input>
            <qrcg-textarea name="message">Message</qrcg-textarea>
            <qrcg-textarea name="notes">
                Internal notes
                <span slot="instructions">
                    You can add notes for your own refernce. The customer will
                    not be notified.
                </span>
            </qrcg-textarea>
        `}}window.defineCustomElement("qrcg-contact-module-form",QrcgContactModuleForm);class QrcgContactFormPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-contact-module-form
                    slot="content"
                ></qrcg-contact-module-form>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-contact-form-page",QrcgContactFormPage);class QrcgContactList extends QRCGDashboardList{constructor(){super({baseRoute:"contacts",singularRecordName:"Contact",frontendFormUrl:null})}static listColumns=[{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"subject",label:"Subject"},{key:"actions",label:"Actions",width:"7rem"}];searchPlaceholder(){return"By anything"}}window.defineCustomElement("qrcg-contact-list",QrcgContactList);class QrcgContactListPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];connectedCallback(){super.connectedCallback()}render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>

                <qrcg-contact-list slot="content"></qrcg-contact-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-contact-list-page",QrcgContactListPage);class QrcgContactRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w,50));document.body.appendChild(new QrcgContactRouter)}render(){return x`
            <qrcg-protected-route route="/dashboard/contacts$">
                <template>
                    <qrcg-contact-list-page></qrcg-contact-list-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route route="/dashboard/contacts/edit/(?<id>\\d+)">
                <template>
                    <qrcg-contact-form-page></qrcg-contact-form-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-contact-router",QrcgContactRouter);QrcgContactRouter.boot();class IframeDetector extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            .content {
                display: flex;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: 1000;
                background-color: rgba(0, 0, 0, 0.8);
                align-items: center;
                justify-content: center;
            }

            a {
                font-size: 2rem;
                color: white;
                text-decoration: none;
                font-weight: bold;
                text-align: center;
                line-height: 1.7;
            }
        `];constructor(){if(super(),!ConfigHelper.isLocal()&&window.parent&&window.parent!==window){try{if(window.parent.location.hostname==window.location.hostname||window.location.hostname.match(/localhost/))return}catch{}this.inIframe=window.parent!==window,this.injectGlobalStyles()}}injectGlobalStyles(){if(!this.inIframe)return;const w=styled`
            body > *:not(iframe-detector){
                filter: blur(.2rem);
            }
        `,q=document.createElement("style");q.innerHTML=w,document.head.appendChild(q)}static async boot(){if(Config.get("app.allow_iframe_embed")!=="enabled"){for(;!document.body;)await new Promise(q=>setTimeout(q,50));document.body.appendChild(document.createElement("iframe-detector"))}}render(){return this.inIframe?x`
            <div class="content">
                <a href=${location.toString()} target="_blank">
                    Click here to view the application.
                </a>
            </div>
        `:null}}IframeDetector.boot();window.defineCustomElement("iframe-detector",IframeDetector);const style$O=":host{display:block}*{box-sizing:border-box}.refresh{margin:.1rem}.refresh::part(button){padding:0;width:2.5rem;height:2.5rem;min-width:0}.refresh qrcg-icon{width:1.5rem;height:1.5rem}.loading-container{display:flex;align-items:center;justify-content:center;padding:5rem}",style$N=".entry{display:flex;margin:1rem 0 0;padding:2rem;flex-direction:column;border-radius:1rem;border:1px solid var(--gray-1)}.entry-icon{width:2rem;height:2rem;margin:0 1rem}.entry-icon.success{color:var(--success-0)}.entry-icon.fail{color:var(--danger)}.entry-icon.warning{color:var(--warning-1)}.entry-icon.loading{color:var(--gray-1)}.icon-loader{transform:translate(.3rem,-.8rem) scale(.5);margin-inline-end:1rem}.action-required qrcg-icon.action-required{display:block;color:var(--warning-1)}.title{font-weight:700;min-width:30%;margin:0 0 1rem}.text{font-weight:700}.text-and-information{display:flex;flex-direction:column;flex:1;position:relative;line-height:1.5}.instructions,.information{margin-top:.5rem}.details{display:flex;flex:1}.action{padding-top:1rem}code{display:block;padding:.5rem;background-color:#fff;margin:1rem 0 0;color:#000;width:100%;overflow:scroll;scrollbar-width:none;max-width:55vw;-webkit-user-select:text;user-select:text}code::-webkit-scrollbar{display:none}@media(min-width:50rem){.entry{flex-direction:row}.action{padding-top:0}}code{background-color:var(--gray-0);border-radius:.25rem}";class Entry extends BaseComponent{static tag="qrcg-system-status-entry";static styleSheets=[...super.styleSheets,style$N];static get properties(){return{...super.properties,entry:{type:Object}}}constructor(){super(),this.entry={type:"",information:null,instructions:null,title:null,text:null}}renderInformation(){if(!isEmpty(this.entry.information))return x`
            <div class="information">
                ${o$2(t$3(this.entry.information))}
            </div>
        `}renderInstructions(){if(!isEmpty(this.entry.instructions))return x`
            <div class="instructions">
                ${o$2(t$3(this.entry.instructions))}
            </div>
        `}renderIcon(){if(this.entry.type==="loading")return x` <qrcg-loader class="icon-loader"></qrcg-loader> `;const q={success:mdiCheckboxMarked,warning:mdiAlertOctagon,fail:mdiAlertOctagon}[this.entry.type];return x`
            <qrcg-icon
                mdi-icon=${q}
                class="${this.entry.type} entry-icon"
            ></qrcg-icon>
        `}render(){return x`
            <div class="entry ${this.entry.type}">
                <div class="title">${t$3(this.entry.title)}</div>
                <div class="details">
                    <!--  -->
                    ${this.renderIcon()}

                    <div class="text-and-information">
                        <div class="text">${t$3(this.entry.text)}</div>

                        ${this.renderInformation()}

                        <!--  -->
                        ${this.renderInstructions()}
                    </div>
                </div>
            </div>
        `}}Entry.register();const style$M="qrcg-button{width:fit-content}qrcg-button::part(button){border:1px solid var(--gray-1)}.local-message{margin-top:1rem}.update-button-container{margin-top:1rem;display:flex;gap:1rem;align-items:center}.update-result{display:flex;gap:.5rem;align-items:center}.update-result.success{color:var(--success-0)}.update-result.error{color:var(--danger)}";class UpdateServiceModal extends QrcgModal{static tag="qrcg-update-service-modal";renderTitle(){return t$3`Subscription Required`}renderAffirmativeAction(){return x`
            <qrcg-button
                href="https://quickcode.digital/automatic-update"
                target="_blank"
            >
                ${t$3`Subscribe now`}
            </qrcg-button>
        `}renderBody(){return x`
            <p>
                ${t$3`Automatic updates are available only for customers who subscribed the update service for $10 / month. Subscription is optional you can install the update manually.`}
            </p>

            <div>
                <a
                    href="https://docs.quickcode.digital/getting-started/upgrade-guide/"
                    target="_blank"
                >
                    >> ${t$3`Read the upgrade guide`}
                </a>
            </div>

            <div>
                <a href="https://quickcode.digital/deliver" target="_blank">
                    >> ${t$3`Go to the delivery center`}
                </a>
            </div>
        `}}UpdateServiceModal.register();class VersionEntry extends Entry{static tag="qrcg-system-status-version-entry";static styleSheets=[...super.styleSheets,style$M];static get properties(){return{...super.properties,latestVersion:{type:String},updateIsRunning:{type:Boolean},updateResult:{type:Boolean},updateDidRun:{type:Boolean},susbcriptionRequired:{type:Boolean}}}constructor(){super(),this.entry={title:t$3`Software Version`,type:"loading",text:this.getCurrentVersion(),information:t$3`Checking for updates...`,instructions:null},this.updateIsRunning=!1,this.updateResult=!1,this.updateDidRun=!1,this.susbcriptionRequired=!1}connectedCallback(){super.connectedCallback(),this.checkForUpdates()}disconnectedCallback(){super.disconnectedCallback()}getCurrentVersion(){return window.QRCG_VERSION}async attemptAutoUpdate(){this.updateIsRunning=!0;const{json:{result:w,subscription_required:q}}=await post("system/self-update");this.susbcriptionRequired=q,this.updateIsRunning=!1,this.updateDidRun=!0,this.updateResult=w,this.susbcriptionRequired&&UpdateServiceModal.open(),this.updateResult&&setTimeout(()=>{window.location.reload()},2e3)}number(w){return+w.replace("v","").replace(".","")}hasSoftwareUpdate(){return this.number(this.latestVersion)>this.number(this.getCurrentVersion())}async checkForUpdates(){const{json:{version:w}}=await get("system/latest-version");this.latestVersion=w,this.hasSoftwareUpdate()?this.entry.type="warning":(this.entry.type="success",this.entry.information=t$3`Software is up to date`),this.requestUpdate()}isLocal(){return window.location.hostname==="quickcode.test"?!1:window.QRCG_ENVIRONEMNT==="local"}shouldRenderUpdateButton(){let w=!0;return w=PluginManager.applyFilters(FILTER_SHOULD_RENDER_UPDATE_BUTTON,w),w}renderUpdateStatus(){if(this.updateIsRunning)return x` <div>${t$3`Updating...`}</div> `;if(this.updateDidRun&&!this.susbcriptionRequired)return this.updateResult?x`
                <div class="update-result success">
                    <qrcg-icon mdi-icon=${mdiCheck} class="success"></qrcg-icon>
                    <div>${t$3`Update completed successfully.`}</div>
                </div>
            `:x`
            <div class="update-result error">
                <qrcg-icon mdi-icon=${mdiCloseThick}></qrcg-icon>
                <div>
                    ${t$3`Could not update, please check`}
                    <a href="/dashboard/system/logs">${t$3`system logs`}</a>
                    ${t$3`for any errors.`}
                </div>
            </div>
        `}renderUpdateButton(){if(this.shouldRenderUpdateButton())return this.isLocal()?x`
                <div class="local-message">
                    ${t$3`Automatic updates can be installed on live server only.`}
                </div>
            `:x`
            <div class="update-button-container">
                <qrcg-button
                    class="elegant"
                    @click=${this.attemptAutoUpdate}
                    .loading=${this.updateIsRunning}
                >
                    <qrcg-icon
                        mdi-icon="${mdiFloppy}"
                        class="button-icon"
                    ></qrcg-icon>
                    ${t$3`Update Now`}
                </qrcg-button>

                ${this.renderUpdateStatus()}
            </div>
        `}renderInformation(){return this.latestVersion?this.hasSoftwareUpdate()?x`
            <div class="information">
                <div class="information-text">
                    ${t$3`Update is available, latest version is`}
                    ${this.latestVersion}
                </div>

                ${this.renderUpdateButton()}
            </div>
        `:super.renderInformation():super.renderInformation()}}VersionEntry.register();class SystemStatus extends QrcgDashboardPage{api=new QRCGApiConsumer(this,"system");static tag="qrcg-system-status";static styleSheets=[...super.styleSheets,style$O];static get properties(){return{systemStatus:{type:Array},loading:{type:Boolean},databaseUpdateAvailable:{type:Boolean}}}constructor(){super(),this.loaders=0,this.systemStatus=[]}connectedCallback(){super.connectedCallback(),this.fetchStatus(),document.addEventListener("qrcg-system-status:request-refresh",this.refresh)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("qrcg-system-status:request-refresh",this.refresh)}refresh=()=>{this.fetchStatus()};pageTitle(){return t$3("System Status")}onBeforeRequest=()=>{this.loading=++this.loaders>0};onAfterRequest=()=>{setTimeout(()=>{this.loading=--this.loaders>0},0)};async fetchStatus(){const{entries:w}=await this.api.get("status");this.systemStatus=w;const{update_available:q}=await this.api.get("check_database_update");this.databaseUpdateAvailable=q}renderBeforeContent(){return this.renderHeaderActions()}renderHeaderActions(){return x`
            <qrcg-button
                @click=${this.refresh}
                transparent
                slot="header-actions"
                class="refresh"
                title="refresh"
            >
                <qrcg-icon mdi-icon=${mdiRefresh}></qrcg-icon>
            </qrcg-button>
        `}renderServerEntries(){return this.systemStatus.map(w=>x`
                <qrcg-system-status-entry
                    .entry=${w}
                ></qrcg-system-status-entry>
            `)}renderSystemVersion(){return x`
            <qrcg-system-status-version-entry></qrcg-system-status-version-entry>
        `}renderContent(){return this.loading?x`
                <div class="loading-container">
                    <qrcg-loader></qrcg-loader>
                </div>
            `:[this.renderSystemVersion(),this.renderServerEntries()]}}SystemStatus.register();function onReturnClick(){removeActingAs()}function showActAsNoticeIfNeeded(){setTimeout(()=>{showNoticeIfNeeded$1()},100)}async function showNoticeIfNeeded$1(){if(!isActingAs())return;const F=loadUser();showNotice({message:x`
            ${t$3`You are currently acting as`} ${F.name},
            <strong style="cursor: pointer" @click=${onReturnClick}>
                ${t$3`click here to return to your account.`}
            </strong>
        `})}async function onLocalUserReady$1(){setTimeout(()=>{showNoticeIfNeeded$1()},100)}function onLocationChanged$1(){setTimeout(()=>{showNoticeIfNeeded$1()},100)}window.addEventListener("qrcg-router:location-changed",onLocationChanged$1);window.addEventListener("auth:local-user-ready",onLocalUserReady$1);const data={user:null,ok:void 0};async function onLocalUserReady(){data.user=loadUser(),showNoticeIfNeeded()}async function fetchStatus(){if(!isSuperAdmin())return;const{response:F}=await get("system/status"),w=await F.json();data.ok=w.ok,showNoticeIfNeeded(),showActAsNoticeIfNeeded()}async function showNoticeIfNeeded(){isSuperAdmin()&&data.user&&(typeof data.ok>"u"||location.pathname!="/dashboard/system/status"&&(data.ok||(await new Promise(F=>setTimeout(F,50)),showNotice({message:t$3("Some of the functionality might not work, click here to resolve the issue."),link:"/dashboard/system/status"}))))}function onLocationChanged(){}fetchStatus();window.addEventListener("qrcg-router:location-changed",onLocationChanged);window.addEventListener("auth:local-user-ready",onLocalUserReady);class QrcgSystemSmtpSettingsTest extends i$1{static get tag(){return"qrcg-system-smtp-settings-test"}static get styles(){return i$3`
            :host {
                display: flex;
                flex-direction: column;
                position: relative;
            }

            :host > * {
                margin-bottom: 1rem;
            }

            qrcg-button {
                width: fit-content;
            }

            .result {
                padding: 1rem;
                background-color: var(--gray-0);
                height: 300px;
                position: relative;
            }

            .result pre {
                position: absolute;
                top: 2.5rem;
                left: 1rem;
                right: 1rem;
                bottom: 0;
                overflow: auto;
                font-family: inherit;
                user-select: all;
            }

            .result h3 {
                margin: 0 0 1rem 0;
                color: var(--gray-2);
                font-size: 1.3rem;
            }

            @media (max-width: 900px) {
                .result {
                    max-width: 80vw;
                }
            }
        `}static get properties(){return{data:{}}}constructor(){super(),this.data={email:"",subject:"This is Test Email",message:"If you received this email, it means that SMTP configuration are correct and working."},ConfigHelper.isLocal()&&(this.data.email="mohammad.a.alhomsi@gmail.com")}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput)}firstUpdated(){this.syncInputs()}onInput(w){w.preventDefault(),w.stopImmediatePropagation();const{name:q,value:D}=w.detail;this.handleFormInput(q,D)}handleFormInput(w,q){this.data={...this.data,[w]:q}}syncInputs(){for(const w of Object.keys(this.data)){const q=this.input(w);if(!q)return;q.value=this.data[w]}}input(w){return this.shadowRoot.querySelector(`[name="${w}"]`)}validateInput(){for(const w of Object.keys(this.data))if(isEmpty(this.data[w]))throw showToast(t$3`Please enter `+titleCase(w)),new Error}async submit(w){try{this.validateInput()}catch{return}const q=w.target;q.loading=!0;try{const{response:D}=await post("system/test-smtp",this.data),Q=await D.json();this.renderLog(Q.debug),showToast(t$3`Test queued, check result box for debug details.`)}catch(D){console.log(D),showToast(t$3`Cannot send test email`)}q.loading=!1}renderLog(w){const q=this.shadowRoot.querySelector(".result > pre");q.innerHTML=w}render(){return x`
            <qrcg-form-comment label="${t$3`Help`}">
                ${t$3`Test your credentials by sending an email through the system.`}
            </qrcg-form-comment>

            <qrcg-input
                name="email"
                type="email"
                placeholder="email@domain.com"
            >
                ${t$3`Recepient Email`}
                <div slot="instructions">
                    ${t$3`We will send the test email to this address.`}
                </div>
            </qrcg-input>

            <qrcg-input name="subject" placeholder="${t$3`Test SMTP`}">
                ${t$3`Subject`}
            </qrcg-input>

            <qrcg-textarea name="message"> ${t$3`Message`} </qrcg-textarea>

            <div class="result">
                <h3>${t$3`Result`}</h3>
                <pre>-- ${t$3`smtp log will be written here`} --</pre>
            </div>

            <qrcg-button transparent @click=${this.submit}>
                ${t$3`Send Test Email`}
            </qrcg-button>
        `}}defineCustomElement(QrcgSystemSmtpSettingsTest.tag,QrcgSystemSmtpSettingsTest);class QrcgSystemSettingsFormSmtp extends QrcgSystemSettingsFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            qrcg-timezone-select {
                max-width: 50%;
            }
        `];renderSmtpDetailsSection(){return x`
            <section>
                <h2 class="section-title">${t$3`SMTP Details`}</h2>

                <qrcg-input
                    name="mail.mailers.smtp.host"
                    placeholder="mail.domain.tld"
                >
                    ${t$3`Host`}
                </qrcg-input>

                <qrcg-input
                    name="mail.mailers.smtp.username"
                    placeholder="username@domain.com"
                >
                    ${t$3`Username`}
                </qrcg-input>

                <qrcg-input
                    name="mail.mailers.smtp.password"
                    placeholder="username@domain.com"
                    type="password"
                >
                    ${t$3`Password`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="mail.mailers.smtp.encryption"
                    .options=${[{name:t$3`None`,value:null},{name:t$3`SSL`,value:"ssl"},{name:t$3`TLS`,value:"tls"}]}
                >
                    ${t$3`Encryption`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="mail.mailers.smtp.port"
                    .options=${[{name:25,value:25},{name:587,value:587},{name:465,value:465}]}
                >
                    ${t$3`Port`}
                </qrcg-balloon-selector>

                <qrcg-input
                    name="mail.from.address"
                    placeholder="email@domain.com"
                >
                    ${t$3`From Address`}
                </qrcg-input>

                <qrcg-input name="mail.from.name" placeholder="No Reply">
                    ${t$3`From Name`}
                </qrcg-input>

                <qrcg-input
                    name="mail.mailers.smtp.timeout"
                    type="number"
                    min="1"
                    placeholder="5"
                >
                    ${t$3`Timeout`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="mail.mailers.smtp.auth_type"
                    .options=${[{name:"Auto",value:"null"},{name:"None",value:"none"},{name:"PLAIN",value:"PLAIN"},{name:"LOGIN",value:"LOGIN"},{name:"XOAUTH2",value:"XOAUTH2"},{name:"OAUTHBEARER",value:"OAUTHBEARER"},{name:"CRAM-MD5",value:"CRAM-MD5"}]}
                >
                    ${t$3`Auth Type. Default (Auto)`}
                    <div slot="instructions">
                        ${t$3`AUTH LOGIN command in the SMTP protocl. For most cases this should be left auto.`}
                    </div>
                </qrcg-balloon-selector>
            </section>
        `}renderTestSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Send Test Email`}</h2>
                <qrcg-system-smtp-settings-test></qrcg-system-smtp-settings-test>
            </qrcg-form-section>
        `}renderForm(){return[this.renderSmtpDetailsSection(),this.renderTestSection()]}}window.defineCustomElement("qrcg-system-settings-form-smtp",QrcgSystemSettingsFormSmtp);class QrcgConfigTranslatorModal extends QrcgModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            .loader-container {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            a {
                color: var(--primary-0);
                text-decoration: none;
            }
        `];static get properties(){return{...super.properties,translations:{type:Array},fetchingData:{type:Boolean},path:{},label:{},configKey:{},lines:{type:Array}}}static async open({configKey:w,label:q,path:D}){const Q=new QrcgConfigTranslatorModal;return Q.configKey=w,Q.label=q,Q.path=D,document.body.appendChild(Q),await new Promise(O=>setTimeout(O)),Q.open()}get inputs(){return Array.from(this.shadowRoot.querySelectorAll(".input"))}constructor(){super(),this.translations=[],this.loadingTranslations=!1,this.fetchData()}connectedCallback(){super.connectedCallback(),this.addEventListener("keyup",this.watchEnter)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keyup",this.watchEnter)}watchEnter=w=>{w.key=="Enter"&&this.onAffirmativeClick()};async fetchData(){this.fetchingData=!0,await this.fetchTranslations(),await this.fetchLines(),await this.updateComplete,this.fetchingData=!1,await this.updateComplete,this.fillLines()}async fetchLines(){let w={configKey:this.configKey,path:this.path};w=new URLSearchParams(w).toString();const{response:q}=await get("translations/config-lines?"+w),D=await q.json();this.lines=D}async fetchTranslations(){const{response:w}=await get("translations?is_active=true&paginate=false"),q=await w.json();this.translations=q}fillLines(){this.lines.forEach(w=>{const q=this.shadowRoot.getElementById(w.key.replace(/\./g,"-"));q&&(q.value=JSON.parse(w.value))})}renderTitle(){return this.label}renderLoader(){return x`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderEmptyMessage(){return x`
            <div>
                Multilingual is not enabled on your website. Go to
                <a href="${url("/dashboard/translations")}">Translations</a> to
                enable more than one language.
            </div>
        `}renderTranslationLines(){return this.translations.filter(q=>!q.is_default).map(q=>{const D=`translation-${q.locale}-${this.path.replace(/\./g,"-")}`;return x`
                <qrcg-input class="input" .locale=${q.locale} id=${D}>
                    ${q.name}
                </qrcg-input>
            `})}renderBody(){return this.fetchingData?this.renderLoader():isEmpty(this.translations)||this.translations.length<2?this.renderEmptyMessage():this.renderTranslationLines()}async affiramtivePromise(){this.onBeforeSave();const w=this.inputs.map(q=>post("translations/config-lines",{configKey:this.configKey,path:this.path,text:q.value,locale:q.locale}));await Promise.all(w),showToast(t$3`Translations saved successfully`)}onBeforeSave(){this.shadowRoot.querySelector("qrcg-button[modal-affirmative]").loading=!0,this.shadowRoot.querySelector("qrcg-button[modal-negative]").disabled=!0}getAffirmativeText(){return t$3`Save`}}window.defineCustomElement("qrcg-config-translator-modal",QrcgConfigTranslatorModal);class QrcgConfigTranslator extends i$1{static styles=[i$3`
            :host {
                display: flex;
                position: absolute;
                right: 0.2rem;
                bottom: 0.65rem;
            }

            qrcg-button::part(button) {
                min-width: initial;
                padding: 0.25rem;
            }

            qrcg-icon {
                width: 1.5rem;
                height: 1.5rem;
            }
        `];static get properties(){return{configKey:{attribute:"config-key"},label:{},path:{},translations:{type:Array}}}static loadTranslations(){return this.loadTranslationPromise?this.loadTranslationPromise:(this.loadTranslationPromise=new Promise((w,q)=>{try{get("translations/active").then(({json:D})=>{w(D)})}catch(D){q(D),console.error("error while fetching translations")}}),this.loadTranslationPromise)}constructor(){super(),this.translations=[],this.fetchActiveTranslations()}async fetchActiveTranslations(){this.translations=await QrcgConfigTranslator.loadTranslations()}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick(){QrcgConfigTranslatorModal.open({configKey:this.configKey,label:this.label,path:this.path})}render(){return this.translations.length<2?null:x`
            <qrcg-button transparent>
                <qrcg-icon mdi-icon=${mdiTranslate}></qrcg-icon>
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-config-translator",QrcgConfigTranslator);class QrcgMenuInput extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            .menu-group {
                margin: 1rem 0;
                padding: 1rem;
                position: relative;
                background-color: var(--gray-0);
            }

            :host(:not([has-groups])) .menu-group > qrcg-input {
                display: none;
            }

            :host(:not([has-badges])) .add-badge {
                display: none;
            }

            .menu-group::before {
                content: '';
                display: none;
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0;
                right: 0;
                background-color: var(--primary-0);
                opacity: 0.05;
                z-index: 0;
                pointer-events: none;
            }

            .menu-group.last {
                margin-bottom: 0;
            }

            .menu-item {
                display: flex;
                flex-direction: column;
                position: relative;
                z-index: 1;

                padding: 1rem;
                background-color: white;
                margin: 1rem 0;
            }

            .menu-item-rows {
                flex: 1;
            }

            .menu-item-row {
                display: flex;
                flex-direction: column;
            }

            .badge-row > * {
                margin-bottom: 1rem;
            }

            @media (min-width: 900px) {
                .menu-item-row,
                .menu-item {
                    flex-direction: row;
                }

                .badge-row {
                    flex-direction: column;
                }

                .menu-item-row > qrcg-input {
                    flex: 1;
                }

                .menu-item-row > *:not(:last-child) {
                    margin-right: 1rem;
                }
            }

            @media (min-width: 1345px) {
                .badge-row {
                    flex-direction: row;
                    align-items: flex-end;
                }

                .badge-row > * {
                    margin-bottom: 0;
                }

                .badge-row qrcg-color-picker::part(color-box),
                .badge-row qrcg-input::part(input) {
                    margin-bottom: 0;
                }

                .badge-row qrcg-color-picker::part(label) {
                    margin-bottom: 0.25rem;
                }
            }

            .action {
                color: var(--primary-0);
                text-decoration: underline;
                font-size: 0.8rem;
                margin-top: 1rem;
                cursor: pointer;
                user-select: none;
                transition: opacity 0.2s cubic-bezier(0.215, 0.61, 0.355, 1);
            }

            .action.hidden {
                opacity: 0;
                pointer-events: none;
            }

            .delete-group {
                color: var(--danger);
            }

            .delete {
                width: 2rem;
                height: 2rem;
                cursor: pointer;
                color: var(--gray-1);
            }

            .delete.hidden {
                opacity: 0;
                pointer-events: none;
            }

            .delete-container {
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .group-actions {
                display: flex;
                justify-content: space-between;
            }

            .remove-badge {
                color: var(--danger);
                margin-bottom: 1rem;
            }
        `];static get properties(){return{groups:{type:Array},name:{},value:{},hasBadges:{type:Boolean,attribute:"has-badge",reflect:!0},hasGroups:{type:Boolean,attribute:"has-groups",reflect:!0}}}constructor(){super(),this.groups=[this.newGroup],this.hashStore=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),this.removeEventListener("on-input",this.onInput),this.hashStore.forEach(w=>w.clear()),this.hashStore.length=0,this.groups.length=0}willUpdate(w){if(w.has("value")&&this.value)try{JSON.stringify(this.groups)!==JSON.stringify(this.value)&&(this.groups=this.value)}catch{}}get newItem(){return{label:"",link:"",target:"",hasBadge:!1,badge:"",badgeBackgroundColor:"#ff0000",badgeTextColor:"#ffffff"}}get newGroup(){return{name:"",items:[this.newItem]}}onClick=w=>{const q=w.composedPath()[0];q.matches(".action.add-group")&&this.addNewGroup(w),q.matches(".action.add-item")&&this.addNewItem(w),q.matches(".action.delete-group")&&this.deleteGroup(w),q.matches(".action.add-badge")&&this.addBadge(w),q.matches(".action.remove-badge")&&this.removeBadge(w);const D=parentMatches(q,".delete-item");D&&this.deleteItem(D)};onInput=w=>{const q=w.composedPath()[0];if(q===this)return;w.stopImmediatePropagation();const D=q.item;D&&(D[w.detail.name]=w.detail.value),q.group&&(q.group[w.detail.name]=w.detail.value),this.onInputChanged()};deleteItem(w){const{item:q,group:D}=w;D.items=D.items.filter(Q=>Q!=q),this.onInputChanged()}addNewGroup(){this.groups.push(this.newGroup),this.onInputChanged()}addNewItem(w){w.composedPath()[0].group.items.push(this.newItem),this.onInputChanged()}addBadge(w){const q=w.composedPath()[0].item;q.hasBadge=!0,this.onInputChanged()}removeBadge(w){const q=w.composedPath()[0].item;q.hasBadge=!1,this.onInputChanged()}deleteGroup(w){const{group:q}=w.composedPath()[0];this.groups=this.groups.filter(D=>q!==D),this.onInputChanged()}onInputChanged(){this.requestUpdate(),this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:this.groups}}))}canAddItem(w){return w.items.filter(D=>isEmpty(D.label)||isEmpty(D.link)).length===0}canAddGroup(){return!this.groups.find(w=>isEmpty(w.name))}canDeleteGroup(){return this.groups.length>1}groupKey=w=>this.getObjectKey(w,"groupsHash");itemKey=w=>this.getObjectKey(w,"itemsHash");getObjectKey=(w,q)=>(this[q]||(this[q]=new Map,this.hashStore.push(this[q])),this[q].get(w)||this[q].set(w,generateUniqueID(25)),this[q].get(w));getItemGroup(w){return this.groups.find(q=>q.items.find(D=>D===w))}renderBadgeInputs(w){return w.hasBadge?x`
            <div class="action remove-badge" .item=${w}>
                ${t$3`Remove badge`}
            </div>
            <div class="menu-item-row badge-row">
                <qrcg-input
                    name="badge"
                    value=${w.badge}
                    .item=${w}
                    placeholder="new"
                >
                    ${t$3`Badge`}
                </qrcg-input>

                <qrcg-color-picker
                    name="badgeBackgroundColor"
                    value=${w.badgeBackgroundColor}
                    .item=${w}
                >
                    ${t$3`Badge background color`}
                </qrcg-color-picker>

                <qrcg-color-picker
                    name="badgeTextColor"
                    value=${w.badgeTextColor}
                    .item=${w}
                >
                    ${t$3`Badge text color`}
                </qrcg-color-picker>
            </div>
        `:x`<div class="action add-badge" .item=${w}>
                ${t$3`Add badge`}
            </div>`}renderItemLabelInput(w,q,D){return x`
            <qrcg-input
                placeholder="${t$3`Contact support`}"
                name="label"
                .value=${w.label}
                .item=${w}
            >
                ${t$3`Label`}

                <qrcg-config-translator
                    config-key=${this.name}
                    path="${q}.items.${D}.label"
                    slot="input-actions"
                    label="Menu Item Label"
                ></qrcg-config-translator>
            </qrcg-input>
        `}renderItemRow(w,q,D,Q){return x`
            <div class="menu-item-row">
                ${this.renderItemLabelInput(w,Q,q)}
                <qrcg-input
                    name="link"
                    placeholder="https://helpdesk.domain.com"
                    .value=${w.link}
                    .item=${w}
                >
                    ${t$3`Link`}
                    <qrcg-config-translator
                        config-key=${this.name}
                        path="${Q}.items.${q}.link"
                        slot="input-actions"
                        label="Menu Item Link"
                    ></qrcg-config-translator>
                </qrcg-input>
                <qrcg-balloon-selector
                    name="target"
                    value=${w.target}
                    .item=${w}
                    .options=${[{name:t$3`Same tab`,value:"_self"},{name:t$3`New tab`,value:"_blank"}]}
                >
                    ${t$3`Opens in`}
                </qrcg-balloon-selector>
            </div>
        `}renderItem(w,q,D,Q){return x`
            <div class="menu-item">
                <div class="menu-item-rows">
                    ${this.renderItemRow(w,q,D,Q)}
                    ${this.renderBadgeInputs(w)}
                </div>

                <div class="delete-container">
                    <qrcg-icon
                        class="delete delete-item ${D.items.length<2?"hidden":""}"
                        mdi-icon=${mdiCloseCircle}
                        .item=${w}
                        .group=${D}
                    >
                    </qrcg-icon>
                </div>
            </div>
        `}renderItems(w,q){return c(w.items,this.itemKey,(D,Q)=>this.renderItem(D,Q,w,q))}renderGroup=(w,q)=>x`
            <div
                class="menu-group ${q===this.groups.length-1?"last":""}"
            >
                <qrcg-input
                    placeholder=${t$3`Help & Support`}
                    name="name"
                    .value=${w.name}
                    .group=${w}
                >
                    ${t$3`Group name`}
                    <qrcg-config-translator
                        config-key=${this.name}
                        path="${q}.name"
                        label="Group Name"
                    ></qrcg-config-translator>
                </qrcg-input>

                ${this.renderItems(w,q)}

                <div class="group-actions">
                    <div
                        class="action add-item ${this.canAddItem(w)?"":"hidden"}"
                        .group=${w}
                    >
                        ${t$3`Add a new item`}
                    </div>

                    <div
                        class="action delete-group ${this.canDeleteGroup(w)?"":"hidden"}"
                        .group=${w}
                    >
                        ${t$3`Delete group`}
                    </div>
                </div>
            </div>
        `;render(){return x`
            ${c(this.groups,this.groupKey,this.renderGroup)}

            <div class="action add-group ${this.canAddGroup()?"":"hidden"}">
                ${t$3`Add a new group`}
            </div>
        `}}window.defineCustomElement("qrcg-menu-input",QrcgMenuInput);class QrcgSystemSettingsFormMenus extends QrcgSystemSettingsFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];renderDashboardMenuInputs(){return x`
            <section>
                <h2 class="section-title">${t$3`Dashboard Menu (Clients)`}</h2>
                <qrcg-form-comment label="">
                    <p>
                        ${t$3`Add extra links to display on the client dashboard sidebar`}
                    </p>
                </qrcg-form-comment>

                <qrcg-menu-input
                    name="app.dashboard-client-menu"
                    has-badges
                    has-groups
                ></qrcg-menu-input>
            </section>
        `}renderWebsiteHeaderMenuInputs(){return x`
            <section>
                <h2 class="section-title">${t$3`Header Menu`}</h2>
                <qrcg-form-comment label="">
                    <p>${t$3`Menu displayed in the website frontend.`}</p>
                </qrcg-form-comment>

                <qrcg-menu-input
                    name="app.website-header-menu"
                ></qrcg-menu-input>
            </section>
        `}renderWebsiteFooterMenuInputs(){return x`
            <section>
                <h2 class="section-title">${t$3`Footer Menu`}</h2>
                <qrcg-form-comment label="">
                    <p>${t$3`Menu displayed in the website footer.`}</p>
                </qrcg-form-comment>

                <qrcg-menu-input
                    name="app.website-footer-menu"
                    has-groups
                ></qrcg-menu-input>
            </section>
        `}renderForm(){return x`
            ${this.renderWebsiteHeaderMenuInputs()}
            <!--  -->
            ${this.renderWebsiteFooterMenuInputs()}
            <!--  -->
            ${this.renderDashboardMenuInputs()}
        `}}window.defineCustomElement("qrcg-system-settings-form-menus",QrcgSystemSettingsFormMenus);class QrcgSystemSettingsFormStorage extends QrcgSystemSettingsFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            .test-connection {
                width: fit-content;
                margin-top: 1rem;
            }
        `];async onTestConnectionClick(){try{this.testButton.loading=!0;const{response:w}=await post("system/test-storage");if(!(await w.json()).result)throw new Error("");showToast("Storage test successful!")}catch{showToast("Error in storage configuration.")}finally{this.testButton.loading=!1}}get testButton(){return this.shadowRoot.querySelector(".test-connection")}renderForm(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Storage Settings`}</h2>

                <qrcg-form-comment label="" icon="">
                    ${t$3`You can use either your local disk or any AWS S3 compatible object storage service, like Digital Ocean Spaces, Vultr Object Storage, Contabo Object Storage, etc ...`}
                </qrcg-form-comment>

                <qrcg-balloon-selector
                    name="app.storage_type"
                    .options=${[{name:t$3`Local`,value:"local"},{name:t$3`S3 Object Storage`,value:"s3"}]}
                >
                    ${t$3`Storage Type. Default (Local)`}
                </qrcg-balloon-selector>

                <qrcg-input
                    name="filesystems.s3.key"
                    placeholder="${t$3`Your AWS Access Key`}"
                >
                    ${t$3`Access Key ID`}
                </qrcg-input>

                <qrcg-input
                    name="filesystems.s3.secret"
                    placeholder="${t$3`Your AWS Secret Key`}"
                >
                    ${t$3`Secret Access Key`}
                </qrcg-input>

                <qrcg-input
                    name="filesystems.s3.region"
                    placeholder="${t$3`Your AWS Region`}"
                >
                    ${t$3`Region`}
                </qrcg-input>

                <qrcg-input
                    name="filesystems.s3.bucket"
                    placeholder="${t$3`Your AWS Bucket`}"
                >
                    ${t$3`Bucket`}
                </qrcg-input>

                <qrcg-input
                    name="filesystems.s3.url"
                    placeholder="${t$3`Leave empty if you are using Amazon S3`}"
                >
                    ${t$3`AWS URL`}
                </qrcg-input>

                <qrcg-input
                    name="filesystems.s3.endpoint"
                    placeholder="${t$3`Leave empty if you are using Amazon S3`}"
                >
                    ${t$3`AWS End Point`}
                </qrcg-input>

                <qrcg-button
                    @click=${this.onTestConnectionClick}
                    secondary
                    class="test-connection"
                >
                    ${t$3`Test Connection`}
                </qrcg-button>
            </qrcg-form-section>
        `}}window.defineCustomElement("qrcg-system-settings-form-storage",QrcgSystemSettingsFormStorage);class QrcgSystemSettingsFormGeneral extends QrcgSystemSettingsFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            qrcg-timezone-select {
                max-width: 50%;
            }
        `];renderFrontendSettings(){return x`
            <section>
                <h2 class="section-title">${t$3`Frontend Settings`}</h2>
                <qrcg-form-comment label="">
                    <p>
                        ${t$3`If you would like to use another content management system for the frontend, please enter the URL here.`}
                        ${t$3`Once the URL is specified, the frontend of the script will be disabled.`}
                        ${t$3`Leave empty to keep using the default frontend.`}
                    </p>
                    <p>
                        ${t$3`Frontend pages include: Home page, About, Contact, Blog, Single blog post etc...`}
                    </p>
                </qrcg-form-comment>

                <qrcg-input
                    name="app.frontend_custom_url"
                    placeholder="https://your-domain.com"
                >
                    ${t$3`Frontend Custom URL`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="app.use_login_screen_as_home_page"
                    .options=${BalloonSelector.OPTIONS_YES_NO}
                >
                    ${t$3`Use Login Screen As Your Home Page`}
                    <div slot="instructions">
                        ${t$3`This will disable the default front page completly, and it will redirect to the login page instead.`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-input
                    name="app.frontend_pricing_plans_url"
                    placeholder="https://your-domain.com/pricing-plans"
                >
                    <div slot="instructions">
                        ${t$3`Useful if you are using a custom frontend with custom pricing page. This link is used in the upgrade button when the user is on trial plan.`}
                    </div>
                    ${t$3`Pricing plans page URL`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="app.frontend_links"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`Frontend Links`}
                    <div slot="instructions">
                        ${t$3`Useful if you have a custom frontend, and you want your clients to stay in the dashboard area. This will remove `}
                        <strong>${t$3`Contact`}</strong>
                        ${t$3`menu link from the client dashboard sidebar.`}
                        <strong>${t$3`Home page link`}</strong>
                        ${t$3`below login form will be removed as well.`}
                        ${t$3`Default is Enabled.`}
                    </div>
                </qrcg-balloon-selector>
            </section>
        `}renderGeneralSection(){return x`
            <section>
                <h2 class="section-title">${t$3`General Settings`}</h2>

                <qrcg-input name="app.name"> ${t$3`App name`} </qrcg-input>
                <qrcg-input name="frontend.slogan">
                    ${t$3`App slogan`}
                </qrcg-input>

                <qrcg-input
                    name="app.powered_by_name"
                    placeholder="${t$3`Leave empty to use App name.`}"
                >
                    ${t$3`Powered By Name`}
                </qrcg-input>

                <qrcg-textarea name="homepage.meta_description" maxLength="160">
                    ${t$3`Home page meta description`}
                </qrcg-textarea>

                <qrcg-textarea name="homepage.meta_keywords">
                    ${t$3`Home page meta keywords`}
                </qrcg-textarea>

                <qrcg-timezone-select
                    name="app.timezone"
                ></qrcg-timezone-select>
            </section>
        `}renderForm(){return x`
            ${this.renderGeneralSection()}

            <!-- -->
            ${this.renderFrontendSettings()}
        `}}window.defineCustomElement("qrcg-system-settings-form-general",QrcgSystemSettingsFormGeneral);const style$L=":host{display:flex;flex-direction:column;gap:1rem;border-top:1px solid var(--gray-1);border-bottom:1px solid var(--gray-1);margin:1rem 0;padding:1rem 0}h3{color:var(--gray-2);margin:0}.apple-instructions{cursor:pointer;color:var(--info-0)}.apple-instructions:hover{text-decoration:underline}",style$K="img{max-width:100%}";class AppleWalletInstructionsModal extends QrcgModal{static tag="qrcg-apple-wallet-instructions-modal";static styleSheets=[...super.styleSheets,style$K];renderTitle(){return t$3`Apple Wallet Guide`}renderNegativeAction(){}renderBody(){return x`
            <ol>
                <li>
                    Go to the
                    <a
                        href="https://developer.apple.com/account/ios/identifier/passTypeId"
                        rel="nofollow"
                        target="_blank"
                        >iOS Provisioning portal</a
                    >.
                </li>
                <li>
                    Create a new Pass Type ID, and write down the Pass ID you
                    choose, you'll need it later.
                </li>
                <li>
                    Click the edit button under your newly created Pass Type ID
                    and generate a certificate according to the instructions
                    shown on the page. Make sure
                    <em>not</em> to choose a name for the Certificate but keep
                    it empty instead.
                </li>
                <li>
                    Download the .cer file and drag it into Keychain Access.
                </li>
                <li>
                    Choose to filter by <strong>Certificates</strong> in the top
                    filter bar.
                </li>
                <li>
                    Find the certificate you just imported and click the
                    triangle on the left to reveal the private key.
                </li>
                <li>
                    Select both the certificate and the private key it, then
                    right-click the certificate in Keychain Access and choose
                    <code>Export 2 items</code>.
                </li>
                <li>Choose a password and export the file to a folder.</li>
            </ol>

            <a
                href="/assets/images/apple-wallet-guide-export.gif"
                target="_blank"
                title=${t$3`Open Full Screen`}
            >
                <img src="/assets/images/apple-wallet-guide-export.gif" />
            </a>
        `}}AppleWalletInstructionsModal.register();class AppleWalletConfigInput extends BaseComponent{static tag="qrcg-apple-wallet-config-input";static styleSheets=[...super.styleSheets,style$L];static get properties(){return{...super.properties,name:{reflect:!0},value:{}}}get form(){return parentMatches(this,QrcgSystemSettingsFormAdvanced.tag)}constructor(){super(),this.value={}}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput)}setDefaultNameIfNeeded(){isEmpty(this.name)&&(this.name="apple_wallet")}getName(){return this.setDefaultNameIfNeeded(),this.name}openAppleWalletInstructionsModal(){AppleWalletInstructionsModal.open()}onInput(w){if(w.composedPath()[0]===this)return;w.preventDefault(),w.stopImmediatePropagation();const{name:q,value:D}=w.detail;q==="tab"&&this.syncInputs(),this.setValueLazily({...this.value,[q]:D})}updated(w){w.has("value")&&this.syncInputs()}setValue(w){this.value=w,this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.getName(),value:this.value}}))}syncInputs(){this.$$("[name]").forEach(w=>{if(isNotEmpty(w.value))return;const q=w.getAttribute("name"),D=this.value[q];D&&(w.value=D)})}setValueLazily(w){clearTimeout(this.setValueTimeout),this.setValueTimeout=setTimeout(()=>{this.setValue(w)},500)}getDefaultTab(){return"credentials"}getTabs(){return[{name:t$3`Credentials`,value:"credentials"},{name:t$3`Logo`,value:"logo"},{name:t$3`Colors`,value:"colors"}]}getActiveTab(){return isEmpty(this.value.tab)?this.getDefaultTab():this.value.tab}renderTabs(){return x`
            <qrcg-balloon-selector name="tab" .options=${this.getTabs()}>
            </qrcg-balloon-selector>
        `}renderCredentialsTab(){if(this.getActiveTab()=="credentials")return x`
            <div
                class="apple-instructions"
                @click=${this.openAppleWalletInstructionsModal}
            >
                ${t$3`View Instructions to generate credentials.`}
            </div>

            <qrcg-input
                name="pass_type_identifier"
                placeholder=${t$3`Enter identifier`}
            >
                ${t$3`Pass Type Identifier`}
            </qrcg-input>

            <qrcg-input
                name="team_identifier"
                placeholder=${t$3`Enter identifier`}
            >
                <div slot="instructions">
                    ${t$3`Team identifier can be found at`}

                    <!--  -->
                    <a
                        href="https://developer.apple.com/account/#/membership"
                        target="_blank"
                        rel="nofollow"
                    >
                        ${t$3`the Developer Portal`}
                    </a>
                </div>

                ${t$3`Team Identifier`}
            </qrcg-input>

            <qrcg-input
                name="password"
                placeholder=${t$3`Enter password`}
                type="password"
            >
                ${t$3`Certificate Password`}
            </qrcg-input>

            ${this.form?.renderFileInput({label:t$3`Apple Certificate`,name:"certificate",accept:".p12"})}
        `}renderLogoTab(){if(this.getActiveTab()=="logo")return x`
            ${this.form.renderFileInput({label:t$3`Icon 59x59`,name:"icon",accept:".png"})}
            <!--  -->
            ${this.form.renderFileInput({label:t$3`Icon 114x114`,name:"icon_2x",accept:".png"})}
            <!--  -->
            ${this.form.renderFileInput({label:t$3`Logo 332x332`,name:"logo",accept:".png"})}
        `}renderColorsTab(){if(this.getActiveTab()=="colors")return x`
            <qrcg-color-picker name="background_color">
                ${t$3`Background Color`}
            </qrcg-color-picker>

            <qrcg-color-picker name="foreground_color">
                ${t$3`Foreground Color`}
                <div slot="instructions">${t$3`Text color`}</div>
            </qrcg-color-picker>
        `}renderTitle(){return x` <h3>${t$3`Apple Wallet`}</h3> `}render(){return[this.renderTitle(),this.renderTabs(),this.renderCredentialsTab(),this.renderLogoTab(),this.renderColorsTab()]}}AppleWalletConfigInput.register();class QrcgSystemSettingsFormAdvanced extends QrcgSystemSettingsFormBase{static tag="qrcg-system-settings-form-advanced";static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            .auth0-instructions {
                margin-top: 1rem;
            }
        `];static get properties(){return{...super.properties,callingCodes:{type:Array}}}async fetchConfigs(){return this.fetchCallingCodes(),super.fetchConfigs()}async fetchCallingCodes(){const{response:w}=await get("utils/list-calling-codes"),q=await w.json();this.callingCodes=q.filter(D=>{const Q=D.country_name??"";return!isEmpty(Q.trim())}).map(D=>({id:"+"+D.calling_code,name:D.country_name,value:D.iso_code}))}renderLoginSecurityConfigs(){const w=this.getValue("security.account_lock_on_failed_login_attempts_enabled")==="enabled"?this.renderAccountLockConfigs():null;return x`
            <section>
                <h2 class="section-title">${t$3`Login Security`}</h2>
                <qrcg-balloon-selector
                    name="security.account_lock_on_failed_login_attempts_enabled"
                    .options=${[{value:"enabled",name:t$3`Enabled`},{value:"disabled",name:t$3`Disabled`}]}
                >
                    ${t$3`Lock account on failed login attempts. Default (disabled)`}
                </qrcg-balloon-selector>

                ${w}
            </section>
        `}renderPerfomanceSection(){return x`
            <section>
                <h2 class="section-title">${t$3`Performance`}</h2>

                <qrcg-balloon-selector
                    name="preview.canvasTextRender"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`Canvas text rendering in QR code preview. Default (Enabled)`}
                    <div slot="instructions">
                        ${t$3`Enabling this would result in almost instant preview when designing stickers. It will make additional requests to Google fonts server from the user browser to download the select font.`}
                    </div>
                </qrcg-balloon-selector>
            </section>
        `}renderIntegrationsSection(){return x`
            <section>
                <h2 class="section-title">${t$3`Integrations`}</h2>
                <qrcg-input
                    name="services.google.api_key"
                    placeholder=${t$3`Enter API Key`}
                >
                    ${t$3`Google API Key`}
                    <span slot="instructions">
                        ${t$3`Used in auto translation feature, and in Google Review dynamic type. The following APIs should be enabled: Google Maps Javascript, Places API, Cloud Translation API. Make sure that all domain restrictions are disabled.`}

                        <a
                            href="https://developers.google.com/maps/documentation/javascript/place-autocomplete#get-started"
                            target="_blank"
                            rel="noopener noreferrer nofollow"
                            >${t$3`See this guide.`}</a
                        >
                    </span>
                </qrcg-input>

                <qrcg-balloon-selector
                    name="app.allow_iframe_embed"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`Allow Embedding Dashboard Area in iFrame? Default (Disabled)`}
                    <div slot="instructions">
                        ${t$3`By default, an overlay is viewed with a link to the main app URL if the app is embedded in an iFrame.`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-input name="maxmind.api_key" placeholder="*****">
                    ${t$3`MaxMind API Key`}
                    <div slot="instructions">
                        ${t$3`Optional paid MaxMind webservice API credentials, for better IP lookup results.`}
                    </div>
                </qrcg-input>

                <qrcg-input name="maxmind.account_id" placeholder="*****">
                    ${t$3`MaxMind Account ID`}
                    <div slot="instructions">
                        ${t$3`Optional paid MaxMind webservice API credentials, for better IP lookup results.`}
                    </div>
                </qrcg-input>

                <qrcg-input
                    name="quickqr_art.api_key"
                    placeholder=${t$3`Add your API key here`}
                >
                    ${t$3`quickqr.art API Key`}
                    <div slot="instructions">
                        ${t$3`Used to generate artistic QR codes with the power of AI`}
                        <a
                            href="https://docs.quickqr.art/apis/pricing#choose-a-plan"
                            rel="noopener noreferrer nofollow"
                            target="_blank"
                        >
                            ${t$3`Get your API Key From Here.`}
                        </a>
                    </div>
                </qrcg-input>

                <qrcg-balloon-selector
                    .options=${QuickQRArtModel.ALL_WORKFLOWS}
                    name="quickqr_art.available_workflows"
                    multiple
                >
                    ${t$3`quickqr.art Available Workflows`}
                </qrcg-balloon-selector>

                <qrcg-input
                    name="google_recaptcha.site_key"
                    placeholder=${t$3`Enter site key`}
                >
                    ${t$3`Google ReCaptcha Site Key`}
                </qrcg-input>

                <qrcg-input
                    name="google_recaptcha.secret_key"
                    placeholder=${t$3`Enter secret key`}
                >
                    ${t$3`Google ReCaptcha Secret Key`}
                </qrcg-input>

                ${this.renderAppleWalletSettings()}
            </section>
        `}renderAppleWalletSettings(){return x`
            <qrcg-apple-wallet-config-input
                name="apple_wallet"
            ></qrcg-apple-wallet-config-input>
        `}renderSubscriptionManagement(){return x`
            <section>
                <h2 class="section-title">${t$3`App Monetization`}</h2>
                <qrcg-balloon-selector
                    name="app.paid_subscriptions"
                    .options=${[{name:"Enabled",value:"enabled"},{name:"Disabled",value:"disabled"}]}
                >
                    ${t$3`Paid Subscriptions. Default (enabled)`}
                    <span slot="instructions">
                        ${t$3`If disabled, all application features would be available free of charge for all users. Use with caution.`}
                    </span>
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="billing.mode"
                    .options=${[{name:t$3`Subscriptions`,value:"subscriptions"},{name:t$3`Account Credit`,value:"account_credit"}]}
                >
                    ${t$3`Billing Mode. Default (Subscriptions)`}

                    <div slot="instructions">
                        ${t$3`When account credit is used, customers can create QR code for a fixed price e.g. $1 for static, $10 for dynamic.`}
                    </div>
                </qrcg-balloon-selector>
            </section>
        `}renderOthersSections(){return x`
            <section>
                <h2 class="section-title">${t$3`Others`}</h2>
                <qrcg-balloon-selector
                    name="dashboard.view_stats_link_in_edit_qrcode_page"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`View Stats Link. Default (Enabled).`}
                    <div slot="instructions">
                        ${t$3`Show view stats link in Edit QR code form.`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="frontpage.show_customize_design_button"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`Customize Design Button`}
                    <div slot="instructions">
                        ${t$3`Show or hide Customize Design button in the frontend generator. Default (Enabled).`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="dashboard.select_qrcodes_of_currently_logged_in_user_by_default"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`Show QR Codes of currently logged in user by default.`}
                    <div slot="instructions">
                        ${t$3`If enabled, the current user will be selected in QR code list user filter. The filter is available for super user only. Default (Disabled).`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="dashboard.help_button_in_dashboard_header"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`Support Link in Dashboard Header. Default (Enabled)`}
                    <div slot="instructions">
                        ${t$3`Show help button in the dashboard area for system admin.`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="pricing.default_billing_cycle"
                    .options=${[{name:t$3`Monthly`,value:"monthly"},{name:t$3`Yearly`,value:"yearly"},{name:t$3`Life Time`,value:"life-time"}]}
                >
                    ${t$3`Default Billing Cycle in Home Page. Default (Yearly)`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="homepage.under-construction"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    <div slot="instructions">
                        ${t$3`Disable the home page and show under construction message. USE WITH CAUTION.`}
                    </div>
                    ${t$3`Under Construction. Default (Disabled)`}
                </qrcg-balloon-selector>

                <qrcg-input
                    name="homepage.under-construction-title"
                    placeholder="${t$3`Welcome to (App Name)`}"
                >
                    ${t$3`Under Construction Title`}
                </qrcg-input>

                <qrcg-textarea
                    name="homepage.under-construction-text"
                    placeholder="${t$3`Website Under Construction`}"
                >
                    ${t$3`Under Construction Text`}
                </qrcg-textarea>

                <qrcg-balloon-selector
                    name="homepage.homepage-generator"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    <div slot="instructions">
                        ${t$3`Show or hide the home page generator for guests.`}
                    </div>
                    ${t$3`Home Page Generator. Default (Enabled)`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="account.cancel_subscription_button"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    <div slot="instructions">
                        ${t$3`Show or hide the cancel subscription button in account page`}
                    </div>
                    ${t$3`Cancel Subscription Button. Default (Enabled)`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="vcard.direct_customer_website_in_vcard"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`Use end-user website in the downloaded vCard file. Default (Disabled)`}
                    <div slot="instructions">
                        ${t$3`We use the link of the vCard itself when the customer clicks on Download CSV, this to drive future traffic to your website.`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="customer.short_link_change"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    <div slot="instructions">
                        ${t$3`By default customers can change their short links at any point, you can change this behavior to prevent all customers from changing short links after they are generated.`}
                    </div>
                    ${t$3`Short Links Change. Default (Enabled)`}
                </qrcg-balloon-selector>

                <qrcg-input
                    name="bulk_operation.export-qrcode-size"
                    type="number"
                    min="1"
                    step="1"
                    placeholder="2024"
                >
                    <div slot="instructions">${t$3`Specify`}</div>
                    ${t$3`Export Size (px).`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="cookie_consent_enabled"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`Cookie Consent. Default (Enabled)`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="users_can_delete_qrcodes"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                    ${t$3`Users Can Delete QR Codes?`}
                    <div slot="instructions">
                        ${t$3`By default application users can delete their own QR codes, you can disable this behavior from here.`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="reset_scans_every_month"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                    ${t$3`Reset Scans Every Month (Default Disabled)`}

                    <div slot="instructions">
                        ${t$3`By default scans are life time, if number of scans is reached the customer should upgrade to a higher plan. Enabling this option will reset the scans of all users on first day of each month`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-input
                    type="number"
                    name="log.max_file_size"
                    step="1"
                    min="0"
                    placeholder=${t$3`Enter max file size`}
                >
                    ${t$3`Log File Max Size (MB). Default (100 MB)`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="qrcode.searchbox_in_qrcode_selection_page"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                    ${t$3`Search Box in QR Code Selection Page. Default (Enabled)`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="google-review.review-collection-destination"
                    .options=${[{name:t$3`Google My Business Page`,value:"my-business"},{name:t$3`Review List`,value:"review-list"},{name:t$3`Review Request`,value:"review-request"}]}
                >
                    ${t$3`Google Review Collection Action`}
                    <div slot="instructions">
                        ${t$3`This will be the default behaviour if no action is specified during QR code creation.`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="privacy.store-user-ip-in-scan-record"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                    ${t$3`Store User IP After QR Code Scan?`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="menu.show_paying_non_paying_users"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                    ${t$3`Paying Users`}
                    <div slot="instructions">
                        ${t$3`Specify whether to show or not show paying and non paying users in the sidebar. Default (Enabled)`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="dashboard.use_template_button"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                    ${t$3`Use Template Button`}
                    <div slot="instructions">
                        ${t$3`Enable or disable use template button in QR code form page for customers. The button will be enabled always for admin users.`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="qrcode.generate_simple_png_file"
                    .options=${BALLOON_SELECTOR_ENABLED_DISABLED}
                >
                    ${t$3`Generate Simple PNG File. Default (Disabled)`}
                    <div slot="instructions">
                        ${t$3`By default, PNG files are generated on the client side based on the rendered svg document, you can enable this option to generate basic (square) png file on the server to be served via the API.`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-searchable-select
                    name="mobile_number_default_country_code"
                    .items=${this.callingCodes}
                    position-mode="relative"
                >
                    <div slot="label">${t$3`Default Country Code`}</div>
                    <div slot="instructions">
                        ${t$3`Used when IP to Country resolving fails in mobile number input`}
                    </div>
                </qrcg-searchable-select>

                <qrcg-input name="blog_path" placeholder=${t$3`Enter blog URL`}>
                    <div slot="instructions">
                        ${t$3`Default is /blog you can translate this path for each language`}
                    </div>

                    <qrcg-config-translator
                        config-key="blog_path"
                        path="value"
                        slot="input-actions"
                        label="Blog Path"
                    ></qrcg-config-translator>

                    ${t$3`Blog Path`}
                </qrcg-input>
            </section>
        `}renderAuth0Section(){return x`
            <section>
                <h2 class="section-title">${t$3`Auth0 Integration`}</h2>
                <qrcg-balloon-selector
                    name="auth0.enabled"
                    .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                >
                    ${t$3`Auth0 Integration. Default (Disabled).`}
                    <div slot="instructions">
                        Use
                        <a
                            href="https://auth0.com"
                            target="_blank"
                            rel="noopener noreferrer nofollow"
                            >auth0</a
                        >
                        to handle the authorization flow.
                    </div>
                </qrcg-balloon-selector>

                <qrcg-form-comment label=${t$3`Help`} class="auth0-instructions">
                    ${t$3`Add the following URL in allowed callback settings in Auth0
                    dashboard`}

                    <div class="copy-code">
                        ${url("/auth0/callback")}
                        <qrcg-copy-icon
                            >${url("/auth0/callback")}</qrcg-copy-icon
                        >
                    </div>
                </qrcg-form-comment>
                <qrcg-input name="auth0.domain" placeholder="https://....">
                    ${t$3`Auth0 Domain`}
                </qrcg-input>

                <qrcg-input name="auth0.client_id" placeholder="iwIskwnBc*****">
                    ${t$3`Auth0 Client ID`}
                </qrcg-input>

                <qrcg-input
                    name="auth0.client_secret"
                    placeholder="wpicIsp[q*****"
                >
                    ${t$3`Auth0 Client Secret`}
                </qrcg-input>
            </section>
        `}renderForm(){return x`
            <!-- -->
            ${this.renderPerfomanceSection()}

            <!-- -->
            ${this.renderIntegrationsSection()}

            <!-- -->
            ${this.renderSubscriptionManagement()}

            <!-- -->

            ${this.renderAuth0Section()}

            <!-- -->
            ${this.renderOthersSections()}
        `}}QrcgSystemSettingsFormAdvanced.register();class ColorPalette{id="";name="";color_1="";color_2="";color_3="";color_4="";static get NUMBER_OF_COLORS_IN_PALETTE(){return 4}static fromPlainObject(w){return new this(w.id,w.name,w.color_1,w.color_2,w.color_3,w.color_4)}constructor(w,q="",D,Q,O,U){this.id=w,this.name=q,this.color_1=D,this.color_2=Q,this.color_3=O,this.color_4=U}getName(){return isEmpty(this.name)?t$3`New Palette`:this.name}}class ColorPaletteManager{#e=[];#t;#r=null;static get EVENT_ON_SELECTED_PALETTE_CHANGED(){return"on-selected-palette-changed"}static connect(w){const q=new this;return q.#t=w,q}#s(){return"cp-"+new Date().getTime()}#i(){return new ColorPalette(this.#s())}syncCollection(w){isEmpty(this.#e)&&(isArray$1(w)||(w=[]),w=w.map(q=>ColorPalette.fromPlainObject(q)),this.#e=w,this.requestUpdate())}deleteSelectedPalette(){this.#e=this.#e.filter(w=>w.id!=this.#r?.id),this.requestUpdate()}getPalettes(){return this.#e}addPalette(){const w=this.#i();this.#e.push(w),this.selectPalette(w.id),this.requestUpdate()}hasPalettes(){return this.#e.length>0}selectPalette(w){this.#r=this.#e.find(q=>q.id==w),this.#n(ColorPaletteManager.EVENT_ON_SELECTED_PALETTE_CHANGED)}updateSelectedPalette(w,q){this.#r[w]=q,this.requestUpdate(),this.#n()}getSelectedPaletteValue(w){return this.#r[w]}getSelectedPalette(){return this.#r}requestUpdate(){setTimeout(()=>{this.#t.requestUpdate()})}#n(w,q={}){console.log("notifying host",{host:this.#t,eventName:w}),this.#t?.dispatchEvent(new CustomEvent(w,{detail:q}))}}class QrcgColorPalettsInput extends i$1{static styles=[i$3`
            :host {
                display: flex;
                flex-direction: column;
            }

            .palette-selector {
                display: flex;
                flex-wrap: wrap;
                align-items: center;
                margin-bottom: 1rem;
            }

            .palette-selector qrcg-button {
                margin-top: 0.5rem;
            }

            .selected-palette-form [name] {
                margin-bottom: 1rem;
            }

            .actions {
                display: flex;
                justify-content: flex-end;
            }
        `];static get properties(){return{name:{},value:{}}}constructor(){super(),this.palettes=ColorPaletteManager.connect(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.watchInput),this.addEventListener(ColorPaletteManager.EVENT_ON_SELECTED_PALETTE_CHANGED,this.onSelectedPaletteChanged)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.watchInput),this.removeEventListener(ColorPaletteManager.EVENT_ON_SELECTED_PALETTE_CHANGED,this.onSelectedPaletteChanged)}watchInput(w){const q=w.detail.name,D=w.detail.value;if(q!==this.name){switch(w.preventDefault(),w.stopImmediatePropagation(),q){case"palette_selector":this.setSelectedPalette(D);break;default:this.palettes.updateSelectedPalette(q,D);break}this.notifyOnInput()}}setSelectedPalette(w){this.palettes.selectPalette(w);const q=this.shadowRoot.querySelector('[name="palette_selector"]');q&&(q.value=w)}updated(w){w.has("value")&&this.palettes.syncCollection(this.value)}onSelectedPaletteChanged(){this.syncSelectedPalette()}async onDeletePalette(){if(this.palettes.getSelectedPalette())try{await confirm$1({message:t$3`Are you sure you want to delete `+this.palettes.getSelectedPalette()?.getName()}),this.palettes.deleteSelectedPalette(),this.notifyOnInput()}catch{}}syncSelectedPalette(){this.shadowRoot.querySelectorAll(".selected-palette-form [name]").forEach(q=>{q.value=this.palettes.getSelectedPaletteValue(q.getAttribute("name"))})}notifyOnInput(){clearTimeout(this.notifyTimeout),this.notifyTimeout=setTimeout(()=>{this.dispatchEvent(new CustomEvent("on-input",{composed:!0,bubbles:!0,detail:{name:this.name,value:this.palettes.getPalettes()}}))},1500)}addNewPalette(){this.palettes.addPalette()}renderPaletteSelector(){return x`
            <div class="palette-selector">
                ${(()=>{if(!this.palettes.hasPalettes())return;const q=this.palettes.getPalettes().map(D=>({name:D.getName(),value:D.id}));return x`
                <qrcg-balloon-selector
                    name="palette_selector"
                    .options=${q}
                >
                </qrcg-balloon-selector>
            `})()}

                <qrcg-button transparent @click=${this.addNewPalette}>
                    ${t$3`Add new palette`}
                </qrcg-button>
            </div>
        `}renderPaletteColorInputs(){return range(0,ColorPalette.NUMBER_OF_COLORS_IN_PALETTE).map(w=>x`
                <qrcg-color-picker name="color_${w+1}"></qrcg-color-picker>
            `)}renderSelectedPaletteForm(){return x`
            <div class="selected-palette-form">
                <qrcg-input name="name" placeholder=${t$3`Green Shades`}>
                    ${t$3`Palette Name`}
                </qrcg-input>

                ${this.renderPaletteColorInputs()}
            </div>
        `}renderActions(){return x`
            <div class="actions">
                <qrcg-button
                    transparent
                    @click=${this.onDeletePalette}
                    ?disabled=${!this.palettes.getSelectedPalette()}
                >
                    ${t$3`Delete Palette`}
                </qrcg-button>
            </div>
        `}render(){return x`
            <!-- -->
            ${this.renderPaletteSelector()}
            <!--  -->
            ${this.renderSelectedPaletteForm()}
            <!--  -->
            ${this.renderActions()}
        `}}defineCustomElement("qrcg-color-palette-input",QrcgColorPalettsInput);class Appearance extends QrcgSystemSettingsFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];getAccountPageImagePosition(){return[{name:t$3`Left`,value:"left"},{name:t$3`Right`,value:"right"}]}renderDashboardStylesSection(){return x`
            <section>
                <h2 class="section-title">${t$3`Dashboard Colors`}</h2>

                <qrcg-color-picker name="theme.primary_0">
                    ${t$3`Primary Color 0`}
                </qrcg-color-picker>

                <qrcg-color-picker name="theme.primary_1">
                    ${t$3`Primary Color 1`}
                </qrcg-color-picker>

                <qrcg-color-picker name="theme.accent_0">
                    ${t$3`Accent Color 0`}
                </qrcg-color-picker>

                <qrcg-color-picker name="theme.accent_1">
                    ${t$3`Accent Color 1`}
                </qrcg-color-picker>

                <qrcg-color-picker
                    name="theme.dashboard_sidebar_background_color"
                >
                    ${t$3`Dashboard Sidebar Background Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="theme.dashboard_sidebar_text_color">
                    ${t$3`Dashboard Sidebar Text Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="theme.dashboard_sidebar_label_color">
                    ${t$3`Dashboard Sidebar Label Color`}
                </qrcg-color-picker>

                <qrcg-color-picker
                    name="theme.dashboard_sidebar_hover_background_color"
                >
                    ${t$3`Dashboard Sidebar Hover Background Color`}
                </qrcg-color-picker>

                <qrcg-color-picker
                    name="theme.dashboard_sidebar_hover_text_color"
                >
                    ${t$3`Dashboard Sidebar Hover Text Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="theme.dynamic_ribbon_color">
                    ${t$3`Dynamic Ribbon Color`}
                </qrcg-color-picker>

                <p><strong></strong> ${t$3`Used in the QR code list page.`}</p>

                <qrcg-color-picker name="theme.checkout_page_gradient_color_1">
                    ${t$3`Checkout Page Color 1`}
                </qrcg-color-picker>

                <qrcg-color-picker name="theme.checkout_page_gradient_color_2">
                    ${t$3`Checkout Page Color 2`}
                </qrcg-color-picker>

                <qrcg-color-picker name="theme.active_step_background_color">
                    ${t$3`Active Step Background Color (QR Code form page)`}
                </qrcg-color-picker>

                <qrcg-color-picker name="theme.active_step_text_color">
                    ${t$3`Active Step Text Color (QR Code form page)`}
                </qrcg-color-picker>

                <qrcg-balloon-selector
                    name="theme.input_placeholder_font_style"
                    .options=${[{value:"italic",name:t$3`Italic`},{value:"normal",name:t$3`Normal`}]}
                >
                    ${t$3`Input placeholder font style`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="theme.default_scrollbar"
                    .options=${[{value:"enabled",name:t$3`Enabled`},{value:"disabled",name:t$3`Disabled`}]}
                >
                    ${t$3`Default browser scrollbar. Default (Disabled)`}
                </qrcg-balloon-selector>
            </section>
        `}renderLoginPageStyles(){return x`
            <section>
                <h2 class="section-title">${t$3`Account Page Styles`}</h2>

                ${this.renderFileInput({label:t$3`Account Page Image`,name:"account_page.background_image",accept:".svg,.png,.jpg,.jpeg"})}

                <qrcg-balloon-selector
                    name="account_page.gradient"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                    ${t$3`Gradient Effect. Default (Enabled)`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="account_page.image_round_corner"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                    ${t$3`Image Round Corner. Default (Enabled)`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="account_page.image_position"
                    .options=${this.getAccountPageImagePosition()}
                >
                    ${t$3`Image Position. Default (Left)`}
                </qrcg-balloon-selector>
            </section>
        `}renderFrontendStyles(){return x`
            <section>
                <h2 class="section-title">${t$3`Frontend Styles`}</h2>
                <qrcg-color-picker name="theme.blue.primary_0">
                    ${t$3`Primary Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="theme.blue.primary_1">
                    ${t$3`Primary Color 1 (another Shade of the primary color)`}
                </qrcg-color-picker>

                <qrcg-color-picker name="theme.blue.accent_0">
                    ${t$3`Accent Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="theme.blue.accent_1">
                    ${t$3`Accent Color 1 (another Shade of the primary color)`}
                </qrcg-color-picker>
            </section>
        `}renderColorPalettesSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Color Picker Palettes`}</h2>
                <qrcg-color-palette-input
                    name="app.color-picker-palettes"
                ></qrcg-color-palette-input>
            </qrcg-form-section>
        `}renderOthersSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Others`}</h2>

                ${this.renderFileInput({label:t$3`Banner Image`,name:"appearance.website_banner",instructions:t$3`Banner image in the home page.`,accept:".png,.jpg,.jpeg,.svg,.gif"})}

                <qrcg-color-picker name="website-banner-background-color">
                    ${t$3`Website Banner Background Color`}
                </qrcg-color-picker>

                <qrcg-color-picker name="website-banner-color-1">
                    ${t$3`Website Banner Color 1`}
                </qrcg-color-picker>

                <qrcg-color-picker name="website-banner-color-2">
                    ${t$3`Website Banner Color 2`}
                </qrcg-color-picker>

                <qrcg-color-picker name="website-banner-color-3">
                    ${t$3`Website Banner Color 3`}
                </qrcg-color-picker>

                <qrcg-color-picker name="website-banner-color-4">
                    ${t$3`Website Banner Color 4`}
                </qrcg-color-picker>

                ${this.renderFileInput({label:t$3`Stats Image`,name:"appearance.stats_image",instructions:t$3`Override the stats image in the homepage`,accept:".png,.jpg,.jpeg,.svg,.gif"})}

                <qrcg-textarea
                    name="website-banner.background-custom-code"
                    placeholder=${t$3`Enter code`}
                >
                    ${t$3`Website Banner Background Custom Code`}
                </qrcg-textarea>
            </qrcg-form-section>
        `}renderForm(){return x`
            ${this.renderFrontendStyles()}
            ${this.renderDashboardStylesSection()}
            ${this.renderLoginPageStyles()}
            <!-- -->
            ${this.renderColorPalettesSection()}
            <!-- -->
            ${this.renderOthersSection()}
        `}}window.defineCustomElement("qrcg-system-settings-form-appearance",Appearance);class LogoFavicon extends QrcgSystemSettingsFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];renderForm(){return x`
            <section>
                <h2 class="section-title">${t$3`Logo`}</h2>

                ${this.renderFileInput({label:"Light Logo",name:"frontend.header_logo",accept:".png,.jpg,.jpeg,.svg",instructions:"Used in dashboard area (when the background is dark)"})}
                ${this.renderFileInput({label:"Dark Logo",name:"frontend.header_logo_inverse",accept:".png,.jpg,.jpeg,.svg",instructions:"Used in frontend website (when the background is light)"})}
                ${this.renderFileInput({label:t$3`Login Logo`,name:"frontend.login_logo",accept:".png,.jpg,.jpeg,.svg",instructions:"Used in the login, register, password reset pages"})}
            </section>
            <section>
                <h2 class="section-title">${t$3`Favicon`}</h2>

                <qrcg-form-comment label=${t$3`Help`}>
                    ${t$3`You can generate all required favicons by using your logo with the help of some online tools.`}

                    <a href="https://realfavicongenerator.net/" target="_blank"
                        >${t$3`Real Favicon Generator`}</a
                    >
                    ${t$3`might be a good choice.`}
                </qrcg-form-comment>

                ${this.renderFileInput({label:"Android - Chrome 192x192",name:"frontend.favicon-android-chrome-192x192.png"})}
                ${this.renderFileInput({label:"Android - Chrome 512x512",name:"frontend.favicon-android-chrome-512x512.png"})}
                ${this.renderFileInput({label:"Apple Touch Icon 180x180",name:"frontend.favicon-apple-touch-icon.png"})}
                ${this.renderFileInput({label:"Favicon 16x16",name:"frontend.favicon-favicon-16x16.png"})}
                ${this.renderFileInput({label:"Favicon 32x32",name:"frontend.favicon-favicon-32x32.png"})}
                ${this.renderFileInput({label:"Favicon .ico",name:"frontend.favicon-favicon.ico"})}
                ${this.renderFileInput({label:"Microsoft Windows Tile 150x150",name:"frontend.favicon-mstile-150x150.png"})}

                <qrcg-color-picker name="frontend.browserconfig.tile_color">
                    ${t$3`Microsoft Windows Tile Color`}
                </qrcg-color-picker>

                ${this.renderFileInput({label:"Safari Pinned Tab (SVG)",name:"frontend.favicon-safari-pinned-tab.svg"})}

                <qrcg-color-picker name="frontend.mask-icon.color">
                    ${t$3`Safari Pinned Tab Mask Icon Color`}
                </qrcg-color-picker>
            </section>
        `}}window.defineCustomElement("qrcg-system-settings-form-logo-favicon",LogoFavicon);class QrcgSystemSettingsFormQrCodeTypes extends QrcgSystemSettingsFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            .available_qrcode_types {
                max-width: initial;
            }
        `];getPinCodeOptions(){return[{name:t$3`Numbers Only`,value:"numbers_only"},{name:t$3`Any Character`,value:"any"}]}renderQrTypesInputs(){return getAvailableQrCodeTypes().map(w=>x`
                <qrcg-input
                    name="qrType.${w.id}.url"
                    placeholder="/${w.id}-qr-code-generator"
                >
                    ${t$3`Page URL of type: `} ${w.name}

                    <qrcg-config-translator
                        config-key="qrType.${w.id}.url"
                        path=""
                        slot="input-actions"
                        label="Page URL of type: ${w.name}"
                    ></qrcg-config-translator>
                </qrcg-input>
            `)}renderSortOrderInputs(){return getAvailableQrCodeTypes().map(w=>x`
                <qrcg-input
                    name="qrType.${w.id}.sort_order"
                    placeholder="0"
                    type="number"
                >
                    ${t$3`Order of: `} ${w.name}
                </qrcg-input>
            `)}renderQRCodeOptionsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`QR Code Options`}</h2>
                <qrcg-balloon-selector
                    name="event_qrcode_type.date_format"
                    .options=${[{name:"yyyy-mm-dd",value:"yyyy-mm-dd"},{name:"dd-mm-yyyy",value:"dd-mm-yyyy"},{name:"mm/dd/yyyy",value:"mm/dd/yyyy"}]}
                >
                    ${t$3`Date Format. Default (yyyy-mm-dd)`}
                    <div slot="instructions">
                        ${t$3`This is used to format the date in Event QR Code only.`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="qrcode.error_correction"
                    .options=${[{name:t$3`Low (7%)`,value:"L"},{name:t$3`Medium (15%)`,value:"M"},{name:t$3`High (30%)`,value:"H"}]}
                >
                    ${t$3`Error Correction Level`}
                </qrcg-balloon-selector>

                <qrcg-input
                    name="qrcode.prevented_slugs"
                    placeholder="${t$3`Add keywords here`}"
                >
                    ${t$3`Prevented Slugs`}

                    <div slot="instructions">
                        ${t$3`Comma separated keywords to prevent in the QR code slugs.`}
                    </div>
                </qrcg-input>

                <qrcg-balloon-selector
                    name="qrcode.pincode_type"
                    .options=${this.getPinCodeOptions()}
                >
                    ${t$3`PIN Code Type`}
                    <div slot="instructions">
                        ${t$3`Default is Allow Numbers Only`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-input
                    type="number"
                    name="qrcode.pincode_length"
                    placeholder=${t$3`PIN Code Lenght`}
                    min="3"
                    step="1"
                    max="10"
                >
                    ${t$3`PIN Code Length`}
                    <div slot="instructions">
                        ${t$3`Default is 5. Any length between (3-10) would be accepted.`}
                    </div>
                </qrcg-input>

                <qrcg-balloon-selector
                    name="qrcode.show_restaurant_menu_logo"
                    .options=${[{name:t$3`When Uploaded`,value:"when-uploaded"},{name:t$3`Always Shown`,value:"always-shown"}]}
                >
                    ${t$3`Show Restaurant Menu Logo`}
                    <div slot="instructions">${t$3`Default. Always Shown`}</div>
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="qrcode.safe_browsing_redirect"
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                >
                    ${t$3`Safe Browsing Redirect`}
                    <div slot="instructions">
                        ${t$3`If enabled, a median page will show before redirecting the browser to the final destination.`}
                    </div>
                </qrcg-balloon-selector>
            </qrcg-form-section>
        `}renderForm(){return x`
            <section>
                <h2 class="section-title">${t$3`Available Types`}</h2>
                <qrcg-balloon-selector
                    name="app.available_qrcode_types"
                    .options=${qrTypes.map(w=>({...w,value:w.id}))}
                    multiple
                    class="available_qrcode_types"
                >
                    ${t$3`QR Code Types. Default (all enabled)`}
                </qrcg-balloon-selector>
            </section>

            ${this.renderQRCodeOptionsSection()}

            <qrcg-form-section>
                <h2 class="section-title">${t$3`Error Pages`}</h2>

                <qrcg-input
                    name="qrcode.disabled_page_title"
                    placeholder=${t$3`Please enter text`}
                >
                    ${t$3`Disabled Page Title`}
                </qrcg-input>

                <qrcg-textarea
                    name="qrcode.disabled_page_content"
                    placeholder=${t$3`Please enter text`}
                >
                    ${t$3`Disabled Page Content`}
                    <div slot="instructions">
                        ${t$3`Specify the text to display when the QR code is disabled using the toggle. HTML is allowed.`}
                    </div>
                </qrcg-textarea>

                <qrcg-input
                    name="qrcode.allowed_scans_limit_reached_page_title"
                    placeholder=${t$3`Please enter text`}
                >
                    ${t$3`Allowed Scans Limit Reached Page Title`}
                </qrcg-input>

                <qrcg-textarea
                    name="qrcode.allowed_scans_limit_reached_page_content"
                    placeholder=${t$3`Please enter text`}
                >
                    ${t$3`Allowed Scans Limit Reached Page Content`}
                    <div slot="instructions">
                        ${t$3`Specify the text to display when the QR code scan limit is reached. HTML is allowed.`}
                    </div>
                </qrcg-textarea>
            </qrcg-form-section>

            <qrcg-form-section>
                <h2 class="section-title">${t$3`Dynamic Pages`}</h2>
                <qrcg-form-comment label="">
                    <p>
                        ${t$3`Dyanmic pages allow you to create pages manually and add your custom HTML code. Having ability to create pages is important for SEO.`}
                    </p>
                </qrcg-form-comment>

                ${this.renderQrTypesInputs()}
            </qrcg-form-section>

            <qrcg-form-section>
                <h2 class="section-title">${t$3`Sort Order`}</h2>
                <qrcg-form-comment>
                    <p>${t$3`Control the order of all available types.`}</p>
                </qrcg-form-comment>

                ${this.renderSortOrderInputs()}
            </qrcg-form-section>
        `}}window.defineCustomElement("qrcg-system-settings-form-qrcode-types",QrcgSystemSettingsFormQrCodeTypes);class QrcgSystemSettingsFormAuthentication extends QrcgSystemSettingsFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            qrcg-timezone-select {
                max-width: 50%;
            }
        `];renderLoginRegisterSection(){return x`
            <section>
                <h2 class="section-title">${t$3`Login & Register`}</h2>
                <qrcg-balloon-selector
                    name="app.email_verification_after_sign_up"
                    .options=${[{value:"enabled",name:t$3`Enabled`},{value:"disabled",name:t$3`Disabled`}]}
                >
                    <div slot="instructions">
                        ${t$3`If disabled, all emails considered verified immediatly after sign up.`}
                    </div>
                    ${t$3`Email Verification. Default (Enabled).`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="app.after_logout_action"
                    .options=${[{value:"redirect_to_login_page",name:t$3`Redirect to login page`},{value:"redirect_to_home_page",name:t$3`Redirect to home page`}]}
                >
                    ${t$3`After logout action`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="app.new_user_registration"
                    .options=${[{value:"enabled",name:t$3`Enabled`},{value:"disabled",name:t$3`Disabled`}]}
                >
                    ${t$3`New user registration`}
                    <div slot="instructions">${t$3`Default is Enabled`}</div>
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    name="app.mobile_number_field"
                    .options=${[{value:"mandatory",name:t$3`Mandatory`},{value:"optional",name:t$3`Optional`},{value:"disabled",name:t$3`Disabled`}]}
                >
                    ${t$3`Mobile Number Field. Default (Disabled).`}
                    <div slot="instructions">
                        ${t$3`If enabled, users can enter their mobile number while signing up. The mobile number field will also be available in user edit form in the dashboard area, also in my account page.`}
                    </div>
                </qrcg-balloon-selector>

                <qrcg-input
                    type="number"
                    step="1"
                    min="0"
                    name="authentication.keep_trial_users_for"
                    placeholder=${t$3`Enter number of days`}
                >
                    ${t$3`Trial Users Grace Period (Days)`}
                    <div slot="insturctions">
                        ${t$3`Trial users will be deleted after specified number of days.`}
                    </div>
                </qrcg-input>
            </section>
        `}renderPasswordRulesConfig(){return x`
            <section>
                <h2 class="section-title">${t$3`Password Security`}</h2>

                <qrcg-input name="security.password_min_length" placeholder="6">
                    ${t$3`Minimum password length (Default: 6)`}
                </qrcg-input>

                <qrcg-balloon-selector
                    name="security.password_characters"
                    multiple
                    .options=${[{name:t$3`Upper case`,value:"UPPER_CASE"},{name:t$3`Lower case`,value:"LOWER_CASE"},{name:t$3`Number`,value:"NUMBER"},{name:t$3`Special characters`,value:"SPECIAL_CHARACTER"}]}
                >
                    ${t$3`Password must contain all of the following (Default: none)`}
                    <div slot="instructions">
                        ${t$3`Default: none. Special character any of: `}
                        <code>~!@#$%^&*()_+{}[].<>?/|\\</code>
                    </div>
                </qrcg-balloon-selector>
            </section>
        `}renderAccountLockConfigs(){return x`
            <qrcg-input
                name="security.login_attempts_to_lock_the_account"
                type="number"
                min="0"
                step="1"
                placeholder="5"
            >
                ${t$3`Login attempts before account lock. Default (5)`}
            </qrcg-input>

            <qrcg-input
                name="security.minutes_to_reset_login_attempts"
                type="number"
                min="0"
                step="1"
                placeholder="15"
            >
                ${t$3`Minutes to reset login attempts. Default (15)`}
            </qrcg-input>
        `}renderForm(){return x`
            ${this.renderLoginRegisterSection()}
            <!-- -->
            ${this.renderAccountLockConfigs()}
            <!--  -->
            ${this.renderPasswordRulesConfig()}
        `}}window.defineCustomElement("qrcg-system-settings-form-authentication",QrcgSystemSettingsFormAuthentication);class SystemSettingsDashboardAreaForm extends QrcgSystemSettingsFormBase{static tag="qrcg-system-settings-form-dashboard-area";static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            qrcg-timezone-select {
                max-width: 50%;
            }
        `];getBannerOptions(){return[{name:t$3`No Banner`,value:"no_banner"},{name:t$3`Image`,value:"image"},{name:t$3`Video`,value:"video"}]}getQRCodeListMode(){return[{name:t$3`Detailed`,value:QrcgQRCodeListPageStore.MODE_DETAILED},{name:t$3`Minimal`,value:QrcgQRCodeListPageStore.MODE_MINIMAL}]}getSidebarAccountWidgetStyleOptions(){return[{name:t$3`Minimal`,value:"minimal"},{name:t$3`Detailed`,value:"detailed"}]}renderBannerFileInput(){const w=this.getValue("dashboard.top_banner_option");return x`
            <qrcg-file-input
                name="dashboard.top_banner_image"
                ?hidden=${w!=="image"}
                upload-endpoint="system/configs/upload?key=dashboard.top_banner_image"
            >
                ${t$3`Image`}
            </qrcg-file-input>

            <qrcg-file-input
                name="dashboard.top_banner_video"
                ?hidden=${w!=="video"}
                upload-endpoint="system/configs/upload?key=dashboard.top_banner_video"
            >
                ${t$3`Video`}
            </qrcg-file-input>
        `}renderBannerTextInputs(){const w=this.getValue("dashboard.top_banner_option"),q=isNotEmpty(w)&&w!=="no_banner";return x`
            <qrcg-textarea
                name="dashboard.top_banner_title"
                ?hidden=${!q}
                placeholder=${t$3`Enter text`}
            >
                ${t$3`Title`}
                <div slot="instructions">${t$3`HTML is allowed`}</div>
            </qrcg-textarea>

            <qrcg-textarea
                name="dashboard.top_banner_subtitle"
                ?hidden=${!q}
                placeholder=${t$3`Enter text`}
            >
                ${t$3`Subtitle`}
                <div slot="instructions">${t$3`HTML is allowed`}</div>
            </qrcg-textarea>

            <qrcg-color-picker
                name="dashboard.top_banner_text_color"
                ?hidden=${!q}
            >
                ${t$3`Text Color`}
            </qrcg-color-picker>

            <qrcg-input
                placeholder=${t$3`Enter height`}
                name="dashboard.top_banner_height"
                ?hidden=${!q}
            >
                ${t$3`Height`}
            </qrcg-input>
        `}renderTopBannerSettings(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Top Banner`}</h2>

                <qrcg-balloon-selector
                    .options=${this.getBannerOptions()}
                    name="dashboard.top_banner_option"
                >
                </qrcg-balloon-selector>

                ${this.renderBannerFileInput()}
                <!--  -->
                ${this.renderBannerTextInputs()}

                <!--  -->
            </qrcg-form-section>
        `}renderWelcomePopupSettings(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Welcome Popup`}</h2>

                <qrcg-balloon-selector
                    .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
                    name="dashboard.welcome_popup_enabled"
                >
                </qrcg-balloon-selector>

                ${this.renderFileInput({label:t$3`Video`,name:"dashboard.welcome_modal_video",accept:".mp4,.mov"})}

                <qrcg-textarea
                    name="dashboard.welcome_modal_text"
                    placeholder=${t$3`Text Content`}
                >
                    ${t$3`Text Content (HTML accepted)`}
                </qrcg-textarea>

                <qrcg-input
                    name="dashboard.welcome_modal_show_times"
                    type="number"
                >
                    ${t$3`Show Times`}
                    <div slot="instructions">
                        ${t$3`Specify how many times the pop up should show`}
                    </div>
                </qrcg-input>
            </qrcg-form-section>
        `}renderUISettingsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`UI Settings`}</h2>

                <qrcg-balloon-selector
                    name="dashboard.sidebar_account_widget_style"
                    .options=${this.getSidebarAccountWidgetStyleOptions()}
                >
                    ${t$3`Account Widget Style. Default (Minimal)`}
                </qrcg-balloon-selector>

                <qrcg-balloon-selector
                    .options=${this.getQRCodeListMode()}
                    name="dashboard.qrcode_list_mode"
                >
                    ${t$3`QR Code List Mode (Default: Detailed)`}
                </qrcg-balloon-selector>

                <qrcg-input
                    type="number"
                    name="dashboard.header_height"
                    step="0.1"
                    min="1"
                    placeholder=${t$3`Enter height`}
                >
                    ${t$3`Dashboard Header Height (Default 3.5)`}
                </qrcg-input>
            </qrcg-form-section>
        `}renderForm(){return[this.renderUISettingsSection(),this.renderWelcomePopupSettings(),this.renderTopBannerSettings()]}}SystemSettingsDashboardAreaForm.register();class QrcgSystemSettingsForm extends QrcgDashboardPage{static styles=[i$3`
            :host {
                display: block;
            }

            nav {
                font-size: 0;
                margin-bottom: 1rem;
            }
        `];pageTitle(){return t$3("System Settings")}renderContent(){return x`
            <nav class="tabs">
                <qrcg-tab tab-id="general" active> ${t$3`General`} </qrcg-tab>
                <qrcg-tab tab-id="appearance"> ${t$3`Appearance`} </qrcg-tab>
                <qrcg-tab tab-id="logo-favicon">
                    ${t$3`Logo & Favicon`}
                </qrcg-tab>
                <qrcg-tab tab-id="dashboard">${t$3`Dashboard`}</qrcg-tab>
                <qrcg-tab tab-id="authentication">
                    ${t$3`Authentication`}
                </qrcg-tab>

                <qrcg-tab tab-id="menus"> ${t$3`Menus`} </qrcg-tab>
                <qrcg-tab tab-id="qrcode-types"> ${t$3`QR Code Types`} </qrcg-tab>
                <qrcg-tab tab-id="smtp"> ${t$3`Email (SMTP)`} </qrcg-tab>
                <qrcg-tab tab-id="storage"> ${t$3`Storage`} </qrcg-tab>
                <qrcg-tab tab-id="advanced"> ${t$3`Advanced`} </qrcg-tab>
            </nav>

            <qrcg-tab-content tab-id="general" active>
                <template>
                    <qrcg-system-settings-form-general></qrcg-system-settings-form-general>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="dashboard">
                <template>
                    <qrcg-system-settings-form-dashboard-area></qrcg-system-settings-form-dashboard-area>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="authentication" active>
                <template>
                    <qrcg-system-settings-form-authentication></qrcg-system-settings-form-authentication>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="appearance">
                <template>
                    <qrcg-system-settings-form-appearance></qrcg-system-settings-form-appearance>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="logo-favicon">
                <template>
                    <qrcg-system-settings-form-logo-favicon></qrcg-system-settings-form-logo-favicon>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="menus">
                <template>
                    <qrcg-system-settings-form-menus></qrcg-system-settings-form-menus>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="qrcode-types">
                <template>
                    <qrcg-system-settings-form-qrcode-types></qrcg-system-settings-form-qrcode-types>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="smtp">
                <template>
                    <qrcg-system-settings-form-smtp></qrcg-system-settings-form-smtp>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="storage">
                <template>
                    <qrcg-system-settings-form-storage></qrcg-system-settings-form-storage>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="advanced">
                <template>
                    <qrcg-system-settings-form-advanced></qrcg-system-settings-form-advanced>
                </template>
            </qrcg-tab-content>
        `}}window.defineCustomElement("qrcg-system-settings-form",QrcgSystemSettingsForm);const style$J="[name]{margin-top:0}.form-fields{display:grid;grid-gap:1rem}.instructions{padding:.5rem;background-color:var(--gray-0);line-height:1.5;font-size:.8rem}.variable{margin-top:.5rem;-webkit-user-select:text;user-select:text;font-size:.8rem}";class QrcgSystemNotificationsFormBase extends QrcgSystemSettingsFormBase{static styleSheets=[...super.styleSheets,style$J];slug(){}fieldName(w){return`notifications.${this.slug()}.${w}`}getFieldValue(w){return this.getConfigValue(this.fieldName(w))}formTitle(){}renderFields(){}instructionsText(){}variables(){return{PLANS_PAGE_URL:x`Points to the pricing page URL, currently it's
                the home page URL with #pricing hash, click
                <a href="/#pricing" target="_blank">here</a> to preview.`}}renderInstructions(){return x`
            <div class="instructions">${this.instructionsText()}</div>
            <div class="instructions variables">
                <div>
                    ${t$3`These variables are available to be used in Email body and SMS body`}
                </div>
                ${Object.keys(this.variables()).map(w=>x`
                        <div class="variable">
                            <strong>${w}</strong>
                            ${this.variables()[w]}
                        </div>
                    `)}
            </div>
        `}renderEnabledField(){return x`
            <qrcg-balloon-selector
                name=${this.fieldName("enabled")}
                .options=${[{value:!0,name:t$3`ON`},{value:!1,name:t$3`OFF`}]}
                is-boolean
            >
                ${t$3`Enabled`}
            </qrcg-balloon-selector>
        `}renderBodyField(){return x`
            <qrcg-markdown-input
                name=${this.fieldName("email_body")}
                placeholder="Email body"
            >
                ${t$3`Email Body`}
            </qrcg-markdown-input>

            <qrcg-textarea
                name=${this.fieldName("sms_body")}
                placeholder="SMS Body"
            >
                ${t$3`SMS Body`}
                <div slot="instructions">
                    ${t$3`Only relevant if you set up your SMS portal API keys from`}

                    <a href="/dashboard/settings/sms-portals">${t$3`here`}</a>.
                    ${t$3`The mobile number field also should be enable from the settings page (General Settings Tab).`}
                </div>
            </qrcg-textarea>
        `}renderSubjectField(){return x`
            <qrcg-input name=${this.fieldName("email_subject")}>
                ${t$3`Email Subject`}
            </qrcg-input>
        `}renderForm(){return x`
            <section>
                <h2 class="section-title">${this.formTitle()}</h2>

                <div class="form-fields">
                    ${this.renderInstructions()}

                    <!-- -->

                    ${this.renderEnabledField()}

                    <!-- -->

                    ${this.renderFields()}

                    <!-- -->

                    ${this.renderSubjectField()}

                    <!-- -->

                    ${this.renderBodyField()}
                </div>
            </section>
        `}}class SubscriptionExpired extends QrcgSystemNotificationsFormBase{instructionsText(){return t$3`Sent to users when their subscription is expired.`}formTitle(){return t$3`Subscription Expired Notification`}slug(){return"subscription-expired"}}window.defineCustomElement("qrcg-system-notifications-form-subscription-expired",SubscriptionExpired);class DynamicQRCodeLimitReachedNotificationForm extends QrcgSystemNotificationsFormBase{instructionsText(){return t$3`Sent to users when they reach the dynamic QR codes defined by their plan.`}formTitle(){return t$3`Dynamic QR Code Limit Reached Notification`}slug(){return"dynamic-qrcode-limit-reached"}}window.defineCustomElement("qrcg-system-notifications-form-dynamic-qrcode-limit-reached",DynamicQRCodeLimitReachedNotificationForm);class ScanLimitReachedNotificationForm extends QrcgSystemNotificationsFormBase{instructionsText(){return t$3`Sent to users when they reach the scan limit defined by their plan.`}formTitle(){return t$3`Scan Limit Reached Notification`}slug(){return"scan-limit-reached"}}window.defineCustomElement("qrcg-system-notifications-form-scan-limit-reached",ScanLimitReachedNotificationForm);class SubscriptionExpiringSoon extends QrcgSystemNotificationsFormBase{instructionsText(){return t$3`Sent to users when their subscription is about to expire.`}formTitle(){return t$3`Subscription Expiring Soon`}slug(){return"subscription-expiring-soon"}renderFields(){return x`
            <qrcg-input name=${this.fieldName("remaining_days")}>
                ${t$3`Remaining Days. Default (3 days)`}
                <div slot="instructions">
                    ${t$3`Send before expiration by x days, you can configure number of days with this field.`}
                </div>
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-system-notifications-form-subscription-expiring-soon",SubscriptionExpiringSoon);class TrialExpired extends QrcgSystemNotificationsFormBase{instructionsText(){return t$3`Sent to users when their trial is expired.`}formTitle(){return t$3`Trial Expired Notification`}slug(){return"trial-expired"}}window.defineCustomElement("qrcg-system-notifications-form-trial-expired",TrialExpired);class InviteUser extends QrcgSystemNotificationsFormBase{droplet=new Droplet;static get styles(){return[super.styles,i$3`
                .not-supported {
                    text-align: center;
                    padding: 1rem;
                    line-height: 1.7;
                }
            `]}instructionsText(){return t$3`Sent to users when they are invited by an account owner.`}formTitle(){return t$3`Invite User Notification`}slug(){return"invite-user"}variables(){return{LOGIN_URL:t$3`Url to the login page.`,ACCOUNT_OWNER:t$3`Name of the user who sent the invite`,APP_NAME:t$3`Application name`,INVITED_EMAIL_ADDRESS:t$3`Email address of invited user`,GENERATED_PASSWORD:t$3`Generated password of the invited user`,FOLDER_NAME:t$3`Name of the folder the user is invited to participate in`}}dropletNotSupported(){return x`
            <div class="not-supported">
                ${t$3`This feature is available to ${window.atob("ZXh0ZW5kZWQ=")} license only.`}
            </div>
        `}renderEnabledField(){}render(){return this.droplet.isLarge()?super.render():this.dropletNotSupported()}}window.defineCustomElement("qrcg-system-notifications-form-invite-user",InviteUser);class BulkOperationCompleted extends QrcgSystemNotificationsFormBase{droplet=new Droplet;static get styles(){return[super.styles,i$3`
                .not-supported {
                    text-align: center;
                    padding: 1rem;
                    line-height: 1.7;
                }
            `]}instructionsText(){return t$3`Sent to users when bulk operation is completed.`}formTitle(){return t$3`Bulk Operation Completed`}slug(){return"bulk-operation-completed"}variables(){return{BULK_OPERATION_NAME:t$3`Name of the completed operation`,OPERATION_LINK:t$3`Direct link to the operation page`}}dropletNotSupported(){return x`
            <div class="not-supported">
                ${t$3`This feature is available to ${window.atob("ZXh0ZW5kZWQ=")} license only.`}
            </div>
        `}renderEnabledField(){}render(){return this.droplet.isLarge()?super.render():this.dropletNotSupported()}}window.defineCustomElement("qrcg-system-notifications-form-bulk-operation-completed",BulkOperationCompleted);class LeadFormResponse extends QrcgSystemNotificationsFormBase{droplet=new Droplet;static get styles(){return[super.styles,i$3`
                .not-supported {
                    text-align: center;
                    padding: 1rem;
                    line-height: 1.7;
                }
            `]}instructionsText(){return t$3`Sent to recepient when a new response is received.`}formTitle(){return t$3`Lead Form Response Received`}slug(){return"lead-form-response"}variables(){return{FORM_RESPONSE:t$3`Submitted user response.`}}dropletNotSupported(){return x`
            <div class="not-supported">
                ${t$3`This feature is available to ${window.atob("ZXh0ZW5kZWQ=")} license only.`}
            </div>
        `}renderEnabledField(){}render(){return this.droplet.isLarge()?super.render():this.dropletNotSupported()}}window.defineCustomElement("qrcg-system-notifications-form-lead-form-response",LeadFormResponse);class CustomFormResponse extends QrcgSystemNotificationsFormBase{droplet=new Droplet;static get styles(){return[super.styles,i$3`
                .not-supported {
                    text-align: center;
                    padding: 1rem;
                    line-height: 1.7;
                }
            `]}instructionsText(){return t$3`Sent to recepient when a new response is received.`}formTitle(){return t$3`Custom Form Response Received`}slug(){return"custom-form-response"}variables(){return{FORM_RESPONSE:t$3`Submitted user response.`}}dropletNotSupported(){return x`
            <div class="not-supported">
                ${t$3`This feature is available to ${window.atob("ZXh0ZW5kZWQ=")} license only.`}
            </div>
        `}renderEnabledField(){}render(){return this.droplet.isLarge()?super.render():this.dropletNotSupported()}}window.defineCustomElement("qrcg-system-notifications-form-custom-form-response",CustomFormResponse);class OTPNotification extends QrcgSystemNotificationsFormBase{instructionsText(){return t$3`Sent to users during the registration process.`}formTitle(){return t$3`OTP Notification`}slug(){return"otp"}variables(){return{OTP_CODE:t$3`The generated OTP code`,ACCOUNT_OWNER:t$3`Name of the user who is registering the account`,APP_NAME:t$3`Application name`,EMAIL_ADDRESS:t$3`Email address of the user`}}renderEnabledField(){}}window.defineCustomElement("qrcg-system-notifications-form-otp",OTPNotification);class QrcgSystemNotificationsForm extends QrcgDashboardPage{static styles=[i$3`
            :host {
                display: block;
            }

            .tabs {
                margin-bottom: 1rem;
            }
        `];pageTitle(){return t$3`Notifications`}renderContent(){return x`
            <nav class="tabs">
                <qrcg-tab tab-id="trial-expired">
                    ${t$3`Trial Expired`}
                </qrcg-tab>
                <qrcg-tab tab-id="subscription-expiring-soon">
                    ${t$3`Subscription Expiring Soon`}
                </qrcg-tab>
                <qrcg-tab tab-id="subscription-expired">
                    ${t$3`Subscription Expired`}
                </qrcg-tab>
                <qrcg-tab tab-id="dynamic-qrcode-limit-reached">
                    ${t$3`Dynamic QR Codes Limit Reached`}
                </qrcg-tab>
                <qrcg-tab tab-id="scan-limit-reached">
                    ${t$3`Scan Limit Reached`}
                </qrcg-tab>
                <qrcg-tab tab-id="invite-user"> ${t$3`Invite User`} </qrcg-tab>
                <qrcg-tab tab-id="bulk-operation-completed">
                    ${t$3`Bulk Operation Completed`}
                </qrcg-tab>
                <qrcg-tab tab-id="lead-form-response">
                    ${t$3`Lead Form Response`}
                </qrcg-tab>

                <qrcg-tab tab-id="custom-form-response">
                    ${t$3`Custom Form Response`}
                </qrcg-tab>

                <qrcg-tab tab-id="otp-notification">
                    ${t$3`OTP Notification`}
                </qrcg-tab>
            </nav>

            <qrcg-tab-content tab-id="trial-expired">
                <template>
                    <qrcg-system-notifications-form-trial-expired></qrcg-system-notifications-form-trial-expired>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="subscription-expiring-soon" active>
                <template>
                    <qrcg-system-notifications-form-subscription-expiring-soon></qrcg-system-notifications-form-subscription-expiring-soon>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="subscription-expired">
                <template>
                    <qrcg-system-notifications-form-subscription-expired></qrcg-system-notifications-form-subscription-expired>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="dynamic-qrcode-limit-reached">
                <template>
                    <qrcg-system-notifications-form-dynamic-qrcode-limit-reached></qrcg-system-notifications-form-dynamic-qrcode-limit-reached>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="scan-limit-reached">
                <template>
                    <qrcg-system-notifications-form-scan-limit-reached></qrcg-system-notifications-form-scan-limit-reached>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="invite-user">
                <template>
                    <qrcg-system-notifications-form-invite-user></qrcg-system-notifications-form-invite-user>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="bulk-operation-completed">
                <template>
                    <qrcg-system-notifications-form-bulk-operation-completed></qrcg-system-notifications-form-bulk-operation-completed>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="lead-form-response">
                <template>
                    <qrcg-system-notifications-form-lead-form-response></qrcg-system-notifications-form-lead-form-response>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="custom-form-response">
                <template>
                    <qrcg-system-notifications-form-custom-form-response></qrcg-system-notifications-form-custom-form-response>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="otp-notification">
                <template>
                    <qrcg-system-notifications-form-otp></qrcg-system-notifications-form-otp>
                </template>
            </qrcg-tab-content>
        `}}window.defineCustomElement("qrcg-system-notifications-form",QrcgSystemNotificationsForm);class QrcgSystemSmsFormBase extends QrcgSystemSettingsFormBase{static styles=[super.styles,i$3`
            [name] {
                margin-top: 0;
            }

            .form-fields {
                display: grid;
                grid-gap: 1rem;
            }

            .instructions {
                padding: 1rem;
                background-color: var(--gray-0);
                line-height: 1.5;
            }

            .variable {
                margin-top: 0.5rem;
            }
        `];slug(){}fieldName(w){return`sms-gateways.${this.slug()}.${w}`}getFieldValue(w){return this.getConfigValue(this.fieldName(w))}formTitle(){}renderFields(){}instructionsText(){}renderInstructions(){if(this.instructionsText())return x`
                <div class="instructions">${this.instructionsText()}</div>
            `}renderEnabledField(){return x`
            <qrcg-balloon-selector
                name=${this.fieldName("enabled")}
                .options=${[{value:!0,name:t$3`ON`},{value:!1,name:t$3`OFF`}]}
                is-boolean
            >
                ${t$3`Enabled`}
            </qrcg-balloon-selector>
        `}renderForm(){return x`
            <section>
                <h2 class="section-title">${this.formTitle()}</h2>

                <div class="form-fields">
                    ${this.renderInstructions()}

                    <!-- -->

                    ${this.renderEnabledField()}

                    <!-- -->

                    ${this.renderFields()}
                </div>
            </section>
        `}}class QrcgRbSoftSmsPortal extends QrcgSystemSmsFormBase{instructionsText(){return null}formTitle(){return t$3`RBSoft SMS Payment Gateway`}slug(){return"rbsoft-sms-portal"}renderFields(){return x`
            <qrcg-input
                name=${this.fieldName("api_key")}
                placeholder="171779******************"
            >
                ${t$3`API Key`}
            </qrcg-input>

            <qrcg-input
                name=${this.fieldName("server")}
                placeholder="https://yourdomain.com/workspace"
            >
                ${t$3`Server`}
            </qrcg-input>
        `}}window.defineCustomElement("rbsoft-sms-portal",QrcgRbSoftSmsPortal);class QrcgSystemSmsForm extends QrcgDashboardPage{static styles=[i$3`
            :host {
                display: block;
            }
        `];pageTitle(){return t$3`SMS Portals`}renderContent(){return x`
            <nav class="tabs">
                <qrcg-tab tab-id="rbsoft-sms-portal">
                    RB Soft SMS Payment Gateway
                </qrcg-tab>
            </nav>

            <qrcg-tab-content tab-id="rbsoft-sms-portal" active>
                <template>
                    <rbsoft-sms-portal></rbsoft-sms-portal>
                </template>
            </qrcg-tab-content>
        `}}window.defineCustomElement("qrcg-system-sms-form",QrcgSystemSmsForm);const style$I="header{display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-end}.input-container{position:relative}a{margin-inline-end:1rem}.logs-input{margin-top:2rem}.logs-input::part(textarea){background-color:#fff;color:#000}.refresh{margin:.1rem}.refresh::part(button){padding:0;width:2.5rem;height:2.5rem;min-width:0}.refresh qrcg-icon{width:1.5rem;height:1.5rem}qrcg-loader{position:absolute;left:50%;top:50%;transform:scale(.8) translate(-50%,-50%)}qrcg-log-level-input{margin-inline-end:auto}@media(min-width:900px){qrcg-input,qrcg-textarea,qrcg-balloon-selector{max-width:100%}}",style$H=".container{display:flex;align-items:baseline;gap:.5rem}.action{cursor:pointer}",style$G=":host{border:1px solid currentColor;font-size:.8rem;border-radius:.35rem;padding:.15rem .3rem;color:var(--level-color, black)}:host(.clickable){font-size:1rem;padding:.5rem 1rem;line-height:1;cursor:pointer}:host(.clickable:hover){color:#000}";class Badge extends BaseComponent{static tag="qrcg-log-level-badge";static styleSheets=[...super.styleSheets,style$G];connectedCallback(){super.connectedCallback(),this.observer=new MutationObserver(this.onContentChanged),this.observer.observe(this,{childList:!0,characterData:!0,subtree:!0})}disconnectedCallback(){super.disconnectedCallback(),this.observer.disconnect()}firstUpdated(){this.syncColor()}onContentChanged=()=>{this.syncColor()};getCurrentLevel(){return this.innerText.trim().toLowerCase()}getLevelColor(){switch(this.getCurrentLevel()){case"debug":return"var(--gray-2)";case"info":return"#578f92";case"warning":return"var(--warning-1)";case"error":return"var(--danger)";default:return"var(--gray-2)"}}syncColor(){this.style.setProperty("--level-color",this.getLevelColor())}render(){return x`<slot></slot>`}}Badge.register();const style$F=".log-levels-container{display:flex;gap:1rem;flex-wrap:wrap}";class LogLevelModal extends QrcgModal{static tag="qrcg-log-level-modal";static styleSheets=[...super.styleSheets,style$F];onBadgeClick(w){const q=parentMatches(w.composedPath()[0],Badge.tag);console.log(q);const D=q.getCurrentLevel();this.resolvedData=()=>D,this.onAffirmativeClick()}renderTitle(){return t$3`Change Log Level`}getLevels(){return["debug","info","warning","error"]}renderLogLevel(w){return x`
            <!--  -->
            <qrcg-log-level-badge class="clickable" @click=${this.onBadgeClick}>
                ${w}
            </qrcg-log-level-badge>
        `}renderBody(){return x`
            <div class="log-levels-container">
                ${this.getLevels().map(w=>this.renderLogLevel(w))}
            </div>
        `}renderAffirmativeAction(){}renderNegativeAction(){}}LogLevelModal.register();class LogLevelInput extends BaseComponent{static tag="qrcg-log-level-input";static styleSheets=[...super.styleSheets,style$H];static get properties(){return{...super.properties,value:{},name:{}}}getForm(){return parentMatches(this,SystemLogsForm.tag)}async openChangeModal(){const w=await LogLevelModal.open();this.value=w,this.dispatchEvent(new CustomEvent("on-input",{detail:{name:this.name,value:this.value}})),this.getForm().saveConfigs()}render(){return x`
            <div class="container">
                <div class="text">${t$3`Log Level`}</div>
                <qrcg-log-level-badge>${this.value}</qrcg-log-level-badge>
                <a class="action change" @click=${this.openChangeModal}
                    >${t$3`Change`}</a
                >
            </div>
        `}}LogLevelInput.register();class SystemLogsForm extends QrcgSystemSettingsFormBase{static tag="qrcg-system-logs-form";static styleSheets=[...super.styleSheets,style$I];static get properties(){return{...super.properties,logs:{},logSize:{},fetchingLogs:{type:Boolean}}}constructor(){super(),this.fetchingLogs=!0}successSaveMessage(){}connectedCallback(){super.connectedCallback(),this.fetchLogs()}disconnectedCallback(){super.disconnectedCallback()}async updated(w){super.updated(w),w.has("logs")&&(await this.updateComplete,this.scrollToBottom())}scrollToBottom(){this.shadowRoot.querySelector("qrcg-textarea").scrollToBottom()}async fetchLogs(){this.fetchingLogs=!0;try{const{response:w}=await get("system/logs"),q=await w.json();this.logs=window.atob(q.data),this.logSize=q.size}catch{}this.fetchingLogs=!1}async downloadLogFile(w){w.preventDefault(),w.stopImmediatePropagation();try{showToast(t$3`Generate download link, please wait ...`);const{response:q}=await post("system/log-file");let Q=(await q.json()).url;Q=url(Q),console.log(Q),window.open(Q,"_blank")}catch{}}async clearLogs(w){w.preventDefault(),w.stopImmediatePropagation();try{await confirm$1({message:t$3`Are you sure you want to clear the log file? This cannot be undone.`})}catch{return}try{await destroy("system/log-file"),showToast(t$3`Log file cleared succesfully`),this.fetchLogs()}catch{showToast(t$3`Error clearing log file`)}}pageTitle(){return t$3`Logs`}renderLoader(){if(this.fetchingLogs)return x` <qrcg-loader></qrcg-loader> `}renderHeader(){return x`
            <header>
                <qrcg-log-level-input
                    name="logging.channels.single.level"
                ></qrcg-log-level-input>

                <a href="#" @click=${this.downloadLogFile}>
                    ${t$3`Download Log File`}
                </a>
                <a href="#" @click=${this.clearLogs}> ${t$3`Clear Logs`} </a>

                <qrcg-button
                    @click=${this.fetchLogs}
                    transparent
                    class="refresh"
                    title="refresh"
                >
                    <qrcg-icon mdi-icon=${mdiRefresh}></qrcg-icon>
                </qrcg-button>
            </header>
        `}logsInputPlaceholder(){return this.fetchingLogs?t$3`Fetching logs ...`:!this.fetchingLogs&&isEmpty(this.logs)?t$3`No logs could be found`:""}renderLogsInput(){return x`
            <div class="input-container">
                ${this.renderLoader()}

                <qrcg-textarea
                    class="logs-input"
                    placeholder="${this.logsInputPlaceholder()}"
                    disabled
                    .value=${this.logs}
                    rows="15"
                >
                    ${t$3`Last 500 lines of the log file`}
                </qrcg-textarea>
            </div>
        `}renderFooter(){return x`
            <footer>
                <div class="message">
                    ${t$3`Current size of the log file is`} ${this.logSize}
                </div>
            </footer>
        `}renderSaveButton(){}renderForm(){return[this.renderHeader(),this.renderLogsInput(),this.renderFooter()]}}SystemLogsForm.register();const style$E="";class SystemLogsPage extends QrcgDashboardPage{static styleSheets=[...super.styleSheets,style$E];static tag="qrcg-system-logs-page";renderContent(){return x`
            <!--  -->
            <qrcg-system-logs-form></qrcg-system-logs-form>
        `}}SystemLogsPage.register();class QrcgSystemCachePage extends QrcgDashboardPage{static get tag(){return"qrcg-system-cache-page"}static get styles(){return[super.styles,i$3`
                .cache-entry {
                    background-color: var(--gray-0);
                    padding: 1rem;
                    display: flex;
                    flex-wrap: wrap;
                    align-items: center;
                    margin-bottom: 1rem;
                }

                .cache-text-block {
                    flex: 1;
                }

                .cache-title {
                    margin-bottom: 0.5rem;
                    font-weight: bold;
                }

                .cache-description {
                    color: var(--gray-2);
                    line-height: 1.7;
                }

                @media (max-width: 650px) {
                    .cache-text-block {
                        min-width: 100%;
                        margin-bottom: 1rem;
                    }
                }
            `]}static get properties(){return{...super.properties,loading:{type:Boolean}}}async clearCache(w){const q=w.composedPath()[0],D=parentMatches(q,"qrcg-button");this.loading=!0,D.loading=!0;const Q=D.getAttribute("cache-type");await Promise.all([showToast(t$3`Clearing cache, please wait ...`),post("system/clear-cache/"+Q)]),D.loading=!1,this.loading=!1,showToast(t$3`Cache cleared successfully`)}async rebuildCache(w){const q=w.composedPath()[0],D=parentMatches(q,"qrcg-button");D.loading=!0,this.loading=!0;const Q=D.getAttribute("cache-type");await Promise.all([showToast(t$3`Rebuilding cache, please wait ...`),post("system/rebuild-cache/"+Q)]),D.loading=!1,this.loading=!1,showToast(t$3`Cache rebuilt successfully`)}renderCacheEntry(w,q,D){return x`
            <div class="cache-entry">
                <div class="cache-text-block">
                    <div class="cache-title">${w}</div>
                    <div class="cache-description">${q}</div>
                </div>

                <qrcg-button
                    transparent
                    @click=${this.clearCache}
                    cache-type=${D}
                    ?disabled=${this.loading}
                >
                    ${t$3`Clear`}
                </qrcg-button>

                <qrcg-button
                    transparent
                    @click=${this.rebuildCache}
                    cache-type=${D}
                    ?disabled=${this.loading}
                >
                    ${t$3`Rebuild`}
                </qrcg-button>
            </div>
        `}pageTitle(){return t$3`System Cache`}renderContent(){return[this.renderCacheEntry(t$3`Views Cache`,t$3`Used to improve the performance of the front-end views.`,"view"),this.renderCacheEntry(t$3`Config Cache`,t$3`Combines all configurations in one file.`,"config")]}}defineCustomElement(QrcgSystemCachePage.tag,QrcgSystemCachePage);const style$D="",style$C="";class EventsForm extends QrcgSystemSettingsFormBase{static tag="qrcg-system-events-form";static styleSheets=[...super.styleSheets,style$C];getEventsOptions(){return[{name:t$3`Client Registration`,value:"client_registration"},{name:t$3`QR Code Scan`,value:"qrcode_scan"},{name:t$3`Transaction Received`,value:"transaction_received"}]}renderWebhookInputs(){return range(1,6).map(w=>x`
                <qrcg-input
                    name="events.webhook_url_${w}"
                    placeholder=${t$3`Enter URL`}
                >
                    ${t$3`Webhook URL`} ${w}
                </qrcg-input>
            `)}renderWebhookUrlsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Webhook URLs`}</h2>

                <div class="instructions">
                    ${t$3`We will notify each of the following webhook URLs when every selected event occures.`}
                </div>

                ${this.renderWebhookInputs()}
            </qrcg-form-section>
        `}renderEventsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Events`}</h2>

                <qrcg-balloon-selector
                    multiple
                    name="events.selected_events"
                    .options=${this.getEventsOptions()}
                >
                </qrcg-balloon-selector>
            </qrcg-form-section>
        `}renderForm(){return[this.renderWebhookUrlsSection(),this.renderEventsSection()]}}EventsForm.register();class SystemEventsPage extends QrcgDashboardPage{static get tag(){return"qrcg-system-events-page"}static styleSheets=[...super.styleSheets,style$D];static get properties(){return{...super.properties,loading:{type:Boolean}}}pageTitle(){return t$3`Events`}renderContent(){return x` <qrcg-system-events-form></qrcg-system-events-form> `}}SystemEventsPage.register();class QrcgSystemModuleRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w,50));document.body.appendChild(new QrcgSystemModuleRouter)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/system/status"
                permission="system.status"
            >
                <template>
                    <qrcg-system-status></qrcg-system-status>
                </template>
            </qrcg-protected-route>

            <qrcg-protected-route
                route="/dashboard/system/settings"
                permission="system.settings"
            >
                <template>
                    <qrcg-system-settings-form></qrcg-system-settings-form>
                </template>
            </qrcg-protected-route>

            <qrcg-protected-route
                route="/dashboard/system/notifications"
                permission="system.notifications"
            >
                <template>
                    <qrcg-system-notifications-form></qrcg-system-notifications-form>
                </template>
            </qrcg-protected-route>

            <qrcg-protected-route
                route="/dashboard/system/sms"
                permission="system.sms-portals"
            >
                <template>
                    <qrcg-system-sms-form></qrcg-system-sms-form>
                </template>
            </qrcg-protected-route>

            <qrcg-protected-route
                route="/dashboard/system/logs"
                permission="system.logs"
            >
                <template>
                    <qrcg-system-logs-page></qrcg-system-logs-page>
                </template>
            </qrcg-protected-route>

            <qrcg-protected-route
                route="/dashboard/system/cache"
                permission="system.cache"
            >
                <template>
                    <qrcg-system-cache-page></qrcg-system-cache-page>
                </template>
            </qrcg-protected-route>

            <qrcg-protected-route
                route="/dashboard/system/events"
                permission="system.events"
            >
                <template>
                    <qrcg-system-events-page></qrcg-system-events-page>
                </template>
            </qrcg-protected-route>

            <qrcg-redirect
                from="/dashboard/system$"
                to="/dashboard/system/status"
            ></qrcg-redirect>
        `}}window.defineCustomElement("qrcg-system-module-router",QrcgSystemModuleRouter);QrcgSystemModuleRouter.boot();class QrcgTranslationForm extends QrcgDashboardForm{static defaultDisableableInputsSelector="[name]:not(qrcg-file-input)";constructor(){super({apiBaseRoute:"translations",disableableInputsSelector:QrcgTranslationForm.defaultDisableableInputsSelector})}static get styles(){return[super.styles,i$3`
                a {
                    color: var(--primary-0);
                    text-decoration: none;
                }
            `]}connectedCallback(){super.connectedCallback(),this.fetchDefaultTranslation()}static get properties(){return{...super.properties,defaultTranslationFile:{}}}updated(w){super.updated(w),w.has("data")&&(this.data.is_default?this.api.disableableInputsSelector=".no-elements":this.api.disableableInputsSelector=this.constructor.defaultDisableableInputsSelector)}async fetchDefaultTranslation(){const{response:w}=await get(this.api.baseRoute+"?paginate=false"),D=(await w.json()).find(Q=>Q.is_default);this.defaultTranslationFile=new FileModel({remote:D.file})}renderFormFields(){return x`
            ${this.defaultTranslationFile?x`
                      <qrcg-form-comment label=${t$3`Help`}>
                          ${t$3`Download the`}
                          <a
                              href="${this.defaultTranslationFile.directLink()??""}"
                              download="${this.defaultTranslationFile.getName()}"
                              >${t$3`default translation file`}</a
                          >, ${t$3`modify it as needed and then upload it below.`}
                      </qrcg-form-comment>

                      <qrcg-form-comment label=${t$3`Hint`}>
                          ${t$3`Do not forget to translate the website content found in`}
                          <a href="/dashboard/blog-posts">${t$3`blog`}</a>
                          ${t$3`and`}
                          <a href="/dashboard/content-blocks"
                              >${t$3`content blocks`}</a
                          >.
                      </qrcg-form-comment>
                  `:""}

            <qrcg-input name="name" ?disabled=${this.data?.is_default}
                >${t$3`Name`}</qrcg-input
            >

            <qrcg-input name="display_name" ?disabled=${this.data?.is_default}>
                <div slot="instructions">
                    ${t$3`Used in the language picker component. Can be in any language.`}
                </div>
                ${t$3`Display Name`}
            </qrcg-input>

            <qrcg-input name="locale" ?disabled=${this.data?.is_default}>
                ${t$3`Locale`}
            </qrcg-input>

            <qrcg-balloon-selector
                name="direction"
                .options=${[{value:"rtl",name:t$3`Right to Left`},{value:"ltr",name:t$3`Left to Right`}]}
            >
                ${t$3`Direction`}
            </qrcg-balloon-selector>

            <qrcg-file-input
                name="flag_file_id"
                upload-endpoint="files"
                attachable_type="Translation"
            >
                ${t$3`Flag Image`}
            </qrcg-file-input>

            <qrcg-file-input
                ?readonly=${this.data?.is_default}
                ?disabled=${!this.id}
                name="translation_file_id"
                upload-endpoint="translations/${this.id}/upload"
                accept=".json"
                disabled-instructions=${t$3`Save the translation record before uploading a translation file`}
            >
                ${t$3`Translation file`}
            </qrcg-file-input>
        `}}window.defineCustomElement("qrcg-translation-form",QrcgTranslationForm);class QrcgTranslationFormPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-translation-form slot="content"></qrcg-translation-form>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-translation-form-page",QrcgTranslationFormPage);class QrcgTranslationList extends QRCGDashboardList{constructor(){super({baseRoute:"translations",singularRecordName:"Translation",frontendFormUrl:null})}static get properties(){return{...super.properties,canAutoTranslate:{}}}static listColumns=[{key:"id",label:"ID",width:"2rem"},{key:"name",label:"Name"},{key:"locale",label:"Locale"},{key:"is_active",label:"Active"},{key:"is_main",label:"Main Language",booleanBadge:{onText:t$3`YES`,offText:t$3`NO`}},{key:"completeness",label:"Completeness"},{key:"actions",label:"Actions",width:"20rem"}];connectedCallback(){super.connectedCallback(),this.fetchCanAutoTranslate()}cellContentRenderer=(w,q)=>{const D=w[q.key];return q.key==="is_active"?this.renderBooleanBadgeCell(w[q.key],t$3`YES`,t$3`NO`):q.key==="is_main"?this.renderBooleanBadgeCell(w[q.key],t$3`YES`,t$3`NO`):q.key==="completeness"?typeof D=="object"?D:`${D}%`:super.cellContentRenderer(w,q)};onSetMain=async w=>{w.preventDefault(),w.stopPropagation();const q=w.composedPath()[0]["row-id"],D=this.rows.find(Q=>Q.id==q);try{await confirm$1({title:t$3("Confirmation"),message:x`Are you sure you want to set
                    <strong>${D.name}</strong> as main website
                    language?`});const{response:Q}=await post(`${this.api.baseRoute}/${q}/set-main`),O=await Q.json();O.error?showToast(O.error):this.fetchData()}catch{}};onActivate=async w=>{w.preventDefault(),w.stopPropagation();const q=w.composedPath()[0]["row-id"],D=this.rows.find(Q=>Q.id==q);try{await confirm$1({title:t$3("Confirmation"),message:t$3`Are you sure you want to ${parseBooleanValue(D.is_active)?"deactivate":"activate"} this translation? Changes will be reflected immediatly after processing this request.`});const{response:Q}=await post(`${this.api.baseRoute}/${q}/toggle-activate`),O=await Q.json();O.error?showToast(O.error):this.fetchData()}catch{}};onAutoTranslate=async w=>{if(w.preventDefault(),w.stopPropagation(),!this.canAutoTranslate){try{await confirm$1({title:t$3`Third Party Integration Required`,message:t$3`You need to add Google Api Key to enable auto translation feature.`,affirmativeText:t$3`Go To System Settings`}),push("/dashboard/system/settings?tab-id=advanced")}catch{}return}const q=w.composedPath()[0]["row-id"];try{await confirm$1({title:t$3("Confirmation"),message:t$3`Are you sure you want to use auto translatoin? Only empty values will be auto translated.`});const{response:D}=await post(`${this.api.baseRoute}/${q}/auto-translate`),Q=await D.json();Q.error?showToast(Q.error):showToast("Auto translation started, check the completeness after a few minutes.")}catch{}};async fetchCanAutoTranslate(){const{response:w}=await get("translations/can-auto-translate"),q=await w.json();this.canAutoTranslate=q.enabled}renderActivateLink(w){return x`<a @click=${this.onActivate} .row-id=${w.id}
            >${parseBooleanValue(w.is_active)?t$3`Disable`:t$3`Activate`}</a
        >`}renderAutoTranslateLink(w){return x`<a @click=${this.onAutoTranslate} .row-id=${w.id}
            >${t$3`Auto Translate`}</a
        >`}renderSetMainLanguageLink(w){return x`
            <a @click=${this.onSetMain} .row-id=${w.id}>
                ${t$3`Set Main Language`}
            </a>
        `}rowActions(w){return x`
            <div>
                ${this.renderEditRowLink(w)}
                <!--  -->
                ${this.renderDeleteRowLink(w)}
                <!--  -->
                ${this.renderActivateLink(w)}
                <!--  -->
                ${this.renderAutoTranslateLink(w)}
                <!--  -->
                ${this.renderSetMainLanguageLink(w)}
            </div>
        `}}window.defineCustomElement("qrcg-translation-list",QrcgTranslationList);class QrcgTranslationListPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-button
                    slot="header-actions"
                    href="/dashboard/translations/new"
                    >${t$3`Create`}</qrcg-button
                >
                <qrcg-translation-list slot="content"></qrcg-translation-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-translation-list-page",QrcgTranslationListPage);class QrcgTranslationRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w,50));document.body.appendChild(new QrcgTranslationRouter)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/translations$"
                permission="translation.list-all"
            >
                <template>
                    <qrcg-translation-list-page></qrcg-translation-list-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route
                route="/dashboard/translations/new|/dashboard/translations/edit/(?<id>\\d+)"
                permission="translation.store"
            >
                <template>
                    <qrcg-translation-form-page></qrcg-translation-form-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-translation-router",QrcgTranslationRouter);QrcgTranslationRouter.boot();document.addEventListener("api:response-ready",async function(F){const w=F.detail.response;try{const q=await w.clone().json(),D=get$1(q,"error_message");isEmpty(D)||showToast(D)}catch{}});class QrcgCurrencyForm extends QrcgDashboardForm{constructor(){super({apiBaseRoute:"currencies",singularName:"Currency"})}renderFormFields(){return x`
            <qrcg-input name="name" placeholder=${t$3`Currency name`}>
                ${t$3`Name`}
            </qrcg-input>

            <qrcg-input name="currency_code" placeholder=${t$3`Currency code`}>
                ${t$3`Currency Code`}
            </qrcg-input>

            <qrcg-input name="symbol" placeholder=${t$3`Symbol`}>
                ${t$3`Symbol`}
            </qrcg-input>

            <qrcg-input name="thousands_separator" placeholder=",">
                ${t$3`Thousands Sepeartor`}
            </qrcg-input>

            <qrcg-input name="decimal_separator" placeholder=".">
                ${t$3`Decimal Separator`}
            </qrcg-input>

            <qrcg-balloon-selector
                name="decimal_separator_enabled"
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
            >
                ${t$3`Decimal Separator. Default (Enabled)`}
                <div slot="instructions">
                    ${t$3`Always add decimal separator even if the number after the decimal point is zero, e.g. 10.00`}
                </div>
            </qrcg-balloon-selector>

            <qrcg-balloon-selector
                name="symbol_position"
                .options=${[{name:t$3`Before Number`,value:"before"},{name:t$3`After Number`,value:"after"}]}
            >
                ${t$3`Symbol Position`}
            </qrcg-balloon-selector>
        `}}window.defineCustomElement("qrcg-currency-form",QrcgCurrencyForm);class QrcgCurrencyFormPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-currency-form slot="content"></qrcg-currency-form>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-currency-form-page",QrcgCurrencyFormPage);class QrcgOnOffBadge extends i$1{static styles=[i$3`
            :host {
                display: inline-block;
                user-select: none;
                -webkit-user-select: none;
            }

            .enabled-badge {
                display: inline-block;
                border-radius: 0.25rem;
                padding: 0.25rem 0.65rem;
                text-transform: uppercase;
                font-size: 0.7rem;
            }
            .enabled-badge.yes {
                background-color: var(--success-0);
                color: white;
            }
            .enabled-badge.no {
                background-color: var(--gray-2);
                color: white;
            }
        `];static get properties(){return{onText:{attribute:"on-text"},offText:{attribute:"off-text"},enabled:{}}}parseEnabled(){return parseBooleanValue(this.enabled)}render(){let w=this.parseEnabled();return x` <div class="enabled-badge ${w?"yes":"no"}">
            ${w?this.onText:this.offText}
        </div>`}}window.defineCustomElement("qrcg-on-off-badge",QrcgOnOffBadge);class QrcgCurrencyList extends QRCGDashboardList{constructor(){super({baseRoute:"currencies",singularRecordName:"Currency",frontendFormUrl:null})}static listColumns=[{key:"id",label:"ID",width:"2rem"},{key:"name",label:"Name"},{key:"currency_code",label:"Currency code"},{key:"symbol",label:"Symbol"},{key:"is_enabled",label:"Enabled"},{key:"actions",label:"Actions",width:"7rem"}];cellContentRenderer(w,q){switch(q.key){case"is_enabled":return typeof w.is_enabled=="object"?w.is_enabled:x`
                    <qrcg-on-off-badge
                        .enabled=${w.is_enabled}
                        on-text=${t$3`Yes`}
                        off-text=${t$3`No`}
                    ></qrcg-on-off-badge>
                `;default:return super.cellContentRenderer(w,q)}}onEnableClick=async w=>{w.preventDefault(),w.stopImmediatePropagation();const q=w.composedPath()[0].row;await confirm$1({message:t$3`Are you sure you want to enable `+q.name+"?"}),await this.api.post(`currencies/${q.id}/enable`),this.fetchData(),showToast(t$3`Currency enabled successfully.`)};renderEnableLink(w){return x`
            <a href="#" .row=${w} @click=${this.onEnableClick}>
                ${t$3`Enable`}
            </a>
        `}rowActions(w){return x`
            <div>
                ${this.renderEnableLink(w)}
                <!-- -->
                ${this.renderEditRowLink(w)}
                <!--  -->
                ${this.renderDeleteRowLink(w)}
            </div>
        `}}window.defineCustomElement("qrcg-currency-list",QrcgCurrencyList);class QrcgCurrencyListPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-button
                    slot="header-actions"
                    href="/dashboard/currencies/new"
                    >${t$3`Create`}</qrcg-button
                >
                <qrcg-currency-list slot="content"></qrcg-currency-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-currency-list-page",QrcgCurrencyListPage);class QrcgCurrencyRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w,50));document.body.appendChild(new QrcgCurrencyRouter)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/currencies$"
                permission="currency.list-any"
            >
                <template>
                    <qrcg-currency-list-page></qrcg-currency-list-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route
                route="/dashboard/currencies/new|/dashboard/currencies/edit/(?<id>\\d+)"
                permission="currency.update-any"
            >
                <template>
                    <qrcg-currency-form-page></qrcg-currency-form-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-currency-router",QrcgCurrencyRouter);QrcgCurrencyRouter.boot();class QrcgCustomCodeForm extends QrcgDashboardForm{constructor(){super({apiBaseRoute:"custom-codes"}),this.positions=[]}static get properties(){return{...super.properties,positions:{type:Array}}}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onCustomCodeFormInput),this.fetchPositions()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onCustomCodeFormInput)}async fetchPositions(){const{response:w}=await get("custom-codes/positions");this.positions=await w.json()}renderFormFields(){return x`
            <qrcg-input name="name" placeholder="${t$3`e.g. Facebook Pixel`}">
                ${t$3`Name`}
            </qrcg-input>
            <qrcg-select name="language">
                <span slot="label"> ${t$3`Language`} </span>
                <option value="javascript">JavaScript</option>
                <option value="html">HTML</option>
                <option value="css">CSS</option>
            </qrcg-select>
            <qrcg-searchable-select name="position">
                <span slot="label"> ${t$3`Position`} </span>
                ${this.positions.map(w=>x` <option value="${w}">${t$3(w)}</option> `)}
            </qrcg-searchable-select>

            <qrcg-input
                name="sort_order"
                type="number"
                step="1"
                placeholder="0"
            >
                <span>${t$3`Sort order`}</span>
                <span slot="instructions">
                    ${t$3`Control the sort order of the code block. `}
                </span>
            </qrcg-input>

            <qrcg-code-input name="code" language=${this.data.language}>
                <span> ${t$3`Code`} </span>
            </qrcg-code-input>
        `}}window.defineCustomElement("qrcg-custom-code-form",QrcgCustomCodeForm);class QrcgCustomCodeFormPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-custom-code-form slot="content"></qrcg-custom-code-form>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-custom-code-form-page",QrcgCustomCodeFormPage);class QrcgCustomCodeList extends QRCGDashboardList{constructor(){super({baseRoute:"custom-codes",singularRecordName:"Custom Code",frontendFormUrl:null})}static listColumns=[{key:"id",label:"ID",width:"2rem"},{key:"name",label:"Name"},{key:"language",label:"Language"},{key:"position",label:"Position"},{key:"sort_order",label:"Sort order"},{key:"actions",label:"Actions",width:"7rem"}]}window.defineCustomElement("qrcg-custom-code-list",QrcgCustomCodeList);class QrcgCustomCodeListPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-button
                    slot="header-actions"
                    href="/dashboard/custom-codes/new"
                    >${t$3`Create`}</qrcg-button
                >
                <qrcg-custom-code-list slot="content"></qrcg-custom-code-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-custom-code-list-page",QrcgCustomCodeListPage);class QrcgCustomCodeRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w,50));document.body.appendChild(new QrcgCustomCodeRouter)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/custom-codes$"
                permission="custom-code.list-all"
            >
                <template>
                    <qrcg-custom-code-list-page></qrcg-custom-code-list-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route
                route="/dashboard/custom-codes/new|/dashboard/custom-codes/edit/(?<id>\\d+)"
                permission="custom-code.update-any"
            >
                <template>
                    <qrcg-custom-code-form-page></qrcg-custom-code-form-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-custom-code-router",QrcgCustomCodeRouter);QrcgCustomCodeRouter.boot();class QrcgPageForm extends QrcgDashboardForm{constructor(){super({apiBaseRoute:"pages"})}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput)}onInput=w=>{w.detail.name==="title"&&(this.data.slug=slugify(w.detail.value))};renderSlugComment(){const w=this.shadowRoot.querySelector('[name="slug"]');if(!w)return;w.setHasInstructions();const q=this.data.slug;return q?x`
            <div slot="instructions" class="slug-instructions">
                ${t$3`Page URL:`}
                <a href="${Config.get("app.url")}/${q}" target="_blank">
                    /${q}
                </a>
                ${"Please click on save to be able to view the page."}
            </div>
        `:x`<div slot="instructions"></div>`}renderFormFields(){return x`
            <qrcg-input name="title" placeholder=${t$3`Page title`}>
                ${t$3`Title`}
            </qrcg-input>
            <qrcg-input name="slug" placeholder=${t$3`Page slug (url)`}>
                ${t$3`Slug`} ${this.renderSlugComment()}
            </qrcg-input>
            <qrcg-code-input name="html_content" language="html">
                <span slot="label"> ${t$3`HTML Content`} </span>
            </qrcg-code-input>
            <qrcg-textarea
                name="meta_description"
                maxlength="160"
                placeholder=${t$3`Your meta description here.`}
            >
                ${t$3`Meta description`}
            </qrcg-textarea>

            <qrcg-textarea
                name="head_tag_code"
                placeholder=${t$3`Enter code here.`}
            >
                ${t$3`Head Tag Code`}
                <div slot="instructions">
                    ${t$3`HTML code to be added in between the head tag`}
                </div>
            </qrcg-textarea>
            <qrcg-checkbox name="published">${t$3`Published?`}</qrcg-checkbox>
        `}}window.defineCustomElement("qrcg-page-form",QrcgPageForm);class QrcgPageFormPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-page-form slot="content"></qrcg-page-form>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-page-form-page",QrcgPageFormPage);class QrcgPageList extends QRCGDashboardList{constructor(){super({baseRoute:"pages",singularRecordName:"Page",frontendFormUrl:null})}static listColumns=[{key:"id",label:"ID",width:"2rem"},{key:"title",label:"Title"},{key:"slug",label:"Slug"},{key:"published",label:"Published"},{key:"actions",label:"Actions",width:"7rem"}];cellContentRenderer=(w,q)=>{switch(q.key){case"published":return this.renderBooleanBadgeCell(w[q.key],t$3`YES`,t$3`NO`);default:return super.cellContentRenderer(w,q)}}}window.defineCustomElement("qrcg-page-list",QrcgPageList);class QrcgPageListPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-button slot="header-actions" href="/dashboard/pages/new"
                    >${t$3`Create`}</qrcg-button
                >
                <qrcg-page-list slot="content"></qrcg-page-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-page-list-page",QrcgPageListPage);class QrcgPageRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w));document.body.appendChild(new QrcgPageRouter)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/pages$"
                permission="page.list-all"
            >
                <template>
                    <qrcg-page-list-page></qrcg-page-list-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route
                route="/dashboard/pages/new|/dashboard/pages/edit/(?<id>\\d+)"
                permission="page.update-any"
            >
                <template>
                    <qrcg-page-form-page></qrcg-page-form-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-page-router",QrcgPageRouter);QrcgPageRouter.boot();class QrcgDomainChangeAvailabilityModal extends QrcgModal{formController=new QRCGFormController(this);static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            .domain {
                margin: 0 0 1rem 0;
            }
        `];static get properties(){return{data:{}}}static async open({domain:w}){const q=new QrcgDomainChangeAvailabilityModal;return q.data=w,document.body.appendChild(q),await new Promise(D=>setTimeout(D,0)),q.open()}constructor(){super(),this.data={},this.api=QRCGApiConsumer.instance({host:this,baseRoute:"domains",disableableInputsSelector:"[name], [modal-negative]"})}renderTitle(){return t$3`Change availability`}submitForm=async()=>{await this.api.put(`domains/${this.data.id}/update-availability`,{availability:this.data.availability}),this.onAffirmativeClick(),setTimeout(()=>{showToast(t$3`Availability changed successfully`)},500)};renderAffirmativeAction(){return x`
            <qrcg-button type="submit">
                ${this.getAffirmativeText()}
            </qrcg-button>
        `}renderBody(){return x`
            <p class="domain">
                ${t$3`Domain:`} ${getDomainDisplayName(this.data)}
            </p>

            <qrcg-balloon-selector
                name="availability"
                .options=${[{name:t$3("Public (all users)"),value:"public"},{name:t$3`Private (domain owner)`,value:"private"}]}
            >
                ${t$3`Select availability`}
            </qrcg-balloon-selector>
        `}render(){return x` <qrcg-form> ${super.render()} </qrcg-form>`}}window.defineCustomElement("qrcg-domain-change-availability-modal",QrcgDomainChangeAvailabilityModal);class QrcgDomainChangeStatusModal extends QrcgModal{formController=new QRCGFormController(this);static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            .domain {
                margin: 0 0 1rem 0;
            }

            [name='status'] {
                padding-bottom: 0.5rem;
            }
        `];static get properties(){return{data:{}}}static async open({domain:w}){const q=new QrcgDomainChangeStatusModal;return q.data=w,document.body.appendChild(q),await new Promise(D=>setTimeout(D,0)),q.open()}constructor(){super(),this.data={},this.api=QRCGApiConsumer.instance({host:this,baseRoute:"domains",disableableInputsSelector:"[name], [modal-negative]"})}renderTitle(){return t$3`Change status`}submitForm=async()=>{await this.api.put(`domains/${this.data.id}/update-status`,{status:this.data.status}),this.onAffirmativeClick(),setTimeout(()=>{showToast(t$3`Status changed successfully`)},500)};renderAffirmativeAction(){return x`
            <qrcg-button type="submit">
                ${this.getAffirmativeText()}
            </qrcg-button>
        `}renderBody(){return x`
            <p class="domain">
                ${t$3`Domain:`} ${getDomainDisplayName(this.data)}
            </p>
            <qrcg-balloon-selector
                name="status"
                .options=${getDomainStatuses().map(w=>({name:w,value:w}))}
            >
                ${t$3`Select new status`}
            </qrcg-balloon-selector>
        `}render(){return x` <qrcg-form> ${super.render()} </qrcg-form>`}}window.defineCustomElement("qrcg-domain-change-status-modal",QrcgDomainChangeStatusModal);class QrcgDomainConnectivityStatus extends i$1{static styles=[i$3`
            :host {
                display: block;
                position: relative;
                box-sizing: border-box;
            }

            .message {
                display: flex;
                margin: 0 0 1rem 0;
                background-color: var(--gray-0);
                padding: 1rem;
                flex-direction: column;
                animation: message-enter-animation 1s ease both;
            }

            @keyframes message-enter-animation {
                0% {
                    opacity: 0;
                }

                100% {
                    opacity: 100%;
                }
            }

            @media (min-width: 50rem) {
                .message {
                    flex-direction: row;
                }
            }

            qrcg-icon.message-icon {
                display: block;
                width: 2rem;
                height: 2rem;
                margin-right: 1rem;
                margin-bottom: 1rem;
            }

            .success qrcg-icon {
                color: var(--success-0);
            }

            .error qrcg-icon {
                color: var(--danger);
            }

            .title {
                font-weight: bold;
                margin-bottom: 1rem;
            }

            .instructions {
                color: var(--gray-2);
            }

            .instructions-row {
                display: flex;
                flex-direction: column;
                margin: 1rem 0 0 0;
            }

            @media (min-width: 50rem) {
                .instructions-row {
                    flex-direction: row;
                    align-items: center;
                }

                .instructions-item {
                    margin-bottom: 0;
                }
            }

            .instructions-item {
                margin-right: 1rem;
                color: black;
                background-color: white;
                padding: 0 0.5rem;
                border-radius: 0.5rem;
                display: flex;
                margin-bottom: 1rem;
                flex-wrap: wrap;
                align-items: baseline;
            }

            .instructions-item-label {
                color: var(--gray-2);
                margin: 0.5rem 1rem 0.5rem 0;
            }

            .instructions-item-value {
                margin-bottom: 0.5rem;
            }

            .loader-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                padding-bottom: 1rem;
            }

            .loader-container-text {
                margin-top: 1rem;
            }

            .refresh {
                position: absolute;
                top: 1rem;
                right: 1rem;
            }

            .refresh::part(button) {
                padding: 0.5rem;
                min-width: initial;
            }

            .refresh-icon {
                width: 1.5rem;
                height: 1.5rem;
            }
        `];static get properties(){return{domainId:{attribute:"domain-id"},applicationIsAccessible:{type:Boolean},shouldRenderApplicationAccessError:{type:Boolean},dnsIsConfigured:{type:Boolean},dnsCurrentValue:{},loading:{type:Boolean},domain:{}}}constructor(){super(),this.shouldRenderApplicationAccessError=!0}connectedCallback(){super.connectedCallback(),this.refresh()}async refresh(){this.loading||this.domainId&&(this.loading=!0,await Promise.all([this.fetchConnectivityStatus(),this.fetchDomain()]),this.loading=!1)}updated(w){w.has("domainId")&&this.refresh()}async fetchDomain(){const{response:w}=await get("domains/"+this.domainId),q=await w.json();this.domain=q}async fetchConnectivityStatus(){const{response:w}=await get(`domains/${this.domainId}/check-connectivity`),q=await w.json();this.applicationIsAccessible=q.applicationIsAccessible,this.dnsIsConfigured=q.dnsIsConfigured,this.dnsCurrentValue=q.dnsCurrentValue,this.fireConnectivityStatusEvent()}fireConnectivityStatusEvent(){const w=this.dnsIsConfigured&&this.applicationIsAccessible,q=this.domain;let D="qrcg-domain-connectivity-status:";w?D+="success":D+="error",this.dispatchEvent(new CustomEvent(D,{bubbles:!0,composed:!0,detail:{domain:q,dnsIsConfigured:this.dnsIsConfigured,applicationIsAccessible:this.applicationIsAccessible,dnsCurrentValue:this.dnsCurrentValue}}))}getApplicationHost(){const w=document.createElement("a");return w.href=url("/"),w.hostname}renderDnsConnectivityError(){if(this.domain&&!(this.dnsIsConfigured||this.applicationIsAccessible))return x`
            <div class="message error">
                <qrcg-icon
                    class="message-icon"
                    mdi-icon=${mdiAlertOctagon}
                ></qrcg-icon>
                <div class="message-body">
                    <div class="title">${t$3`DNS record not found`}</div>
                    <div class="instructions">
                        ${t$3`Add the following CNAME Record in your domain registrar control panel.`}

                        <div class="instructions-row">
                            <div class="instructions-item">
                                <div class="instructions-item-label">
                                    ${t$3`Type`}
                                </div>
                                <div class="instructions-item-value">CNAME</div>
                            </div>

                            <div class="instructions-item">
                                <div class="instructions-item-label">
                                    ${t$3`Value`}
                                </div>
                                <div class="instructions-item-value">
                                    <div>${this.getApplicationHost()}</div>
                                </div>
                            </div>

                            <div class="instructions-item">
                                <div class="instructions-item-label">
                                    ${t$3`Current Value`}
                                </div>
                                <div class="instructions-item-value">
                                    ${this.dnsCurrentValue??t$3`No CNAME Record found.`}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `}renderApplicationAccessError(){if(this.domain&&!this.applicationIsAccessible&&this.shouldRenderApplicationAccessError)return x`
            <div class="message error">
                <qrcg-icon
                    class="message-icon"
                    mdi-icon=${mdiAlertOctagon}
                ></qrcg-icon>
                <div class="message-body">
                    <div class="title">${t$3`Application is not accessible`}</div>
                    <div class="instructions">
                        ${t$3`Add the following virtual host in your server configuration. If you are using cPanel, you can do that by creating a new addon domain.`}

                        <div class="instructions-row">
                            <div class="instructions-item">
                                <div class="instructions-item-label">
                                    ${t$3`Value`}
                                </div>
                                <div class="instructions-item-value">
                                    ${this.domain.host}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `}renderSuccessMessage(){if(this.domain&&this.applicationIsAccessible)return x`
            <div class="message success">
                <qrcg-icon
                    class="message-icon"
                    mdi-icon=${mdiCheckboxMarked}
                ></qrcg-icon>
                <div class="message-body">
                    <div class="title">${t$3`Domain is connected.`}</div>
                    <div class="instructions">
                        ${t$3`CNAME Record is configured properly and application is accessible.`}
                    </div>
                </div>
            </div>
        `}renderLoader(){return x`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
                <div class="loader-container-text">
                    ${t$3`Checking domain connectivity`}
                </div>
            </div>
        `}render(){if(this.domainId)return this.loading?this.renderLoader():x`
            ${this.renderDnsConnectivityError()}
            ${this.renderApplicationAccessError()}
            ${this.renderSuccessMessage()}

            <qrcg-button transparent @click=${this.refresh} class="refresh">
                <qrcg-icon
                    class="refresh-icon"
                    mdi-icon=${mdiRefresh}
                ></qrcg-icon>
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-domain-connectivity-status",QrcgDomainConnectivityStatus);class QrcgDomainForm extends QrcgDashboardForm{static get styles(){return[super.styles,i$3`
                .instructions {
                    background-color: var(--gray-0);
                    padding: 1rem;
                }

                .status-container {
                    display: flex;
                    align-items: flex-end;
                }

                .status-container qrcg-input::part(input) {
                    margin-bottom: 0;
                }

                .status-container qrcg-button {
                    margin-left: 1rem;
                    --button-background-color: var(--gray-0);
                    --button-background-color-hover: var(--primary-0);
                    --button-color: black;
                    --button-color-hover: white;
                }
            `]}constructor(){super({apiBaseRoute:"domains",disableableInputsSelector:'[name]:not([name="status"])'})}static get properties(){return{...super.properties,dnsIsConfigured:{type:Boolean},applicationIsAccessible:{type:Boolean}}}onApiSuccess(w){super.onApiSuccess(w),this.shadowRoot.querySelector("qrcg-domain-connectivity-status").refresh()}async onChangeStatus(){await QrcgDomainChangeStatusModal.open({domain:this.data}),this.fetchRecord()}async onChangeAvailability(){await QrcgDomainChangeAvailabilityModal.open({domain:this.data}),this.fetchRecord()}async onSetDefault(){try{await confirm$1({message:t$3`Are you sure you want to set this domain as default domain for all new QR codes?`}),await this.api.put(`domains/${this.data.id}/set-default`),showToast(t$3`Domain has been set as the default domain.`)}catch{}}renderStatusInput(){if(this.data?.id)return x`
            <div class="status-container">
                <qrcg-input name="status" disabled> ${t$3`Status`} </qrcg-input>
                <qrcg-button @click=${this.onChangeStatus}>
                    ${t$3`Change status`}
                </qrcg-button>
            </div>
        `}renderDomainAvailabilityInput(){if(this.data?.id)return x`
            <div class="status-container">
                <qrcg-input .value=${this.data.availability} disabled>
                    ${t$3`Availability`}
                </qrcg-input>

                <qrcg-button @click=${this.onChangeAvailability}>
                    ${t$3`Change availability`}
                </qrcg-button>
            </div>
        `}renderIsDefaultInput(){if(this.data?.id)return x`
            <div class="status-container">
                <qrcg-input
                    .value=${this.data.is_default?t$3`Yes`:t$3`No`}
                    disabled
                >
                    ${t$3`Is Default`}
                </qrcg-input>

                <qrcg-button @click=${this.onSetDefault}>
                    ${t$3`Set as default`}
                </qrcg-button>
            </div>
        `}renderInstructions(){return isEmpty(this.data.id)?x`
                <div class="instructions">
                    ${t$3`Enter host & protocol and then click on Save to see all available options.`}
                </div>
            `:x`
            <div class="instructions">
                ${t$3`Public domains are available for all application users. User submitted domains (other than admins) cannot made public.`}
            </div>
        `}renderFormFields(){return x`
            <qrcg-domain-connectivity-status
                domain-id=${this.data?.id}
            ></qrcg-domain-connectivity-status>
            <qrcg-input name="host" placeholder="domain.com">
                ${t$3`Host`}
            </qrcg-input>
            <qrcg-balloon-selector
                name="protocol"
                .options=${[{name:"http",value:"http"},{name:"https",value:"https"}]}
            >
                ${t$3`Protocol`}
            </qrcg-balloon-selector>

            <qrcg-input name="sort_order" type="number" placeholder="0">
                ${t$3`Sort order`}
                <span slot="instructions">
                    ${t$3`Controls the order of domains when customers has to choose one.`}
                </span>
            </qrcg-input>

            ${this.renderIsDefaultInput()}

            <!-- -->

            ${this.renderStatusInput()}

            <!-- -->

            ${this.renderDomainAvailabilityInput()}

            <!-- -->

            ${this.renderInstructions()}

            <qrcg-relation-select
                name="home_page_qrcode_id"
                api-endpoint="qrcodes?list_all=true"
            >
                ${t$3`Home Page QR Code`}
            </qrcg-relation-select>
        `}}window.defineCustomElement("qrcg-domain-form",QrcgDomainForm);class QrcgDomainFormPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-domain-form slot="content"></qrcg-domain-form>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-domain-form-page",QrcgDomainFormPage);class QrcgDomainStatusBadge extends i$1{static styles=[i$3`
            :host {
                display: inline-block;
            }

            .item-status {
                user-select: none;
                -webkit-user-select: none;
                padding: 0.25rem 0.65rem;
                border-radius: 0.25rem;
                background-color: white;
                font-size: 0.7rem;
                text-transform: uppercase;
            }

            .item-status.draft {
                background-color: var(--gray-2);
                color: white;
            }

            .item-status.in-progress {
                background-color: var(--warning-0);
            }

            .item-status.published {
                background-color: var(--success-0);
                color: white;
            }

            .item-status.rejected {
                background-color: var(--danger);
                color: white;
            }
        `];static get properties(){return{domain:{}}}render(){return x`
            <div class="item-status ${this.domain.status}">
                ${this.domain.status}
            </div>
        `}}window.defineCustomElement("qrcg-domain-status-badge",QrcgDomainStatusBadge);class QrcgDomainList extends QRCGDashboardList{static get styles(){return[super.styles,i$3`
                .search-row {
                    display: flex;
                    justify-content: space-between;
                    flex-wrap: wrap;
                }

                .search-row > * {
                    margin: 0 0 1rem 0;
                }

                .domain-status-filter::part(option) {
                    text-transform: uppercase;
                }
            `]}static get properties(){return{...super.properties,status:{}}}static listColumns=[{key:"id",label:"ID",width:"2rem"},{key:"host",label:"Host"},{key:"availability",label:"Availability"},{key:"status",label:"Status"},{key:"is_default",label:"Default?",booleanBadge:{onText:t$3`Yes`,offText:t$3`No`}},{key:"owner",label:"Owner"},{key:"actions",label:"Actions",width:"7rem"}];constructor(){super({baseRoute:"domains",singularRecordName:"Domain",frontendFormUrl:null})}getDomainStatuses(){return[{name:t$3`All`,value:"all"}].concat(getDomainStatuses().map(w=>({value:w,name:t$3(w)})))}searchPlaceholder(){return t$3`By host or owner name.`}extendSearch(w){this.status&&(w.status=this.status)}bindLocalPropertiesFromQueryParams(){super.bindLocalPropertiesFromQueryParams(),this.status=queryParam("status")}extendFetchDependencies(w){w.push("status")}onStatusChanged(w){const q=new URLSearchParams(window.location.search);q.set("status",w.detail.value),push(window.location.pathname+"?"+q.toString())}renderStatusFilter(){return x`
            <qrcg-balloon-selector
                class="domain-status-filter"
                .options=${this.getDomainStatuses()}
                @on-input=${this.onStatusChanged}
            ></qrcg-balloon-selector>
        `}renderSearchForm(){return x`
            <div class="search-row">
                ${this.renderStatusFilter()}
                <!-- -->
                ${super.renderSearchForm()}
            </div>
        `}cellContentRenderer(w,q){switch(q.key){case"status":return typeof w[q.key]=="object"?w[q.key]:x`
                    <qrcg-domain-status-badge
                        .domain=${w}
                    ></qrcg-domain-status-badge>
                `;case"owner":return typeof w[q.key]=="object"?w[q.key]:x`
                    <a href="${url(`/dashboard/users/edit/${w.user.id}`)}">
                        ${w.user.name}
                    </a>
                `;default:return super.cellContentRenderer(w,q)}}}window.defineCustomElement("qrcg-domain-list",QrcgDomainList);class QrcgDomainListPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-button slot="header-actions" href="/dashboard/domains/new"
                    >${t$3`Create`}</qrcg-button
                >
                <qrcg-domain-list slot="content"></qrcg-domain-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-domain-list-page",QrcgDomainListPage);class QrcgMyDomainsList extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            .list-title {
                font-weight: bold;
                margin-bottom: 1rem;
                display: block;
            }

            .domain-list {
                display: flex;
                flex-direction: column;
            }

            .item {
                display: flex;
                padding: 0 0.5rem;
                background-color: var(--gray-0);
                margin-bottom: 1rem;
                flex-direction: column;
            }

            .item > * {
                margin: 0.5rem 0;
            }

            @media (min-width: 50rem) {
                .item {
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    flex-direction: row;
                }
            }

            .actions {
                display: flex;
            }

            .action {
                color: var(--primary-0);
                user-select: none;
                -webkit-user-select: none;
                cursor: pointer;
                touch-action: manipulation;
                user-select: none;
                -webkit-user-select: none;
            }

            .action:not(:last-child) {
                margin-right: 1rem;
            }

            .item-details {
                display: flex;
                align-items: center;
            }

            .item-name {
                margin-right: 1rem;
                user-select: none;
            }

            .item-name > div {
                user-select: all;
            }

            .item-instructions {
                padding: 0.5rem;
                border-radius: 0.25rem;
                font-size: 0.8rem;
                background-color: white;
            }

            .item-instructions.warning {
                background-color: var(--warning-0);
            }
        `];static get properties(){return{domains:{type:Array}}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.fetch()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}onClick(w){const q=w.composedPath()[0];parentMatches(q,".action.delete")&&this.onDelete(q),parentMatches(q,".action.test-connection")&&this.onTestConnection(q)}async onDelete(w){const q=async()=>{await destroy(`domains/${w.domain.id}`),this.fetch()};if(w.domain.status=="draft")return q();try{await confirm$1({message:t$3`Are you sure you want to delete this domain, all printed QR codes that use this domain won't work in future!`}),await q()}catch{}}onTestConnection(w){this.dispatchEvent(new CustomEvent("qrcg-my-domains-list:test-connection",{composed:!0,bubbles:!0,detail:{domain:w.domain}}))}async fetch(){const{response:w}=await get("domains/my-domains"),q=await w.json();this.domains=q}renderLoader(){}renderName(w){return x`<div>${w.protocol}://${w.host}</div>`}renderEmptyItem(){return x`<div class="item">
            <div class="item-details">
                <div class="item-name">${t$3`You do not have any domains.`}</div>
            </div>
        </div>`}renderInstructions(w){if(w.status==="draft")return x`
                <div class="item-instructions warning">
                    ${t$3`When you add required CNAME Record, click on Test Connection`}
                </div>
            `;if(w.status==="in-progress")return x`
                <div class="item-instructions">
                    ${t$3`We are configuring the domain from our end, check this back within 24 hours.`}
                </div>
            `}renderDomainList(){return isEmpty(this.domains)?this.renderEmptyItem():x`
            <div class="domain-list">
                ${this.domains.map(w=>x`
                        <div class="item">
                            <div class="item-details">
                                <div class="item-name">
                                    ${this.renderName(w)}
                                </div>

                                <qrcg-domain-status-badge
                                    .domain=${w}
                                ></qrcg-domain-status-badge>
                            </div>

                            ${this.renderInstructions(w)}

                            <div class="actions">
                                <div class="action delete" .domain=${w}>
                                    ${t$3`Delete`}
                                </div>

                                <div
                                    class="action test-connection"
                                    .domain=${w}
                                >
                                    ${t$3`Test Connection`}
                                </div>
                            </div>
                        </div>
                    `)}
            </div>
        `}render(){return x`
            <label class="list-title">${t$3`List of your domains`}</label>

            ${this.renderDomainList()}
        `}}window.defineCustomElement("qrcg-my-domains-list",QrcgMyDomainsList);class QrcgDomainAdd extends i$1{titleController=new QRCGTitleController(this);api=new QRCGApiConsumer(this,"domains");formController=new QRCGFormController(this);static styles=[i$3`
            :host {
                display: block;
            }

            .introduction {
                line-height: 2;
            }

            qrcg-form-comment {
                margin-bottom: 1rem;
            }

            qrcg-input {
                margin-bottom: 1rem;
            }

            .actions {
                display: flex;
                justify-content: flex-end;
            }
        `];static get properties(){return{data:{},myDomains:{type:Array}}}constructor(){super(),this.data={protocol:"http"}}connectedCallback(){super.connectedCallback(),this.titleController.pageTitle=t$3`Add your domain`,this.addEventListener("qrcg-my-domains-list:test-connection",this.onTestConnection),this.addEventListener("qrcg-domain-connectivity-status:success",this.onConnectivitySuccess)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("qrcg-my-domains-list:test-connection",this.onTestConnection),this.removeEventListener("qrcg-domain-connectivity-status:success",this.onConnectivitySuccess)}onConnectivitySuccess(w){const{domain:q}=w.detail;q.status==="draft"&&this.setDomainStatusInProgress(q)}async setDomainStatusInProgress(w){const{response:q}=await put(`domains/${w.id}/update-status`,{status:"in-progress"});(await q.json()).status==="in-progress"&&this.refreshList()}onTestConnection(w){this.shadowRoot.querySelector("qrcg-domain-connectivity-status").domainId=w.detail.domain.id}getHost(){const w=document.createElement("a");return w.href=url("/"),w.hostname}submitForm=async()=>{await this.api.save(this.data),this.refreshList()};refreshList(){this.shadowRoot.querySelector("qrcg-my-domains-list").fetch()}render(){return x`
            <qrcg-form>
                <p class="introduction">
                    ${t$3`Make your dynamic QR codes white labeled by serving them from your own domain. This would increase trust in your QR Codes and might result in a higher conversion rate.`}
                </p>

                <qrcg-form-comment label=${t$3`Help`}>
                    ${t$3`Add a CNAME Record with your domain registrar that points to`+" "}
                    <strong>${this.getHost()}</strong>
                    ${t$3`It may take up to 24 hours for our systems to detect the changes.`}
                </qrcg-form-comment>

                <qrcg-domain-connectivity-status
                    .shouldRenderApplicationAccessError=${!1}
                ></qrcg-domain-connectivity-status>

                <qrcg-input name="host" placeholder="qr.your-website.com">
                    ${t$3`Domain Name`}
                    <span slot="instructions">
                        ${t$3`Enter your domain then click on save.`}
                    </span>
                </qrcg-input>

                <qrcg-my-domains-list></qrcg-my-domains-list>

                <div class="actions">
                    <qrcg-button type="submit">${t$3`Save`}</qrcg-button>
                </div>
            </qrcg-form>
        `}}window.defineCustomElement("qrcg-domain-add",QrcgDomainAdd);class QrcgDomainAddPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-domain-add slot="content"></qrcg-domain-add>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-domain-add-page",QrcgDomainAddPage);class QrcgDomainRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w));document.body.appendChild(new QrcgDomainRouter)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/domains$"
                permission="domain.list-all"
            >
                <template>
                    <qrcg-domain-list-page></qrcg-domain-list-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route
                route="/dashboard/domains/new|/dashboard/domains/edit/(?<id>\\d+)"
                permission="domain.update-any"
            >
                <template>
                    <qrcg-domain-form-page></qrcg-domain-form-page>
                </template>
            </qrcg-protected-route>

            <qrcg-protected-route
                route="/dashboard/domains/add"
                permission="domain.add"
            >
                <template>
                    <qrcg-domain-add-page></qrcg-domain-add-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-domain-router",QrcgDomainRouter);QrcgDomainRouter.boot();class QrcgPaymentProcessorFormBase extends QrcgSystemSettingsFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            [name] {
                margin-top: 0;
            }

            .form-fields {
                display: grid;
                grid-gap: 1rem;
            }

            .test-credentials {
                margin-right: 1rem;
            }

            .actions {
                margin-bottom: 0.1rem;
            }

            .test-credentials-result {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 1rem;
                border-radius: 0.5rem;
                animation: test-credentials-in 1s ease;
            }

            .test-credentials-result-close {
                cursor: pointer;
                width: 1.5rem;
                height: 1.5rem;
            }

            .test-credentials-result.success {
                background-color: var(--success-0);
                color: white;
            }

            .test-credentials-result.error {
                background-color: var(--danger);
                color: white;
            }

            .webhook-url-container {
                display: flex;
                align-items: center;
                margin-top: 0.5rem;
            }

            qrcg-copy-icon {
                margin-left: 1rem;
            }

            .webhook-url {
                background-color: white;
                padding: 0.5rem;
                display: inline-block;
            }

            .webhook-url div {
                user-select: all;
                max-width: 50vw;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .test-credentials-messages {
                line-height: 1.7;
            }

            @media (min-width: 900px) {
                .test-credentials-result,
                .instructions {
                    max-width: calc(50% - 2rem);
                }
            }

            @keyframes test-credentials-in {
                from {
                    max-height: 0;
                    opacity: 0;
                }

                to {
                    max-height: 4rem;
                    opacity: 1;
                }
            }
        `];static get properties(){return{testCredentialsResultSuccess:{type:Boolean},shouldShowTestCredentialsResult:{type:Boolean},testCredentialsResultMessages:{},plans:{type:Array}}}constructor(){super(),this.plans=[]}slug(){}fieldName(w){return`payment_processors.${this.slug()}.${w}`}getFieldValue(w){return this.getConfigValue(this.fieldName(w))}formTitle(){}renderFields(){}shouldRegisterWebhook(){return!0}planMappedFieldName(w,q){return this.fieldName("subscription_plan_"+w.id+"_"+q)}async listSubscriptionPlans(){const{response:w}=await get("subscription-plans"),{data:q}=await w.json();return q.filter(D=>!D.is_trial&&!D.is_hidden)}async fetchSubscriptionPlans(){this.plans=await this.listSubscriptionPlans(),this.requestUpdate(),await this.updateComplete,this.fetchConfigs()}renderEnabledField(){return x`
            <qrcg-balloon-selector
                name=${this.fieldName("enabled")}
                .options=${[{value:!0,name:t$3`ON`},{value:!1,name:t$3`OFF`}]}
                is-boolean
            >
                ${t$3`Enabled`}
            </qrcg-balloon-selector>
        `}renderDisplayNameField(){return x`
            <qrcg-input
                name=${this.fieldName("display_name")}
                placeholder=${t$3`Credit Card`}
            >
                ${t$3`Display name`}
                <div slot="instructions">
                    ${t$3`This is what your clients will see in the checkout page.`}
                </div>
            </qrcg-input>
        `}renderInstructions(){return this.renderWebhookInstructions()}addWebhookMessage(){return t$3`Add the following webhook in your payment processor dashboard`}renderWebhookInstructions(){if(this.shouldRegisterWebhook())return x`
                <div class="instructions">
                    ${t$3`Webhook is registered automatically after save.`}
                </div>
            `;{const w=url("/webhooks/"+this.slug());return x`
                <div class="instructions">
                    <div>${this.addWebhookMessage()}</div>
                    <div class="webhook-url-container">
                        <div class="webhook-url">
                            <div>${w}</div>
                        </div>
                        <qrcg-copy-icon>${w}</qrcg-copy-icon>
                    </div>
                </div>
            `}}renderPayButtonTextField(){return x`
            <qrcg-input
                name=${this.fieldName("pay_button_text")}
                placeholder=${t$3`Pay Now`}
            >
                ${t$3`Pay Button Text`}
            </qrcg-input>
        `}shouldTestCredentialsAfterSave(){return!0}async saveConfigs(){await super.saveConfigs(),+this.getFieldValue("enabled")?(this.shouldTestCredentialsAfterSave()&&await this.testCredentials(),this.testCredentialsResultSuccess&&await this.registerWebhook()):this.shouldShowTestCredentialsResult=!1}async registerWebhook(){if(this.shouldRegisterWebhook())try{const{response:w}=await post(this.registerWebhookUrl());if((await w.json()).success)await new Promise(D=>setTimeout(D,1e3)),showToast(t$3`Webhook registered successfully`);else throw new Error("Webhook registration failed.")}catch{await new Promise(w=>setTimeout(w,1e3)),showToast(t$3`Cannot register webhook. Check server logs.`)}}async testCredentials(){try{const{response:w}=await post(this.testCredentialsUrl()),q=await w.json();this.testCredentialsResultSuccess=q.success,this.testCredentialsResultMessages=q.messages}catch{this.testCredentialsResultSuccess=!1}finally{this.shouldShowTestCredentialsResult=!0}}registerWebhookUrl(){return`payment-processors/${this.slug()}/register-webhook`}testCredentialsUrl(){return`payment-processors/${this.slug()}/test-credentials`}renderTestCredentialsMessage(){if(!this.shouldShowTestCredentialsResult)return;const w=this.testCredentialsResultSuccess,q=isEmpty(this.testCredentialsResultMessages)?[t$3`Credentials are invalid`]:this.testCredentialsResultMessages;let D=w?[t$3`Credentials are valid.`]:q;return x`
            <div class="test-credentials-result ${w?"success":"error"}">
                <div class="test-credentials-messages">
                    ${D.map(O=>x`<div>${O}</div>`)}
                </div>
                <qrcg-icon
                    mdi-icon=${mdiClose}
                    class="test-credentials-result-close"
                    @click=${this.onTestCredentialsResultClose}
                    title=${t$3`Close`}
                ></qrcg-icon>
            </div>
        `}onTestCredentialsResultClose(){this.shouldShowTestCredentialsResult=!1}async callPaymentProcessorForwardedEndpoint(w){const{response:q}=await post(`payment-processors/${this.slug()}/forward/${w}`);return await q.json()}renderSortOrderField(){return x`
            <qrcg-input
                name=${this.fieldName("sort_order")}
                placeholder=${"0"}
                type="number"
                step="1"
            >
                ${t$3`Sort order`}
                <div slot="instructions">
                    ${t$3`Controls the order or payment tabs in the checkout page.`}
                </div>
            </qrcg-input>
        `}renderForm(){return x`
            <section>
                <h2 class="section-title">${this.formTitle()}</h2>

                <div class="form-fields">
                    ${this.renderInstructions()}

                    <!-- -->

                    ${this.renderEnabledField()}

                    <!-- -->

                    ${this.renderFields()}

                    <!-- -->

                    ${this.renderDisplayNameField()}

                    <!-- -->

                    ${this.renderPayButtonTextField()}

                    <!-- -->

                    ${this.renderSortOrderField()}

                    <!-- -->

                    ${this.renderTestCredentialsMessage()}
                </div>
            </section>
        `}}class QrcgPaymentProcessorFormStripe extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];slug(){return"stripe"}formTitle(){return t$3`Stripe Payment Processor`}renderFields(){return x`
            <qrcg-input
                name="${this.fieldName("publisher_key")}"
                placeholder=${t$3`pk_......`}
                type="password"
            >
                ${t$3`Publisher Key`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("secret_key")}"
                placeholder=${t$3`sk_......`}
                type="password"
            >
                ${t$3`Secret Key`}
            </qrcg-input>

            <qrcg-balloon-selector
                .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
                name=${this.fieldName("automatic_tax")}
            >
                ${t$3`Automatic Tax. Default (Disabled)`}
            </qrcg-balloon-selector>

            <qrcg-balloon-selector
                name="${this.fieldName("tax_behavior")}"
                .options=${[{name:t$3`Inclusive`,value:"inclusive"},{name:t$3`Exclusive`,value:"exclusive"}]}
            >
                ${t$3`Tax Behavior`}
            </qrcg-balloon-selector>
        `}}window.defineCustomElement("qrcg-payment-processor-form-stripe",QrcgPaymentProcessorFormStripe);class QrcgPaymentProcessorFormPayPal extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];slug(){return"paypal"}formTitle(){return t$3`PayPal Payment Processor`}renderFields(){return x`
            <qrcg-balloon-selector
                name=${this.fieldName("mode")}
                .options=${[{value:"sandbox",name:t$3`Sandbox`},{value:"live",name:t$3`Live`}]}
            >
                ${t$3`Mode`}
            </qrcg-balloon-selector>

            <qrcg-input
                name="${this.fieldName("client_id")}"
                placeholder=${t$3`AYMnloVHN......`}
            >
                ${t$3`Client ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("client_secret")}"
                placeholder=${t$3`EIp6CLH2fw......`}
            >
                ${t$3`Client Secret`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-paypal",QrcgPaymentProcessorFormPayPal);class QrcgPaymentProcessorFormOfflinePayments extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];shouldTestCredentialsAfterSave(){return!1}slug(){return"offline-payment"}formTitle(){return t$3`Offline Payments Processor`}renderInstructions(){return x`
            <qrcg-form-comment label=${t$3`Help`}>
                ${t$3`Offline payment gateway helps you recieve payments from your customers without any third party integrations. Customers will be asked to upload a proof of payment attachment, which is typically a transfer note or a deposit receipt.`}
            </qrcg-form-comment>
            <qrcg-form-comment label=${t$3`Instructions`}>
                ${t$3`You can review offline transactions from `}
                <a
                    href="/dashboard/transactions"
                    style="color:var(--primary-0); text-decoration: none;"
                    >${t$3`transactions`}</a
                >
                ${t$3`page.`}
            </qrcg-form-comment>
        `}renderFields(){return x`
            <qrcg-markdown-input
                name="${this.fieldName("customer_instructions")}"
                placeholder="E.g. your bank details, or transfer instructions."
            >
                ${t$3`Instructions for your customers`}
            </qrcg-markdown-input>

            <qrcg-balloon-selector
                name="${this.fieldName("payment_proof")}"
                .options=${[{name:t$3`Enabled`,value:"enabled"},{name:t$3`Disabled`,value:"disabled"}]}
            >
                ${t$3`Payment Proof. Default (Enabled)`}
            </qrcg-balloon-selector>
        `}}window.defineCustomElement("qrcg-payment-processor-form-offline-payments",QrcgPaymentProcessorFormOfflinePayments);class QrcgPaymentProcessorFormPaddle extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            .paddle-id-input-container {
                position: relative;
            }

            .paddle-name {
                pointer-events: none;
                position: absolute;
                right: 0.2rem;
                top: 1.65rem;
                background-color: var(--success-0);
                font-size: 0.8rem;
                color: white;
                padding: 0.5rem;
                border-radius: 0.5rem;
            }

            @media (min-width: 900px) {
                .paddle-name {
                    right: calc(50% + 0.2rem);
                }
            }
        `];static get properties(){return{...super.properties,paddlePlans:{type:Array}}}constructor(){super(),this.plans=[],this.paddlePlans=[]}connectedCallback(){super.connectedCallback(),this.fetchSubscriptionPlans(),this.fetchPaddleSubscriptionPlans()}addWebhookMessage(){return x`<div>
            ${t$3`Go to Paddle Dashboard > Developer Tools > Events > Subscriptions, and then enable Subscription Payment Success. Use the following URL`}
        </div>`}async fetchPaddleSubscriptionPlans(){const{response:w}=await post(`payment-processors/${this.slug()}/forward/listSubscriptionPlans`),q=await w.json();this.paddlePlans=q,this.requestUpdate(),await this.updateComplete,this.fetchConfigs()}shouldRegisterWebhook(){return!1}shouldTestCredentialsAfterSave(){return!0}slug(){return"paddle"}formTitle(){return t$3`Paddle (Classic)`}async testCredentials(){await super.testCredentials(),this.fetchSubscriptionPlans(),this.fetchPaddleSubscriptionPlans()}renderLoader(){return x` <qrcg-loader></qrcg-loader>`}renderPlansFields(){return isEmpty(this.plans)||isEmpty(this.paddlePlans)?this.renderLoader():this.plans.map(w=>{const q=this.paddlePlans.map(D=>{const Q=Object.keys(D.recurring_price)[0],O=D.recurring_price[Q],U=D.billing_type;return{name:`${D.name} - ${Q+O} / ${U}`,value:D.id}});return x`
                <div class="paddle-id-input-container">
                    <qrcg-balloon-selector
                        .options=${q}
                        name=${this.fieldName(`paddle_id_for_plan_${w.id}`)}
                        .value=${this.getConfigValue(`paddle_id_for_plan_${w.id}`)}
                    >
                        ${t$3`Select Paddle plan for`} ${w.name} -
                        ${w.price} / ${w.frequency}
                    </qrcg-balloon-selector>
                </div>
            `})}getConfigKeysToFetch(){return[...super.getConfigKeysToFetch(),...this.plans.map(w=>this.fieldName("paddle_id_for_plan_"+w.id))]}renderFields(){return x`
            <qrcg-balloon-selector
                name=${this.fieldName("mode")}
                .options=${[{value:"sandbox",name:t$3`Sandbox`},{value:"live",name:t$3`Live`}]}
            >
                ${t$3`Mode`}
            </qrcg-balloon-selector>

            <qrcg-input
                name="${this.fieldName("vendor_id")}"
                placeholder=${t$3`AYMnloVHN......`}
            >
                ${t$3`Vendor ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("auth_code")}"
                placeholder=${t$3`936cb64f......`}
            >
                ${t$3`Auth Code`}
            </qrcg-input>

            <qrcg-textarea name=${this.fieldName("public_key")}>
                ${t$3`Public Key`}
            </qrcg-textarea>
        `}renderForm(){return x`
            ${super.renderForm()}
            <!-- -->
            <section>
                <h2 class="section-title">${t$3`Plan IDS`}</h2>

                <div class="form-fields">
                    <div class="instructions">
                        ${t$3`It is not possible to sync plans automatically with Paddle because they do not offer an API endpoints for that. Please select Paddle ID for each plan below. Make sure to synchronize the prices manually as well.`}
                    </div>

                    ${this.renderPlansFields()}
                </div>
            </section>
        `}}window.defineCustomElement("qrcg-payment-processor-form-paddle",QrcgPaymentProcessorFormPaddle);class QrcgPaymentProcessorFormPaddleBilling extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }

            .paddle-id-input-container {
                position: relative;
            }

            .paddle-name {
                pointer-events: none;
                position: absolute;
                right: 0.2rem;
                top: 1.65rem;
                background-color: var(--success-0);
                font-size: 0.8rem;
                color: white;
                padding: 0.5rem;
                border-radius: 0.5rem;
            }

            @media (min-width: 900px) {
                .paddle-name {
                    right: calc(50% + 0.2rem);
                }
            }
        `];static get properties(){return{...super.properties,paddlePlans:{type:Array}}}constructor(){super()}connectedCallback(){super.connectedCallback()}renderInstructions(){return x`
            <div class="instructions">
                ${t$3`Get your credentials from Developer Tools > Authentication`}
            </div>
        `}addWebhookMessage(){return x`
            <div>
                ${t$3`Go to Paddle Dashboard > Developer Tools > Events > Subscriptions, and then enable Subscription Payment Success. Use the following URL`}
            </div>
        `}shouldRegisterWebhook(){return!0}shouldTestCredentialsAfterSave(){return!0}slug(){return"paddle-billing"}formTitle(){return t$3`Paddle (Billing)`}renderLoader(){return x` <qrcg-loader></qrcg-loader>`}renderFields(){return x`
            <qrcg-balloon-selector
                name=${this.fieldName("mode")}
                .options=${[{value:"sandbox",name:t$3`Sandbox`},{value:"live",name:t$3`Live`}]}
            >
                ${t$3`Mode`}
            </qrcg-balloon-selector>

            <qrcg-input
                name="${this.fieldName("seller_id")}"
                placeholder=${t$3`123456....`}
            >
                ${t$3`Seller ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("api_key")}"
                placeholder=${t$3`936cb64f......`}
            >
                ${t$3`API Key`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("client_token")}"
                placeholder=${t$3`936cb64f......`}
            >
                ${t$3`Client Side Token`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-paddle-billing",QrcgPaymentProcessorFormPaddleBilling);class QrcgPaymentProcessorFormPayUInternational extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];slug(){return"payu-international"}formTitle(){return t$3`PayU - International`}shouldRegisterWebhook(){return!1}renderWebhookInstructions(){return null}renderFields(){return x`
            <qrcg-balloon-selector
                name=${this.fieldName("mode")}
                .options=${[{value:"sandbox",name:t$3`Sandbox`},{value:"production",name:t$3`Production`}]}
            >
                ${t$3`Mode`}
            </qrcg-balloon-selector>

            <qrcg-input name="${this.fieldName("pos_id")}" placeholder="458***">
                ${t$3`POS ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("second_key")}"
                placeholder=${t$3`05dbc4a507c0e256**********7dda7f`}
            >
                ${t$3`Second key (MD5)`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("client_id")}"
                placeholder=${t$3`4568***`}
            >
                ${t$3`OAuth Client ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("client_secret")}"
                placeholder=${t$3`59d1531b96c237c4af617**********`}
            >
                ${t$3`OAuth Client Secret`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-payu-international",QrcgPaymentProcessorFormPayUInternational);class QrcgPaymentProcessorFormRazorpay extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];slug(){return"razorpay"}formTitle(){return t$3`Razorpay Payment Processor`}shouldRegisterWebhook(){return!1}renderFields(){return x`
            <qrcg-balloon-selector
                name=${this.fieldName("integration_type")}
                .options=${[{name:t$3`One Time`,value:"onetime"},{name:t$3`Recurring`,value:"recurring"}]}
            >
                ${t$3`Integration Type. Default(Recurring)`}
            </qrcg-balloon-selector>
            <qrcg-input
                name="${this.fieldName("key_id")}"
                placeholder=${t$3`rzp_***`}
            >
                ${t$3`Key ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("key_secret")}"
                placeholder=${t$3`gAR***`}
            >
                ${t$3`Key Secret`}
            </qrcg-input>

            <qrcg-input name="${this.fieldName("webhook_secret")}">
                ${t$3`Webhook Secret`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-razorpay",QrcgPaymentProcessorFormRazorpay);class QrcgPaymentProcessorFormMercadoPago extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];renderWebhookInstructions(){return null}slug(){return"mercadopago"}formTitle(){return t$3`Mercado Pago Payment Processor`}shouldRegisterWebhook(){return!1}renderFields(){return x`
            <qrcg-input
                name="${this.fieldName("public_key")}"
                placeholder=${t$3`****-****`}
            >
                ${t$3`Public Key`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("access_token")}"
                placeholder=${t$3`****-****`}
            >
                ${t$3`Access Token`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-mercadopago",QrcgPaymentProcessorFormMercadoPago);class QrcgPaymentProcessorFormPayTr extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];slug(){return"paytr"}formTitle(){return t$3`Pay TR Payment Processor`}shouldRegisterWebhook(){return!1}shouldTestCredentialsAfterSave(){return!1}renderFields(){return x`
            <qrcg-balloon-selector
                name="${this.fieldName("mode")}"
                .options=${[{value:"test",name:t$3`Test`},{value:"production",name:t$3`Production`}]}
            >
                ${t$3`Mode`}
            </qrcg-balloon-selector>
            <qrcg-input
                name="${this.fieldName("merchant_id")}"
                placeholder=${t$3`****-****`}
            >
                ${t$3`Merchant ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("merchant_salt")}"
                placeholder=${t$3`****-****`}
            >
                ${t$3`Merchant Salt`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("merchant_key")}"
                placeholder=${t$3`****-****`}
            >
                ${t$3`Merchant Key`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-paytr",QrcgPaymentProcessorFormPayTr);class QrcgPaymentProcessorFormPayFast extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];slug(){return"payfast"}formTitle(){return t$3`PayFast Payment Processor`}renderWebhookInstructions(){}shouldTestCredentialsAfterSave(){return!1}shouldRegisterWebhook(){return!1}renderFields(){return x`
            <qrcg-balloon-selector
                name="${this.fieldName("mode")}"
                .options=${[{value:"sandbox",name:t$3`Sandbox`},{value:"live",name:t$3`Live`}]}
            >
                ${t$3`Mode`}
            </qrcg-balloon-selector>
            <qrcg-input
                name="${this.fieldName("merchant_id")}"
                placeholder="12321456"
            >
                ${t$3`Merchant ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("merchant_key")}"
                placeholder="na38Jsh***"
            >
                ${t$3`Merchant Key`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("passphrase")}"
                placeholder="your passphrase"
            >
                ${t$3`Passphrase`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-payfast",QrcgPaymentProcessorFormPayFast);class QrcgPaymentProcessorFormXendit extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];addWebhookMessage(){return t$3`Go to Xendit Dashboard > Settings > Callbacks and then from the Invoices section, add the following URL in invoice paid text input`}slug(){return"xendit"}formTitle(){return t$3`Xendit Payment Processor`}shouldRegisterWebhook(){return!1}renderFields(){return x`
            <qrcg-input
                name="${this.fieldName("public_key")}"
                placeholder=${t$3`****-****`}
            >
                ${t$3`Public Key`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("secret_key")}"
                placeholder=${t$3`****-****`}
            >
                ${t$3`Secret Key`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-xendit",QrcgPaymentProcessorFormXendit);class QrcgPaymentProcessorFormMollie extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];slug(){return"mollie"}formTitle(){return t$3`Mollie Payment Processor`}renderWebhookInstructions(){return null}shouldRegisterWebhook(){return!1}renderFields(){return x`
            <qrcg-input
                name="${this.fieldName("api_key")}"
                placeholder=${t$3`****-****`}
            >
                ${t$3`API Key`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("partner_id")}"
                placeholder=${t$3`****-****`}
            >
                ${t$3`Partner ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("profile_id")}"
                placeholder=${t$3`****-****`}
            >
                ${t$3`Profile ID`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-mollie",QrcgPaymentProcessorFormMollie);class QrcgPaymentProcessorFormPayStack extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];addWebhookMessage(){return t$3`Go to PayStack Dashboard > Settings > Api Keys & Webhooks and add the following webhook URL`}slug(){return"paystack"}formTitle(){return t$3`PayStack Payment Processor`}shouldRegisterWebhook(){return!1}renderFields(){return x`
            <qrcg-input
                name="${this.fieldName("secret_key")}"
                placeholder=${t$3`sk_***********`}
            >
                ${t$3`Secret Key`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("public_key")}"
                placeholder=${t$3`pk_***********`}
            >
                ${t$3`Public Key`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-paystack",QrcgPaymentProcessorFormPayStack);class QrcgPaymentProcessorFormAliPayChina extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];renderWebhookInstructions(){return null}slug(){return"alipay-china"}formTitle(){return t$3`AliPay China Payment Processor`}shouldRegisterWebhook(){return!1}renderFields(){return x`
            <qrcg-balloon-selector
                name="mode"
                .options=${[{name:t$3`Sandbox`,value:"sandbox"},{name:t$3`Live`,value:"live"}]}
            >
                ${t$3`Mode`}
            </qrcg-balloon-selector>

            <qrcg-input
                name="${this.fieldName("app_id")}"
                placeholder="54654658"
            >
                ${t$3`App ID`}
            </qrcg-input>

            <qrcg-textarea name=${this.fieldName("app_secret_cert")}>
                ${t$3`App Secret Cert`}
            </qrcg-textarea>

            ${this.renderFileInput({label:t$3`App Public Certificate`,name:this.fieldName("app_public_cert"),accept:".crt"})}
            ${this.renderFileInput({label:t$3`AliPay Public Cert`,name:this.fieldName("alipay_public_cert"),accept:".crt"})}
            ${this.renderFileInput({label:t$3`AliPay Root Cert`,name:this.fieldName("alipay_root_cert"),accept:".crt"})}

            <qrcg-input
                name="${this.fieldName("app_auth_token")}"
                placeholder="${t$3`Optional`}"
            >
                ${t$3`App Auth Token`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-alipay-china",QrcgPaymentProcessorFormAliPayChina);class QrcgPaymentProcessorFormYooKassa extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];slug(){return"yookassa"}formTitle(){return t$3`YooKassa Payment Processor`}shouldRegisterWebhook(){return!1}renderFields(){return x`
            <qrcg-input
                name="${this.fieldName("client_id")}"
                placeholder=${t$3`****-****`}
            >
                ${t$3`Client ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("client_secret")}"
                placeholder=${t$3`****-****`}
            >
                ${t$3`Client Secret`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-yookassa",QrcgPaymentProcessorFormYooKassa);class QrcgPaymentProcessorFormPayKickstart extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{...super.properties,plans:{type:Array}}}constructor(){super(),this.plans=[]}connectedCallback(){super.connectedCallback(),this.fetchSubscriptionPlans()}getConfigKeysToFetch(){return[...super.getConfigKeysToFetch(),...this.plans.map(w=>this.planMappedFieldName(w,"checkout_page_url")),...this.plans.map(w=>this.planMappedFieldName(w,"product_id"))]}renderPlanMappingFields(w,q,D){return isEmpty(w)?x`<qrcg-loader></qrcg-loader>`:w.map(Q=>{const O=this.planMappedFieldName(Q,D),U=`${Q.name} ${t$3`Plan`}: ${titleCase(D)}`,G=`Add ${titleCase(D)} here`;switch(q){case"qrcg-textarea":return x`
                        <qrcg-textarea name=${O} placeholder=${G}>
                            ${U}
                        </qrcg-textarea>
                    `;default:return x`
                        <qrcg-input name="${O}" placeholder=${G}>
                            ${U}
                        </qrcg-input>
                    `}})}async fetchSubscriptionPlans(){this.plans=await this.listSubscriptionPlans(),this.requestUpdate(),await this.updateComplete,this.fetchConfigs()}addWebhookMessage(){return t$3`In PayKickstart dashboard, go to Product Settings > Integration (section 3) > Enable IPN and add the following URL for all events. This should be done for every product.`}slug(){return"paykickstart"}formTitle(){return t$3`PayKickstart Payment Processor`}shouldTestCredentialsAfterSave(){return!1}shouldRegisterWebhook(){return!1}renderFields(){return x`
            <qrcg-balloon-selector
                name="${this.fieldName("mode")}"
                .options=${[{value:"test",name:t$3`Test`},{value:"live",name:t$3`Live`}]}
            >
                ${t$3`Mode`}
            </qrcg-balloon-selector>
            <qrcg-input
                name="${this.fieldName("secret_key")}"
                placeholder="Secret key"
            >
                ${t$3`Secret Key`}
                <div slot="instructions">
                    ${t$3`Secret key can be found in your campaign settings.`}
                </div>
            </qrcg-input>

            <qrcg-textarea name=${this.fieldName("email_template")}>
                ${t$3`New Registration Email Template`}
                <div slot="instructions">
                    ${t$3`Automatically sent after successful payment via PayKickstart checkout page. Available variables: FULL_NAME, EMAIL, PASSWORD, PLAN_NAME`}
                </div>
            </qrcg-textarea>

            <qrcg-textarea name=${this.fieldName("upgrade_email_template")}>
                ${t$3`Upsale Email Template`}
                <div slot="instructions">
                    ${t$3`Automatically sent after successful upsale. The account will be upgraded. Available variables: FULL_NAME, EMAIL, PLAN_NAME`}
                </div>
            </qrcg-textarea>
        `}renderCheckoutPagesFields(){return x`
            <section>
                <h2 class="section-title">${t$3`Checkout Page URLs`}</h2>

                <div class="form-fields">
                    <div class="instructions">
                        ${t$3`Add checkout page URL for each subscription plan below.`}
                    </div>

                    ${this.renderPlanMappingFields(this.plans,"qrcg-textarea","checkout_page_url")}
                </div>
            </section>
        `}renderProductIdFields(){return x`
            <section>
                <h2 class="section-title">${t$3`Product IDs`}</h2>

                <div class="form-fields">
                    <div class="instructions">
                        ${t$3`Add PayKickstart product ID for each subscription plan.`}
                    </div>

                    ${this.renderPlanMappingFields(this.plans,"qrcg-input","product_id")}
                </div>
            </section>
        `}renderForm(){return x`
            ${super.renderForm()}
            <!-- -->
            ${this.renderCheckoutPagesFields()}
            <!-- -->
            ${this.renderProductIdFields()}
        `}}window.defineCustomElement("qrcg-payment-processor-form-paykickstart",QrcgPaymentProcessorFormPayKickstart);class QrcgPaymentProcessorFormOrangeBF extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{...super.properties,plans:{type:Array}}}constructor(){super(),this.plans=[]}connectedCallback(){super.connectedCallback(),this.fetchSubscriptionPlans()}getConfigKeysToFetch(){return[...super.getConfigKeysToFetch(),...this.plans.map(w=>this.planMappedFieldName(w,"checkout_page_url")),...this.plans.map(w=>this.planMappedFieldName(w,"product_id"))]}async fetchSubscriptionPlans(){this.plans=await this.listSubscriptionPlans(),this.requestUpdate(),await this.updateComplete,this.fetchConfigs()}renderInstructions(){return x`
            <div class="instructions">
                ${t$3`Orange Burkina Faso Payment Processor`}
            </div>
        `}slug(){return"orange-bf"}formTitle(){return t$3`Orange Payment Processor`}shouldTestCredentialsAfterSave(){return!1}shouldRegisterWebhook(){return!1}renderFields(){return x`
            <qrcg-balloon-selector
                name="${this.fieldName("mode")}"
                .options=${[{value:"test",name:t$3`Test`},{value:"production",name:t$3`Production`}]}
            >
                ${t$3`Mode`}
            </qrcg-balloon-selector>
            <qrcg-input
                name="${this.fieldName("merchant")}"
                placeholder="Merchant ID"
            >
                ${t$3`Merchant`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("login_id")}"
                placeholder="Login ID"
            >
                ${t$3`Login ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("password")}"
                placeholder="Password"
            >
                ${t$3`Password`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-orange-bf",QrcgPaymentProcessorFormOrangeBF);class QrcgPaymentProcessorFormPayULatam extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];slug(){return"payu-latam"}formTitle(){return t$3`PayU - Latam`}shouldRegisterWebhook(){return!1}renderWebhookInstructions(){return null}shouldTestCredentialsAfterSave(){return!1}renderFields(){return x`
            <qrcg-balloon-selector
                name=${this.fieldName("mode")}
                .options=${[{value:"sandbox",name:t$3`Sandbox`},{value:"production",name:t$3`Production`}]}
            >
                ${t$3`Mode`}
            </qrcg-balloon-selector>

            <qrcg-input
                name="${this.fieldName("accountId")}"
                placeholder="123456"
            >
                ${t$3`Account ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("merchantId")}"
                placeholder="123456"
            >
                ${t$3`Merchant ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("apiKey")}"
                placeholder=${t$3`4Vj8eK4********arnUA`}
            >
                ${t$3`API Key`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-payu-latam",QrcgPaymentProcessorFormPayULatam);class QrcgInputErrors extends i$1{static styles=[i$3`
            :host {
                display: block;
                position: absolute;
                font-size: 0.8rem;
                font-weight: bold;
                bottom: -0.25rem;
                transform: translateY(100%);
                color: var(--danger);
            }

            .error {
                display: flex;
                justify-content: space-between;
                left: 0;
                right: 0;
                animation: fade-in ease 1s both;
            }

            .error-expand {
                display: block;
                font-weight: normal;
                color: var(--primary-0);
                margin-left: 1rem;
                text-decoration: underline;
                cursor: pointer;
            }

            @keyframes fade-in {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }
        `];static get properties(){return{errors:{type:Array}}}async onErrorExpandClick(){try{await confirm$1({title:t$3`Error details`,message:this.renderErrorList(),negativeText:null,affirmativeText:t$3`OK`})}catch{}}renderErrorList(){return x`
            <ul style="padding: 0 0 0 1rem;">
                ${this.errors.map(w=>x`<li>${w}</li>`)}
            </ul>
        `}render(){return isEmpty(this.errors)?void 0:this.errors.length>1||this.errors[0].length>30?x`
                <label class="error">
                    <span>${this.errors[0].substring(0,30)} ...</span>
                    <span
                        class="error-expand"
                        @click=${this.onErrorExpandClick}
                    >
                        ${t$3`view details`}
                    </span>
                </label>
            `:x` <label class="error"> ${this.errors[0]}</label> `}}window.defineCustomElement("qrcg-input-errors",QrcgInputErrors);class QrcgSearchableSelectItem extends i$1{static styles=[i$3`
            :host {
                font-size: 0.8rem;
                display: flex;
                flex-direction: column;
                padding: 1rem;
                cursor: pointer;
                user-select: none;
                -webkit-user-select: none;
            }

            :host(.selected) {
                font-weight: bold;
                background-color: var(--gray-0);
            }

            :host(:hover),
            :host(:focus) {
                background-color: var(--gray-0);
                outline: 0;
            }

            .main-row {
                position: relative;
                display: flex;
                justify-content: space-between;
            }

            .id {
                color: var(--gray-2);
            }

            .attribute {
                font-size: 0.8rem;
                display: flex;
                margin-top: 0.5rem;
                color: var(--gray-2);
            }

            .attribute .value {
                text-overflow: ellipsis;
                overflow: hidden;
            }

            .name {
                max-width: 50%;
                overflow: hidden;
                text-overflow: ellipsis;
            }
        `];static get properties(){return{item:{},renderItemId:{type:Boolean}}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.addEventListener("keyup",this.onKeyUp),this.setAttribute("tabindex","0")}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),this.removeEventListener("keyup",this.onKeyUp)}onKeyUp(w){w.key==="Enter"&&(w.preventDefault(),w.stopImmediatePropagation(),this.fireOptionClickedEvent())}onClick(){this.fireOptionClickedEvent()}fireOptionClickedEvent(){this.dispatchEvent(new CustomEvent(QrcgSearchableSelect.EVENT_NAME_OPTION_CLICKED,{detail:{item:this.item},composed:!0,bubbles:!0}))}renderName(){return x`<div class="name">${this.item.name}</div>`}renderId(){if(this.item.id&&this.renderItemId)return x`<div class="id">${this.item.id}</div>`}renderAttributes(){const w=["name","id"];let q=Object.keys(this.item).filter(D=>w.indexOf(D)===-1);return x`
            <div class="attributes">
                ${q.filter(D=>isNotEmpty(this.item[D])).map(D=>x`
                            <div class="attribute">
                                <div class="value">${this.item[D]}</div>
                            </div>
                        `)}
            </div>
        `}render(){return x`
            <div class="main-row">
                ${this.renderName()}
                <!-- -->
                ${this.renderId()}
            </div>

            ${this.renderAttributes()}
        `}}window.defineCustomElement("qrcg-select-item",QrcgSearchableSelectItem);class QrcgSearchableSelectWindow extends i$1{lastItemsCount=0;static styles=[i$3`
            :host {
                display: block;
                height: 300px;
                overflow: auto;
                box-sizing: border-box;
                position: relative;
            }

            .virtual-list {
                position: relative;
            }

            .items-container {
                position: absolute;
                top: 0;
                bottom: 0;
                left: 0;
                right: 0;

                transition: top 0.2s ease;
            }
        `];static get properties(){return{items:{type:Array},selectedOption:{},renderItemId:{type:Boolean}}}get virtualList(){return this.shadowRoot.querySelector(".virtual-list")}get itemsContainer(){return this.shadowRoot.querySelector(".items-container")}constructor(){super(),this.items=[]}connectedCallback(){super.connectedCallback(),document.addEventListener(QrcgSearchableSelect.EVENT_NAME_REQUEST_FOCUS_FIRST_ITEM,this.onFirstItemFocusRequested)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener(QrcgSearchableSelect.EVENT_NAME_REQUEST_FOCUS_FIRST_ITEM,this.onFirstItemFocusRequested)}onFirstItemFocusRequested=()=>{this.shadowRoot.querySelector(".item")?.focus()};updated(){this.getItems().length!=this.lastItemsCount&&(this.measure(),this.resetVirtualScroll(),this.lastItemsCount=this.getItems().length,this.requestUpdate())}getItems(){return this.items??[]}sliceItems(){return this.getItems().slice(this.showItemsFrom(),this.pageSize()+this.showItemsFrom())}pageSize(){return this._isMeasured?10:1}getVirtualOffsetTop(){return this.virtualList.getBoundingClientRect().top-this.getBoundingClientRect().top}showItemsFrom(){if(!this.virtualList)return 0;const w=this.getVirtualOffsetTop();let q=Math.round(w/this.getItemHeight());return q=Math.abs(q),q}async measure(){await new Promise(D=>setTimeout(D));const q=this.getItemHeight()*this.getItems().length;this.virtualList.style.height=`${q}px`,this.bindVirtualScrollEventIfNeeded(),this._isMeasured=!0,this.requestUpdate()}bindVirtualScrollEventIfNeeded(){this._virtualListScrollEventBound||(this.addEventListener("scroll",this.onVirtualScroll),this._virtualListScrollEventBound=!0)}resetVirtualScroll(){this.itemsContainer.style.top="0",this.itemsContainer.style.bottom="0",this.requestUpdate()}onVirtualScroll=()=>{const{height:w}=this.virtualList.getBoundingClientRect(),q=this.getVirtualOffsetTop(),D=this.getBoundingClientRect().height,Q=w-Math.abs(q)<D;this.itemsContainer.style.top=`${Math.abs(Math.round(q))}px`,Q&&(this.itemsContainer.style.top="initial",this.itemsContainer.style.bottom="0"),this.requestUpdate()};getItemHeight(){return this._measuredItemHeight||(this._measuredItemHeight=this.shadowRoot.querySelector(".items-container > *").getBoundingClientRect().height),this._measuredItemHeight}renderItems(){return this.sliceItems().map(this.renderItem)}renderItem=w=>{const q=this.selectedOption?.id===w.id;return this.defaultItemRenderer(w,q)};defaultItemRenderer(w,q){return x`
            <qrcg-select-item
                .item=${w}
                class=${e$1({item:!0,selected:q})}
                .renderItemId=${this.renderItemId}
            ></qrcg-select-item>
        `}render(){return x`
            <div class="virtual-list"></div>
            <div class="items-container">${this.renderItems()}</div>
        `}}window.defineCustomElement("qrcg-select-window",QrcgSearchableSelectWindow);class QrcgSearchableSelectSearch extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            qrcg-input::part(label) {
                display: none;
            }

            qrcg-input::part(input) {
                border: 0;
                padding-top: 1rem;
                margin-bottom: 0;
                padding-bottom: 0.5rem;
                box-shadow: none;
            }
        `];connectedCallback(){super.connectedCallback(),this.addEventListener("keyup",this.onKeyUp)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keyup",this.onKeyUp)}onKeyUp=w=>{w.key==="ArrowDown"&&this.dispatchEvent(new CustomEvent(QrcgSearchableSelect.EVENT_NAME_REQUEST_FOCUS_FIRST_ITEM,{bubbles:!0,composed:!0}))};focus(){this.shadowRoot.querySelector("qrcg-input")?.focus()}onInput(w){const q=w.detail.value;w.preventDefault(),w.stopImmediatePropagation(),this.dispatchEvent(new CustomEvent(QrcgSearchableSelect.EVENT_NAME_ON_SEARCH,{bubbles:!0,composed:!0,detail:{name:"keyword",value:q}}))}render(){return x`
            <qrcg-input
                @on-input=${this.onInput}
                placeholder=${t$3`Search...`}
            ></qrcg-input>
        `}}window.defineCustomElement("qrcg-select-search",QrcgSearchableSelectSearch);class QrcgSearchableSelectControl extends i$1{static styles=[i$3`
            :host {
                display: block;
                position: relative;
                user-select: none;
                -webkit-user-select: none;
                cursor: pointer;
                --qrcg-select-control-border-radius: 0.5rem;
            }

            :host([loading]) {
                pointer-events: none;
            }

            :host(:not([loading])) * {
                cursor: pointer;
            }

            .control {
                padding: 0.5rem 1rem;
                border: 1px solid black;
                display: flex;
                align-items: center;
                border: 2px solid var(--gray-1);
                border-radius: var(--qrcg-select-control-border-radius);
                -webkit-tap-highlight-color: transparent;
                margin-bottom: 0.5rem;
                transition: ease 0.5s;
                background-color: white;
                position: relative;
            }

            :host([disabled]) {
                pointer-events: none;
            }

            :host([disabled]) .control {
                opacity: 0.5;
            }

            :host(:focus) {
                outline: 0;
            }

            .title {
                display: block;
                font-size: 0.8rem;
                margin-bottom: 0.5rem;
                font-weight: bold;
                user-select: none;
                -webkit-user-select: none;
                flex: 1;
            }

            .control-text {
                flex: 1;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                padding-right: 1.5rem;
            }

            .focused {
                border-color: var(--gray-2);
                outline: 0;
            }

            qrcg-icon {
                margin-left: 0.5rem;
                color: var(--gray-2);
            }

            .focused qrcg-icon {
                color: black;
            }

            .error {
                color: var(--danger);
                position: absolute;
                font-size: 0.8rem;
                font-weight: bold;
                bottom: 0.5rem;
                transform: translateY(100%);
                animation: fade-in ease 1s both;
            }

            .loader-container {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: rgba(255, 255, 255, 0.8);
                z-index: 3;
                border-radius: var(--qrcg-select-control-border-radius);
            }

            qrcg-loader-h {
                --qrcg-loader-h-color: black;
                position: absolute;
                transform: translate(-50%, -50%) scale(0.5);
                top: 50%;
                left: 50%;
            }

            .clear-icon {
                position: absolute;
                right: 1.5rem;
                padding: 1rem;
            }

            .clear-icon:hover {
                color: black;
            }

            [name='instructions']::slotted(*) {
                padding: 0.5rem;
                background-color: var(--gray-0);
                font-size: 0.8rem;
                line-height: 1.7;
                margin-bottom: 0.5rem;
            }

            @keyframes fade-in {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }
        `];static get properties(){return{placeholder:{},focused:{type:Boolean},mode:{},selectedOption:{},loading:{type:Boolean,reflect:!0}}}constructor(){super(),this.placeholder=t$3`-- please select --`,this.focused=!1,this.hovered=!1,this.selectedOption={}}connectedCallback(){super.connectedCallback(),this.addEventListener("focus",this.onFocus),this.addEventListener("keyup",this.onKeyUp),this.addEventListener("click",this.onClick),document.addEventListener(QrcgSearchableSelect.EVENT_NAME_MODE_CHANGED,this.onModeChanged),this.setAttribute("tabindex","0")}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("mouseenter",this.onMouseEnter),this.removeEventListener("focus",this.onFocus),this.removeEventListener("keyup",this.onKeyUp),this.removeEventListener("click",this.onClick),document.removeEventListener(QrcgSearchableSelect.EVENT_NAME_MODE_CHANGED,this.onModeChanged)}onModeChanged=w=>{const q=w.composedPath()[0];if(parentMatches(this,"qrcg-searchable-select")!=q)return;const{mode:Q}=w.detail;this.focused=Q===QrcgSearchableSelect.MODE_OPEN};renderText(){return this.selectedOption?.name?this.selectedOption.name:this.placeholder}onClick=w=>{const q=w.composedPath()[0];parentMatches(q,".clear-icon")?this.requestValueClear():this.requestToggleSelect()};requestValueClear(){this.dispatchEvent(new CustomEvent(QrcgSearchableSelect.EVENT_NAME_REQUEST_VALUE_CLEAR,{bubbles:!0,composed:!0}))}onKeyUp(w){w.key==="ArrowDown"&&(w.preventDefault(),w.stopPropagation(),this.requestOpenSelect())}onBlur(){this.mode!==QrcgSearchableSelect.MODE_OPEN&&(this.focused=!1)}onFocus(){this.focused=!0}requestOpenSelect(){this.dispatchEvent(new CustomEvent(QrcgSearchableSelect.EVENT_NAME_SHOULD_OPEN,{bubbles:!0,composed:!0}))}requestToggleSelect(){this.dispatchEvent(new CustomEvent(QrcgSearchableSelect.EVENT_NAME_SHOULD_TOGGLE,{bubbles:!0,composed:!0}))}renderLoader(){if(this.loading)return x`
            <div class="loader-container">
                <qrcg-loader-h></qrcg-loader-h>
            </div>
        `}render(){return x`
            <label for="select-${this.name}" class="title">
                <slot></slot>
            </label>

            <slot name="instructions"></slot>

            <div class="control ${e$1({focused:this.focused})}">
                <label class="control-text"> ${this.renderText()} </label>

                <qrcg-icon mdi-icon=${mdiClose} class="clear-icon"></qrcg-icon>

                <qrcg-icon mdi-icon=${mdiChevronDown}></qrcg-icon>

                ${this.renderLoader()}
            </div>
        `}}window.defineCustomElement("qrcg-select-control",QrcgSearchableSelectControl);class QrcgPaymentProcessorForm2Checkout extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{...super.properties,twoCheckoutProducts:{type:Object}}}constructor(){super(),this.twoCheckoutProducts={}}slug(){return"2checkout"}formTitle(){return t$3`2Checkout`}connectedCallback(){super.connectedCallback(),this.fetchSubscriptionPlans()}getConfigKeysToFetch(){return[...super.getConfigKeysToFetch(),...this.plans.map(w=>this.fieldName("2checkout_id_for_plan_"+w.id))]}shouldTestCredentialsAfterSave(){return!1}shouldRegisterWebhook(){return!1}renderLoader(){return x` <qrcg-loader></qrcg-loader>`}getTwoCheckoutProductsOptions(){return this.twoCheckoutProducts.Items.filter(q=>q.PricingConfigurations[0]).map(q=>{const D=q.PricingConfigurations[0].Prices.Regular[0],Q=q.SubscriptionInformation,O=Q.BillingCycleUnits==="M"?"Months":Q.BillingCycleUnits,U=Q.BillingCycle;return{name:`${q.ProductName} - ${D.Currency}${D.Amount} (${U} ${O})`,id:q.AvangateId}})}renderTwoCheckoutProductsSelector(w,q,D){return x`
            <qrcg-input name=${q} .value=${D}> ${w} </qrcg-input>
        `}renderPlanIDSelector(w){const q=`2checkout_id_for_plan_${w.id}`,D=this.fieldName(q),Q=t$3`Add ID for plan`+" "+w.name+" - "+w.price+" / "+w.frequency,O=this.getConfigValue(q);return this.renderTwoCheckoutProductsSelector(Q,D,O)}renderPlansFields(){return isEmpty(this.plans)?this.renderLoader():this.plans.map(w=>this.renderPlanIDSelector(w))}renderFields(){return x`
            <qrcg-balloon-selector
                name=${this.fieldName("mode")}
                .options=${[{value:"test",name:t$3`Test`},{value:"production",name:t$3`Production`}]}
            >
                ${t$3`Mode. Default (Test)`}
            </qrcg-balloon-selector>
        `}renderForm(){return x`
            ${super.renderForm()}
            <!-- -->
            <section>
                <h2 class="section-title">${t$3`Plan IDS`}</h2>

                <div class="form-fields">
                    <div class="instructions">
                        ${t$3`Please select 2Checkout Product for each plan below. Make sure to synchronize the prices manually in your 2Checkout dashboard as well.`}
                    </div>

                    ${this.renderPlansFields()}
                </div>
            </section>
        `}}window.defineCustomElement("qrcg-payment-processor-form-2checkout",QrcgPaymentProcessorForm2Checkout);class QrcgPaymentProcessorFormDintero extends QrcgPaymentProcessorFormBase{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];slug(){return"dintero"}formTitle(){return t$3`Dintero`}shouldRegisterWebhook(){return!1}shouldTestCredentialsAfterSave(){return!1}renderWebhookInstructions(){return null}renderFields(){return x`
            <qrcg-balloon-selector
                name=${this.fieldName("mode")}
                .options=${[{value:"test",name:t$3`Test`},{value:"production",name:t$3`Production`}]}
            >
                ${t$3`Mode. Default (Test)`}
            </qrcg-balloon-selector>

            <qrcg-input
                name="${this.fieldName("accountId")}"
                placeholder="Account ID"
            >
                ${t$3`Account ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("clientID")}"
                placeholder="AsD3UQFE******"
            >
                ${t$3`Client ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("clientSecret")}"
                placeholder=${t$3`Client Secret`}
            >
                ${t$3`Client Secret`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("profile_id")}"
                placeholder="${t$3`defualt`}"
            >
                ${t$3`Profile ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("vat")}"
                placeholder=${t$3`E.g. 25`}
            >
                ${t$3`VAT Percentage`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("reference")}"
                placeholder=${t$3`e.g. SUBSCRIPTION-`}
            >
                ${t$3`Reference Prefix`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-payment-processor-form-dintero",QrcgPaymentProcessorFormDintero);class QrcgPaymentProcessorFormFIB extends QrcgPaymentProcessorFormBase{static get tag(){return"qrcg-payment-processor-form-fib"}static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];slug(){return"fib"}formTitle(){return t$3`First Iraqi Bank (FIB)`}shouldRegisterWebhook(){return!1}shouldTestCredentialsAfterSave(){return!0}renderWebhookInstructions(){return null}renderFields(){return x`
            <qrcg-balloon-selector
                name=${this.fieldName("mode")}
                .options=${[{value:"staging",name:t$3`Staging`},{value:"production",name:t$3`Production`}]}
            >
                ${t$3`Mode. Default (Staging)`}
            </qrcg-balloon-selector>

            <qrcg-input
                name="${this.fieldName("client_id")}"
                placeholder="${t$3`Client ID`}"
            >
                ${t$3`Client ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("client_secret")}"
                placeholder="a3b17**************"
            >
                ${t$3`Client Secret`}
            </qrcg-input>
        `}}window.defineCustomElement(QrcgPaymentProcessorFormFIB.tag,QrcgPaymentProcessorFormFIB);class QrcgPaymentProcessorFormPostFinance extends QrcgPaymentProcessorFormBase{static get tag(){return"qrcg-payment-processor-form-postfinance"}static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];slug(){return"postfinance"}formTitle(){return t$3`Post Finance`}shouldRegisterWebhook(){return!1}shouldTestCredentialsAfterSave(){return!1}renderFields(){return x`
            <qrcg-input
                name="${this.fieldName("space_id")}"
                placeholder="${t$3`Space ID`}"
            >
                ${t$3`Space ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("user_id")}"
                placeholder="${t$3`User ID`}"
            >
                ${t$3`User ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("secret")}"
                placeholder="${t$3`Secret`}"
            >
                ${t$3`Secret`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("tax_percentage")}"
                placeholder="10"
            >
                ${t$3`Tax Percentage`}
            </qrcg-input>
        `}}window.defineCustomElement(QrcgPaymentProcessorFormPostFinance.tag,QrcgPaymentProcessorFormPostFinance);class QrcgPaymentProcessorFormFlutterwave extends QrcgPaymentProcessorFormBase{static get tag(){return"qrcg-payment-processor-form-flutterwave"}static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];slug(){return"flutterwave"}formTitle(){return t$3`Flutter Wave`}shouldRegisterWebhook(){return!1}shouldTestCredentialsAfterSave(){return!1}renderFields(){return x`
            <qrcg-input
                name="${this.fieldName("public_key")}"
                placeholder="${t$3`Public Key`}"
            >
                ${t$3`Public Key`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("secret_key")}"
                placeholder="${t$3`Secret Key`}"
            >
                ${t$3`Secret Key`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("encryption_key")}"
                placeholder="${t$3`Encryption Key`}"
            >
                ${t$3`Encryption Key`}
            </qrcg-input>
        `}}window.defineCustomElement(QrcgPaymentProcessorFormFlutterwave.tag,QrcgPaymentProcessorFormFlutterwave);class QrcgPaymentProcessorFormPhonePE extends QrcgPaymentProcessorFormBase{static get tag(){return"qrcg-payment-processor-form-phonepe"}static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];slug(){return"phonepe"}formTitle(){return t$3`Phone PE`}shouldRegisterWebhook(){return!1}shouldTestCredentialsAfterSave(){return!1}getModeOptions(){return[{name:t$3`Production`,value:"production"},{name:t$3`Sandbox`,value:"sandbox"}]}renderFields(){return x`
            <qrcg-balloon-selector
                name="${this.fieldName("mode")}"
                .options=${this.getModeOptions()}
            >
                ${t$3`Mode`}
            </qrcg-balloon-selector>

            <qrcg-input
                name="${this.fieldName("client_id")}"
                placeholder="${t$3`Enter Client ID`}"
            >
                ${t$3`Client ID`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("client_secret")}"
                placeholder="${t$3`Enter Client Secret`}"
            >
                ${t$3`Client Secret`}
            </qrcg-input>

            <qrcg-input
                name="${this.fieldName("client_version")}"
                placeholder="${t$3`Enter Client Version`}"
            >
                ${t$3`Client Version`}

                <div slot="instructions">
                    ${t$3`You should receive this by email from PhonePE team before going live. Only needed when production mode is enabled.`}
                </div>
            </qrcg-input>
        `}}QrcgPaymentProcessorFormPhonePE.register();class QrcgPaymentProcessorsPage extends QrcgDashboardPage{static styles=[i$3`
            :host {
                display: block;
            }

            qrcg-tab {
                margin: 0.5rem;
            }

            .tabs {
                margin-bottom: 1rem;
            }
        `];pageTitle(){return t$3`Payment Processors`}renderContent(){return x`
            <nav class="tabs">
                <qrcg-tab tab-id="stripe" active> ${t$3`Stripe`} </qrcg-tab>
                <qrcg-tab tab-id="paypal"> ${t$3`PayPal`} </qrcg-tab>
                <qrcg-tab tab-id="payu-international">
                    ${t$3`PayU International`}
                </qrcg-tab>
                <qrcg-tab tab-id="paddle"> ${t$3`Paddle (Classic)`} </qrcg-tab>
                <qrcg-tab tab-id="paddle-billing">
                    ${t$3`Paddle (Billing)`}
                </qrcg-tab>
                <qrcg-tab tab-id="razorpay"> ${t$3`Razorpay`} </qrcg-tab>
                <qrcg-tab tab-id="mercadopago"> ${t$3`Mercado Pago`} </qrcg-tab>
                <qrcg-tab tab-id="paytr"> ${t$3`PayTR`} </qrcg-tab>
                <qrcg-tab tab-id="payfast"> ${t$3`PayFast`} </qrcg-tab>
                <qrcg-tab tab-id="xendit"> ${t$3`Xendit`} </qrcg-tab>
                <qrcg-tab tab-id="mollie"> ${t$3`Mollie`} </qrcg-tab>
                <qrcg-tab tab-id="paystack">${t$3`PayStack`}</qrcg-tab>
                <qrcg-tab tab-id="alipay-china"> ${t$3`Alipay China`} </qrcg-tab>
                <qrcg-tab tab-id="yookassa"> ${t$3`YooKassa`} </qrcg-tab>
                <qrcg-tab tab-id="paykickstart"> ${t$3`PayKickstart`} </qrcg-tab>
                <qrcg-tab tab-id="orange-bf">
                    ${t$3`Orange (Mobile Money)`}
                </qrcg-tab>
                <qrcg-tab tab-id="payu-latam"> ${t$3`PayU Latam`} </qrcg-tab>
                <qrcg-tab tab-id="2checkout"> ${t$3`2Checkout`} </qrcg-tab>
                <qrcg-tab tab-id="dintero"> ${t$3`Dintero`} </qrcg-tab>
                <qrcg-tab tab-id="fib"> ${t$3`FIB`} </qrcg-tab>
                <qrcg-tab tab-id="postfinance"> ${t$3`Post Finance`} </qrcg-tab>
                <qrcg-tab tab-id="flutterwave"> ${t$3`Flutter Wave`} </qrcg-tab>
                <qrcg-tab tab-id="phonepe"> ${t$3`PhonePE`} </qrcg-tab>
                <qrcg-tab tab-id="offline-payments">
                    ${t$3`Offline Payments`}
                </qrcg-tab>
            </nav>

            <qrcg-tab-content tab-id="stripe" active>
                <template>
                    <qrcg-payment-processor-form-stripe></qrcg-payment-processor-form-stripe>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="paypal">
                <template>
                    <qrcg-payment-processor-form-paypal></qrcg-payment-processor-form-paypal>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="payu-international">
                <template>
                    <qrcg-payment-processor-form-payu-international></qrcg-payment-processor-form-payu-international>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="paddle">
                <template>
                    <qrcg-payment-processor-form-paddle></qrcg-payment-processor-form-paddle>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="paddle-billing">
                <template>
                    <qrcg-payment-processor-form-paddle-billing></qrcg-payment-processor-form-paddle-billing>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="razorpay">
                <template>
                    <qrcg-payment-processor-form-razorpay></qrcg-payment-processor-form-razorpay>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="mercadopago">
                <template>
                    <qrcg-payment-processor-form-mercadopago></qrcg-payment-processor-form-mercadopago>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="paytr">
                <template>
                    <qrcg-payment-processor-form-paytr></qrcg-payment-processor-form-paytr>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="payfast">
                <template>
                    <qrcg-payment-processor-form-payfast></qrcg-payment-processor-form-payfast>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="xendit">
                <template>
                    <qrcg-payment-processor-form-xendit></qrcg-payment-processor-form-xendit>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="mollie">
                <template>
                    <qrcg-payment-processor-form-mollie></qrcg-payment-processor-form-mollie>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="paystack">
                <template>
                    <qrcg-payment-processor-form-paystack></qrcg-payment-processor-form-paystack>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="alipay-china">
                <template>
                    <qrcg-payment-processor-form-alipay-china></qrcg-payment-processor-form-alipay-china>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="yookassa">
                <template>
                    <qrcg-payment-processor-form-yookassa></qrcg-payment-processor-form-yookassa>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="paykickstart">
                <template>
                    <qrcg-payment-processor-form-paykickstart></qrcg-payment-processor-form-paykickstart>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="orange-bf">
                <template>
                    <qrcg-payment-processor-form-orange-bf></qrcg-payment-processor-form-orange-bf>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="payu-latam">
                <template>
                    <qrcg-payment-processor-form-payu-latam></qrcg-payment-processor-form-payu-latam>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="2checkout">
                <template>
                    <qrcg-payment-processor-form-2checkout></qrcg-payment-processor-form-2checkout>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="dintero">
                <template>
                    <qrcg-payment-processor-form-dintero></qrcg-payment-processor-form-dintero>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="fib">
                <template>
                    <qrcg-payment-processor-form-fib></qrcg-payment-processor-form-fib>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="postfinance">
                <template>
                    <qrcg-payment-processor-form-postfinance></qrcg-payment-processor-form-postfinance>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="flutterwave">
                <template>
                    <qrcg-payment-processor-form-flutterwave></qrcg-payment-processor-form-flutterwave>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="phonepe">
                <template>
                    <qrcg-payment-processor-form-phonepe></qrcg-payment-processor-form-phonepe>
                </template>
            </qrcg-tab-content>

            <qrcg-tab-content tab-id="offline-payments">
                <template>
                    <qrcg-payment-processor-form-offline-payments></qrcg-payment-processor-form-offline-payments>
                </template>
            </qrcg-tab-content>
        `}}window.defineCustomElement("qrcg-payment-processors-page",QrcgPaymentProcessorsPage);class QrcgPaymentProcessorsRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(q=>setTimeout(q,50));const w=document.createElement("qrcg-payment-processors-router");document.body.appendChild(w)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/payment-processors$"
                permission="payment-processors.manage"
            >
                <template>
                    <qrcg-payment-processors-page></qrcg-payment-processors-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-payment-processors-router",QrcgPaymentProcessorsRouter);QrcgPaymentProcessorsRouter.boot();class QrcgSubscriptionPlanDetails extends i$1{static styles=[i$3`
            :host {
                display: block;
                width: 100%;
                position: relative;
            }

            qrcg-loader {
                position: absolute;
                top: 2rem;
                right: 50%;
                transform: translateX(50%);
            }

            .item {
                display: flex;
                justify-content: space-between;
                padding: 1rem;
                border-bottom: 0.1rem var(--gray-1) dashed;
                animation: fade-in 0.5s ease;
            }

            .description {
                font-weight: bold;
            }

            @keyframes fade-in {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }
        `];static get properties(){return{planId:{attribute:"plan-id"},plan:{}}}constructor(){super(),this.loading=!0}connectedCallback(){super.connectedCallback(),this.fetchPlan()}async fetchPlan(){const{response:w}=await get("subscription-plans/"+this.planId);this.plan=await w.json(),this.loading=!1}formatNumber(w){return w==-1?t$3`Unlimited`:w}renderFeature(w="",q){return x`
            <div class="item" part="item">
                <div class="description" part="description">${q}</div>
                <div class="number" part="number">
                    ${this.formatNumber(w)}
                </div>
            </div>
        `}renderLoader(){return x`<qrcg-loader></qrcg-loader>`}render(){if(this.loading)return this.renderLoader();if(this.plan)return x`
            ${this.renderFeature(this.plan.number_of_dynamic_qrcodes,t$3`Dynamic QR Codes`)}
            ${this.renderFeature(this.plan.number_of_scans,t$3`Scans`)}
        `}}window.defineCustomElement("qrcg-subscription-plan-details",QrcgSubscriptionPlanDetails);class QrcgClientOfflinePayment extends i$1{static styles=[i$3`
            :host {
                display: flex;
                flex-direction: column;
            }

            .loader-container {
                display: flex;
                justify-content: center;
                align-items: center;
            }

            qrcg-button {
                margin-top: 1rem;
            }

            qrcg-file-input {
                margin: 0.2rem;
                margin-top: 1rem;
                max-width: initial;
            }

            .thankyou-container {
                display: flex;
                flex-direction: column;
            }

            .subscribe-instructions,
            .thankyou-message {
                display: flex;
                align-items: center;
                justify-content: center;
                margin-top: 1rem;
                animation: fade-in 0.5s ease-in both;
                background-color: var(--gray-0);
                padding: 1rem;
                border-radius: 0.5rem;
                font-size: 0.8rem;

                line-height: 1.6;
            }

            qrcg-form-comment {
                border-radius: 0.5rem;
            }

            .success-icon {
                display: none;
                width: 1.5rem;
                height: 1.5rem;
                color: var(--success-0);
                margin-right: 1rem;
            }

            .customer-instructions {
                line-height: 1.7;
                margin-bottom: 1rem;
            }

            .customer-instructions p,
            .customer-instructions ul {
                margin: 0;
            }

            .customer-instructions a {
                color: var(--primary-0);
                text-decoration: none;
            }

            @media (min-width: 800px) {
                .success-icon {
                    display: block;
                }
            }

            @keyframes fade-in {
                from {
                    opacity: 0;
                    margin-top: 0;
                }

                to {
                    opacity: 1;
                    margin-top: 1rem;
                }
            }
        `];static get properties(){return{offlinePaymentProcessor:{},planId:{attribute:"plan-id"},paymentProofId:{},paymentProofSubscribeLoading:{type:Boolean},paymentProofSent:{type:Boolean},loadingIsPaymentProofDisabled:{type:Boolean},isPaymentProofDisabled:{type:Boolean}}}constructor(){super(),this.api=QRCGApiConsumer.instance({host:this,baseRoute:"",bindEvents:!0}),this.loadingIsPaymentProofDisabled=!0}connectedCallback(){super.connectedCallback(),this.fetchofflinePaymentProcessor(),this.fetchIsPaymentProofDisabled()}disconnectedCallback(){super.disconnectedCallback()}async fetchofflinePaymentProcessor(){const w=await this.api.getRoute("payment-processors/offline-payment");this.offlinePaymentProcessor=w}renderLoader(){return u$3`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderInstructions(){return u$3`
            <div class="customer-instructions" part="customer-instructions">
                ${s$3(this.offlinePaymentProcessor.client_fields.customer_instructions)}
            </div>
        `}async fetchIsPaymentProofDisabled(){this.loadingIsPaymentProofDisabled=!0;const{json:w}=await post("payment-processors/offline-payment/forward/isPaymentProofDisabled");this.isPaymentProofDisabled=w.result,this.loadingIsPaymentProofDisabled=!1}async onPaymentProofSubscibeClick(){this.paymentProofSubscribeLoading=!0;const w={subscription_id:queryParam("subscription_id"),payment_proof_id:this.paymentProofId};await this.api.post("transactions/offline-transaction",w),this.paymentProofSent=!0}onProofOfPaymentFileInput(w){const q=w.detail.value;this.paymentProofId=q}async onContinueClick(w){const q=w.target;q.loading=!0;const{json:D}=await post("payment-processors/offline-payment/forward/skipFileUpload",{subscription_id:queryParam("subscription_id")});D.result&&(window.location=userHomePage())}renderThankYouNote(){return this.paymentProofSent?u$3`
            <div class="thankyou-container">
                <div class="thankyou-message">
                    <qrcg-icon
                        class="success-icon"
                        mdi-icon=${mdiCheckBold}
                    ></qrcg-icon>
                    ${t$3`We have received your payment proof, please wait for our confirmation email.`}
                </div>
                <qrcg-button href="${userHomePage()}">
                    ${t$3`Go to Dashboard`}
                </qrcg-button>
            </div>
        `:null}renderAttachmentInput(){if(this.paymentProofSent)return null;if(!this.isPaymentProofDisabled)return u$3`
            <qrcg-file-input
                name="proof_of_payment"
                upload-endpoint=${"transactions/upload-proof-of-payment"}
                @on-input=${this.onProofOfPaymentFileInput}
                ?disabled=${this.paymentProofSubscribeLoading}
            >
                ${t$3`Proof Of Payment`}
            </qrcg-file-input>

            ${isEmpty(this.paymentProofId)?null:u$3`
                      <div class="subscribe-instructions">
                          <qrcg-icon
                              class="success-icon"
                              mdi-icon=${mdiCheckBold}
                          ></qrcg-icon>
                          ${t$3`Uploaded successfully! Click on the button below, and wait for our confirmation email.`}
                      </div>
                  `}

            <qrcg-button
                ?disabled=${isEmpty(this.paymentProofId)}
                ?loading=${this.paymentProofSubscribeLoading}
                @click=${this.onPaymentProofSubscibeClick}
            >
                ${this.offlinePaymentProcessor.pay_button_text}
            </qrcg-button>
        `}renderContinueButton(){if(this.isPaymentProofDisabled)return u$3`
            <qrcg-button @click=${this.onContinueClick}>
                ${t$3`Continue`}
            </qrcg-button>
        `}render(){return!this.offlinePaymentProcessor||this.loadingIsPaymentProofDisabled?this.renderLoader():u$3`
            ${this.renderInstructions()}
            <!-- -->
            ${this.renderThankYouNote()}
            <!-- -->
            ${this.renderAttachmentInput()}
            <!--  -->
            ${this.renderContinueButton()}
        `}}window.defineCustomElement("qrcg-client-offline-payment",QrcgClientOfflinePayment);class QrcgBodyResolver extends i$1{static EVENT_DASHBOARD_BUNDLE_READY="qrcg-body-resolver::dashboard-bundle-ready";static styles=[i$3`
            :host {
                display: none;
            }
        `];static unresolve(){document.body.classList.remove("resolved")}static async boot(){for(await sleep(0);!document.body;)await sleep(1);const w=document.createElement("qrcg-body-resolver");document.body.appendChild(w)}connectedCallback(){super.connectedCallback(),document.body.classList.add("resolved"),setTimeout(()=>{window.dispatchEvent(new CustomEvent(QrcgBodyResolver.EVENT_DASHBOARD_BUNDLE_READY))}),this.remove()}}window.defineCustomElement("qrcg-body-resolver",QrcgBodyResolver);QrcgBodyResolver.boot();class QrcgOrangeBFClientSuccess extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            h3 {
                color: var(--primary-0);
                text-align: center;
                line-height: 1.3;
                font-weight: normal;
            }

            .details {
                display: flex;
                flex-direction: column;
                border-top: 0.2rem var(--primary-0) solid;
                border-bottom: 0.2rem var(--primary-0) solid;
                border-radius: 0.5rem;
            }

            .item {
                display: flex;
                justify-content: space-between;
                padding: 1rem;
            }

            .item:not(:last-child) {
                border-bottom: 1px solid var(--gray-1);
            }

            .key {
                color: var(--gray-2);
            }

            .value {
                font-weight: bold;
                color: var(--dark);
            }

            .login-button {
                margin: auto;
                margin-top: 1rem;
                align-self: center;
            }

            .button-container {
                display: flex;
            }
        `];static get properties(){return{plan_name:{},amount:{},transaction_id:{},subscription_id:{}}}render(){return x`
            <h3>${t$3`The payment was successfully completed.`}</h3>

            <div class="details">
                <div class="item">
                    <div class="key">${t$3`Plan`}</div>
                    <div class="value">${this.plan_name}</div>
                </div>

                <div class="item">
                    <div class="key">${t$3`Amount`}</div>
                    <div class="value">${price(this.amount)}</div>
                </div>

                <div class="item">
                    <div class="key">${t$3`Transaction ID`}</div>
                    <div class="value">${this.transaction_id}</div>
                </div>

                <div class="item">
                    <div class="key">${t$3`Subscription ID`}</div>
                    <div class="value">${this.subscription_id}</div>
                </div>
            </div>

            <div class="button-container">
                <qrcg-button href="/account/login" class="login-button">
                    ${t$3`Login`}
                </qrcg-button>
            </div>
        `}}window.defineCustomElement("qrcg-orange-bf-client-success",QrcgOrangeBFClientSuccess);class OrangeBFPaymentClient extends i$1{api=new QRCGApiConsumer(this);static styles=[i$3`
            :host {
                display: block;
            }

            [name] {
                margin-bottom: 1rem;
            }

            qrcg-orange-bf-client-success {
                animation: fade-in 2s ease both;
            }

            @keyframes fade-in {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }
        `];static get properties(){return{subscriptionId:{attribute:"subscription-id"},amount:{},data:{},success:{},transaction_id:{},plan_name:{}}}constructor(){super(),this.data={}}connectedCallback(){super.connectedCallback(),this.addEventListener("keyup",this.listenEnter),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keyup",this.listenEnter),this.removeEventListener("on-input",this.onInput)}onInput(w){this.data={...this.data,[w.detail.name]:w.detail.value}}listenEnter=w=>{w.key==="Enter"&&this.submit()};updated(w){w.has("subscriptionId")&&(this.data={...this.data,subscriptionId:this.subscriptionId})}async submit(){const w=await this.api.post("payment-processors/orange-bf/forward/verifyOtp",this.data);w.success&&(this.success=!0,this.plan_name=w.plan_name,this.transaction_id=w.transaction_id)}render(){return this.success?x`
                <qrcg-orange-bf-client-success
                    amount=${this.amount}
                    subscription_id=${this.subscriptionId}
                    transaction_id=${this.transaction_id}
                    plan_name=${this.plan_name}
                ></qrcg-orange-bf-client-success>
            `:x`
            <qrcg-mobile-input name="mobile_number">
                ${t$3`Mobile Number`}
            </qrcg-mobile-input>

            <qrcg-input name="otp" placeholder="${t$3`Enter OTP here.`}">
                ${t$3`OTP`}
                <div slot="instructions">
                    ${t$3`Dial`}
                    <strong> *144*4*6*${this.amount}# </strong>
                </div>
            </qrcg-input>

            <qrcg-button type="submit" @click=${this.submit}>
                ${t$3`Submit`}
            </qrcg-button>
        `}}window.defineCustomElement("qrcg-client-orange-bf",OrangeBFPaymentClient);class QrcgDynamicBioLinkBlockFieldModal extends ImageListModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];renderFileInput(){return x`
            <qrcg-file-input
                name="icon_id"
                upload-endpoint="dynamic-biolink-blocks/store-file"
            >
                ${t$3`Icon`}
                <div slot="instructions">${t$3`Recommended size`} 200x200</div>
            </qrcg-file-input>
        `}renderInputs(){return x`
            <qrcg-input name="name" placeholder=${t$3`Name`}>
                ${t$3`Name`}
            </qrcg-input>

            <qrcg-input name="placeholder" placeholder=${t$3`Placeholder`}>
                ${t$3`Placeholder`}
            </qrcg-input>

            <qrcg-balloon-selector
                name="type"
                .options=${[{name:t$3`Text`,value:"text"},{name:t$3`Text Area`,value:"textarea"},{name:t$3`Image`,value:"image"},{name:t$3`Custom Code`,value:"custom-code"}]}
            >
                ${t$3`Type. Default: (Text).`}
            </qrcg-balloon-selector>
        `}}window.defineCustomElement("qrcg-dynamic-biolink-block-field-modal",QrcgDynamicBioLinkBlockFieldModal);class QrcgDynamicBioLinkBlockFieldInput extends ImageListInput{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{...super.properties}}emptyMessageText(){return t$3`There is no fields. Click on Add Field button below.`}addItemText(){return t$3`Add Field`}openItemModal(w){return QrcgDynamicBioLinkBlockFieldModal.open({data:w})}getItemImageId(w){return w.icon_id}}window.defineCustomElement("qrcg-dynamic-biolink-block-field-input",QrcgDynamicBioLinkBlockFieldInput);class QrcgDynamicBiolinkBlockForm extends QrcgDashboardForm{constructor(){super({apiBaseRoute:"dynamic-biolink-blocks"})}renderBlockDetailsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Block Details`}</h2>

                <qrcg-input name="name" placeholder="${t$3`Block name`}">
                    ${t$3`Name`}
                </qrcg-input>

                <qrcg-file-input
                    name="icon_id"
                    upload-endpoint="dynamic-biolink-blocks/store-file"
                >
                    ${t$3`Icon`}
                </qrcg-file-input>
            </qrcg-form-section>
        `}renderFieldsSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Fields`}</h2>

                <qrcg-dynamic-biolink-block-field-input name="fields">
                </qrcg-dynamic-biolink-block-field-input>
            </qrcg-form-section>
        `}renderCustomCodeSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Custom Code`}</h2>

                <qrcg-code-input name="custom_code">
                    <div slot="instructions">
                        ${t$3`Added on every Bio Link page where this dynamic block is inlcuded.`}
                    </div>
                    <div>${t$3`Custom Code`}</div>
                </qrcg-code-input>
            </qrcg-form-section>
        `}renderFormFields(){return x`
            ${this.renderBlockDetailsSection()}
            <!-- -->
            ${this.renderFieldsSection()}
            <!-- -->
            ${this.renderCustomCodeSection()}
        `}}window.defineCustomElement("qrcg-dynamic-biolink-block-form",QrcgDynamicBiolinkBlockForm);class QrcgDynamicBiolinkBlockFormPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-dynamic-biolink-block-form
                    slot="content"
                ></qrcg-dynamic-biolink-block-form>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-dynamic-biolink-block-form-page",QrcgDynamicBiolinkBlockFormPage);class QrcgDynamicBiolinkBlockList extends QRCGDashboardList{constructor(){super({baseRoute:"dynamic-biolink-blocks",singularRecordName:"Dynamic Biolink Block",frontendFormUrl:null})}static listColumns=[{key:"id",label:"ID",width:"2rem"},{key:"name",label:"Name"},{key:"actions",label:"Actions",width:"7rem"}]}window.defineCustomElement("qrcg-dynamic-biolink-block-list",QrcgDynamicBiolinkBlockList);class QrcgDynamicBiolinkBlockListPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-button
                    slot="header-actions"
                    href="/dashboard/dynamic-biolink-blocks/new"
                    >${t$3`Create`}</qrcg-button
                >
                <qrcg-dynamic-biolink-block-list
                    slot="content"
                ></qrcg-dynamic-biolink-block-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-dynamic-biolink-block-list-page",QrcgDynamicBiolinkBlockListPage);class QrcgDynamicBiolinkBlockRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w));document.body.appendChild(new QrcgDynamicBiolinkBlockRouter)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/dynamic-biolink-blocks$"
                permission="dynamic-biolink-block.list-all"
            >
                <template>
                    <qrcg-dynamic-biolink-block-list-page></qrcg-dynamic-biolink-block-list-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route
                route="/dashboard/dynamic-biolink-blocks/new|/dashboard/dynamic-biolink-blocks/edit/(?<id>\\d+)"
                permission="dynamic-biolink-block.update-any"
            >
                <template>
                    <qrcg-dynamic-biolink-block-form-page></qrcg-dynamic-biolink-block-form-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-dynamic-biolink-block-router",QrcgDynamicBiolinkBlockRouter);QrcgDynamicBiolinkBlockRouter.boot();class QrcgAccountCreditCartView extends i$1{#e=new QrcgAccountCreditCart;static styles=[i$3`
            :host {
                display: block;
                font-size: 1.3rem;
                user-select: none;
                -webkit-user-select: none;
            }

            .container {
                max-width: 800px;
                margin: auto;
            }

            .checkout-container {
                margin-top: 2rem;
                border-radius: 1rem;
                padding: 1rem;
            }

            .item {
                display: flex;
                align-items: center;
                padding: 1rem 0;
                font-weight: bold;
                border-bottom: 1px solid var(--gray-1);
            }

            .qrcode-icon {
                width: 5rem;
                height: 5rem;
                color: var(--primary-0);
                margin-right: 1rem;
            }

            .item.dynamic .qrcode-icon {
                color: var(--primary-1);
            }

            .unit-price {
                color: var(--gray-2);
                margin-top: 0.5rem;
                display: flex;
                align-items: center;
                font-size: 1rem;
            }

            .type-badge {
                display: inline-block;
                font-size: 0.8rem;
                padding: 0.25rem 0.45rem;
                background-color: var(--gray-1);
                border-radius: 0.5rem;
                color: black;
                margin-right: 0.5rem;
                /* opacity: 0.5; */
            }

            .dynamic .type-badge {
                color: white;
                background-color: var(--primary-1);
            }

            .static .type-badge {
                color: white;
                background-color: var(--primary-0);
            }

            .item .name {
                margin-right: auto;
            }

            .number {
                display: flex;
                flex-direction: column;
                margin-right: 1rem;
            }

            .number qrcg-icon {
                width: 2rem;
                height: 2rem;
                color: var(--gray-2);
                cursor: pointer;
            }

            .number {
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .totals {
                display: flex;
                padding: 1rem 0;
            }

            .body {
            }

            .totals {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .unit-price {
                font-weight: normal;
            }
            .subtotal {
                font-size: 2rem;
                margin-left: auto;

                font-weight: normal;
            }

            .credit-available {
                display: flex;
                padding: 1rem 0;
                justify-content: space-between;
                align-items: center;
            }

            .credit-available-text {
                margin-right: auto;
            }

            .credit-available-amount {
                display: flex;
                align-items: center;
            }

            qrcg-account-balance.gt-zero {
                color: var(--success-0);
            }

            .footer-label {
                /* color: var(--gray-2); */
                font-weight: bold;
                font-size: 1rem;
            }

            .pay-button {
                margin-top: 2rem;
            }

            .remove-item {
                color: var(--danger);
                font-size: 0.8rem;
                text-decoration: underline;
                text-align: center;
                margin-top: 0.5rem;
                cursor: pointer;
            }

            .empty-message {
                padding: 1rem;
                background-color: var(--gray-0);
                color: var(--gray-2);
                text-align: center;
            }
        `];connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.#t),document.addEventListener("qrcg-account-credit-cart:on-change",this.onCartChanged)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.#t),document.removeEventListener("qrcg-account-credit-cart:on-change",this.onCartChanged)}onCartChanged=()=>{this.requestUpdate()};#t=w=>{const q=w.composedPath()[0];let D=null;(D=parentMatches(q,".increase-quantity"))&&this.#e.increaseQuantity(D.item),(D=parentMatches(q,".decrease-quantity"))&&this.#e.decreaseQuantity(D.item),(D=parentMatches(q,".remove-item"))&&this.#e.removeItem(D.item)};renderItem(w){return x`
            <div class="item ${w.isDynamic?"dynamic":"static"}">
                <div class="number">
                    <qrcg-icon
                        mdi-icon=${mdiMenuUp}
                        class="increase-quantity"
                        .item=${w}
                    ></qrcg-icon>
                    <span class="text">${w.quantity}</span>
                    <qrcg-icon
                        mdi-icon=${mdiMenuDown}
                        class="decrease-quantity"
                        .item=${w}
                    ></qrcg-icon>
                </div>

                <qrcg-icon
                    class="qrcode-icon"
                    mdi-icon=${mdiQrcode}
                ></qrcg-icon>

                <div class="name-price">
                    <div class="name">${w.name}</div>

                    <div class="unit-price">
                        <span class="type-badge">
                            ${w.isDynamic?t$3`dynamic`:t$3`static`}
                        </span>

                        ${price(w.price)} ${t$3`per item`}
                    </div>
                </div>

                <div class="subtotal">
                    ${price(w.price*w.quantity)}

                    <div class="remove-item" .item=${w}>${t$3`remove`}</div>
                </div>
            </div>
        `}renderEmptyMessage(){return x`
            <div class="container">
                <div class="checkout-container">
                    <div class="empty-message">
                        ${t$3`You do not have any items in your shopping cart.`}
                    </div>
                </div>
            </div>
        `}async onPayClick(){this.loading=!0,await QrcgAccountCreditCheckout.generatePayLinkAndGo(this.#e.amountToPay())||(this.loading=!1)}render(){return isEmpty(this.#e.data.items)?this.renderEmptyMessage():x`
            <div class="container">
                <div class="checkout-container">
                    <div class="body">
                        <div class="items">
                            ${this.#e.items().map(w=>this.renderItem(w))}
                        </div>

                        <div class="totals">
                            <div class="footer-label">${t$3`Total`}</div>

                            <div class="total-amount">
                                ${price(this.#e.total())}
                            </div>
                        </div>

                        <div class="credit-available">
                            <div class="footer-label">
                                ${t$3`Available Credit`}
                            </div>

                            <div class="credit-available-amount">
                                <qrcg-account-balance></qrcg-account-balance>
                            </div>
                        </div>

                        <div class="totals">
                            <div class="footer-label">${t$3`Amount to Pay`}</div>

                            <div class="total-amount">
                                ${price(this.#e.amountToPay())}
                            </div>
                        </div>
                    </div>
                    <qrcg-button class="pay-button" @click=${this.onPayClick}>
                        ${t$3`Pay With PayPal`}
                    </qrcg-button>
                </div>
            </div>
        `}}window.defineCustomElement("qrcg-account-credit-cart-view",QrcgAccountCreditCartView);class QrcgAccountCreditCartRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w));document.body.appendChild(new QrcgAccountCreditCartRouter)}render(){if(!ConfigHelper.bundleIsBuild())return x`
            <qrcg-route route="/account-credit-cart">
                <template>
                    <qrcg-account-credit-cart-view></qrcg-account-credit-cart-view>
                </template>
            </qrcg-route>
        `}}window.defineCustomElement("qrcg-account-credit-cart-router",QrcgAccountCreditCartRouter);QrcgAccountCreditCartRouter.boot();class QrcgBulkOperationInstanceNameModal extends QrcgModal{static styles=[super.styles,i$3`
            :host {
                display: block;
            }
        `];static get properties(){return{...super.properties,operationInstance:{}}}resolvedData(){return!0}async affiramtivePromise(){if(isEmpty(this.#e())){console.log("name is empty",this.#e());const D=t$3`Instance name is required`;throw showToast(D),new Error(D)}const w={name:this.#e()},q=`bulk-operations/edit-instance-name/${this.operationInstance.id}`;await post(q,w)}#e(){return this.shadowRoot.querySelector('[name="name"]')?.value}renderTitle(){return t$3`Edit Name`}renderBody(){return x`
            <qrcg-input name="name" .value=${this.operationInstance.name}>
                ${t$3`Instance Name`}
            </qrcg-input>
        `}}window.defineCustomElement("qrcg-bulk-operation-instance-name-modal",QrcgBulkOperationInstanceNameModal);const style$B=":host{display:block}.instance{border:1px solid var(--gray-1);border-radius:.5rem;padding:.5rem 1rem;margin-bottom:1rem;display:flex;align-items:center;flex-wrap:wrap;gap:.5rem}@media(max-width:900px){.instance{flex-direction:column;align-items:flex-start}.instance>*{margin:.5rem 0}}.instance-id{font-size:.8rem;padding:.1rem;margin-right:1rem;font-weight:700}.instance-date{width:10rem;font-size:.8rem}.instance-name{display:flex;align-items:center}.edit-instance-name-icon{margin-left:1rem;padding:.25rem;cursor:pointer;width:1.6rem;height:1.6rem}.instance-progress{margin-right:1rem;font-size:.8rem}.push{flex:1}.badge{background-color:var(--gray-0);font-size:.8rem;padding:.25rem .5rem;border-radius:.25rem}.badge.warning{background-color:var(--warning-0);color:#000}.badge.success{background-color:var(--success-0);color:#fff}.instance-status{margin-right:1rem}.no-instances-message{padding:1rem;text-align:center;background-color:var(--gray-0);color:var(--gray-2)}.instances-section .section-title{position:relative}.instances-loading-container{position:absolute;top:0;right:0;z-index:1;transform:scale(.5);top:-1rem}.instances-container{position:relative;user-select:none;-webkit-user-select:none;margin-bottom:7rem}.instance-actions{display:flex;align-items:center;margin-left:1rem;flex-wrap:wrap;gap:.5rem}@media(min-width:900px){.instance-actions{gap:1rem}}.instance-actions .action{cursor:pointer;color:var(--primary-0);font-size:1rem;font-weight:700}@media(min-width:900px){.instance-actions .action{font-size:.8rem}}.instance-actions .action:hover{text-decoration:underline}.instructions{padding:1rem;background-color:var(--gray-0);margin-bottom:1rem;line-height:1.7}.instructions a{color:var(--primary-0)}.variables-container{margin:1rem 0;font-size:.8rem;padding:.5rem;background-color:#fff}.var-container{display:flex}.var-name{margin-right:1rem;font-weight:700}.actions-trigger{align-self:center;margin-inline-start:1rem}.actions-trigger::part(button){border:1px solid var(--gray-2);padding:.35rem}.actions-trigger qrcg-icon{margin:0;color:var(--dark);width:1.2rem;height:1.2rem}",actionStyles=".actions{display:flex;flex-direction:column;padding-top:.5rem}.action{display:flex;align-items:center;gap:.5rem;cursor:pointer;padding:.55rem 1rem;color:var(--dark);text-decoration:none;font-size:.9rem}.action:hover{text-decoration:none;background-color:var(--gray-0)}.action:hover qrcg-icon,.action:hover::part(icon){color:var(--dark)}.action qrcg-icon,.action::part(icon){color:var(--gray-2)}";class BaseOperation extends BaseComponent{static styleSheets=[...super.styleSheets,style$B];static get properties(){return{data:{},mode:{},instances:{type:Array},instancesLoading:{type:Boolean}}}static get tag(){return`qrcg-${this.type()}`}static type(){throw new Error("Must be defined in child")}static name(){throw new Error("Must be defined in child")}constructor(){super(),this.data={},this.mode="form",this.instances=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput),document.addEventListener(this.onInstanceCreatedEventName(),this.onInstanceCreated),this.addEventListener("click",this.onClick),this.bindRealTimeInstanceUpdates()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput),document.removeEventListener(this.onInstanceCreatedEventName(),this.onInstanceCreated),this.removeEventListener("click",this.onClick),this.disconnectRealTimeInstanceUpdates()}updated(w){w.has("mode")&&this.mode==="instances"&&this.fetchInstances()}onClick=w=>{const q=w.composedPath()[0],D=parentMatches(q,".action");D&&this.onActionClick(D.getAttribute("action-id"),D.instance);const Q=parentMatches(q,".edit-instance-name-icon");if(Q)return this.onEditInstanceNameClick(Q)};async onEditInstanceNameClick(w){const{operationInstance:q}=w;await QrcgBulkOperationInstanceNameModal.open({operationInstance:q}),this.fetchInstances()}onActionClick(w,q){}onInput=w=>{w.detail.name===this.operationCreationFileInputName()&&this.fireOnInstanceCreatedEvent()};onInstanceCreated=()=>{this.fetchInstances()};fireOnInstanceCreatedEvent(){document.dispatchEvent(new CustomEvent(this.onInstanceCreatedEventName()))}bindRealTimeInstanceUpdates(){this.__instanceUpdatesInterval=setInterval(()=>{this.fetchInstances()},2e3)}disconnectRealTimeInstanceUpdates(){clearTimeout(this.__instanceUpdatesInterval)}async fetchInstances(){this.instancesLoading=!0;try{const{response:w}=await get(this.instancesRoute());this.instances=await w.json()}catch{}this.instancesLoading=!1}async fetchInstanceResults(w){const{response:q}=await get("bulk-operations/instance-results/"+w.id);return await q.json()}onInstanceCreatedEventName(){return`${this.constructor.tag}:instance-created`}createRoute(){return`bulk-operations/${this.constructor.type()}/create`}instancesRoute(){return`bulk-operations/${this.constructor.type()}/instances`}operationCreationFileInputName(){return"operation_creation_input"}onActionTriggerClick(w){const q=w.composedPath()[0],D=parentMatches(q,"qrcg-button");QrcgDropdown.withTarget(D).withContent(()=>this.renderExtraActions(D.instance)).withBindPoint(QrcgDropdown.BIND_POINT_BOTTOM_RIGHT).withContentStyles(actionStyles).withOnClickHandler(this.onClick).open()}getVariables(){return{}}hasVariables(){return Object.keys(this.getVariables()).length>0}time(w){return new Date(w).toLocaleString()}renderFormFields(){}renderInstructions(){}renderVariablesInstructionsMessage(){throw new Error("You must define renderVariablesInstructionsMessage in child operation")}renderVariablesInstructions(){if(this.hasVariables())return x`
            <div class="variables-container">
                ${this.renderVariablesInstructionsMessage()}
                ${this.renderVariables()}
            </div>
        `}renderVariables(){return Object.keys(this.getVariables()).map(w=>x`
                <div class="var-container">
                    <div class="var-name">${w}</div>
                    <div class="var-description">
                        ${this.getVariables()[w]}
                    </div>
                </div>
            `)}renderForm(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Create New`}</h2>

                ${this.renderInstructions()}

                <!-- -->

                ${this.renderFormFields()}
            </qrcg-form-section>
        `}renderInstancesSection(){return x`
            <qrcg-form-section class="instances-section">
                <h2 class="section-title">${t$3`Instances`}</h2>

                <div class="instances-container">
                    <!-- -->
                    ${this.renderInstances()}
                </div>
            </qrcg-form-section>
        `}renderInstance(w){const q=e$1({warning:w.status==="running",success:w.status==="completed"});return x`
            <div class="instance">
                <div class="instance-id">${w.id}</div>

                <div class="instance-name">
                    ${w.name}

                    <qrcg-icon
                        mdi-icon=${mdiSquareEditOutline}
                        class="edit-instance-name-icon"
                        .operationInstance=${w}
                    ></qrcg-icon>
                </div>

                <div class="push"></div>

                <div class="instance-progress">${w.progress}</div>

                <div class="instance-status badge ${q}">
                    ${w.status}
                </div>

                <div class="instance-date">
                    ${this.time(w.created_at)}
                </div>

                <div class="instance-actions">
                    ${this.renderMainActions(w)}

                    <!--  -->
                    ${this.renderActionTrigger(w)}
                </div>
            </div>
        `}renderActionTrigger(w,q=""){return x`
            <qrcg-button
                class="elegant actions-trigger ${q}"
                @click=${this.onActionTriggerClick}
                .instance=${w}
            >
                <qrcg-icon mdi-icon=${mdiDotsHorizontal}> </qrcg-icon>
            </qrcg-button>
        `}renderMainActions(w){}renderExtraActions(w){}renderInstances(){return isEmpty(this.instances)?x`
                <div class="no-instances-message">
                    ${t$3`There is no running instances of this operation`}
                </div>
            `:x`
            ${this.instances.map(w=>this.renderInstance(w))}
        `}render(){if(this.mode==="form")return x` ${this.renderForm()} `;if(this.mode==="instances")return x`
                <!-- -->
                ${this.renderInstancesSection()}
            `}}const style$A="";class PrintOptionsModal extends QrcgModal{static tag="qrcg-print-options-modal";static styleSheets=[...super.styleSheets,style$A];get data(){try{return JSON.parse(localStorage[this.tagName])}catch{return{}}}set data(w){localStorage[this.tagName]=JSON.stringify(w)}resolvedData(){const w=this.$$("[name]").reduce((q,D)=>(q[D.name]=D.value,q),{});return this.data=w,w}onAfterOpen(){this.syncInputs()}syncInputs(){Object.keys(this.data).forEach(w=>{const q=this.$("[name="+w+"]");q.value=this.data[w]})}renderTitle(){return t$3`Print Settings`}renderBody(){return x`
            <qrcg-input
                name="page_width"
                type="number"
                min="1"
                step="1"
                placeholder=${t$3`Enter page width`}
            >
                ${t$3`Page Width (cm)`}
            </qrcg-input>

            <qrcg-input
                name="page_height"
                type="number"
                min="1"
                step="1"
                placeholder=${t$3`Enter page height`}
            >
                ${t$3`Page Height (cm)`}
            </qrcg-input>

            <qrcg-input
                name="qrcode_width"
                type="number"
                min="1"
                step="0.1"
                placeholder=${t$3`Enter QR code width`}
            >
                ${t$3`QR Code Width (cm)`}
            </qrcg-input>

            <qrcg-input
                name="qrcode_height"
                type="number"
                min="1"
                step="0.1"
                placeholder=${t$3`Enter QR code height`}
            >
                ${t$3`QR Code Height (cm)`}
            </qrcg-input>

            <qrcg-input
                name="grid_gap"
                type="number"
                min="1"
                step="0.1"
                placeholder=${t$3`Enter grid gap`}
            >
                ${t$3`Grid Gap (cm)`}
            </qrcg-input>

            <qrcg-input
                name="cutline_margin"
                type="number"
                min="1"
                step="0.1"
                placeholder=${t$3`Enter grid gap`}
            >
                ${t$3`Cutline Margin (mm)`}
            </qrcg-input>

            <qrcg-color-picker name="qrcode_background_color">
                ${t$3`QR Code Background Color`}
            </qrcg-color-picker>
        `}}PrintOptionsModal.register();const style$z=".processing-container{margin-top:1rem;margin-inline-end:1rem;padding:0 1rem;display:flex;gap:1rem;align-items:center;border:1px solid var(--gray-1);border-radius:.5rem;justify-content:center}qrcg-loader{transform:scale(.5);transform-origin:center}.download-container{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.5rem;animation:reveal-download-container .3s ease both}.download-container qrcg-icon.success{width:2rem;height:2rem;color:#4caf50}.download-container p{margin:0}.download-container a{cursor:pointer}@keyframes reveal-download-container{0%{opacity:0;transform:translateY(1rem)}to{opacity:1;transform:translateY(0)}}";class CutcontourModal extends QrcgModal{static tag="qrcg-cutcontour-modal";static styleSheets=[...super.styleSheets,style$z];static get properties(){return{...super.properties,fileId:{},resultUrl:{},isProcessing:{type:Boolean}}}constructor(){super(),this.fileId=null,this.resultUrl=null,this.isProcessing=!1}onFileUploaded(w){this.fileId=w.detail.value,this.processUploadedFile()}async processUploadedFile(){this.isProcessing=!0;const{json:w}=await post("bulk-operations/process-cut-contour/"+this.fileId);this.resultUrl=w.url,this.isProcessing=!1}renderAffirmativeAction(){}getNegativeText(){return t$3`Close`}renderTitle(){return t$3`Inject Cut Contour`}renderProcessingStatus(){if(!isEmpty(this.fileId)&&this.isProcessing)return x`
            <div class="processing-container">
                <!--  -->
                <div class="text">${t$3`Processing ...`}</div>

                <qrcg-loader></qrcg-loader>
            </div>
        `}renderDownloadButton(){if(!isEmpty(this.fileId)&&!this.isProcessing&&this.resultUrl)return x`
            <div class="download-container">
                <qrcg-icon mdi-icon=${mdiCheckBold} class="success"></qrcg-icon>
                <p>${t$3`Your file is ready`}</p>
                <qrcg-button
                    class="elegant"
                    target="_blank"
                    href=${this.resultUrl}
                >
                    <qrcg-icon mdi-icon=${mdiDownload}></qrcg-icon>
                    ${t$3`Download Now`}
                </qrcg-button>
            </div>
        `}renderFileInput(){if(!isNotEmpty(this.fileId))return x`
            <qrcg-file-input
                name="pdf_file"
                accept="pdf"
                @on-input=${this.onFileUploaded}
            >
                <!--  -->
                ${t$3`PDF File`}
                <div slot="instructions">
                    ${t$3`Upload the file you have downloaded from the print screen.`}
                </div>
            </qrcg-file-input>
        `}renderBody(){return x`
            ${this.renderFileInput()}
            <!--  -->

            ${this.renderProcessingStatus()}

            <!--  -->

            ${this.renderDownloadButton()}
        `}}CutcontourModal.register();class QrcgImportUrlQRCodesOperation extends BaseOperation{static name(){return t$3`Import QR Codes`}static type(){return"import-url-qrcodes"}connectedCallback(){super.connectedCallback()}getExportSize(){const w=Config.get("bulk_operation.export-qrcode-size");return isEmpty(w)||isNaN(w)?2024:w}shouldRenderPrintAction(){return window.location.host.match("highsocietyhq.com")?!0:new Date().getTime()>1762006765904||ConfigHelper.isLocal()}async downloadPNG(w){const q=await this.fetchInstanceResults(w);for(const D of q)try{const{response:Q}=await get(`qrcodes/${D.id}`),O=await Q.json();await new QRCGDownloadQRCode().downloadPng(O,this.getExportSize())}catch{console.log("Cannot download QR code image [id = "+D.id+"]")}}exportCsv(w){window.location=url("/api/bulk-operations/export-csv/"+w.id)}async reRun(w){try{await confirm$1({message:t$3`This will only queue missing lines from the end of the csv file, it will not start the process immediatly but it will add missing lines to the jobs table. ONLY EXECUTE WHEN JOBS TABLE IN THE DATABASE IS EMPTY`})}catch{return}try{await post(`bulk-operations/${w.id}/re-run`),showToast(t$3`Instance queued successfully`)}catch{showToast(t$3`Error rerunning instance`)}}async deleteInstance(w){try{await confirm$1({message:t$3`Are you sure to delete this insance? This cannot be undone. Generated QR Codes won't be affected.`})}catch{return}try{await destroy(`bulk-operations/${w.id}`),showToast(t$3`Insance deleted successfully`)}catch{showToast(t$3`Error deleting instance`)}}async deleteAllQRCodes(w){try{await confirm$1({message:t$3`Are you sure to delete all QR codes of this instance? This cannot be undone.`})}catch{return}try{await destroy(`bulk-operations/${w.id}/all-qrcodes`),showToast(t$3`Insance deleted successfully`)}catch{showToast(t$3`Error deleting instance`)}}injectCutContour(){CutcontourModal.open()}onActionClick(w,q){switch(w){case"download-png":return this.downloadPNG(q);case"export-csv":return this.exportCsv(q);case"inject-cutcontour":return this.injectCutContour(q);case"re-run":return this.reRun(q);case"delete":return this.deleteInstance(q);case"delete-all-qrcodes":return this.deleteAllQRCodes(q);case"print":return this.onPrintClick(q)}}async onPrintClick(w){const q=await PrintOptionsModal.open();q.signature=w.print_signature;const D=new URLSearchParams(q).toString();openLinkInNewTab("/bulk-operations/print-instance/"+w.id+"?"+D)}getVariables(){return{QRCODE_SLUG:t$3`The unique slug which is assigned to the QR code.`,QRCODE_ID:t$3`ID of the QR code.`,RANDOM_PINCODE:t$3`Generates Random PIN Code.`}}renderVariablesInstructionsMessage(){return t$3`You can use the following variables in the destination URL:`}renderInstructions(){return x`
            <div class="instructions">
                ${t$3`Bulk import QR codes, work for either inserting new records or modifying existing records.`}

                <!-- -->

                ${this.renderVariablesInstructions()}

                <a href="${this.csvSampleUrl()}" target="_blank">
                    ${t$3`Download sample CSV file.`}
                </a>
            </div>
        `}csvSampleUrl(){return url(`/api/bulk-operations/${this.constructor.type()}/csv-sample`)}renderInjectCutContourAction(w){if(this.shouldRenderPrintAction())return x`
            <div
                class="action"
                .instance=${w}
                action-id="inject-cutcontour"
            >
                ${t$3`Inject CutContour`}
            </div>
        `}renderExtraActions(w){return x`
            <div class="action" .instance=${w} action-id="download-png">
                ${t$3`Download PNG`}
            </div>

            <div class="action" .instance=${w} action-id="re-run">
                ${t$3`Re-Run`}
            </div>

            ${this.renderInjectCutContourAction(w)}

            <div class="action" .instance=${w} action-id="delete">
                ${t$3`Delete Bulk Operation`}
            </div>

            <div
                class="action"
                .instance=${w}
                action-id="delete-all-qrcodes"
            >
                ${t$3`Delete All QR Codes`}
            </div>
        `}renderPrintAction(w){if(this.shouldRenderPrintAction())return x`
            <div class="action" .instance=${w} action-id="print">
                ${t$3`Print`}
            </div>
        `}renderMainActions(w){return x`
            <div class="action" .instance=${w} action-id="export-csv">
                ${t$3`Export CSV`}
            </div>

            ${this.renderPrintAction(w)}
        `}renderFormFields(){return x`
            <qrcg-file-input
                upload-endpoint=${this.createRoute()}
                accept=".csv"
                name="${this.operationCreationFileInputName()}"
            >
                ${t$3`CSV File`}
            </qrcg-file-input>
        `}}QrcgImportUrlQRCodesOperation.register();class BulkOperationsManager{static#e=[];static registerOperation(w){this.#e.push(w)}static#t(w,q){return u$3`
            <qrcg-tab tab-id=${w.type()} ?active=${q===0}>
                ${w.name()}
            </qrcg-tab>
        `}static renderTabs(){return u$3`
            <nav class="tabs">
                ${this.#e.map((w,q)=>this.#t(w,q))}
            </nav>
        `}static renderForms(){return this.#e.map(w=>{const q=w.tag,D=s$3(`<${q} mode="form"></${q}>`),Q=s$3(`<${q} mode="instances"></${q}>`);return u$3`
                <qrcg-tab-content tab-id="${w.type()}">
                    <template> ${D} ${Q} </template>
                </qrcg-tab-content>
            `})}}BulkOperationsManager.registerOperation(QrcgImportUrlQRCodesOperation);class QrcgBulkOperationTeaser extends i$1{static styles=[i$3`
            :host {
                display: block;
            }

            * {
                box-sizing: border-box;
            }

            iframe {
                margin: 2rem auto;
                display: block;
            }

            .instructions {
                display: flex;
                align-items: center;
            }

            qrcg-button {
                margin-left: auto;
            }

            qrcg-button::part(button) {
                width: max-content;
            }

            p {
                margin: 0;
                margin-right: 1rem;
            }

            .iframe-container {
                position: relative;
                overflow: hidden;
                width: 100%;
                padding-top: 56.25%; /* 16:9 Aspect Ratio (divide 9 by 16 = 0.5625) */
            }

            /* Then style the iframe to fit in the container div with full height and width */
            iframe {
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0;
                right: 0;
                width: 100%;
                height: 100%;
            }

            @media (max-width: 900px) {
                .instructions {
                    flex-direction: column;
                }

                .instructions qrcg-button {
                    margin-top: 1.5rem;
                    margin-left: auto;
                    margin-right: auto;
                }

                p {
                    margin: 0;
                }
            }
        `];getEnv(){return ConfigHelper.isDemo()?"Demo":"Regular License"}getLabel(){return ConfigHelper.isDemo()?"Feature Disabled":"Upgrade Required"}renderUpgradeButton(){const w=ConfigHelper.isDemo()?"Buy Now":"Upgrade Now";return x`
            <qrcg-button href="${BrandUrl.pricingUrl()}" target="_blank">
                ${w}
            </qrcg-button>
        `}render(){return x`
            <qrcg-form-comment label=${this.getLabel()}>
                <div class="instructions">
                    <p>
                        This feature is disabled in <b> ${this.getEnv()} </b> it
                        is available in the <b> Extended License </b> only.
                        Watch the demo video below.
                    </p>

                    ${this.renderUpgradeButton()}
                </div>
            </qrcg-form-comment>

            <div class="iframe-container">
                <iframe
                    src="https://www.youtube.com/embed/1dHg1S6lIgE"
                    title="YouTube video player"
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen
                ></iframe>
            </div>
        `}}window.defineCustomElement("qrcg-bulk-operation-teaser",QrcgBulkOperationTeaser);class QrcgBulkOperationsPage extends QrcgDashboardPage{static styles=[i$3`
            :host {
                display: block;
            }

            .demo-instructions {
                padding: 1rem;
                border: 1px solid var(--danger);
                border-radius: 0.5rem;
                font-size: 0.8rem;
            }
        `];pageTitle(){return t$3`Bulk Operations`}feautureDisabled(){return new Droplet().isSmall()}renderDemoInstructions(){if(ConfigHelper.isDemo())return x`
            <p class="demo-instructions">Maximum bulk items in demo is 3</p>
            <p class="demo-instructions">
                This feature is available in the extended license only.
            </p>
        `}renderContent(){return this.feautureDisabled()?x`<qrcg-bulk-operation-teaser></qrcg-bulk-operation-teaser>`:x`
            ${this.renderDemoInstructions()}
            <!--  -->
            ${BulkOperationsManager.renderTabs()}

            <!-- -->

            ${BulkOperationsManager.renderForms()}
        `}}window.defineCustomElement("qrcg-bulk-operations-page",QrcgBulkOperationsPage);class QrcgBulkOperationsRouter extends i$1{static get styles(){return i$3`
            :host {
                display: block;
            }
        `}static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w));document.body.appendChild(new QrcgBulkOperationsRouter)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/bulk-operations"
                permission="qrcode.store"
            >
                <template>
                    <qrcg-bulk-operations-page></qrcg-bulk-operations-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-bulk-operations-router",QrcgBulkOperationsRouter);QrcgBulkOperationsRouter.boot();class QrcgAuth0CallbackHandler extends i$1{static styles=[i$3`
            :host {
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 2rem 0;
            }
        `];connectedCallback(){super.connectedCallback(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("qrcg-login:after-login",{detail:{user:this.user,token:this.token,useRouter:!1}}))},1e3)}get user(){try{return JSON.parse(this.getAttribute("user"))}catch{return null}}get token(){try{return this.getAttribute("token")}catch{return null}}render(){return x` <qrcg-loader></qrcg-loader> `}}window.defineCustomElement("qrcg-auth0-callback-handler",QrcgAuth0CallbackHandler);class AuthSettingsForm extends QrcgSystemSettingsFormBase{authManager=AuthManager.instance();renderAuthInstructions(w){return this.renderInstructionsWithCopyDetails(w.renderCallbackInstructions(),url(`/auth-workflow/${w.name()}/callback`))}renderSections(){return this.authManager.getWorkflows().map(w=>this.renderWorkflowForm(w))}renderWorkflowForm(w){return x`
            <section>
                <h2 class="section-title">${w.title()}</h2>

                <div class="form-fields">
                    ${this.renderAuthInstructions(w)}
                    ${w.renderConfigs()}
                </div>
            </section>
        `}renderForm(){return this.renderSections()}}window.defineCustomElement("qrcg-auth-settings-form",AuthSettingsForm);class QrcgAuthSettingsPage extends QrcgDashboardPage{static styles=[i$3`
            :host {
                display: block;
            }

            qrcg-tab {
                margin: 0.5rem;
            }

            .tabs {
                margin-bottom: 1rem;
            }
        `];pageTitle(){return t$3`Auth Settings`}renderContent(){return x` <qrcg-auth-settings-form></qrcg-auth-settings-form> `}}window.defineCustomElement("qrcg-auth-settings-page",QrcgAuthSettingsPage);class QrcgAuthWorkflowRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(q=>setTimeout(q,50));const w=document.createElement("qrcg-auth-workflow-router");document.body.appendChild(w)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/system/auth-workflow$"
                permission="system.settings"
            >
                <template>
                    <qrcg-auth-settings-page></qrcg-auth-settings-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-auth-workflow-router",QrcgAuthWorkflowRouter);QrcgAuthWorkflowRouter.boot();class QrcgAuthCallbackHandler extends i$1{static EVENT_BEFORE_SOCIAL_LOGIN="qrcg-auth-callback::before-social-login";static styles=[i$3`
            :host {
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 2rem 0;
            }
        `];connectedCallback(){super.connectedCallback(),setTimeout(()=>{window.dispatchEvent(new CustomEvent(QrcgAuthCallbackHandler.EVENT_BEFORE_SOCIAL_LOGIN))},500),setTimeout(()=>{window.dispatchEvent(new CustomEvent("qrcg-login:after-login",{detail:{user:this.user,token:this.token,useRouter:!1}}))},1e3)}getBase64Attribute(w){try{return JSON.parse(window.atob(this.getAttribute(w)))}catch{return null}}get user(){return this.getBase64Attribute("user")}get token(){return this.getBase64Attribute("token")}render(){return x` <qrcg-loader></qrcg-loader> `}}window.defineCustomElement("qrcg-auth-callback",QrcgAuthCallbackHandler);const style$y=":host{display:flex;flex-direction:column;padding:1rem;border:2px solid var(--gray-1)}@media(min-width:900px){:host{max-width:300px}}.name{margin:0;font-size:1.3rem;color:var(--gray-2)}.description{margin-top:1.5rem;line-height:1.7;margin-bottom:1rem}.tags{display:flex;margin-top:auto;flex-wrap:wrap}.tag{font-size:.8rem;font-weight:700;text-transform:uppercase;padding:.25rem;background-color:var(--gray-0);color:var(--gray-2);margin:.5rem .5rem 0 0}.actions{display:flex;margin-top:1rem}.action{color:var(--info-0);text-decoration:none}.action:hover{text-decoration:underline}.action.empty{opacity:.5;pointer-events:none}";class QrcgPluginItem extends BaseComponent{static tag="qrcg-plugin-item";static styleSheets=[...super.styleSheets,style$y];static get properties(){return{plugin:{type:Object}}}constructor(){super(),this.plugin={}}renderTags(){return this.plugin.tags.map(w=>x`<div class="tag">${w}</div>`)}renderActions(){return x`
            <a
                class="${e$1({action:!0,empty:!this.plugin.show_settings_link})}"
                href="/dashboard/plugins/plugin/${this.plugin.slug}"
            >
                ${t$3`Settings`}
            </a>
        `}renderAfterTags(){}render(){return x`
            <h2 class="name">${this.plugin.name}</h2>

            <div class="description">${this.plugin.description}</div>

            <div class="tags">${this.renderTags()}</div>

            ${this.renderAfterTags()}

            <div class="actions">${this.renderActions()}</div>
        `}}QrcgPluginItem.register();class QrcgInstalledPluginsPage extends QrcgDashboardPage{static styles=[...super.styles,i$3`
            .plugins-container {
                display: flex;
                flex-wrap: wrap;
                margin-bottom: 0.3rem;
                gap: 1rem;
            }

            .loading-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }

            .loading-title {
                font-size: 1rem;
                color: var(--gray-2);
                margin: 2rem 0;
            }

            .empty-message {
                text-align: center;
                padding: 2rem;
                line-height: 1.7;
                color: var(--gray-2);
            }

            qrcg-plugin-item {
                flex: 1;
                min-width: 300px;
            }
        `];static get properties(){return{...super.properties,plugins:{type:Array},loading:{type:Boolean}}}constructor(){super(),this.plugins=[],this.loading=!0}connectedCallback(){super.connectedCallback(),this.fetchPlugins()}async fetchPlugins(){this.loading=!0;try{const{response:w}=await get("plugins/installed");this.plugins=await w.json()}catch{showToast(t$3`Error fetching installed plugins`)}this.loading=!1}breadcrumbs(){return[{text:t$3`Dashboard`,href:userHomePage()},{text:t$3`Plugins`}]}pageTitle(){return t$3`Installed Plugins`}renderPlugins(){return this.plugins.map(w=>x`<qrcg-plugin-item .plugin=${w}></qrcg-plugin-item>`)}renderLoadingView(){return x`
            <div class="loading-container">
                <div class="loading-title">${t$3`Loading plugins ...`}</div>
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderEmptyView(){return x`
            <div class="empty-message">
                ${t$3`There is no installed plugins.`}
            </div>
        `}renderContent(){return this.loading?this.renderLoadingView():isEmpty(this.plugins)?this.renderEmptyView():x`
            <div class="plugins-container">${this.renderPlugins()}</div>
        `}}window.defineCustomElement("qrcg-installed-plugins-page",QrcgInstalledPluginsPage);class PluginConfigDef{constructor({key:w,expandedKey:q,title:D,instructions:Q,type:O,value:U,placeholder:G,extra:W}={}){this.key=w,this.expandedKey=q,this.title=D,this.instructions=Q,this.type=O,this.value=U,this.placeholder=G,this.extra=W}renderInstructions(){if(this.instructions)return u$3` <div slot="instructions">${this.instructions}</div>`}renderFileInput(){return u$3`
            <qrcg-file-input
                name="${this.expandedKey??""}"
                upload-endpoint="system/configs/upload?key=${this.expandedKey}"
            >
                ${this.title}
                <!-- -->
                ${this.renderInstructions()}
            </qrcg-file-input>
        `}renderTextInput(w="text"){return u$3`
            <qrcg-input
                name=${this.expandedKey??""}
                .placeholder=${this.placeholder??""}
                type=${w}
            >
                ${this.title}
                <!-- -->
                ${this.renderInstructions()}
            </qrcg-input>
        `}renderBalloonSelector(){return u$3`
            <qrcg-balloon-selector
                name=${this.expandedKey}
                .options=${this.extra.options}
                ?multiple=${this.extra.multiple}
            >
                ${this.title}
                <!-- -->
                ${this.renderInstructions()}
            </qrcg-balloon-selector>
        `}renderCodeInput(){return u$3`
            <qrcg-code-input name=${this.expandedKey}>
                <span> ${this.title} </span>
                <!-- -->
                ${this.renderInstructions()}
            </qrcg-code-input>
        `}renderTextAreaInput(){return u$3`
            <qrcg-textarea
                name=${this.expandedKey}
                placeholder=${this.placeholder??""}
            >
                ${this.title}
                <!-- -->
                ${this.renderInstructions()}
            </qrcg-textarea>
        `}renderCustomTag(){const w=this.extra.tag,q=`<${w} name="${this.expandedKey}"></${w}>`;return u$3`${s$3(q)}`}renderReviewSitesInput(){return u$3`
            <qrcg-review-sites-input
                name="${this.expandedKey}"
                without-qrcode
            ></qrcg-review-sites-input>
        `}renderFormBuilderInput(){return u$3`
            <qrcg-form-builder name=${this.expandedKey}>
                ${this.title}
                <div slot="instructions">${this.instructions}</div>
            </qrcg-form-builder>
        `}render(){switch(this.type){case"file":return this.renderFileInput();case"balloon-selector":return this.renderBalloonSelector();case"code-input":return this.renderCodeInput();case"textarea":return this.renderTextAreaInput();case"text":case"number":case"password":return this.renderTextInput(this.type);case"custom":return this.renderCustomTag();case"review-sites":return this.renderReviewSitesInput();case"form-builder":return this.renderFormBuilderInput();default:return this.renderTextInput()}}}class PluginConfigSection{constructor({title:w,fields:q,doNotRenderOuterSection:D}){this.title=w,this.fields=q,this.doNotRenderOuterSection=D}renderFields(){return this.fields.map(w=>new PluginConfigDef(w).render())}render(){return this.doNotRenderOuterSection?this.renderFields():x`
            <qrcg-form-section>
                <h2 class="section-title">${this.title}</h2>

                ${this.renderFields()}
            </qrcg-form-section>
        `}}class QrcgPluginForm extends QrcgSystemSettingsFormBase{static styles=[...super.styles,i$3``];static get properties(){return{...super.properties,plugin:{type:Object}}}constructor(){super(),this.plugin={}}renderConfigs(){return this.plugin?.configs?.map(w=>new PluginConfigSection(w).render())}renderForm(){return this.renderConfigs()}}window.defineCustomElement("qrcg-plugin-form",QrcgPluginForm);class QrcgPluginPage extends QrcgDashboardPage{routeParams=new QRCGRouteParamsController(this);static styles=[...super.styles,i$3`
            .message-container {
                padding: 2rem;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                color: var(--gray-2);
            }

            .message {
                margin: 2rem 0;
            }

            .toggle-container {
                display: flex;
                justify-content: flex-end;
                padding: 1rem 1.5rem;
            }
        `];static get properties(){return{...super.properties,slug:{},plugin:{},loading:{type:Boolean},fetchError:{type:Boolean}}}constructor(){super(),this.plugin={},this.loading=!0}connectedCallback(){super.connectedCallback(),this.syncSlug()}updated(w){w.has("slug")&&this.fetchPlugin()}async fetchPlugin(){if(isEmpty(this.slug)){this.loading=!1;return}this.loading=!0;try{const{response:w}=await get(`plugins/plugin/${this.slug}`);this.plugin=await w.json(),this.updateTitle()}catch{this.fetchError=!0}this.loading=!1}syncSlug(){this.slug=this.routeParams.get("slug")}onRouteParamChange(){this.syncSlug()}pageTitle(){return isEmpty(this.plugin)?t$3`Plugin Settings`:this.plugin.name}renderError(){return x`
            <div class="message-container">
                ${t$3`Error while loading plugin configuration`}
            </div>
        `}renderLoader(){return x`
            <div class="message-container">
                <div class="message">${t$3`Loading...`}</div>

                <qrcg-loader></qrcg-loader>
            </div>
        `}breadcrumbs(){return[{text:t$3`Dashboard`,href:userHomePage()},{text:t$3`Plugins`,href:"/dashboard/plugins/installed"},{text:t$3`Simple Leads`}]}renderContent(){const w=this.renderPageContent();return PluginManager.applyFilters(FILTER_PLUGIN_SETTINGS_PAGE,w,this.plugin)}renderForm(){return x`
            <qrcg-plugin-form .plugin=${this.plugin}></qrcg-plugin-form>
        `}renderPageContent(){return this.loading?this.renderLoader():isEmpty(this.plugin)?this.renderError():x`
            <div class="toggle-container">
                <qrcg-form-section-toggler></qrcg-form-section-toggler>
            </div>

            ${this.renderForm()}
        `}}window.defineCustomElement("qrcg-plugin-page",QrcgPluginPage);class PluginModel{name;description;tags;slug;price=null;frequency=null;constructor(w,q,D,Q,O,U){this.name=w,this.description=q,this.tags=D,this.slug=Q,this.price=O,this.frequency=U}}class AvailablePlugins{static list(){return[new PluginModel(t$3`Affiliates & Coupons`,t$3`Essential marketing tools, allowing you to create coupons and referral program. Compatible with Quick Code v2.33 and above.`,["marketing","coupons"],"affiliatescoupons","$45","One Time"),new PluginModel(t$3`Pre Printed QR Codes`,t$3`Generate thousands of self-activating QR codes to sell in Amazon as NFC tags or QR Codes. Compatible with Quick Code v2.75 and above.`,["amazon","bulk-creation"],"pre-printed-qrcodes","$300","One Time"),new PluginModel(t$3`Product Store`,t$3`Sell NFC tags or metal business cards, or any other physical products, full functional shopping cart integrated into Quick Code.`,["nfc","shopping-cart"],"product-store","$300","One Time")]}}class BasePlugin{static boot(){this.isEnabled()&&(PluginManager.registerPlugin(this),this.registerActions(),this.registerFilters(),this.registerMenuFilter(),this.registerPageRenderer())}static registerPageRenderer(){PluginManager.addFilter(FILTER_PLUGIN_SETTINGS_PAGE,(w,q)=>q.slug!=this.slug()||!this.renderPluginPage()?w:this.renderPluginPage())}static renderPluginPage(){}static registerActions(){}static registerFilters(){}static registerMenuFilter(){PluginManager.addFilter(FILTER_MENU_GROUPS,w=>(this.menuGroup()&&w.push(this.menuGroup()),this.modifyMenuGroups(w)),10)}static modifyMenuGroups(w){return w}static menuGroup(){}static slug(){throw"Slug must be defined in child plugins"}static isEnabled(w=null){const q=Config.get("plugins.enabled"),D=isEmpty(q)?[]:q,Q=w??this.slug();return!isEmpty(D.find(O=>O===Q))}}const styles=".price-container{margin:1rem 0;display:flex;align-items:baseline;gap:.3rem}.price{color:var(--dark);font-size:1.4rem;font-weight:700}.frequency{color:var(--gray-2)}.installed-badge{margin-inline-end:1rem;display:flex;align-items:center;gap:.5rem;color:var(--success-0)}";class QrcgAvailablePluginItem extends QrcgPluginItem{static get tag(){return"qrcg-available-plugin-item"}static styleSheets=[...super.styleSheets,styles];renderInstalledBadge(){return x`
            <div class="installed-badge">
                <qrcg-icon mdi-icon=${mdiCheckBold}></qrcg-icon>
                ${t$3`Installed`}
            </div>

            <a href="/dashboard/plugins/plugin/${this.plugin.slug}">
                ${t$3`Settings`}
            </a>
        `}renderActions(){if(BasePlugin.isEnabled(this.plugin.slug))return this.renderInstalledBadge();const w=BrandUrl.url(`/plugins/#${this.plugin.slug}`);return x`
            <qrcg-button href="${w}" target="_blank" class="elegant outlined">
                <qrcg-icon mdi-icon=${mdiCartOutline}></qrcg-icon>
                ${t$3`Buy Now`}
            </qrcg-button>
        `}renderAfterTags(){return x`
            <div class="price-container">
                <div class="price">${this.plugin.price}</div>
                <div class="frequency">${this.plugin.frequency}</div>
            </div>
        `}}defineCustomElement(QrcgAvailablePluginItem.tag,QrcgAvailablePluginItem);const style$x=".plugins-container{display:flex;flex-wrap:wrap;margin-bottom:.3rem;gap:1rem}";class QrcgAvailablePluginsPage extends QrcgDashboardPage{static get tag(){return"qrcg-available-plugins-page"}static styleSheets=[...super.styleSheets,style$x];pageTitle(){return t$3`Available Plugins`}renderPlugin(w){return x`
            <qrcg-available-plugin-item
                .plugin=${w}
            ></qrcg-available-plugin-item>
        `}renderContent(){return x`
            <div class="plugins-container">
                ${AvailablePlugins.list().map(w=>this.renderPlugin(w))}
            </div>
        `}}defineCustomElement(QrcgAvailablePluginsPage.tag,QrcgAvailablePluginsPage);class QrcgPluginsRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w,50));document.body.appendChild(new QrcgPluginsRouter)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/plugins/available"
                permission="plugins.manage"
            >
                <template>
                    <qrcg-available-plugins-page></qrcg-available-plugins-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route
                route="/dashboard/plugins/installed$"
                permission="plugins.manage"
            >
                <template>
                    <qrcg-installed-plugins-page></qrcg-installed-plugins-page>
                </template>
            </qrcg-protected-route>

            <qrcg-protected-route
                route="/dashboard/plugins/plugin/(?<slug>.*)$"
                permission="plugins.manage"
            >
                <template>
                    <qrcg-plugin-page></qrcg-plugin-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-plugins-router",QrcgPluginsRouter);QrcgPluginsRouter.boot();class QrcgLeadFormList extends QRCGDashboardList{static get styles(){return[super.styles,i$3`
                .response {
                    margin: 2rem 0;
                    padding: 1rem;
                    border: 0.5rem solid var(--gray-0);
                }

                .response-header {
                    display: flex;
                    font-weight: bold;
                    color: var(--gray-2);
                    margin-bottom: 1rem;
                }

                .message-container {
                    padding: 2rem 1rem;
                    color: var(--gray-2);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
            `]}static get properties(){return{...super.properties,loading:{type:Boolean}}}constructor(){super({baseRoute:"lead-forms",singularRecordName:"Lead Forms",frontendFormUrl:null}),this.loading=!0}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}renderLeadFormName(w){return w.qrcode_name?w.qrcode_name:x` ${t$3`Lead Form`} #${w.id} - ${t$3`QR Code Not Found`}`}renderRow(w){return x`
            <div class="response">
                <div class="response-header">
                    ${this.renderLeadFormName(w)}
                </div>
                <qrcg-lead-form-responses
                    lead-form-id=${w.id}
                ></qrcg-lead-form-responses>
            </div>
        `}renderResponses(){return this.rows.map(w=>this.renderRow(w))}fetchData(){this.loading=!0,super.fetchData()}onApiSuccess(w){super.onApiSuccess(w),this.loading=!1}onApiError(w){super.onApiError(w),this.loading=!1}renderLoader(){if(this.loading)return x`
            <div class="message-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderEmptyMessage(){if(!this.loading&&isEmpty(this.rows))return x`
            <div class="message-container no-results">
                ${t$3`No results could be found`}
            </div>
        `}render(){return x`
            ${this.renderLoader()}
            <!-- -->
            ${this.renderEmptyMessage()}
            <!-- -->
            ${this.renderResponses()}
            <!-- -->
            ${this.renderPagination()}
        `}}window.defineCustomElement("qrcg-lead-form-list",QrcgLeadFormList);class QrcgLeadFormListPage extends i$1{titleController=new QRCGTitleController(this);static styles=[i$3`
            :host {
                display: block;
            }
        `];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>

                <qrcg-lead-form-list slot="content"></qrcg-lead-form-list>
            </qrcg-dashboard-layout>
        `}}window.defineCustomElement("qrcg-lead-form-list-page",QrcgLeadFormListPage);class QrcgLeadFormRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w));document.body.appendChild(new QrcgLeadFormRouter)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/lead-forms$"
                permission="lead-form.list"
            >
                <template>
                    <qrcg-lead-form-list-page></qrcg-lead-form-list-page>
                </template>
            </qrcg-protected-route>
        `}}window.defineCustomElement("qrcg-lead-form-router",QrcgLeadFormRouter);QrcgLeadFormRouter.boot();const style$w=".lead-form{padding:1rem;border:2px solid black}.loader-container{display:flex;align-items:center;justify-content:center;padding:1rem}.empty-message{display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:1rem;gap:1rem}.select-container{display:flex;flex-direction:column}.select-container.hidden{display:none}.select-container qrcg-button{margin-top:1rem}.select-container qrcg-button qrcg-icon{margin-inline-end:0}.select-inner-container{gap:.5rem;display:flex}.select-inner-container qrcg-searchable-select{flex:1}.links{display:flex;gap:.25rem;font-size:.8rem}.links a{font-size:.8rem}.links .create-lead-form-link{color:var(--gray-2)}.upgrade-message{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem;color:var(--gray-2);text-align:center}";class LeadFormSelector extends BaseComponent{static tag="qrcg-lead-form-selector";static styleSheets=[...super.styleSheets,style$w];qrcodes=new QRCodeTypeManager$1;static get properties(){return{leadForms:{type:Array},loading:{type:Boolean},name:{},value:{}}}connectedCallback(){super.connectedCallback(),this.fetchData()}disconnectedCallback(){super.disconnectedCallback()}async fetchData(){this.loading=!0;const{json:w}=await get("lead-forms?with-empty-responses=true&no-pagination=true");this.leadForms=w,this.requestUpdate(),this.loading=!1}renderLoaderContainer(){if(this.loading)return x`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderCreateLink(w=t$3`Create lead form`){return x` <a
            href="/dashboard/qrcodes/new?type=lead-form"
            target="_blank"
            class="create-lead-form-link"
        >
            ${w}
        </a>`}renderEmptyMessage(){if(!this.loading&&!isNotEmpty(this.leadForms))return x`
            <div class="empty-message">
                ${t$3`No lead forms could be found.`} ${this.renderCreateLink()}

                <qrcg-button class="elegant" @click=${this.fetchData}>
                    <qrcg-icon mdi-icon=${mdiRefresh}></qrcg-icon>
                    ${t$3`Refresh`}
                </qrcg-button>
            </div>
        `}getSelectOptions(){return isEmpty(this.leadForms)?[]:this.leadForms.map(w=>({name:w.qrcode_name,id:w.id}))}getSelectedQRCodeId(){const w=this.$("qrcg-searchable-select")?.value;if(w)return this.leadForms.find(q=>q.id==w)?.qrcode_id}renderLeadFormSelector(){return x`
            <div
                class="${e$1({hidden:isEmpty(this.leadForms),"select-container":!0})}"
            >
                <div class="select-inner-container">
                    <qrcg-searchable-select
                        .items=${this.getSelectOptions()}
                        .value=${this.value}
                        name=${this.name}
                    >
                        <div slot="label">${t$3`Select Lead Form`}</div>
                    </qrcg-searchable-select>

                    <qrcg-button @click=${this.fetchData} class="elegant">
                        <qrcg-icon mdi-icon=${mdiRefresh}> </qrcg-icon>
                    </qrcg-button>
                </div>

                <div class="links">
                    <a
                        href="/dashboard/qrcodes/edit/${this.getSelectedQRCodeId()}"
                        target="_blank"
                    >
                        ${t$3`Edit lead form`}
                    </a>

                    ${t$3`or`} ${this.renderCreateLink(t$3`create new`)}
                </div>
            </div>
        `}renderUpgradeMessage(){return x`
            <div class="upgrade-message">
                ${t$3`Lead form type is not available, upgrade now to start creating lead forms.`}
                <qrcg-button
                    href="${ConfigHelper.pricingPlansUrl()}"
                    target="_blank"
                >
                    ${t$3`Upgrade Now`}
                </qrcg-button>
            </div>
        `}render(){return currentPlanHasQrCodeType("lead-form")?[this.renderLoaderContainer(),this.renderEmptyMessage(),this.renderLeadFormSelector()]:this.renderUpgradeMessage()}}LeadFormSelector.register();class QrcgQRCodeTemplatesPage extends QrcgDashboardPage{static tag="qrcg-qrcode-templates-page";pageTitle(){return t$3`Templates`}renderContent(){return x` <qrcg-qrcode-templates-list></qrcg-qrcode-templates-list> `}}defineCustomElement(QrcgQRCodeTemplatesPage.tag,QrcgQRCodeTemplatesPage);class QrcgTemplatesRouter extends i$1{static styles=[i$3`
            :host {
                display: block;
            }
        `];static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w,50));document.body.appendChild(new this)}connectedCallback(){super.connectedCallback()}render(){return x`
            <qrcg-protected-route
                route="/dashboard/qrcode-templates$"
                permission="qrcode-template.list"
            >
                <template>
                    <qrcg-qrcode-templates-page></qrcg-qrcode-templates-page>
                </template>
            </qrcg-protected-route>
        `}}defineCustomElement("qrcg-qrcode-templates-router",QrcgTemplatesRouter);QrcgTemplatesRouter.boot();class BaseCheckoutEnforcer{user;checkout=new QRCGCheckoutController;name(){}sortOrder(){return 100}shouldRun(){return isCustomer()}run(w){if(this.user=loadUser(),this.next=w,!isEmpty(this.user)){if(isSuperAdmin())return this.next();if(!this.shouldRun())return this.next();this.runEnforcer()}}directCheckoutUrl(){return"/checkout?plan-id="+this.checkout.loadPlanId()}goToDirectCheckoutPage(){window.location=this.directCheckoutUrl()}goToPricingPlansPage(){window.location=ConfigHelper.pricingPlansUrl()}runEnforcer(){return this.next()}}class EnforceCheckoutWhenCheckoutIsNotCompleted extends BaseCheckoutEnforcer{name(){return"Enforce Checkout When Checkout Is NotCompleted"}getCheckoutOpenedLocalStorageKey(){return"checkout-opened-"+this.user.id}sortOrder(){return 20}runEnforcer(){push("/checkout?plan-id="+this.checkout.loadPlanId()),this.save(this.getCheckoutOpenedLocalStorageKey(),"true")}shouldRun(){return this.checkout.loadPlanId()&&isCustomer()&&!this.checkoutPageOpenedForTheFirstTime()&&this.checkoutIsRecent()}checkoutIsRecent(){const w=this.checkout.loadAddedDate();return w?(new Date().getTime()-w)/1e3/60<30:!1}checkoutPageOpenedForTheFirstTime(){return this.load(this.getCheckoutOpenedLocalStorageKey())==="true"}load(w){return localStorage[this.storageKey(w)]}save(w,q){localStorage[this.storageKey(w)]=q}storageKey(w){return`EnforceCheckoutWhenCheckoutIsNotCompleted:${w}`}}class EnforceCheckoutWhenUserHasNoPlan extends BaseCheckoutEnforcer{name(){return"Enforce Checkout When User Has No Plan"}sortOrder(){return 10}runEnforcer(){if(this.checkout.loadPlanId())return this.goToDirectCheckoutPage();this.goToPricingPlansPage()}shouldRun(){return isCustomer()&&this.currentUserHasNoSubscription()&&this.currentUrlIsNotPricingPlansUrl()&&this.currentUrlIsDashboardUrl()}currentUrlIsDashboardUrl(){return window.location.pathname.match(/dashboard/)}currentUrlIsNotPricingPlansUrl(){const w=window.location.pathname,q=ConfigHelper.pricingPlansUrl(),D=document.createElement("a");return D.href=q,w!=D.pathname}currentUserHasNoSubscription(){const w=currentSubscription();return isEmpty(w)}}class CheckoutEnforcementManager{static enforcers=[];static localUserPromise=new Promise(w=>{this.resolveLocalUserPromise=w});static registerEnforcer(w){this.enforcers.push(w)}static boot(){window.addEventListener("auth:request-logout",()=>{this.blockRunningFor(1e3)}),window.addEventListener("qrcg-router:location-changed",()=>{this.onLocationChanged()}),window.addEventListener("auth:local-user-ready",()=>{this.onLocalUserReady()})}static async onLocationChanged(){await this.localUserPromise,this.runRegisterdEnforcers()}static onLocalUserReady(){this.resolveLocalUserPromise(),this.runRegisterdEnforcers()}static async runRegisterdEnforcers(){await sleep(10),!this.runningRegisteredEnforcersIsBlocked&&(this.blockRunningFor(300),this.getEnforcers()[0].run(this.nextRunner(0)))}static blockRunningFor(w){clearTimeout(this.__runBlockerHandler),this.runningRegisteredEnforcersIsBlocked=!0,this.__runBlockerHandler=setTimeout(()=>{this.runningRegisteredEnforcersIsBlocked=!1},w)}static getEnforcers(){return this.enforcers.sort((w,q)=>w.sortOrder()-q.sortOrder())}static nextRunner=w=>(()=>{const q=w+1,D=this.getEnforcers()[q];return D?()=>{D.run(this.nextRunner(q+1))}:()=>{}})()}CheckoutEnforcementManager.boot();CheckoutEnforcementManager.registerEnforcer(new EnforceCheckoutWhenCheckoutIsNotCompleted);CheckoutEnforcementManager.registerEnforcer(new EnforceCheckoutWhenUserHasNoPlan);const style$v="",style$u="";class BillingForm extends QrcgSystemSettingsFormBase{static tag="qrcg-billing-form";static styleSheets=[...super.styleSheets,style$u];renderForm(){return x`
            <qrcg-balloon-selector
                name="billing_collection_enabled"
                .options=${BalloonSelector.OPTIONS_ENABLED_DISABLED}
            >
                ${t$3`Billing Collection`}
                <div slot="instructions">
                    ${t$3`By default billing collection is disabled.`}
                </div>
            </qrcg-balloon-selector>

            <qrcg-form-builder name="billing_private_form">
                ${t$3`Private Customer Details`}
                <div slot="instructions">
                    ${t$3`Specify fields when customer is private (not company).`}
                </div>
            </qrcg-form-builder>

            <qrcg-form-builder name="billing_company_form">
                ${t$3`Company Details`}
                <div slot="instructions">
                    ${t$3`Specify fields when customer is company`}
                </div>
            </qrcg-form-builder>
        `}}BillingForm.register();class BillingPage extends QrcgDashboardPage{static tag="qrcg-billing-page";static styleSheets=[...super.styleSheets,style$v];pageTitle(){return t$3`Billing`}renderContent(){return x` <qrcg-billing-form></qrcg-billing-form> `}}BillingPage.register();class BillingRouter extends BaseComponent{static tag="qrcg-billing-router";static async boot(){for(;!document.body;)await new Promise(w=>setTimeout(w,50));document.body.appendChild(new this)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/billing$"
                permission="billing.manage"
            >
                <template>
                    <qrcg-billing-page></qrcg-billing-page>
                </template>
            </qrcg-protected-route>
        `}}BillingRouter.register();BillingRouter.injectInDocumentBody();class InformationPopupModal extends QrcgModal{static tag="qrcg-information-popup-modal";renderTitle(){return this.decode(this.data.title)}decode(w){return new TextDecoder().decode(Uint8Array.from(window.atob(w),q=>q.codePointAt(0)))}renderBody(){const w=s$3(this.decode(this.data.content));return u$3`${w}`}}defineCustomElement(InformationPopupModal.tag,InformationPopupModal);window.InformationPopupModal=InformationPopupModal;const style$t=":host{text-align:center;display:flex;align-items:center;justify-content:center;flex-direction:column}.message{color:var(--gray-2);margin:1rem 0}";class FibFormUpdater extends BaseComponent{static tag="qrcg-fib-form-updater";static styleSheets=[...super.styleSheets,style$t];connectedCallback(){super.connectedCallback(),this.waitForPayment()}waitForPayment(){setInterval(()=>{this.checkForPayment()},3e3)}async checkForPayment(){const{json:w}=await post("payment-processors/fib/forward/isSubscriptionActive",{subscription_id:queryParam("subscription_id")});w?.result&&(showToast(t$3`Payment received successfully!`),await sleep(4e3),showToast(t$3`Rediredting you to the dashboard area...`),await sleep(2e3),window.location="/dashboard/qrcodes")}render(){return x`
            <div class="message">${t$3`Waitnig For Payment`}</div>

            <qrcg-loader></qrcg-loader>
        `}}FibFormUpdater.register();class QrcgAccountAuthworkflowsLoginButtons extends BaseComponent{static tag="qrcg-account-authworkflows-login-buttons";render(){return AuthManager.instance().renderButtons(AbstractAuthWorkflow.CONTEXT_SIGNIN)}}QrcgAccountAuthworkflowsLoginButtons.register();const style$s=":host{max-width:400px;margin:auto;margin-top:3rem}";class QrcgDropdownDemo extends BaseComponent{static tag="qrcg-dropdown-demo";static styleSheets=[...super.styleSheets,style$s];open(){QrcgDropdown.withTarget(this.$("qrcg-button")).withContent(this.renderDropdownContent).open()}onItemClick=()=>{alert("item is clicked")};renderDropdownContent=()=>range(0,10).map(w=>x`
                <div class="item" @click=${this.onItemClick}>Item ${w}</div>
            `);render(){return x`<qrcg-button @click=${this.open}>Open</qrcg-button>`}}QrcgDropdownDemo.register();const style$r="qrcg-icon{height:2rem;width:2rem;padding:.5rem;z-index:10;color:var(--dark);background-color:var(--gray-0);cursor:pointer}";class QrcgFormSectionToggler extends BaseComponent{static tag="qrcg-form-section-toggler";static styleSheets=[...super.styleSheets,style$r];expanded=!0;onExpandToggleClick(){this.expanded=!this.expanded,document.dispatchEvent(new CustomEvent(QrcgFormSection.EVENT_REQUEST_SET_EXPANDED,{detail:{expanded:this.expanded}}))}render(){return x`
            <qrcg-icon
                mdi-icon=${mdiUnfoldMoreHorizontal}
                @click=${this.onExpandToggleClick}
            ></qrcg-icon>
        `}}QrcgFormSectionToggler.register();class QrcgQrcodeTypeName extends BaseComponent{static tag="qrcg-qrcode-type-name";static styleSheets=[...super.styleSheets,":host { display: inline; }"];manager=new QRCodeTypeManager$1;render(){return t$3(this.manager.find(this.getAttribute("type"))?.name)}}QrcgQrcodeTypeName.register();const style$q=".inputs{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;position:relative;gap:1rem;margin-top:1rem}.inputs qrcg-input{flex:1}.inputs qrcg-input::part(label){color:var(--gray-2)}label{font-size:.8rem;margin-bottom:.5rem;font-weight:700;letter-spacing:1px;user-select:none;-webkit-user-select:none}.text{color:var(--gray-2);font-weight:700}";class QrcgNumberRangeInput extends BaseComponent{static tag="qrcg-number-range-input";static styleSheets=[...super.styleSheets,style$q];static get properties(){return{...super.properties,name:{},value:{}}}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onChildInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onChildInput)}updated(w){w.has("value")&&this.populateValue()}populateValue(){this.__didPopulateValue||(this.syncInputs(),this.__didPopulateValue=!0)}syncInputs(){Object.keys(this.value).forEach(w=>{const q=this.$(`[name="${w}"]`);q&&(q.value=this.value[w])})}onChildInput(w){w.detail.name!==this.name&&this.setValue({...this.value,[w.detail.name]:w.detail.value})}setValue(w){this.value=w,this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:this.value}}))}render(){return x`
            <label>
                <slot></slot>
            </label>

            <div class="inputs">
                <qrcg-input
                    name="from"
                    type="number"
                    placeholder=${t$3`Enter from`}
                >
                    ${t$3`From`}
                </qrcg-input>

                <qrcg-input name="to" type="number" placeholder=${t$3`Enter to`}>
                    ${t$3`To`}
                </qrcg-input>
            </div>
        `}}QrcgNumberRangeInput.register();const style$p=":host{display:flex;gap:.5rem;align-items:center}.badge{font-size:.6rem;padding:.1rem .25rem;font-weight:700;border-radius:.25rem}.read-only{background-color:var(--success-0);color:#fff}.super-admin{background-color:var(--info-0);color:#fff}";class RoleName extends BaseComponent{static tag="qrcg-role-name";static styleSheets=[...super.styleSheets,style$p];static get properties(){return{...super.properties,model:{}}}renderReadOnlyBadge(){if(this.model.read_only)return x` <div class="badge read-only">${t$3`Read Only`}</div> `}renderSuperAdminBadge(){if(this.model.super_admin)return x` <div class="badge super-admin">${t$3`Super Admin`}</div> `}render(){return x`
            <div class="text">${this.model.name}</div>

            ${this.renderReadOnlyBadge()}
            <!--  -->
            ${this.renderSuperAdminBadge()}
        `}}RoleName.register();class RoleList extends QRCGDashboardList{static tag="qrcg-role-list";constructor(){super({baseRoute:"roles",singularRecordName:"role",frontendFormUrl:null}),this.cellContentRenderer=this.cellContentRenderer.bind(this)}static listColumns=[{key:"id",label:"ID",width:"2rem"},{key:"name",label:"Name"},{key:"permission_count",label:"Permissions"},{key:"user_count",label:"Users"},{key:"created_at",label:"Created at"},{key:"actions",label:"Actions",width:"17rem"}];static get properties(){return{...super.properties,paying:{}}}cellContentRenderer(w,q){return q.key==="name"?this.renderNameCell(w):super.cellContentRenderer(w,q)}renderNameCell(w){return x` <qrcg-role-name .model=${w}></qrcg-role-name> `}searchPlaceholder(){return t$3("By name")}rowActions(w){if(!w.read_only)return x`
            <div class="row-actions" .row=${w}>
                ${this.renderEditRowLink(w)}
                <!--  -->
                ${this.renderDeleteRowLink(w)}
            </div>
        `}}RoleList.register();class RolesListPage extends BaseComponent{static tag="qrcg-role-list-page";render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${t$3`Roles`}</span>
                <qrcg-button slot="header-actions" href="/dashboard/roles/new"
                    >${t$3`Create`}</qrcg-button
                >
                <qrcg-role-list slot="content"></qrcg-role-list>
            </qrcg-dashboard-layout>
        `}}RolesListPage.register();const style$o=".loading-container{display:flex;align-items:center;justify-content:center}.group-heading{display:flex;justify-content:space-between;align-items:center;cursor:pointer;padding:.5rem;background-color:var(--gray-0)}.group{border:1px solid var(--gray-1);border-radius:.5rem;margin-bottom:1rem;color:#000}.group-permissions{padding:1rem}.label{font-weight:700;margin:1rem 0}";class PermissionGroup{slug;permissions=[];isSelected=!1;static fromPermission(w){const q=new this;return q.slug=q.extractSlug(w),q.permissions.push(w),q}hasPermissionId(w){return this.permissions.find(q=>q.id==w)}getName(){return ucwords(this.slug.replace(/-/g," "))}canAddPermission(w){return this.slug===this.extractSlug(w)}addPermission(w){this.permissions.push(w)}extractSlug(w){return w.slug.split(".")[0]}setSelected(w){return this.isSelected=w,this}getPermissionIds(){return this.permissions.map(w=>w.id)}}class PermissionStore{permissions=[];groups=[];static withPermissions(w){const q=new this;return q.permissions=w,q}find(w){return this.groups.find(q=>q.slug===w)}build(){return this.groups=this.permissions.reduce((w,q)=>{const D=w.find(O=>O.canAddPermission(q));if(D)return D.addPermission(q),w;const Q=PermissionGroup.fromPermission(q);return w.push(Q),w},[]),this}get(){return this.groups}getSelectedPermissionIds(){return this.groups.reduce((w,q)=>q.isSelected?w.concat(q.getPermissionIds()):w,[])}syncSelectedPermissionIds(w){return w instanceof Array?(w.forEach(q=>{const D=this.groups.find(Q=>Q.hasPermissionId(q));D&&D.setSelected(!0)}),this):this}}class PermissionsInput extends BaseInput{static tag="qrcg-permissions-input";static styleSheets=[...super.styleSheets,style$o];static get properties(){return{...super.properties,permissions:{type:Array},loading:{type:Boolean}}}constructor(){super(),this.loading=!0,this.permissions=[],this.groups=new PermissionStore}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.addEventListener("on-input",this.onInput),this.fetchData()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),this.removeEventListener("on-input",this.onInput)}syncValue(){this.groups.syncSelectedPermissionIds(this.value),this.groups.get().filter(w=>{const q=this.$(`[name=group-${w.slug}]`);q&&(q.value=w.isSelected)}),this.requestUpdate()}onInput(w){const{name:q,value:D}=w.detail;if(q!==this.name){if(q.match(/group/i))return this.onGroupInput(q,D);if(q.match(/permission/i))return this.onPermissionInput(q,D)}}getValue(){return isArray$1(this.value)?this.value:[]}onPermissionInput(w,q){const D=w.replace(/permission-/,"");q?this.setValue([...this.getValue(),D]):this.setValue(this.getValue().filter(Q=>Q!=D)),this._fireOnInput(),this.requestUpdate()}updated(w){super.updated(w),w.has("value")&&this.syncPermissions()}getPermissionsCheckboxes(){return this.$$('[name*="permission"]')}syncPermissions(){console.log(this.getPermissionsCheckboxes()),this.getPermissionsCheckboxes().map(w=>{const q=this.getValue().find(D=>D==w.getAttribute("permission-id"));w.value=q})}onGroupInput(w,q){const D=w.replace(/group-/,"");this.groups.find(D).setSelected(q);const Q=this.groups.getSelectedPermissionIds();this.setValue(Q),this._fireOnInput(),this.requestUpdate()}onClick(w){mapEventDelegate(w,{".group-heading":this.onGroupHeadingClick})}onGroupHeadingClick(w,q){const D=w.composedPath()[0];parentMatches(D,"qrcg-checkbox")||q.querySelector("qrcg-checkbox").dispatchEvent(new Event("click"))}async fetchData(){this.loading=!0;const{json:w}=await get("permissions");this.permissions=w,this.groups=PermissionStore.withPermissions(this.permissions).build(),this.loading=!1,this.syncValue()}renderLoader(){if(this.loading)return x`
            <div class="loading-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderGroup(w){const q=e$1({group:!0});return x`
            <div class="${q}">
                <div class="group-heading">
                    <div class="name">${w.getName()}</div>

                    <qrcg-checkbox name="group-${w.slug}"> </qrcg-checkbox>
                </div>

                <div class="group-permissions">
                    ${w.permissions.map(D=>x`
                            <qrcg-checkbox
                                name="permission-${D.id}"
                                permission-id=${D.id}
                            >
                                ${D.name}
                            </qrcg-checkbox>
                        `)}
                </div>
            </div>
        `}renderPermissions(){if(!this.loading)return x`
            <div class="label">${t$3`Permissions`}</div>
            <div class="groups">
                ${this.groups.get().map(w=>this.renderGroup(w))}
            </div>
        `}render(){return[this.renderLoader(),this.renderPermissions()]}}PermissionsInput.register();class RolesForm extends QrcgDashboardForm{static tag="qrcg-role-form";constructor(){super({apiBaseRoute:"roles",bindEvents:!0})}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}renderFormFields(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Role Details`}</h2>

                <qrcg-input name="name" placeholder="${t$3`Role name`}">
                    ${t$3`Name`}
                </qrcg-input>

                <qrcg-input name="home_page" placeholder="/dashboard/qrcodes">
                    ${t$3`Home Page Path`}
                </qrcg-input>

                <qrcg-permissions-input
                    name="permission_ids"
                ></qrcg-permissions-input>
            </qrcg-form-section>
        `}}RolesForm.register();class RoleFormPage extends BaseComponent{static tag="qrcg-role-form-page";titleController=new QRCGTitleController(this);render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-role-form slot="content"></qrcg-role-form>
            </qrcg-dashboard-layout>
        `}}RoleFormPage.register();class QrcgRolesRouter extends BaseComponent{static tag="qrcg-roles-router";render(){return x`
            <qrcg-protected-route
                route="/dashboard/roles$"
                permission="role.list-all"
            >
                <template>
                    <qrcg-role-list-page></qrcg-role-list-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route
                route="/dashboard/roles/new|/dashboard/roles/edit/(?<id>\\d+)"
                permission="role.store"
            >
                <template>
                    <qrcg-role-form-page></qrcg-role-form-page>
                </template>
            </qrcg-protected-route>
        `}}QrcgRolesRouter.register();QrcgRolesRouter.injectInDocumentBody();class TemplateCategoriesList extends QRCGDashboardList{static tag="qrcg-template-categories-list";constructor(){super({baseRoute:"template-categories",singularRecordName:"template category",frontendFormUrl:null})}static listColumns=[{key:"id",label:"ID",width:"2rem"},{key:"name",label:"Name"},{key:"sort_order",label:"Sort Order"},{key:"actions",label:"Actions",width:"17rem"}];static get properties(){return{...super.properties,paying:{}}}searchPlaceholder(){return t$3("By name")}}TemplateCategoriesList.register();let Page$1=class extends BaseComponent{static tag="qrcg-template-categories-page";static styleSheets=[...super.styleSheets];render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${t$3`Template Categories`}</span>
                <qrcg-button
                    slot="header-actions"
                    href="/dashboard/template-categories/new"
                >
                    ${t$3`Create`}
                </qrcg-button>
                <qrcg-template-categories-list
                    slot="content"
                ></qrcg-template-categories-list>
            </qrcg-dashboard-layout>
        `}};Page$1.register();const style$n="[name]{margin-bottom:1rem}";class TemplateCategoryForm extends QrcgDashboardForm{static tag="qrcg-template-category-form";static styleSheets=[...super.styleSheets,style$n];constructor(){super({apiBaseRoute:"template-categories",bindEvents:!0})}renderFormFields(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Record Details`}</h2>

                <qrcg-input name="name" placeholder="${t$3`Enter name`}">
                    ${t$3`Name`}
                </qrcg-input>

                <qrcg-color-picker name="text_color">
                    ${t$3`Color`}
                </qrcg-color-picker>

                <qrcg-file-input name="image_id"> ${t$3`Image`} </qrcg-file-input>

                <qrcg-input
                    name="sort_order"
                    type="number"
                    step="1"
                    placeholder=${t$3`Enter sort order`}
                >
                    ${t$3`Sort Order`}
                </qrcg-input>
            </qrcg-form-section>
        `}}TemplateCategoryForm.register();class TemplateCategoryFormPage extends BaseComponent{static tag="qrcg-template-category-form-page";titleController=new QRCGTitleController(this);render(){return x`
            <qrcg-dashboard-layout>
                <span slot="title">${this.titleController.pageTitle}</span>
                <qrcg-template-category-form
                    slot="content"
                ></qrcg-template-category-form>
            </qrcg-dashboard-layout>
        `}}TemplateCategoryFormPage.register();class TemplateCategoriesRouter extends BaseComponent{static tag="qrcg-template-categories-router";static async register(){for(super.register();!document.body;)await new Promise(w=>setTimeout(w,50));document.body.appendChild(new this)}render(){return x`
            <qrcg-protected-route
                route="/dashboard/template-categories$"
                permission="template-category.store"
            >
                <template>
                    <qrcg-template-categories-page></qrcg-template-categories-page>
                </template>
            </qrcg-protected-route>
            <qrcg-protected-route
                route="/dashboard/template-categories/new|/dashboard/template-categories/edit/(?<id>\\d+)"
                permission="template-category.store"
            >
                <template>
                    <qrcg-template-category-form-page></qrcg-template-category-form-page>
                </template>
            </qrcg-protected-route>
        `}}TemplateCategoriesRouter.register();const style$m="";class VCardListInputItemModel{id;type;value;constructor(){this.id=generateUniqueID()}}class VCardListInputItemCollection{static EVENT_ON_CHANGE="vcard-list-input::on-change";items=[];constructor(){this.items.push(new VCardListInputItemModel)}add(w){this.items.push(w),this.dispatchOnChangeEvent()}delete(w){const q=this.items.filter(D=>D.id!==w.id);this.items=q,this.dispatchOnChangeEvent()}isLast(w){return this.items.indexOf(w)===this.items.length-1}isLastItemEmpty(){const w=this.items[this.items.length-1];return isEmpty(w.value)}dispatchOnChangeEvent(){setTimeout(()=>{document.dispatchEvent(new CustomEvent(VCardListInputItemCollection.EVENT_ON_CHANGE,{detail:{collection:this}}))})}}const style$l=".line{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.line qrcg-input[name=value]{flex:1}.line qrcg-input::part(input){margin-bottom:0}.line qrcg-icon{cursor:pointer;width:1rem;height:1rem;padding:.25rem;border-radius:50%;color:var(--light);box-sizing:content-box;margin-top:1.1rem;border:2px solid var(--gray-1)}.line qrcg-icon.remove{color:var(--danger)}.line qrcg-icon.add{color:var(--success-0)}[name=type]::part(input){width:5rem}";class VCardListInputItem extends BaseComponent{static tag="qrcg-vcard-list-input-item";static styleSheets=[...super.styleSheets,style$l];static get EVENT_ON_ITEM_CHANGE(){return`${this.tag}::on-change`}item=new VCardListInputItemModel;connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput),document.addEventListener(VCardListInputItemCollection.EVENT_ON_CHANGE,this.onCollectionChange)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput),document.removeEventListener(VCardListInputItemCollection.EVENT_ON_CHANGE,this.onCollectionChange)}onCollectionChange=()=>{this.requestUpdate()};firstUpdated(){this.syncItem()}updated(w){w.has("item")&&this.syncItem()}syncItem(){Object.keys(this.item).forEach(w=>{const q=this.$(`[name="${w}"]`);q&&(q.value=this.item[w])})}onInput(w){w.preventDefault(),w.stopImmediatePropagation();const{name:q,value:D}=w.detail;this.item[q]=D,clearTimeout(this.__updateTimeout),this.__updateTimeout=setTimeout(()=>{this.dispatchChangeEvent(),this.requestUpdate()},1e3)}dispatchChangeEvent(){this.dispatchEvent(new CustomEvent(VCardListInputItem.EVENT_ON_ITEM_CHANGE,{composed:!0,bubbles:!0,detail:{item:this.item}}))}getList(){return super.getDirectParent()}getCollection(){return this.getList().collection}onAddClick(){const w=new VCardListInputItemModel;this.getCollection().add(w)}onRemoveClick(){this.getCollection().delete(this.item)}renderRemoveIcon(){if(!this.getCollection().isLast(this.item))return x`
            <qrcg-icon
                mdi-icon=${mdiMinusThick}
                class="remove"
                @click=${this.onRemoveClick}
            ></qrcg-icon>
        `}renderAddIcon(){if(this.getCollection().isLast(this.item))return x`
            <qrcg-icon
                mdi-icon=${mdiPlusThick}
                class="add"
                @click=${this.onAddClick}
                ?disabled=${this.getCollection().isLastItemEmpty()}
            ></qrcg-icon>
        `}render(){return x`
            <div class="line">
                <qrcg-input name="value" placeholder=${t$3`Enter text`}>
                    <slot></slot>
                </qrcg-input>

                <qrcg-input name="type" placeholder=${t$3`Type`}>
                    ${t$3`Type`}
                </qrcg-input>

                ${this.renderRemoveIcon()}
                <!--  -->

                ${this.renderAddIcon()}
                <!--  -->
            </div>
        `}}VCardListInputItem.register();class VcardListInput extends BaseComponent{static tag="qrcg-vcard-list-input";static styleSheets=[...super.styleSheets,style$m];collection=new VCardListInputItemCollection;static get properties(){return{label:{},value:{type:Array},name:{}}}constructor(){super(),this.value=[]}connectedCallback(){super.connectedCallback(),document.addEventListener(VCardListInputItemCollection.EVENT_ON_CHANGE,this.onCollectionChange),this.addEventListener(VCardListInputItem.EVENT_ON_ITEM_CHANGE,this.onItemChange)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener(VCardListInputItemCollection.EVENT_ON_CHANGE,this.onCollectionChange),this.removeEventListener(VCardListInputItem.EVENT_ON_ITEM_CHANGE,this.onItemChange)}onItemChange=()=>{this.setValue(this.collection.items)};onCollectionChange=()=>{this.setValue(this.collection.items),this.requestUpdate()};firstUpdated(){isEmpty(this.collection.items)&&(this.collection=new VCardListInputItemCollection)}willUpdate(w){super.willUpdate(w),w.has("value")&&this.syncValue()}shouldSyncValue(){return this.__alreadySynced?!1:(this.__alreadySynced=!0,!0)}syncValue(){if(isEmpty(this.value)||isNotArray(this.value)){this.collection=new VCardListInputItemCollection;return}this.collection.items!==this.value&&(this.collection.items=this.value)}setValue(w){this.value=w,this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{name:this.name,value:this.value}}))}render(){return c(this.collection.items,w=>w.id,w=>x`
                    <qrcg-vcard-list-input-item .item=${w}>
                        ${this.label}
                    </qrcg-vcard-list-input-item>
                `)}}VcardListInput.register();const style$k=":host([opened]){align-items:flex-end;padding:0;color:var(--dark)}.overlay{opacity:.3}.container{width:var(--target-width);box-shadow:#0f0f0f0d 0 0 0 1px,#0f0f0f1a 0 3px 6px,#0f0f0f33 0 9px 24px;border-radius:1.5rem;border-bottom-left-radius:0;border-bottom-right-radius:0;max-height:unset}.close{color:var(--dark);margin-inline-start:auto;border-radius:.5rem;padding:1rem;width:min-content;height:unset}.close:hover{background-color:var(--gray-0)}header{padding:1rem 2rem}.body{max-height:80vh;padding:0 2rem;border-bottom:0}.title-container{display:flex;gap:1.3rem;align-items:center}.title-container .header-image{width:70px;height:70px;border-radius:50%;object-fit:cover}.title-container .header-image-container{position:relative}.title-container .header-image-container .icon{color:#f45a57;background-color:#fff;border-radius:50%;padding:.5rem;width:2rem;height:2rem;position:absolute;bottom:0;inset-inline-end:0;filter:drop-shadow(0px 2.76923px 8.30769px rgba(22,29,37,.1))}.title-container .text{font-size:1.3rem}.actions{flex-direction:column;justify-content:stretch;padding:2rem;padding-bottom:0}[modal-affirmative]{margin:0;width:100%;--button-color: white;--button-color-hover: var(--button-color);--button-color-active: var(--button-color);--button-color-focused: var(--button-color-hover);--button-background-color: black;--button-background-color-hover: var(--gray-2);--button-outline-focus: var(--primary-1);--button-box-shadow: .5rem .5rem 1rem rgba(0, 0, 0, .1);--button-hover-box-shadow: .5rem .5rem 1rem rgba(0, 0, 0, .15)}[modal-affirmative] svg{width:1.3rem;margin-inline-end:1rem}.actions qrcg-button:last-child{margin:0}.no-sell{margin:1rem;font-weight:lighter}";class AutomaticFormModal extends CustomFormRendererModal{static tag="qrcg-automatic-form-modal";static styleSheets=[...super.styleSheets,style$k];target=null;firstUpdated(){super.firstUpdated(),this.bindTargetPosition()}getAffirmativeText(){return x`
            ${this.renderSendIcon()}
            <!--  -->
            ${super.getAffirmativeText()}
            <!--  -->
        `}bindTargetPosition(){const{width:w}=this.target.getBoundingClientRect();this.style.setProperty("--target-width",w+"px")}renderCloseIcon(){return x``}renderSendIcon(){return x`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path
                    fill="currentColor"
                    d="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"
                ></path>
            </svg>
        `}renderImage(){if(!isEmpty(this.header_image))return x`
            <div class="header-image-container">
                <img src=${this.header_image} class="header-image" />
                <div class="icon">${this.renderSendIcon()}</div>
            </div>
        `}renderActions(){return x`
            <!--  -->
            ${this.renderAffirmativeAction()}

            <div class="no-sell">${t$3`We don't sell your contact details`}</div>
        `}renderModalToolbar(){return x`
            <header>
                <div class="close">${t$3("Skip")}</div>

                <!--  -->

                <div class="title-container">
                    ${this.renderImage()}
                    <!--  -->
                    <div class="text">${this.renderTitle()}</div>
                </div>
            </header>
        `}renderNegativeAction(){}renderBody(){return x`
            <qrcg-custom-form-renderer
                class="elegant-input"
                form-id=${this.formId}
            >
                <qrcg-button slot="submit-button"> ${t$3`Send`} </qrcg-button>
            </qrcg-custom-form-renderer>
        `}}AutomaticFormModal.register();window.AutomaticFormModal=AutomaticFormModal;const style$j=":host{margin-top:1rem;width:300px;height:74px}";class QrcgGoogleRecaptcha extends BaseComponent{static tag="qrcg-google-recaptcha";static styleSheets=[...super.styleSheets,style$j];inputController=new FormInputController(this,FormInputController.MODE_PLAIN);static get properties(){return{name:{},value:{}}}connectedCallback(){super.connectedCallback(),window.addEventListener("scroll",this.onWindowScroll),window.addEventListener("resize",this.onWindowResize),this.init(),this.__bindInterval=setInterval(()=>{this.bindWidgetContainerPosition()},1e3)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("scroll",this.onWindowScroll),window.removeEventListener("resize",this.onWindowResize),clearInterval(this.__bindInterval)}static getScriptId(){return this.tag+"-remote-script"}onWindowResize=()=>{this.bindWidgetContainerPosition()};onWindowScroll=()=>{this.bindWidgetContainerPosition()};getContainer(){return this.widgetContainer?this.widgetContainer:(this.widgetContainer=document.createElement("div"),document.body.appendChild(this.widgetContainer),this.bindWidgetContainerPosition(),this.widgetContainer)}bindWidgetContainerPosition(){const w=this.getBoundingClientRect(),q=D=>`${D}px`;this.widgetContainer.style.top=q(w.top),this.widgetContainer.style.left=q(w.left),this.widgetContainer.style.position="fixed",this.widgetContainer.style.zIndex="1"}async init(){await this.loadScript(),this.widgetId=window.grecaptcha.render(this.getContainer(),{sitekey:Config.get("google_recaptcha.site_key"),callback:w=>{this.setValue(w)}})}setValue(w){this.value=w,this.dispatchEvent(new CustomEvent("on-input",{composed:!0,bubbles:!0,detail:{value:w,name:this.name}}))}reset(){window.grecaptcha.reset(this.widgetId)}loadScript(){if(document.getElementById(QrcgGoogleRecaptcha.getScriptId()))return Promise.resolve();const w=document.createElement("script");w.src="https://www.google.com/recaptcha/api.js?onload=qrcgRecaptchaGoogleOnLoad&render=explicit",w.id=QrcgGoogleRecaptcha.getScriptId();const q=new Promise(D=>{window.qrcgRecaptchaGoogleOnLoad=D});return document.head.appendChild(w),q}render(){}}QrcgGoogleRecaptcha.register();const style$i=`:host{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:2rem;background-image:url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' stroke='%23E1DEDEFF' stroke-width='3' stroke-dasharray='6%2c 14' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e")}.record-button{position:relative;align-items:center;justify-content:center;border-radius:50%;cursor:pointer;background-color:#000;color:#fff;display:inline-flex;width:4rem;height:4rem;transition:.5s ease}.record-button qrcg-icon{width:2.5rem;height:2.5rem;position:relative;z-index:2}:host([recording]) .record-button{width:3.5rem;height:3.5rem}.stop-icon{background-color:red;border:2px solid white;border-radius:2px;width:1.2rem;height:1.2rem;z-index:2;position:relative}.record-time{position:absolute;left:0;right:0;opacity:1;overflow:hidden;transition:.5s ease;display:flex;justify-content:space-between;background-color:#000;padding:.65rem 1rem;top:50%;transform:translateY(-50%);border-radius:3rem;color:transparent;pointer-events:none}:host([recording]) .record-time{left:-2rem;right:-2rem;opacity:1;color:#fff}`;function getDefaultExportFromCjs(F){return F&&F.__esModule&&Object.prototype.hasOwnProperty.call(F,"default")?F.default:F}var recorder$1={exports:{}};var recorder=recorder$1.exports,hasRequiredRecorder;function requireRecorder(){return hasRequiredRecorder||(hasRequiredRecorder=1,(function(F,w){(function(q,D){F.exports=D()})(recorder,function(){return(function(q){var D={};function Q(O){if(D[O])return D[O].exports;var U=D[O]={i:O,l:!1,exports:{}};return q[O].call(U.exports,U,U.exports,Q),U.l=!0,U.exports}return Q.m=q,Q.c=D,Q.d=function(O,U,G){Q.o(O,U)||Object.defineProperty(O,U,{enumerable:!0,get:G})},Q.r=function(O){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})},Q.t=function(O,U){if(1&U&&(O=Q(O)),8&U||4&U&&typeof O=="object"&&O&&O.__esModule)return O;var G=Object.create(null);if(Q.r(G),Object.defineProperty(G,"default",{enumerable:!0,value:O}),2&U&&typeof O!="string")for(var W in O)Q.d(G,W,(function(K){return O[K]}).bind(null,W));return G},Q.n=function(O){var U=O&&O.__esModule?function(){return O.default}:function(){return O};return Q.d(U,"a",U),U},Q.o=function(O,U){return Object.prototype.hasOwnProperty.call(O,U)},Q.p="",Q(Q.s=1)})([function(q,D,Q){function O(U,G,W){for(var K=0;K<W.length;K++)U.setUint8(G+K,W.charCodeAt(K))}Object.defineProperty(D,"__esModule",{value:!0}),D.compress=function(U,G,W){for(var K=G/W,ee=Math.max(K,1),Y=U.left,J=U.right,X=Math.floor((Y.length+J.length)/K),re=new Float32Array(X),te=0,oe=0;te<X;){var ne=Math.floor(oe);re[te]=Y[ne],te++,J.length&&(re[te]=J[ne],te++),oe+=ee}return re},D.encodePCM=function(U,G,W){W===void 0&&(W=!0);var K=0,ee=U.length*(G/8),Y=new ArrayBuffer(ee),J=new DataView(Y);if(G===8)for(var X=0;X<U.length;X++,K++){var re=(te=Math.max(-1,Math.min(1,U[X])))<0?128*te:127*te;re=+re+128,J.setInt8(K,re)}else for(X=0;X<U.length;X++,K+=2){var te=Math.max(-1,Math.min(1,U[X]));J.setInt16(K,te<0?32768*te:32767*te,W)}return J},D.encodeWAV=function(U,G,W,K,ee,Y){Y===void 0&&(Y=!0);var J=W>G?G:W,X=ee,re=new ArrayBuffer(44+U.byteLength),te=new DataView(re),oe=K,ne=0;O(te,ne,"RIFF"),ne+=4,te.setUint32(ne,36+U.byteLength,Y),O(te,ne+=4,"WAVE"),O(te,ne+=4,"fmt "),ne+=4,te.setUint32(ne,16,Y),ne+=4,te.setUint16(ne,1,Y),ne+=2,te.setUint16(ne,oe,Y),ne+=2,te.setUint32(ne,J,Y),ne+=4,te.setUint32(ne,oe*J*(X/8),Y),ne+=4,te.setUint16(ne,oe*(X/8),Y),ne+=2,te.setUint16(ne,X,Y),O(te,ne+=2,"data"),ne+=4,te.setUint32(ne,U.byteLength,Y),ne+=4;for(var se=0;se<U.byteLength;)te.setUint8(ne,U.getUint8(se)),ne++,se++;return te}},function(q,D,Q){var O,U=this&&this.__extends||(O=function(Y,J){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,re){X.__proto__=re}||function(X,re){for(var te in re)re.hasOwnProperty(te)&&(X[te]=re[te])})(Y,J)},function(Y,J){function X(){this.constructor=Y}O(Y,J),Y.prototype=J===null?Object.create(J):(X.prototype=J.prototype,new X)});Object.defineProperty(D,"__esModule",{value:!0});var G=Q(2),W=Q(0),K=Q(3),ee=(function(Y){function J(X){X===void 0&&(X={});var re=Y.call(this,X)||this;return re.isrecording=!1,re.ispause=!1,re.isplaying=!1,re}return U(J,Y),J.prototype.setOption=function(X){X===void 0&&(X={}),this.setNewOption(X)},J.prototype.start=function(){return this.isrecording?Promise.reject():(this.isrecording=!0,this.startRecord())},J.prototype.pause=function(){this.isrecording&&!this.ispause&&(this.ispause=!0,this.pauseRecord())},J.prototype.resume=function(){this.isrecording&&this.ispause&&(this.ispause=!1,this.resumeRecord())},J.prototype.stop=function(){this.isrecording&&(this.isrecording=!1,this.ispause=!1,this.stopRecord())},J.prototype.play=function(){this.stop(),this.isplaying=!0,this.onplay&&this.onplay(),K.default.addPlayEnd(this.onplayend);var X=this.getWAV();X.byteLength>44&&K.default.play(X.buffer)},J.prototype.getPlayTime=function(){return K.default.getPlayTime()},J.prototype.pausePlay=function(){!this.isrecording&&this.isplaying&&(this.isplaying=!1,this.onpauseplay&&this.onpauseplay(),K.default.pausePlay())},J.prototype.resumePlay=function(){this.isrecording||this.isplaying||(this.isplaying=!0,this.onresumeplay&&this.onresumeplay(),K.default.resumePlay())},J.prototype.stopPlay=function(){this.isrecording||(this.isplaying=!1,this.onstopplay&&this.onstopplay(),K.default.stopPlay())},J.prototype.destroy=function(){return K.default.destroyPlay(),this.destroyRecord()},J.prototype.getRecordAnalyseData=function(){return this.getAnalyseData()},J.prototype.getPlayAnalyseData=function(){return K.default.getAnalyseData()},J.prototype.getPCM=function(){this.stop();var X=this.getData();return X=W.compress(X,this.inputSampleRate,this.outputSampleRate),W.encodePCM(X,this.oututSampleBits,this.littleEdian)},J.prototype.getPCMBlob=function(){return new Blob([this.getPCM()])},J.prototype.downloadPCM=function(X){X===void 0&&(X="recorder");var re=this.getPCMBlob();G.downloadPCM(re,X)},J.prototype.getWAV=function(){var X=this.getPCM();return W.encodeWAV(X,this.inputSampleRate,this.outputSampleRate,this.config.numChannels,this.oututSampleBits,this.littleEdian)},J.prototype.getWAVBlob=function(){return new Blob([this.getWAV()],{type:"audio/wav"})},J.prototype.downloadWAV=function(X){X===void 0&&(X="recorder");var re=this.getWAVBlob();G.downloadWAV(re,X)},J.prototype.download=function(X,re,te){G.download(X,re,te)},J.prototype.getChannelData=function(){var X=this.getPCM(),re=X.byteLength,te=this.littleEdian,oe={left:null,right:null};if(this.config.numChannels===2){var ne=new DataView(new ArrayBuffer(re/2)),se=new DataView(new ArrayBuffer(re/2));if(this.config.sampleBits===16)for(var ie=0;ie<re/2;ie+=2)ne.setInt16(ie,X.getInt16(2*ie,te),te),se.setInt16(ie,X.getInt16(2*ie+2,te),te);else for(ie=0;ie<re/2;ie+=2)ne.setInt8(ie,X.getInt8(2*ie)),se.setInt8(ie,X.getInt8(2*ie+1));oe.left=ne,oe.right=se}else oe.left=X;return oe},J})(Q(5).default);D.default=ee},function(q,D,Q){function O(U,G,W){var K=document.createElement("a");K.href=window.URL.createObjectURL(U),K.download=G+"."+W,K.click()}Object.defineProperty(D,"__esModule",{value:!0}),D.downloadWAV=function(U,G){G===void 0&&(G="recorder"),O(U,G,"wav")},D.downloadPCM=function(U,G){G===void 0&&(G="recorder"),O(U,G,"pcm")},D.download=function(U,G,W){return O(U,G,W)}},function(q,D,Q){Object.defineProperty(D,"__esModule",{value:!0});var O=Q(4),U=null,G=0,W=0,K=null,ee=null,Y=null,J=!1,X=0,re=function(){};function te(){return J=!1,K.decodeAudioData(Y.slice(0),function(se){(U=K.createBufferSource()).onended=function(){J||(X=K.currentTime-W+G,re())},U.buffer=se,U.connect(ee),ee.connect(K.destination),U.start(0,G),W=K.currentTime},function(se){O.throwError(se)})}function oe(){U&&(U.stop(),U=null)}var ne=(function(){function se(){}return se.play=function(ie){return K||(K=new(window.AudioContext||window.webkitAudioContext),(ee=K.createAnalyser()).fftSize=2048),this.stopPlay(),Y=ie,X=0,te()},se.pausePlay=function(){oe(),G+=K.currentTime-W,J=!0},se.resumePlay=function(){return te()},se.stopPlay=function(){G=0,Y=null,oe()},se.destroyPlay=function(){this.stopPlay()},se.getAnalyseData=function(){var ie=new Uint8Array(ee.frequencyBinCount);return ee.getByteTimeDomainData(ie),ie},se.addPlayEnd=function(ie){ie===void 0&&(ie=function(){}),re=ie},se.getPlayTime=function(){var ie=J?G:K.currentTime-W+G;return X||ie},se})();D.default=ne},function(q,D,Q){Object.defineProperty(D,"__esModule",{value:!0}),D.throwError=function(O){throw new Error(O)}},function(q,D,Q){Object.defineProperty(D,"__esModule",{value:!0});var O=Q(0),U=(function(){function G(W){W===void 0&&(W={}),this.size=0,this.lBuffer=[],this.rBuffer=[],this.tempPCM=[],this.inputSampleBits=16,this.fileSize=0,this.duration=0,this.needRecord=!0;var K,ee=new(window.AudioContext||window.webkitAudioContext);this.inputSampleRate=ee.sampleRate,this.setNewOption(W),this.littleEdian=(K=new ArrayBuffer(2),new DataView(K).setInt16(0,256,!0),new Int16Array(K)[0]===256),G.initUserMedia()}return G.prototype.setNewOption=function(W){W===void 0&&(W={}),this.config={sampleBits:~[8,16].indexOf(W.sampleBits)?W.sampleBits:16,sampleRate:~[8e3,11025,16e3,22050,24e3,44100,48e3].indexOf(W.sampleRate)?W.sampleRate:this.inputSampleRate,numChannels:~[1,2].indexOf(W.numChannels)?W.numChannels:1},this.outputSampleRate=this.config.sampleRate,this.oututSampleBits=this.config.sampleBits},G.prototype.startRecord=function(){var W=this;return this.context&&this.destroyRecord(),this.initRecorder(),navigator.mediaDevices.getUserMedia({audio:!0}).then(function(K){W.audioInput=W.context.createMediaStreamSource(K),W.stream=K}).then(function(){W.audioInput.connect(W.analyser),W.analyser.connect(W.recorder),W.recorder.connect(W.context.destination)})},G.prototype.pauseRecord=function(){this.needRecord=!1},G.prototype.resumeRecord=function(){this.needRecord=!0},G.prototype.stopRecord=function(){this.audioInput&&this.audioInput.disconnect(),this.source&&this.source.stop(),this.recorder.disconnect(),this.analyser.disconnect(),this.needRecord=!0},G.prototype.destroyRecord=function(){return this.clearRecordStatus(),this.stopStream(),this.closeAudioContext()},G.prototype.getAnalyseData=function(){var W=new Uint8Array(this.analyser.frequencyBinCount);return this.analyser.getByteTimeDomainData(W),W},G.prototype.getData=function(){return this.flat()},G.prototype.clearRecordStatus=function(){this.lBuffer.length=0,this.rBuffer.length=0,this.size=0,this.fileSize=0,this.PCM=null,this.audioInput=null,this.duration=0},G.prototype.flat=function(){var W=null,K=new Float32Array(0);this.config.numChannels===1?W=new Float32Array(this.size):(W=new Float32Array(this.size/2),K=new Float32Array(this.size/2));for(var ee=0,Y=0;Y<this.lBuffer.length;Y++)W.set(this.lBuffer[Y],ee),ee+=this.lBuffer[Y].length;for(ee=0,Y=0;Y<this.rBuffer.length;Y++)K.set(this.rBuffer[Y],ee),ee+=this.rBuffer[Y].length;return{left:W,right:K}},G.prototype.initRecorder=function(){var W=this;this.clearRecordStatus(),this.context=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.context.createAnalyser(),this.analyser.fftSize=2048;var K=this.context.createScriptProcessor||this.context.createJavaScriptNode;this.recorder=K.apply(this.context,[4096,this.config.numChannels,this.config.numChannels]),this.recorder.onaudioprocess=function(ee){if(W.needRecord){var Y,J=ee.inputBuffer.getChannelData(0),X=null;W.lBuffer.push(new Float32Array(J)),W.size+=J.length,W.config.numChannels===2&&(X=ee.inputBuffer.getChannelData(1),W.rBuffer.push(new Float32Array(X)),W.size+=X.length),W.fileSize=Math.floor(W.size/Math.max(W.inputSampleRate/W.outputSampleRate,1))*(W.oututSampleBits/8),Y=100*Math.max.apply(Math,J),W.duration+=4096/W.inputSampleRate,W.onprocess&&W.onprocess(W.duration),W.onprogress&&W.onprogress({duration:W.duration,fileSize:W.fileSize,vol:Y})}}},G.prototype.stopStream=function(){this.stream&&this.stream.getTracks&&(this.stream.getTracks().forEach(function(W){return W.stop()}),this.stream=null)},G.prototype.closeAudioContext=function(){return this.context&&this.context.close&&this.context.state!=="closed"?this.context.close():new Promise(function(W){W()})},G.initUserMedia=function(){navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(W){var K=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return K?new Promise(function(ee,Y){K.call(navigator,W,ee,Y)}):Promise.reject(new Error(" getUserMedia !"))})},G.prototype.transformIntoPCM=function(W,K){var ee=new Float32Array(W),Y=new Float32Array(K),J=O.compress({left:ee,right:Y},this.inputSampleRate,this.outputSampleRate);return O.encodePCM(J,this.oututSampleBits,this.littleEdian)},G.getPermission=function(){return this.initUserMedia(),navigator.mediaDevices.getUserMedia({audio:!0}).then(function(W){W&&W.getTracks().forEach(function(K){return K.stop()})})},G})();D.default=U}]).default})})(recorder$1)),recorder$1.exports}var jsAudioRecorder,hasRequiredJsAudioRecorder;function requireJsAudioRecorder(){return hasRequiredJsAudioRecorder||(hasRequiredJsAudioRecorder=1,jsAudioRecorder=requireRecorder()),jsAudioRecorder}var jsAudioRecorderExports=requireJsAudioRecorder();const Recorder=getDefaultExportFromCjs(jsAudioRecorderExports);class AudioRecorder extends BaseComponent{static tag="qrcg-audio-recorder";static styleSheets=[...super.styleSheets,style$i];static EVENT_ON_RECORD_COMPLETED="on-record-completed";static get properties(){return{...super.properties,isRecording:{type:Boolean,reflect:!0,attribute:"recording"},seconds:{}}}constructor(){super(),this.isRecording=!1,this.seconds=0}disconnectedCallback(){super.disconnectedCallback(),this.recorder?.destroy()}getSeconds(){return this.pad(this.seconds%60)}getMinutes(){return this.pad(Math.floor(this.seconds/60))}pad(w){return w=w+"",w.length<2?"0"+w:w}toggleRecording(){this.isRecording=!this.isRecording,this.isRecording?this.start():this.stop()}start(){this.startRecording()}stop(){this.stopRecording(),this.resetInterval()}startInterval(){this.__recordingInterval=setInterval(()=>{this.seconds++},1e3)}resetInterval(){this.seconds=0,clearInterval(this.__recordingInterval)}renderIcon(){return this.isRecording?x` <div class="stop-icon"></div> `:x`
                <qrcg-icon mdi-icon=${mdiMicrophone}></qrcg-icon>
                <!--  -->
            `}async stopRecording(){this.recorder.stop(),await sleep(100);const w=this.recorder.getWAVBlob(),q=new File([w],"audio.wav");setTimeout(()=>{this.recorder?.destroy()},1e3),this.dispatchOnRecordCompletedEvent(q)}startRecording(){if(!navigator.mediaDevices){this.isRecording=!1,showToast(t$3`Cannot request audio recording permission.`);return}navigator.mediaDevices.getUserMedia({audio:!0}).then(()=>{this.recorder=new Recorder({sampleBits:16,sampleRate:44100,numChannels:1}),this.recorder.start(),this.startInterval()}).catch(w=>{this.isRecording=!1,console.error(`The following getUserMedia error occurred: ${w}`)})}dispatchOnRecordCompletedEvent(w){this.dispatchEvent(new CustomEvent(AudioRecorder.EVENT_ON_RECORD_COMPLETED,{composed:!0,bubbles:!0,detail:{file:w}}))}render(){return x`
            <div class="record-button" @click=${this.toggleRecording}>
                ${this.renderIcon()}
                <!--  -->
                <div class="record-time">
                    <div class="minutes">${this.getMinutes()}</div>
                    <div class="seconds">${this.getSeconds()}</div>
                </div>
            </div>
            <!--  -->
        `}}AudioRecorder.register();const style$h=":host{display:flex;gap:.5rem}:host([disabled]){pointer-events:none;opacity:.5}input{appearance:none;min-width:none;width:1.65rem;border:0;background-color:var(--gray-0);font-size:1rem;padding:.25rem .5rem;border-radius:5px}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number]{-moz-appearance:textfield}input:focus{outline:0}qrcg-button::part(button){padding:.5rem;min-width:0;box-shadow:none;border-radius:.25rem}";class QrcgQuantityPicker extends BaseComponent{static tag="qrcg-quantity-picker";static styleSheets=[...super.styleSheets,style$h];static get properties(){return{...super.properties,value:{},name:{},disabled:{type:Boolean,reflect:!0}}}constructor(){super(),this.value=0}connectedCallback(){super.connectedCallback(),this.addEventListener("input",this.onNativeInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("input",this.onNativeInput)}onNativeInput=()=>{const w=this.getInput().value;w<0&&(this.getInput().value=Math.abs(w)),this.setValue(w)};syncInputWidth(){const w=""+this.getInputValue();if(w.length>5)return;const q=`calc(1.65rem + ${w.length-1} * 0.5rem)`;this.getInput().style.width=q}updated(w){w.has("value")&&(this.syncValue(),this.syncInputWidth()),w.has("disabled")&&this.disabled&&this.blur()}syncValue(){this.getInputValue()!==this.value&&(this.getInput().value=this.value)}getInputValue(){return this.getInput()?.value}getInput(){return this.$("input")}increaseValue(){this.setValue(+this.value+1)}decreaseValue(){this.setValue(+this.value-1)}setValue(w){this.value=Math.abs(w),this.value=Math.max(this.value,1),this.dispatchInputEvent()}dispatchInputEvent(){this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:{value:this.value,name:this.name}}))}render(){return x`
            <qrcg-button
                @click=${this.decreaseValue}
                ?disabled=${this.value<=1}
            >
                <qrcg-icon mdi-icon=${mdiMinus}></qrcg-icon>
            </qrcg-button>

            <input type="number" min="0" step="1" pattern="\\d+" />

            <qrcg-button @click=${this.increaseValue}>
                <qrcg-icon mdi-icon=${mdiPlusThick}></qrcg-icon>
            </qrcg-button>
        `}}QrcgQuantityPicker.register();class BaseRouter extends BaseComponent{static register(){super.register(),this.injectInDocumentBody()}}const style$g="qrcg-customer-authenticator{max-width:500px;margin:2rem auto;border:2px solid var(--gray-1);border-radius:.5rem;padding:1rem}",style$f=":host{--qrcg-input-box-shadow: inset 0 0 0 2px var(--gray-1);--qrcg-input-box-shadow-focus: inset 0 0 0 2px var(--gray-2)}.logged-in-message{display:flex;gap:.5rem;align-items:center}.logged-in-message qrcg-icon{color:var(--success-0)}.logged-in-message .logout{color:var(--info-0);cursor:pointer;margin-inline-start:auto}.logged-in-message .logout:hover{text-decoration:underline}",style$e="",style$d=".navigation{display:flex;align-items:center;margin-top:.5rem}.continue{margin-inline-start:auto}:host([loading]) *:not(qrcg-button){opacity:.5;pointer-events:none}.current-email{font-size:.8rem;display:flex;gap:.5rem;padding:.5rem 0;justify-content:space-between;margin-bottom:1rem}.current-email .change{cursor:pointer;color:var(--info-0)}.current-email .change:hover{text-decoration:underline}";class BaseStep extends BaseComponent{static tag="qrcg-customer-authenticator-base-step";static styleSheets=[...super.styleSheets,style$d];static get properties(){return{...super.properties,loading:{type:Boolean,reflect:!0}}}constructor(){super(),this.loading=!1}connectedCallback(){super.connectedCallback(),this.addEventListener("keypress",this.onKeyPress),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keypress",this.onKeyPress),this.removeEventListener("on-input",this.onInput)}onInput(w){}firstUpdated(){setTimeout(()=>{this.focusInputIfFound()},100)}focusInputIfFound(){const w=this.$("qrcg-input");w&&w.focus()}getScenario(){return this.getCustomerAuthenticator().scenario}setScenario(w){this.getCustomerAuthenticator().scenario=w}field(w){return this.getCustomerAuthenticator()?.field(w)}onKeyPress(w){w.key==="Enter"&&this.doContinueAction()}getCustomerAuthenticator(){return parentMatches(this,CustomerAuthenticator.tag)}setCurrentStep(w){this.getCustomerAuthenticator().currentStepRenderer=()=>w.renderSelf(),this.getCustomerAuthenticator().requestUpdate()}handleContinueAction(){return this.__continuePromise?this.__continuePromise:(this.__continuePromise=this.handleContinue(),this.__continuePromise.finally(()=>{setTimeout(()=>{this.__continuePromise=null},100)}),this.__continuePromise)}async doContinueAction(){this.setLoading(!0);try{await this.handleContinueAction()}catch(w){console.error(w)}}async onContinueButtonClick(){this.doContinueAction()}async handleContinue(){}onBackButtonClick(){this.setCurrentStep(this.getBackStep())}getBackStep(){}getBackButton(){return this.$("qrcg-button.back")}getContinueButton(){return this.$("qrcg-button.continue")}getContinueButtonText(){return t$3`Continue`}onChangeEmailClick(){this.setCurrentStep(EmailStep)}setLoading(w){console.log("setting loading",w),console.trace(),this.loading=w,this.getContinueButton()&&(this.getContinueButton().loading=w),this.getBackButton()&&(this.getBackButton().disabled=w),w&&this.blur()}renderStep(){}renderCurrentEmail(){return x`
            <div class="current-email">
                <div class="email">${this.field("email")}</div>
                <div class="change" @click=${this.onChangeEmailClick}>
                    ${t$3`Change`}
                </div>
            </div>
        `}renderContinueButton(){return x`
            <qrcg-button @click=${this.onContinueButtonClick} class="continue">
                ${this.getContinueButtonText()}
            </qrcg-button>
        `}renderBackButton(){if(this.getBackStep())return x`
            <qrcg-button
                transparent
                @click=${this.onBackButtonClick}
                class="back"
            >
                ${t$3`Back`}
            </qrcg-button>
        `}renderNavigation(){return x`
            <div class="navigation">
                <!--  -->
                ${this.renderBackButton()}
                <!--  -->
                ${this.renderContinueButton()}
            </div>
        `}render(){return x`
            ${this.renderStep()}
            <!--  -->
            ${this.renderNavigation()}
        `}}BaseStep.register();const style$c="";class PasswordStep extends BaseStep{static tag="qrcg-customer-authenticator-password-step";static styleSheets=[...super.styleSheets,style$c];isNewAccountRegistration(){return this.getScenario()===CustomerAuthenticator.SCENARIO_REGISTER}isLogin(){return this.getScenario()===CustomerAuthenticator.SCENARIO_LOGIN}getContinueButtonText(){return this.isLogin()?t$3`Login`:t$3`Register`}async handleLogin(){await TraditionalLogin.login({email:this.field("email"),password:this.field("password")},!1)?(this.dispatchAuthorizationEvent(),showToast(t$3`Logged in successfully.`)):(showToast(t$3`Invalid password, please try again.`),setTimeout(()=>{this.setLoading(!1),this.focusInputIfFound(),this.resetPasswordInputValue()},100))}resetPasswordInputValue(){this.$("qrcg-input").value=""}async createNewAccount(){const{json:w}=await post("account/otp-registration",{email:this.field("email"),password:this.field("password"),name:this.field("name"),mobile_number:this.field("mobile_number")});window.dispatchEvent(new CustomEvent("qrcg-login:after-login",{detail:{user:w.user,token:w.token,shouldDoRedirect:!1}})),showToast(t$3`Account created successfully`),this.dispatchAuthorizationEvent()}async handleContinue(){return this.isLogin()?this.handleLogin():this.createNewAccount()}dispatchAuthorizationEvent(){this.dispatchEvent(new CustomEvent(CustomerAuthenticator.EVENT_AUTHORIZATION_SUCCESS,{bubbles:!0,composed:!0}))}renderStep(){return x`
            <!--  -->
            ${this.renderCurrentEmail()}

            <!--  -->

            <qrcg-input
                name="password"
                type="password"
                placeholder=${t$3`Enter password`}
            >
                ${t$3`Password`}
            </qrcg-input>
        `}}PasswordStep.register();const style$b="",style$a="";class MobileStep extends BaseStep{static tag="qrcg-customer-authenticator-mobile-step";async handleContinue(){await sleep(500),this.setCurrentStep(PasswordStep)}getBackStep(){}renderStep(){return x`
            <!--  -->
            ${this.renderCurrentEmail()}

            <!--  -->
            <qrcg-mobile-input name="mobile_number">
                ${t$3`Mobile number`}
            </qrcg-mobile-input>
        `}}MobileStep.register();class NameStep extends BaseStep{static tag="qrcg-customer-authenticator-name-step";static styleSheets=[...super.styleSheets,style$a];async handleContinue(){await sleep(500),this.setCurrentStep(this.getNextStep())}getNextStep(){return QrcgMobileInput.shouldShowDuringRegistration()?MobileStep:PasswordStep}getBackStep(){}renderStep(){return x`
            <!--  -->
            ${this.renderCurrentEmail()}

            <!--  -->
            <qrcg-input name="name" placeholder=${t$3`Enter your name`}>
                <!--  -->
                ${t$3`Name`}
            </qrcg-input>
        `}}NameStep.register();class OtpStep extends BaseStep{static tag="qrcg-customer-authenticator-otp-step";static styleSheets=[...super.styleSheets,style$b];async onInput(w){const q=w.detail.value;q.length>5&&this.setInputValue(q.substr(0,5)),await sleep(200),this.field("otp")?.length>=5&&this.doContinueAction()}async handleContinue(){await this.verifyOtpCode()?this.setCurrentStep(NameStep):(setTimeout(()=>{this.setLoading(!1),this.resetInputValue(),this.focusInputIfFound()},100),showToast(t$3`Invalid OTP code.`))}resetInputValue(){this.$("qrcg-input").value=""}setInputValue(w){this.$("qrcg-input").value=w}async verifyOtpCode(){const{json:w}=await post("account/verify-otp-code",{email:this.field("email"),otp:this.field("otp")});return w?.result}getBackStep(){return EmailStep}renderStep(){return x`
            ${this.renderCurrentEmail()}
            <!--  -->
            <qrcg-input
                name="otp"
                placeholder=${t$3`Enter OTP`}
                type="text"
                pattern="\\d+"
            >
                ${t$3`OTP Code`}
            </qrcg-input>
        `}}OtpStep.register();class EmailStep extends BaseStep{static tag="qrcg-customer-authenticator-email-step";static styleSheets=[...super.styleSheets,style$e];connectedCallback(){super.connectedCallback()}async handleContinue(){if(!isEmail(this.field("email"))){await sleep(500),showToast(t$3`Please enter a valid email`),this.setLoading(!1),this.focusInputIfFound();return}if(await this.isEmailFound())return this.setScenario(CustomerAuthenticator.SCENARIO_LOGIN),this.setCurrentStep(PasswordStep);await this.sendOtpCode(),this.setCurrentStep(OtpStep)}async sendOtpCode(){await post("account/send-otp-code",{email:this.field("email")})}async isEmailFound(){const{json:w}=await post("account/is-email-found",{email:this.field("email")});return w.found}renderStep(){return x`
            <qrcg-input name="email" placeholder=${t$3`Enter email`} type="email">
                ${t$3`Email`}
            </qrcg-input>
        `}}EmailStep.register();class CustomerAuthenticator extends BaseComponent{static tag="qrcg-customer-authenticator";static styleSheets=[...super.styleSheets,style$f];static SCENARIO_LOGIN="scenario:login";static SCENARIO_REGISTER="scenario:register";static get EVENT_AUTHORIZATION_SUCCESS(){return`${this.tag}::authorization-success`}static get EVENT_AUTHORIZATION_FAILED(){return`${this.tag}::authorization-failed`}constructor(){super(),this.data={},this.scenario=CustomerAuthenticator.SCENARIO_REGISTER}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput),this.addEventListener(CustomerAuthenticator.EVENT_AUTHORIZATION_SUCCESS,this.onAuthorizationSuccess)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput),this.removeEventListener(CustomerAuthenticator.EVENT_AUTHORIZATION_SUCCESS,this.onAuthorizationSuccess)}onAuthorizationSuccess(){this.requestUpdate()}onInput(w){const{name:q,value:D}=w.detail;this.data[q]=D}doLogout(){clearLocalCredentials(),this.data={},this.currentStepRenderer=()=>EmailStep.renderSelf(),this.requestUpdate()}field(w){return this.data[w]}currentStepRenderer=()=>EmailStep.renderSelf();renderCurrentStep(){return this.currentStepRenderer()}renderLoggedInMessage(){return x`
            <div class="logged-in-message">
                <qrcg-icon mdi-icon=${mdiCheckBold}> </qrcg-icon>

                <div class="text">${t$3`Logged in as`}</div>

                <strong>${loadUser().name}</strong>

                <div class="logout" @click=${this.doLogout}>${t$3`Logout`}</div>
            </div>
        `}render(){return loadUser()?this.renderLoggedInMessage():this.renderCurrentStep()}}CustomerAuthenticator.register();class DemoRouter extends BaseRouter{static tag="qrcg-customer-authenticator-demo-router";static styleSheets=[...super.styleSheets,style$g];render(){return x`
            <qrcg-route route="/account/customer-authenticator$">
                <template>
                    <qrcg-customer-authenticator></qrcg-customer-authenticator>
                </template>
            </qrcg-route>
        `}}DemoRouter.register();class CustomerAuthenticatorModal extends QrcgModal{static tag="qrcg-customer-authenticator-modal";static async authorize(){return loadUser()?Promise.resolve():this.open()}connectedCallback(){super.connectedCallback(),this.addEventListener(CustomerAuthenticator.EVENT_AUTHORIZATION_SUCCESS,this.onAuthorizationSuccess)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(CustomerAuthenticator.EVENT_AUTHORIZATION_SUCCESS,this.onAuthorizationSuccess)}onAuthorizationSuccess=()=>{this.onAffirmativeClick()};renderModalActions(){}renderTitle(){return t$3`Login Or Register`}renderBody(){return CustomerAuthenticator.renderSelf()}}CustomerAuthenticatorModal.register();const style$9=":host{display:flex}.window{flex:1;overflow:hidden}*::slotted(*){padding-inline-end:1rem;box-sizing:content-box!important;width:100%}.scrollbar{width:.6rem;position:relative}.thumb{cursor:pointer;position:absolute;top:min(var(--top, 0),100% - 3rem);height:var(--height, 2.5rem);inset-inline-end:-1rem;padding:0 1rem;box-sizing:content-box;transition:opacity .3s ease,top .1s ease;opacity:0}.thumb .thumb-elem{background-color:var(--gray-1);border-radius:2rem;height:100%;width:.35rem;margin-inline-start:auto;transition:all .2s ease}.thumb:hover .thumb-elem{background-color:var(--gray-2)}:host(:hover) .thumb,:host([is-dragging-thumb]) .thumb{opacity:1}:host(:hover) .thumb-elem,:host([is-dragging-thumb]) .thumb-elem{background-color:var(--gray-2)}:host([neutral]) .thumb{display:none}";class Scrollable extends BaseComponent{static tag="qrcg-scrollable";static styleSheets=[...super.styleSheets,style$9];static get properties(){return{...super.properties,isDraggingThumb:{type:Boolean,attribute:"is-dragging-thumb",reflect:!0}}}boundChild=null;constructor(){super(),this.isDraggingThumb=!1}connectedCallback(){super.connectedCallback(),document.addEventListener("mousedown",this.onMouseDown),this.observer=new MutationObserver(this.onSubTreeChanged),this.observer.observe(this,{subtree:!0,childList:!0}),this.intersection=new IntersectionObserver(this.onIntersectionChanges),this.intersection.observe(this)}disconnectedCallback(){super.disconnectedCallback(),this.boundChild.removeEventListener("scroll",this.onScroll),document.removeEventListener("mousedown",this.onMouseDown),this.observer.disconnect(),this.intersection.disconnect()}onIntersectionChanges=()=>{this.syncNeutral()};onSubTreeChanged=()=>{this.syncNeutral()};async syncNeutral(){await sleep(10),this.boundChild.scrollHeight===this.boundChild.clientHeight?this.setAttribute("neutral","true"):this.removeAttribute("neutral","true")}getThumb(){return this.$(".thumb")}firstUpdated(){this.boundChild=this.querySelector("*"),this.boundChild.addEventListener("scroll",this.onScroll),this.getThumb().addEventListener("mousedown",this.onThumbMouseDown),setTimeout(()=>{this.syncNeutral()},1e3)}onMouseDown=w=>{const q=w.composedPath()[0];parentMatches(q,".scrollbar .thumb")==this.getThumb()&&(this.isDraggingThumb=!0,document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove))};onMouseUp=()=>{this.isDraggingThumb=!1,document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove)};onMouseMove=w=>{const q=this.offsetHeight;let D=100*(w.clientY-this.getBoundingClientRect().y)/q,Q=this.boundChild.scrollHeight*D/100;this.boundChild.scrollTo({top:Q})};onScroll=()=>{const w=this.boundChild.scrollHeight,q=this.boundChild.scrollTop,D=this.boundChild.clientHeight;let Q=q/w*100;const O=Math.max(D/w*100,10);Q=Math.round(Q),this.getThumb().style.setProperty("--top",`${Q}%`),this.getThumb().style.setProperty("--height",`${O}%`)};render(){return x`
            <!--  -->
            <div class="window">
                <slot></slot>
            </div>

            <div class="scrollbar">
                <div class="thumb">
                    <div class="thumb-elem"></div>
                </div>
            </div>
        `}}Scrollable.register();class SmoothScroller{target=null;duration=1200;top=0;frame=null;debug=!1;static withTarget(w){const q=new this;return q.target=w,q}static shouldSmoothScroll(){return queryParam("smooth-scroll")==="true"?!0:window.SMOOTH_SCROLLER_SMOOTH_PREVIEW?queryParam("smooth-scroll")!=="false":!1}static animateCurrentDocumentIfNeeded(){this.shouldSmoothScroll()&&document.addEventListener("all-images-loaded",()=>{setTimeout(()=>{this.withTarget(window).animatePreview()},500)})}constructor(){this.bindStopEvents()}isOneCycle(){return window.SMOOTH_SCROLLER_IS_ONE_CYCLE}bindStopEvents(){["wheel","touchstart","touchmove","keydown","mousedown"].forEach(q=>{window.addEventListener(q,this.stop)})}inDuration(w){return this.duration=w,this}toPosition(w){return this.top=w,this}toTargetEnd(){return this.top=this.target.scrollHeight,this}easeInCubic(w){return w*w*w}linear(w){return w}stop=()=>{this.didStop=!0,cancelAnimationFrame(this.frame)};withDebugging(){return this.debug=!0,this}async animatePreview(){for(this.inDuration(document.body.scrollHeight*7);;){if(this.didStop||(await this.toPosition(document.body.scrollHeight).scroll(),this.didStop))return;await this.toPosition(.5).scroll(),await sleep(1500),this.isOneCycle()&&this.stop()}}scroll(){return this.scrollPromise=new Promise(w=>{this.scrollPromiseResolver=w,this.frame=requestAnimationFrame(()=>{const q=new Date().getTime(),D=q,Q=window.pageYOffset;this.scrollToPosition(D,q,this.duration,this.top,Q)})}),this.scrollPromise}scrollToPosition(w,q,D,Q,O){const U=q-w;let G=U/D;const W=this.linear(G);let K=Math.abs(O-Q)*W;O>Q&&(K=-K),this.debug&&console.log({newPostion:K}),G=Math.min(G,1),this.target.scroll(0,O+K),U<D?this.frame=requestAnimationFrame(()=>{const ee=new Date().getTime();this.scrollToPosition(w,ee,D,Q,O)}):isFunction(this.scrollPromiseResolver)&&this.scrollPromiseResolver()}}SmoothScroller.animateCurrentDocumentIfNeeded();class Form extends QrcgSystemSettingsFormBase{static tag="qrcg-tax-form";renderTaxesSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Taxes`}</h2>

                <p class="instructions">
                    ${t$3`Taxes are always inclusive, set your plan price to include the tax.`}
                </p>

                <qrcg-input
                    name="tax.rate"
                    placeholder=${t$3`Enter tax rate`}
                    type="number"
                >
                    ${t$3`Tax Rate %`}
                </qrcg-input>
            </qrcg-form-section>
        `}renderInvoicingSection(){return x`
            <qrcg-form-section>
                <h2 class="section-title">${t$3`Invoicing`}</h2>

                <qrcg-input
                    name="invoice.business_name"
                    placeholder=${t$3`Enter business name`}
                >
                    ${t$3`Business Name`}
                </qrcg-input>

                <qrcg-input
                    name="invoice.business_email"
                    type="email"
                    placeholder=${t$3`Enter business email`}
                >
                    ${t$3`Business Email`}
                </qrcg-input>

                <qrcg-input
                    name="invoice.business_phone"
                    type="tel"
                    placeholder=${t$3`Enter business phone`}
                >
                    ${t$3`Business Phone`}
                </qrcg-input>

                <qrcg-input
                    name="invoice.tax_id"
                    placeholder=${t$3`Enter your business tax id`}
                >
                    ${t$3`Tax ID`}
                </qrcg-input>

                <qrcg-textarea
                    name="invoice.business_address"
                    placeholder=${t$3`Enter your business address`}
                >
                    ${t$3`Business Address`}
                </qrcg-textarea>

                <qrcg-textarea
                    name="invoice.invoice_message"
                    placeholder=${t$3`Enter invoice message`}
                >
                    ${t$3`Invoice Message`}

                    <div slot="instructions">
                        ${t$3`Add text to show after the invoice table. HTML is accepted.`}
                    </div>
                </qrcg-textarea>
            </qrcg-form-section>
        `}renderForm(){return[this.renderTaxesSection(),this.renderInvoicingSection()]}}Form.register();class Page extends QrcgDashboardPage{static tag="qrcg-tax-page";pageTitle(){return t$3`Tax Settings`}renderContent(){return x`
            <!--  -->
            <qrcg-tax-form></qrcg-tax-form>
        `}}Page.register();class TaxesRouter extends BaseRouter{static tag="qrcg-taxes-router";render(){return x`
            <!--  -->
            <qrcg-protected-route
                route="/dashboard/tax"
                permission="tax.manage"
            >
                <template>
                    <qrcg-tax-page></qrcg-tax-page>
                </template>
            </qrcg-protected-route>
        `}}TaxesRouter.register();const style$8=".row{display:flex;gap:1rem;flex-wrap:wrap}@media(max-width:900px){.row{flex-direction:column}}.row:not(:first-child){margin-top:1rem}.loader-container{display:flex;align-items:center;justify-content:center;padding:1rem}",style$7=':host{border-radius:1.4rem;border:1px solid var(--gray-1);padding:1rem;max-width:800px}@media(max-width:900px){:host{width:100%;border:0}}@media(min-width:1200px)and (max-width:1400px){:host{max-width:500px}}@media(min-width:1400px)and (max-width:1550px){:host{max-width:650px}}h2{font-size:1.2rem;font-weight:400;margin:0;margin-bottom:.25rem}.date-range{color:var(--gray-2);font-size:.9rem}.total-number-container{display:flex;gap:.5rem;align-items:baseline;margin-top:4rem}@media(max-width:900px){.total-number-container{margin-top:1rem}}.total-number-container .total-number{font-size:2.4rem;font-weight:700}.total-number-container qrcg-icon{color:var(--success-0);border-radius:50%;background-color:#deffdb;width:1.5rem;height:1.5rem;padding:.15rem}.assesment{border:1px solid var(--gray-1);border-radius:.5rem;padding:.35rem .5rem;width:fit-content;font-size:.9rem;margin:.65rem 0 3rem}@media(max-width:900px){.assesment{margin-bottom:1rem}}.stats-container{display:flex;flex-wrap:wrap}@media(max-width:900px){.stats-container{gap:1rem;flex-direction:column}}.stats-item{flex:1;position:relative}.stats-item:not(:first-child){padding-inline-start:2rem}.stats-item:first-child{padding-inline-end:1rem}.stats-item:nth-child(1) .stats-icon-container{color:#0666a2}.stats-item:nth-child(2) .stats-icon-container{color:#3f3fe5}.stats-item:nth-child(3) .stats-icon-container{color:#8d2eaf}.stats-item:nth-child(4) .stats-icon-container{color:#d18a07}.stats-item:last-child .line{display:none}@media(max-width:900px){.stats-item{padding:0!important}}@media(min-width:1200px)and (max-width:1400px){.stats-item:nth-child(2) .line{display:none}.stats-item:nth-child(3){display:none}.stats-item:nth-child(4){display:none}}@media(min-width:1400px)and (max-width:1550px){.stats-item:nth-child(3) .line{display:none}.stats-item:nth-child(4){display:none}}.stats-item .stats-text{display:flex;align-items:center;gap:.5rem;font-weight:600;color:#000;opacity:.7;line-height:1.4;font-size:.9}.stats-item .stats-icon-container{position:relative;width:3rem;height:3rem;min-width:3rem;min-height:3rem;display:flex;align-items:center;justify-content:center;color:#3a6c00}.stats-item .stats-icon-container:before{content:"";position:absolute;inset:0;border-radius:50%;background-color:currentColor;opacity:.1}.stats-item qrcg-icon{position:relative;z-index:1;width:1.7rem;height:1.7rem}.stats-item .stats-value{font-size:2rem;margin-top:1.4rem;font-weight:700}@media(max-width:900px){.stats-item .stats-value{margin-top:.5rem;margin-inline-start:3.2rem}}.stats-item .line{height:80%;position:absolute;top:10%;width:1px;inset-inline-end:0;background-color:#eee}@media(max-width:900px){.stats-item .line{display:none}}';class StatsItemModel{text=null;number=null;icon=null;static model;static withModel(w){return this.model=w,this}static getCollection(){return[new StatsItemModel("Registered users",this.model.totalUsers,"account-multiple"),new StatsItemModel("QR Code scans",this.model.totalScans,"chart-line"),new StatsItemModel("Dynamic QR Codes",this.model.totalQRCodes,"qrcode"),new StatsItemModel("Transactions count",this.model.totalTransactions,"currency-usd")]}constructor(w,q,D){this.text=w,this.number=q,this.icon=D}getIcon(){switch(this.icon){case"account-multiple":return mdiAccountMultiple;case"chart-line":return mdiChartLine;case"qrcode":return mdiQrcode;case"currency-usd":return mdiCurrencyUsd;default:return mdiMagicStaff}}}class BaseHomePageComponent extends BaseComponent{getModel(){return parentMatches(this,HomePage.tag).model}}class TotalProfileStats extends BaseHomePageComponent{static tag="qrcg-total-profile-stats";static styleSheets=[...super.styleSheets,style$7];static get properties(){return{...super.properties,statItems:{type:Array}}}connectedCallback(){super.connectedCallback(),this.statItems=StatsItemModel.withModel(this.getModel()).getCollection()}disconnectedCallback(){super.disconnectedCallback()}renderStatItem(w){return x`
            <div class="stats-item">
                <div class="stats-text">
                    <div class="stats-icon-container">
                        <qrcg-icon mdi-icon=${w.getIcon()}></qrcg-icon>
                    </div>
                    ${w.text}
                </div>
                <div class="stats-value">${w.number}</div>

                <div class="line"></div>
            </div>
        `}renderStatItems(){return this.statItems.map(w=>this.renderStatItem(w))}render(){return x`
            <header>
                <h2>${t$3`Total profit`}</h2>
                <span class="date-range">
                    ${this.getModel()?.from} - ${this.getModel()?.to}
                </span>
            </header>

            <div class="total-number-container">
                <div class="total-number">
                    ${price(this.getModel().totalProfit)}
                </div>
                <qrcg-icon mdi-icon=${mdiArrowUp}></qrcg-icon>
                <strong>${this.getModel().percentageIncrease}</strong>
            </div>

            <div class="assesment">${this.getModel().assessment}</div>

            <div class="stats-container">${this.renderStatItems()}</div>
        `}}TotalProfileStats.register();const style$6=":host{border-radius:1.4rem;border:1px solid var(--gray-1);padding:.5rem;flex:1;display:flex;flex-direction:column}.grid{display:flex;flex-wrap:wrap;gap:.25rem;flex:1}.col-1,.col-2{flex:1;display:flex;gap:.25rem;flex-direction:column}.col-1 .type:first-child{background-color:#ffefd5}.col-1 .type:nth-child(2){background-color:#d6edff}.col-2 .type:nth-child(1){background-color:#dadcff}.col-2 .type:nth-child(2){background-color:#f5e1ff}.col-2 .type:nth-child(3){background-color:#fff7ce}.type{background-color:#faebd7;border-radius:1.5rem;padding:1rem;display:flex;flex-direction:column;justify-content:space-between;min-height:5.5rem}.type-name{opacity:.7;font-size:.8rem;font-weight:700;text-transform:uppercase;white-space:nowrap;width:6rem;overflow:hidden;text-overflow:ellipsis}.type-count{font-weight:700;opacity:.7;font-size:1.3rem;margin-top:.5rem}header{display:flex;justify-content:space-between;align-items:center}qrcg-icon{background-color:#fff;border-radius:50%;padding:.25rem;width:1.5rem;height:1.5rem}.title{font-weight:700;padding:1rem}.empty-message{padding:1rem}";class MostUsedTypeModel{slug="";name="";count=100;constructor(w,q){this.slug=w,this.name=this.getName(),this.count=q}getName(){return new QRCodeTypeManager$1().find(this.slug).name}static make(w){return w.map(q=>new MostUsedTypeModel(q.typeSlug,q.count))}static getDummyCollection(){return[new MostUsedTypeModel("url",3004),new MostUsedTypeModel("biolinks",2500),new MostUsedTypeModel("vcard-plus",1e3),new MostUsedTypeModel("restaurant-menu",650),new MostUsedTypeModel("product-catalogue",400)]}getIcon(){return new QRCodeTypeManager$1().find(this.slug)?.icon}}class MostUsedTypes extends BaseHomePageComponent{static tag="qrcg-dashboard-most-used-types";static styleSheets=[...super.styleSheets,style$6];static get properties(){return{...super.properties,types:{type:Array}}}connectedCallback(){super.connectedCallback(),this.types=MostUsedTypeModel.make(this.getModel().topQRCodes)}num(w){return typeof w>"u"?0:w}getTypeHeight(w){const q=this.types.indexOf(w);return q==0||q==1?w.count*100/(this.num(this.types[0]?.count)+this.num(this.types[1]?.count)):w.count*100/(this.num(this.types[2]?.count)+this.num(this.types[3]?.count)+this.num(this.types[4]?.count))}renderType(w){if(!w)return;const q=this.getTypeHeight(w);return x`
            <div class="type" style="height: ${q}%">
                <header>
                    <div class="type-name">${w.name}</div>
                    <qrcg-icon mdi-icon=${w.getIcon()}></qrcg-icon>
                </header>
                <div class="type-count">${w.count}</div>
            </div>
        `}isEmpty(){return!this.types||!this.types.length}renderEmptyMessage(){return x`
            <div class="empty-message">
                <!--  -->
                ${t$3`No results to show`}
            </div>
        `}renderData(){return this.isEmpty()?this.renderEmptyMessage():x`
            <div class="grid">
                <div class="col-1">
                    ${this.renderType(this.types[0])}
                    ${this.renderType(this.types[1])}
                </div>

                <div class="col-2">
                    ${this.renderType(this.types[2])}
                    ${this.renderType(this.types[3])}
                    ${this.renderType(this.types[4])}
                </div>
            </div>
        `}render(){return x`
            <div class="title">${t$3`Top QR Types`}</div>
            ${this.renderData()}
        `}}MostUsedTypes.register();const style$5=":host{display:flex;flex-direction:column;gap:1rem}:host .block{flex:1;border-radius:1rem;border:1px solid var(--gray-1);padding:1.5rem;display:flex;flex-direction:column}:host .block .title{font-size:1rem;max-width:9rem;line-height:1.3;margin-bottom:auto}:host .block .value .number{font-size:2rem;font-weight:700}:host .block .value .unit{color:var(--gray-2)}@media(max-width:900px){:host .block .value .unit{margin-top:3rem}}";class TopPerformers extends BaseHomePageComponent{static tag="qrcg-top-performers";static styleSheets=[...super.styleSheets,style$5];renderBlock(w,q,D){return x`
            <div class="block">
                <div class="title">${w}</div>
                <div class="value">
                    <div class="unit">${D}</div>
                    <div class="number">${q}</div>
                </div>
            </div>
        `}renderEmptyMessage(){return x` No records to show. `}isEmpty(){return!this.getModel().mostScannedQRCode}render(){if(!this.isEmpty())return[this.renderBlock(x`
                    ${t$3`Most Scanned`}<br />
                    ${t$3`QR Code`}
                `,this.getModel().mostScannedQRCode.scans,t$3`Scans`),this.renderBlock(x`
                    ${t$3`Most Active`}<br />
                    ${t$3`User`}
                `,this.getModel().mostActiveUser.total_qrcodes,t$3`QR Codes`)]}}TopPerformers.register();const style$4=":host{padding:1rem;border:1px solid var(--gray-1);border-radius:1rem;width:100%}h2{margin:0;font-weight:400;font-size:1.175rem}header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.actions{display:flex;font-size:.8rem;gap:1rem}.actions .action{cursor:pointer}table{width:100%}table td,table th{text-align:center}table th{font-weight:400;color:var(--gray-2)}table th:first-child{text-align:start}table td{padding:1rem 0}.loader-container{display:flex;align-items:center;justify-content:center;margin-bottom:1rem}.current-filters{margin-inline-end:auto;margin-inline-start:1rem;display:flex;align-items:center;justify-content:center;font-size:.9rem;color:var(--gray-2);gap:.5rem}.current-filters qrcg-icon{margin-inline-start:.25rem;color:#000;cursor:pointer}.current-filters qrcg-icon:hover{color:var(--danger)}.selected-folders,.selected-date-range{display:flex;align-items:center;justify-content:center;gap:.25rem}.selected-date-range .text{font-style:italic}.empty-message{padding:1rem;text-align:center;color:var(--gray-2)}",style$3=":host{display:flex;align-items:center;text-align:start;gap:1rem}:host qrcg-icon{background-color:var(--gray-0);border-radius:50%;padding:.5rem;width:2rem;height:2rem}:host .details{line-height:1.6;font-size:.9rem}:host .details .name{font-weight:700}:host .details .type{color:var(--gray-2)}";class QrcodeWidget extends BaseComponent{static tag="qrcg-qrcode-widget";static styleSheets=[...super.styleSheets,style$3];static get properties(){return{...super.properties,qrcode:{type:Object}}}constructor(){super(),this.qrcode={}}getIcon(){return new QRCodeTypeManager$1().find(this.qrcode.type).icon}render(){return x`
            <qrcg-icon mdi-icon=${this.getIcon()}></qrcg-icon>
            <!--  -->
            <div class="details">
                <div class="name">${this.qrcode.name}</div>
                <div class="type">${this.qrcode.type}</div>
            </div>
        `}}QrcodeWidget.register();const style$2="",style$1="";class DateRangeInput extends BaseComponent{static tag="qrcg-date-range-input";static styleSheets=[...super.styleSheets,style$1];static get properties(){return{...super.properties,value:{type:Object}}}constructor(){super(),this.value={from:"",to:""}}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput)}onInput(w){w.composedPath()[0]!==this&&(w.stopImmediatePropagation(),this.updateField(w.detail.name,w.detail.value))}updateField(w,q){this.value={...this.value,[w]:q},this.dispatchEvent(new CustomEvent("on-input",{detail:{name:w,value:this.value},bubbles:!0,composed:!0}))}syncValue(){this.$$("qrcg-input").forEach(q=>{const D=q.getAttribute("name"),Q=this.value[D];Q?q.value=Q:q.value=""})}updated(w){w.has("value")&&this.syncValue()}render(){return x`
            <qrcg-input type="date" name="from">${t$3`From`}</qrcg-input>
            <qrcg-input type="date" name="to">${t$3`To`}</qrcg-input>
        `}}DateRangeInput.register();class DateRangeModal extends QrcgModal{static tag="qrcg-date-range-modal";static styleSheets=[...super.styleSheets,style$2];static get properties(){return{...super.properties,dateRange:{type:Object}}}constructor(){super(),this.dateRange={}}connectedCallback(){super.connectedCallback(),this.addEventListener("on-input",this.onInput)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("on-input",this.onInput)}onAfterOpen(){this.getInput().value=this.dateRange}resolvedData(){return this.dateRange}getInput(){return this.$("qrcg-date-range-input")}onInput(w){w.stopImmediatePropagation(),this.dateRange=w.detail.value}renderTitle(){return t$3`Select Date`}renderBody(){return x` <qrcg-date-range-input></qrcg-date-range-input> `}}DateRangeModal.register();class MultiQrcodesStats extends BaseComponent{static tag="qrcg-multi-qrcodes-stats";static styleSheets=[...super.styleSheets,style$4];static get properties(){return{...super.properties,data:{type:Array},loading:{type:Boolean},dateRange:{type:Object}}}connectedCallback(){super.connectedCallback(),this.data=[],this.loading=!0,this.dateRange={},this.folderIds=[],this.fetchData()}async fetchData(){this.loading=!0;const{json:w}=await get("/dashboard/multi-qrcodes-stats",{...this.dateRange,folder_ids:this.folderIds});this.data=w,console.log(w),this.loading=!1}getExportDate(){const w=new Date;return`${w.getDate()}-${w.getMonth()+1}-${w.getFullYear()}`}buildCsvArray(){const w=this.$$("th").map(D=>D.innerText.trim()),q=this.$$("tbody tr").map(D=>[...D.querySelectorAll("td")].map((O,U)=>U==0?this.data[U].qrcode.name:O.innerText.trim()));return[w].concat(q)}onExportCSVClick(){const w=arrayToCsv(this.buildCsvArray());downloadBlob(w,`report-${this.getExportDate()}.csv`,"text/csv;charset=utf-8;")}async onSelectFolderClick(){this.folderIds=await QrcgSelectFolderModal.open({value:this.folderIds,multi:!0,userId:loadUser().id,addFolderUi:!1,deleteFolderUi:!1}),this.fetchData()}async onSelectRangeClick(){this.dateRange=await DateRangeModal.open({dateRange:this.dateRange}),this.fetchData()}clearDateRange(){this.dateRange={},this.fetchData()}clearFolders(){this.folderIds=[],this.fetchData()}renderRows(){return this.data.map(w=>this.renderRow(w))}renderMothlyValues(w){return w.months.map(q=>x`
                <!--  -->
                <td>${q.value}</td>
            `)}renderRow(w){return x`
            <tr>
                <td>
                    <qrcg-qrcode-widget
                        .qrcode=${w.qrcode}
                    ></qrcg-qrcode-widget>
                </td>
                <td>${w.total_scans}</td>
                <td>${w.android}</td>
                <td>${w.iOS}</td>
                <td>${w.mac}</td>
                <td>${w.windows}</td>
                <td>${w.linux}</td>
                ${this.renderMothlyValues(w)}
            </tr>
        `}renderMonthColumns(){return this.data[0]?.months?.map(w=>x` <th>${w.name}</th> `)}renderSelectedFolders(){if(isEmpty(this.folderIds))return;const w=this.folderIds.map(q=>FolderStore.find(q)?.name).filter(q=>q).join(", ");return x`
            <div class="selected-folders">
                <span class="text"> ${w} </span>
                <qrcg-icon
                    mdi-icon=${mdiClose}
                    @click=${this.clearFolders}
                ></qrcg-icon>
            </div>
        `}renderSelectedDateRange(){if(isEmpty(this.dateRange))return;let w=Object.keys(this.dateRange).filter(q=>this.dateRange[q]).map(q=>x`
                    <span class="text"> ${t$3(q)} </span>
                    <span class="date">${this.dateRange[q]}</span>
                `);return x`
            <div class="selected-date-range">
                ${w}

                <qrcg-icon
                    mdi-icon=${mdiClose}
                    @click=${this.clearDateRange}
                ></qrcg-icon>
            </div>
        `}renderHeader(){return x`
            <header>
                <h2>${t$3`QR Code Stats`}</h2>

                <div class="current-filters">
                    ${this.renderSelectedDateRange()}
                    ${this.renderSelectedFolders()}
                </div>

                <div class="actions">
                    <!--  -->
                    <qrcg-button
                        class="elegant"
                        @click=${this.onSelectRangeClick}
                    >
                        <qrcg-icon mdi-icon=${mdiFilter}></qrcg-icon>
                        ${t$3`Dates`}
                    </qrcg-button>

                    <qrcg-button
                        class="elegant"
                        @click=${this.onSelectFolderClick}
                    >
                        <qrcg-icon mdi-icon=${mdiFolder}></qrcg-icon>
                        ${t$3`Folder`}
                    </qrcg-button>

                    <qrcg-button
                        class="elegant"
                        @click=${this.onExportCSVClick}
                    >
                        <qrcg-icon mdi-icon=${mdiDownload}></qrcg-icon>
                        ${t$3`CSV`}
                    </qrcg-button>
                </div>
            </header>
        `}renderEmptyMessage(){return x`
            <div class="empty-message">
                ${t$3`No results to show here. Change your search conditions or try again later.`}
            </div>
        `}renderBody(){if(!this.loading)return isEmpty(this.data)?this.renderEmptyMessage():x`
            <table class="table">
                <thead>
                    <tr>
                        <th>${t$3`QR Code`}</th>
                        <th>${t$3`Total Scans`}</th>
                        <th>${t$3`Android`}</th>
                        <th>${t$3`iOS`}</th>
                        <th>${t$3`Mac`}</th>
                        <th>${t$3`Windows`}</th>
                        <th>${t$3`Linux`}</th>
                        ${this.renderMonthColumns()}
                    </tr>
                </thead>
                <tbody>
                    ${this.renderRows()}
                </tbody>
            </table>
        `}renderLoader(){if(this.loading)return x`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}render(){return[this.renderHeader(),this.renderLoader(),this.renderBody()]}}MultiQrcodesStats.register();class HomePage extends QrcgDashboardPage{static tag="qrcg-dashboard-home-page";static styleSheets=[...super.styleSheets,style$8];static get properties(){return{model:{type:Object},loading:{type:Boolean}}}connectedCallback(){super.connectedCallback(),this.loading=!0,this.fetchModel()}disconnectedCallback(){super.disconnectedCallback()}async fetchModel(){this.loading=!0;const{json:w}=await get("/dashboard/super-admin");this.model=w,this.loading=!1}renderLoader(){if(this.loading)return x`
            <div class="loader-container">
                <qrcg-loader></qrcg-loader>
            </div>
        `}renderPageContent(){if(!this.loading&&this.model)return x`
            <div class="row">
                <!--  -->
                <qrcg-total-profile-stats></qrcg-total-profile-stats>
                <qrcg-dashboard-most-used-types></qrcg-dashboard-most-used-types>
                <qrcg-top-performers></qrcg-top-performers>
            </div>

            ${this.renderQRCodeStats()}
        `}renderQRCodeStats(){return x`
            <div class="row">
                <!--  -->
                <qrcg-multi-qrcodes-stats></qrcg-multi-qrcodes-stats>
            </div>
        `}renderContent(){return[this.renderLoader(),this.renderPageContent()]}}HomePage.register();class HomePageRouter extends BaseRouter{static tag="qrcg-dashboard-home-page-router";render(){return x`
            <qrcg-protected-route route="/dashboard/home">
                <template>
                    <qrcg-dashboard-home-page></qrcg-dashboard-home-page>
                </template>
            </qrcg-protected-route>
        `}}HomePageRouter.register();const style="[name]{margin-bottom:1rem}[name]::part(textarea){margin-bottom:0}";class WhatsAppBillingDetailsModal extends QrcgModal{static tag="qrcg-whatsapp-billing-details-modal";static styleSheets=[...super.styleSheets,style];resolvedData(){return["*Delivery Details*",this.$$("[name]").filter(q=>isNotEmpty(q.value)).map(q=>`*${q.name}*: ${q.value}`).join(`
`)].join(`
`)}resetErrors(){this.$$("[name]").forEach(w=>w.errors=[])}validateFields(){let w=!1;if(this.$$("[name]").forEach(function(q){if(q.name!=="Notes"&&isEmpty(q.value?.trim())){const D=t$3`Please enter`+` ${q.name}`;q.errors=[D],w=!0}}),w)throw window.showToast(t$3`Please enter required fields.`),new Error}async affiramtivePromise(){this.resetErrors(),await sleep(1e3),this.validateFields()}getAffirmativeText(){return t$3`Confirm Order`}renderTitle(){return t$3`Delivery Information`}renderBody(){return x`
            <qrcg-input name="Name" placeholder=${t$3`Enter your name`}>
                ${t$3`Name`}
            </qrcg-input>

            <qrcg-input
                name="Contact Number"
                placeholder=${t$3`Enter your contact number`}
                type="tel"
            >
                ${t$3`Contact Number`}
            </qrcg-input>

            <qrcg-textarea
                name="Delivery Address"
                placeholder=${t$3`Enter your delivery address`}
            >
                ${t$3`Delivery Address`}
            </qrcg-textarea>
            <!--  -->
            <qrcg-textarea name="Notes" placeholder=${t$3`Enter your notes`}>
                ${t$3`Notes (optional)`}
            </qrcg-textarea>
        `}}WhatsAppBillingDetailsModal.register();window.WhatsAppBillingDetailsModal=WhatsAppBillingDetailsModal;
})()